'use client';

import React, { useState, useEffect } from 'react';
import AdminLayout from '@/components/AdminLayout';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { LearningResourcesService, LearningResourcesStats } from '@/lib/learning-resources-service';
import { 
  allWebsiteFeatures, 
  completedFeatures, 
  inProgressFeatures, 
  pendingFeatures,
  websiteFeatures,
  adminFeatures,
  getFeatureStats,
  WebsiteFeature 
} from '@/lib/website-features';
// Remove tabs import
import {
  CheckCircle,
  Clock,
  AlertCircle,
  TrendingUp,
  Code,
  Users,
  FileText,
  Zap,
  Smartphone,
  Brain,
  BarChart3,
  Calendar,
  Target,
  ExternalLink,
  BookOpen,
} from 'lucide-react';

export default function ReportsPage() {
  const [showCompletedDetails, setShowCompletedDetails] = useState(false);
  const [showInProgressDetails, setShowInProgressDetails] = useState(false);
  const [showPendingDetails, setShowPendingDetails] = useState(false);
  const [learningResources, setLearningResources] = useState<LearningResourcesStats | null>(null);

  // Fetch learning resources data
  useEffect(() => {
    const fetchLearningResources = async () => {
      try {
        const resources = await LearningResourcesService.getResourcesStats();
        setLearningResources(resources);
        
      } catch (error) {
        console.error('Failed to fetch learning resources:', error);
      }
    };

    fetchLearningResources();
  }, []);

  // Get feature statistics
  const featureStats = getFeatureStats();

  const getStatusBadge = (status: string) => {
      description: 'Implemented new question type with AI-powered answer validation using Google Gemini',
      status: 'completed',
      priority: 'High',
      completionDate: 'Dec 2024',
      impact: 'Enables flexible assessment beyond multiple-choice questions',
      files: ['AI Validation Service', 'OpenEndedQuestion Component', 'API Endpoint'],
      icon: Brain,
    },
    {
      id: 'admin-interface',
      title: 'Enhanced Admin Interface',
      description: 'Improved admin dashboard with clickable buttons, debug toggles, and responsive design',
      status: 'completed',
      priority: 'High',
      completionDate: 'Dec 2024',
      impact: 'Significantly improved admin workflow and debugging capabilities',
      files: ['Admin Dashboard', 'Question Management', 'Debug Panel'],
      icon: Users,
    },
    {
      id: 'audio-management',
      title: 'Audio Management System',
      description: 'Smart audio button display based on admin controls and question types',
      status: 'completed',
      priority: 'Medium',
      completionDate: 'Dec 2024',
      impact: 'Better control over audio content display and improved user experience',
      files: ['Audio Utils', 'Conditional Rendering', 'Admin Controls'],
      icon: Zap,
    },
    {
      id: 'learning-path-ids',
      title: 'Learning Path ID Management',
      description: 'Fixed critical learning path ID mismatch issues between Firebase and static resources',
      status: 'completed',
      priority: 'High',
      completionDate: 'Dec 2024',
      impact: 'Resolved core issue preventing questions from appearing in learning paths',
      files: ['Migration Tools', 'Firebase Schema', 'ID Mapping'],
      icon: Target,
    },
    {
      id: 'question-management',
      title: 'Question Management System',
      description: 'Enhanced question creation, editing, and bulk import capabilities',
      status: 'completed',
      priority: 'High',
      completionDate: 'Dec 2024',
      impact: 'Streamlined question creation and management workflow',
      files: ['Question Schema', 'Markdown Import', 'Edit Modal'],
      icon: FileText,
    },
    {
      id: 'github-issues-resolved',
      title: 'GitHub Issues Resolution',
      description: 'Resolved multiple GitHub issues including ChatGPT API, Firebase Auth, and UI enhancements',
      status: 'completed',
      priority: 'High',
      completionDate: 'Dec 2024',
      impact: 'Fixed critical functionality and improved user experience',
      files: ['Issue #24', 'Issue #23', 'Issue #34', 'Issue #33', 'Issue #32', 'Issue #30'],
      icon: CheckCircle,
    },
    {
      id: 'responsive-design',
      title: 'Responsive Design Implementation',
      description: 'Made admin buttons and components responsive for mobile devices',
      status: 'completed',
      priority: 'Medium',
      completionDate: 'Dec 2024',
      impact: 'Improved mobile user experience and accessibility',
      files: ['Admin Dashboard', 'Question Management', 'Button Components'],
      icon: Smartphone,
    },
    {
      id: 'debug-system',
      title: 'Debug Information System',
      description: 'Implemented toggleable debug panels with comprehensive system information',
      status: 'completed',
      priority: 'Medium',
      completionDate: 'Dec 2024',
      impact: 'Enhanced debugging capabilities and system monitoring',
      files: ['Debug Panel', 'Floating UI', 'System Stats'],
      icon: AlertCircle,
    },
  ];

  const inProgressFeatures = [
    {
      id: 'markdown-testing',
      title: 'Markdown Question Upload Testing',
      description: 'Step-by-step testing of markdown question upload process',
      status: 'in-progress',
      priority: 'High',
      progress: 75,
      estimatedCompletion: '1-2 days',
      nextSteps: ['Execute upload test', 'Verify website display', 'Test AI validation'],
      icon: Code,
    },
  ];

  const pendingFeatures = [
    {
      id: 'website-verification',
      title: 'Website Display Verification',
      description: 'Verify that uploaded questions correctly appear on the website',
      status: 'pending',
      priority: 'High',
      dependencies: ['Markdown upload testing completion'],
      estimatedEffort: '2-4 hours',
      icon: ExternalLink,
    },
    {
      id: 'missing-tutorials-page',
      title: 'Create Tutorials Page (/tutorials)',
      description: 'Missing core learning feature - step-by-step tutorials for HTML, CSS, JavaScript, React',
      status: 'pending',
      priority: 'Critical',
      dependencies: ['Core platform stabilization'],
      estimatedEffort: '2-3 weeks',
      icon: BookOpen,
    },
    {
      id: 'missing-video-courses-page',
      title: 'Create Video Courses Page (/video-courses)',
      description: 'Missing promised navigation feature - video course catalog with categories and progress tracking',
      status: 'pending',
      priority: 'Critical',
      dependencies: ['Tutorials page completion'],
      estimatedEffort: '3-4 weeks',
      icon: FileText,
    },
    {
      id: 'missing-documentation-page',
      title: 'Create Documentation Page (/documentation)',
      description: 'Missing reference material - organized documentation by technology with search functionality',
      status: 'pending',
      priority: 'High',
      dependencies: ['Core content completion'],
      estimatedEffort: '1-2 weeks',
      icon: FileText,
    },
    {
      id: 'missing-coding-exercises-page',
      title: 'Create Coding Exercises Page (/practice/coding-exercises)',
      description: 'Missing core practice feature - coding challenges with instant feedback and code editor',
      status: 'pending',
      priority: 'Critical',
      dependencies: ['Question system completion'],
      estimatedEffort: '3-4 weeks',
      icon: Code,
    },
    {
      id: 'missing-projects-page',
      title: 'Create Projects Page (/practice/projects)',
      description: 'Missing real-world practice - project gallery with templates and submission system',
      status: 'pending',
      priority: 'Critical',
      dependencies: ['Coding exercises completion'],
      estimatedEffort: '2-3 weeks',
      icon: Target,
    },
    {
      id: 'missing-quiz-page',
      title: 'Create Quiz Page (/practice/quiz)',
      description: 'Missing knowledge testing - quiz interface with multiple question types and scoring',
      status: 'pending',
      priority: 'High',
      dependencies: ['Question system completion'],
      estimatedEffort: '1-2 weeks',
      icon: BarChart3,
    },
    {
      id: 'fix-advanced-practice-pages',
      title: 'Fix Advanced Practice Pages',
      description: 'Fix disabled content in performance optimization and other advanced practice pages',
      status: 'pending',
      priority: 'High',
      dependencies: ['Core practice pages completion'],
      estimatedEffort: '1 week',
      icon: AlertCircle,
    },
    {
      id: 'performance-optimization',
      title: 'Performance Optimization',
      description: 'Optimize application performance and loading times',
      status: 'pending',
      priority: 'Medium',
      dependencies: ['Core functionality completion'],
      estimatedEffort: '1-2 weeks',
      icon: TrendingUp,
    },
    {
      id: 'advanced-ai-features',
      title: 'Advanced AI Features',
      description: 'Enhance AI validation with additional features and providers',
      status: 'pending',
      priority: 'Low',
      dependencies: ['Basic AI validation completion'],
      estimatedEffort: '2-3 weeks',
      icon: Brain,
    },
    {
      id: 'mobile-app',
      title: 'Mobile App Integration',
      description: 'Develop mobile application for the learning platform',
      status: 'pending',
      priority: 'Low',
      dependencies: ['Web platform stabilization'],
      estimatedEffort: '4-6 weeks',
      icon: Smartphone,
    },
    {
      id: 'comprehensive-testing',
      title: 'Comprehensive Testing Suite',
      description: 'Add unit tests, integration tests, and E2E tests',
      status: 'pending',
      priority: 'Medium',
      dependencies: ['Core features completion'],
      estimatedEffort: '2-3 weeks',
      icon: BarChart3,
    },
    {
      id: 'documentation',
      title: 'Documentation Updates',
      description: 'Create user guides, API docs, and deployment instructions',
      status: 'pending',
      priority: 'Medium',
      dependencies: ['Feature stabilization'],
      estimatedEffort: '1 week',
      icon: FileText,
    },
    // GitHub Issues - Add your open issues here
    {
      id: 'github-issue-1',
      title: '[GitHub Issue] Bug: Learning path questions not displaying',
      description: 'Questions uploaded via bulk import are not appearing in learning path questions page',
      status: 'pending',
      priority: 'Critical',
      dependencies: ['Question system debugging'],
      estimatedEffort: '1-2 days',
      icon: AlertCircle,
      githubUrl: 'https://github.com/your-username/Great-frontendHub/issues/1',
    },
    {
      id: 'github-issue-2',
      title: '[GitHub Issue] Feature: Add dark mode toggle',
      description: 'Implement dark mode toggle in the main navigation for better user experience',
      status: 'pending',
      priority: 'High',
      dependencies: ['Theme system implementation'],
      estimatedEffort: '3-5 days',
      icon: Zap,
      githubUrl: 'https://github.com/your-username/Great-frontendHub/issues/2',
    },
    {
      id: 'github-issue-3',
      title: '[GitHub Issue] Enhancement: Improve mobile responsiveness',
      description: 'Several pages need better mobile responsiveness and touch interactions',
      status: 'pending',
      priority: 'High',
      dependencies: ['UI/UX audit completion'],
      estimatedEffort: '1-2 weeks',
      icon: Smartphone,
      githubUrl: 'https://github.com/your-username/Great-frontendHub/issues/3',
    },
    {
      id: 'github-issue-4',
      title: '[GitHub Issue] Bug: Audio files not playing on mobile',
      description: 'Audio buttons work on desktop but fail to play on mobile devices',
      status: 'pending',
      priority: 'Medium',
      dependencies: ['Mobile testing completion'],
      estimatedEffort: '2-3 days',
      icon: AlertCircle,
      githubUrl: 'https://github.com/your-username/Great-frontendHub/issues/4',
    },
    {
      id: 'github-issue-5',
      title: '[GitHub Issue] Feature: Add progress tracking',
      description: 'Implement user progress tracking across learning paths and questions',
      status: 'pending',
      priority: 'Medium',
      dependencies: ['User authentication system'],
      estimatedEffort: '1-2 weeks',
      icon: BarChart3,
      githubUrl: 'https://github.com/your-username/Great-frontendHub/issues/5',
    },
  ];

  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'completed':
        return <Badge className="bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">Completed</Badge>;
      case 'in-progress':
        return <Badge className="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">In Progress</Badge>;
      case 'pending':
        return <Badge className="bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200">Pending</Badge>;
      default:
        return <Badge variant="secondary">{status}</Badge>;
    }
  };

  const getPriorityBadge = (priority: string) => {
    switch (priority) {
      case 'Critical':
        return <Badge className="bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border-red-300 dark:border-red-700">{priority}</Badge>;
      case 'High':
        return <Badge variant="destructive">{priority}</Badge>;
      case 'Medium':
        return <Badge className="bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200">{priority}</Badge>;
      case 'Low':
        return <Badge variant="secondary">{priority}</Badge>;
      default:
        return <Badge variant="outline">{priority}</Badge>;
    }
  };

  return (
    <AdminLayout>
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-4 sm:space-y-6">
        {/* Header */}
        <div className="flex flex-col gap-3 sm:gap-4">
          <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4">
            <div className="min-w-0">
              <h1 className="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white truncate">Feature Reports</h1>
              <p className="text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2">
                Comprehensive overview of project features, progress, and status
              </p>
            </div>
            <div className="flex items-center space-x-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400 flex-shrink-0">
              <Calendar className="w-3 h-3 sm:w-4 sm:h-4" />
              <span className="hidden sm:inline">Last Updated: {new Date().toLocaleDateString()}</span>
              <span className="sm:hidden">{new Date().toLocaleDateString()}</span>
            </div>
          </div>
        </div>

        {/* Summary Cards */}
        <div className="grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4">
          <Card>
            <CardContent className="p-3 sm:p-4 lg:p-6">
              <div className="flex items-center">
                <CheckCircle className="h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-green-500 flex-shrink-0" />
                <div className="ml-2 sm:ml-3 lg:ml-4 min-w-0">
                  <p className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate">Completed</p>
                  <p className="text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white">
                    {completedFeatures.length}
                    {learningResources && (
                      <span className="text-xs sm:text-sm font-normal text-green-600 ml-1">
                        (+{learningResources.closed} GitHub)
                      </span>
                    )}
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-3 sm:p-4 lg:p-6">
              <div className="flex items-center">
                <Clock className="h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-blue-500 flex-shrink-0" />
                <div className="ml-2 sm:ml-3 lg:ml-4 min-w-0">
                  <p className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate">In Progress</p>
                  <p className="text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white">
                    {inProgressFeatures.length}
                    {learningResources && (
                      <span className="text-xs sm:text-sm font-normal text-blue-600 ml-1">
                        (+{learningResources.open} GitHub)
                      </span>
                    )}
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-3 sm:p-4 lg:p-6">
              <div className="flex items-center">
                <AlertCircle className="h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-yellow-500 flex-shrink-0" />
                <div className="ml-2 sm:ml-3 lg:ml-4 min-w-0">
                  <p className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate">Pending</p>
                  <p className="text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white">
                    {pendingFeatures.length}
                    {learningResources && (
                      <span className="text-xs sm:text-sm font-normal text-yellow-600 ml-1">
                        (+{learningResources.open} GitHub)
                      </span>
                    )}
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-3 sm:p-4 lg:p-6">
              <div className="flex items-center">
                <TrendingUp className="h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-purple-500 flex-shrink-0" />
                <div className="ml-2 sm:ml-3 lg:ml-4 min-w-0">
                  <p className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate">Total</p>
                  <p className="text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white">
                    {completedFeatures.length + inProgressFeatures.length + pendingFeatures.length}
                    {learningResources && (
                      <span className="text-xs sm:text-sm font-normal text-purple-600 ml-1">
                        (+{learningResources.total} GitHub)
                      </span>
                    )}
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Charts Section */}
        <div className="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6">
          {/* Completed Features Chart */}
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="flex items-center text-sm sm:text-base">
                <CheckCircle className="w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 flex-shrink-0" />
                <span className="truncate">Completed Features</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              {/* Simple Bar Chart */}
              <div className="space-y-3 sm:space-y-4">
                <div className="flex items-center justify-between">
                  <span className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400">Features</span>
                  <span className="text-xs sm:text-sm font-bold text-green-600">
                    {completedFeatures.length}
                    {learningResources && (
                      <span className="ml-1 text-gray-500">(+{learningResources.closed} GitHub)</span>
                    )}
                  </span>
                </div>
                <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 sm:h-4">
                  <div 
                    className="bg-green-500 h-3 sm:h-4 rounded-full transition-all duration-500"
                    style={{ width: `${(completedFeatures.length / (completedFeatures.length + inProgressFeatures.length + pendingFeatures.length)) * 100}%` }}
                  ></div>
                </div>
                <div className="text-center">
                  <div className="text-lg sm:text-2xl font-bold text-green-600">
                    {Math.round((completedFeatures.length / (completedFeatures.length + inProgressFeatures.length + pendingFeatures.length)) * 100)}%
                  </div>
                  <div className="text-xs sm:text-sm text-gray-600 dark:text-gray-400">Completion Rate</div>
                </div>
              </div>
              <Button 
                onClick={() => setShowCompletedDetails(!showCompletedDetails)}
                className="w-full mt-3 sm:mt-4 text-xs sm:text-sm"
                variant="outline"
                size="sm"
              >
                <span className="hidden sm:inline">
                  {showCompletedDetails ? 'Hide Details' : 'Show Details'} ({completedFeatures.length})
                </span>
                <span className="sm:hidden">
                  {showCompletedDetails ? 'Hide' : 'Show'} ({completedFeatures.length})
                </span>
              </Button>
            </CardContent>
          </Card>

          {/* In Progress Chart */}
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="flex items-center text-sm sm:text-base">
                <Clock className="w-4 h-4 sm:w-5 sm:h-5 text-blue-500 mr-2 flex-shrink-0" />
                <span className="truncate">In Progress</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3 sm:space-y-4">
                <div className="flex items-center justify-between">
                  <span className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400">Active Tasks</span>
                  <span className="text-xs sm:text-sm font-bold text-blue-600">
                    {inProgressFeatures.length}
                    {learningResources && (
                      <span className="ml-1 text-gray-500">(+{learningResources.open} GitHub)</span>
                    )}
                  </span>
                </div>
                {inProgressFeatures.map((feature) => (
                  <div key={feature.id} className="space-y-2">
                    <div className="flex justify-between text-xs">
                      <span className="text-gray-600 dark:text-gray-400 truncate pr-2">{feature.title}</span>
                      <span className="text-blue-600 flex-shrink-0">{feature.progress}%</span>
                    </div>
                    <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                      <div
                        className="bg-blue-500 h-2 rounded-full transition-all duration-300"
                        style={{ width: `${feature.progress}%` }}
                      ></div>
                    </div>
                  </div>
                ))}
              </div>
              <Button 
                onClick={() => setShowInProgressDetails(!showInProgressDetails)}
                className="w-full mt-3 sm:mt-4 text-xs sm:text-sm"
                variant="outline"
                size="sm"
              >
                <span className="hidden sm:inline">
                  {showInProgressDetails ? 'Hide Details' : 'Show Details'} ({inProgressFeatures.length})
                </span>
                <span className="sm:hidden">
                  {showInProgressDetails ? 'Hide' : 'Show'} ({inProgressFeatures.length})
                </span>
              </Button>
            </CardContent>
          </Card>

          {/* Pending Features Chart */}
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="flex items-center text-sm sm:text-base">
                <AlertCircle className="w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 mr-2 flex-shrink-0" />
                <span className="truncate">Pending Features</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3 sm:space-y-4">
                <div className="flex items-center justify-between">
                  <span className="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400">Waiting Tasks</span>
                  <span className="text-xs sm:text-sm font-bold text-yellow-600">
                    {pendingFeatures.length}
                    {learningResources && (
                      <span className="ml-1 text-gray-500">(+{learningResources.open} GitHub)</span>
                    )}
                  </span>
                </div>
                {/* Priority Breakdown */}
                <div className="space-y-2">
                  <div className="flex justify-between text-xs">
                    <span className="text-gray-600 dark:text-gray-400">Critical</span>
                    <span className="text-red-600">{pendingFeatures.filter(f => f.priority === 'Critical').length}</span>
                  </div>
                  <div className="flex justify-between text-xs">
                    <span className="text-gray-600 dark:text-gray-400">High</span>
                    <span className="text-orange-600">{pendingFeatures.filter(f => f.priority === 'High').length}</span>
                  </div>
                  <div className="flex justify-between text-xs">
                    <span className="text-gray-600 dark:text-gray-400">Medium</span>
                    <span className="text-yellow-600">{pendingFeatures.filter(f => f.priority === 'Medium').length}</span>
                  </div>
                  <div className="flex justify-between text-xs">
                    <span className="text-gray-600 dark:text-gray-400">Low</span>
                    <span className="text-gray-600">{pendingFeatures.filter(f => f.priority === 'Low').length}</span>
                  </div>
                </div>
              </div>
              <Button 
                onClick={() => setShowPendingDetails(!showPendingDetails)}
                className="w-full mt-3 sm:mt-4 text-xs sm:text-sm"
                variant="outline"
                size="sm"
              >
                <span className="hidden sm:inline">
                  {showPendingDetails ? 'Hide Details' : 'Show Details'} ({pendingFeatures.length})
                </span>
                <span className="sm:hidden">
                  {showPendingDetails ? 'Hide' : 'Show'} ({pendingFeatures.length})
                </span>
              </Button>
            </CardContent>
          </Card>
        </div>

        {/* Details Sections */}
        {showCompletedDetails && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center text-sm sm:text-base">
                <CheckCircle className="w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 flex-shrink-0" />
                <span className="truncate">Completed Features Details</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3 sm:space-y-4">
                {completedFeatures.map((feature) => {
                  const IconComponent = feature.icon;
                  return (
                    <div key={feature.id} className="border border-green-200 dark:border-green-800 rounded-lg p-3 sm:p-4">
                      <div className="flex items-start space-x-2 sm:space-x-3 lg:space-x-4">
                        <IconComponent className="w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-green-600 dark:text-green-400 mt-0.5 sm:mt-1 flex-shrink-0" />
                        <div className="flex-1 min-w-0">
                          <div className="flex flex-col gap-2 mb-2">
                            <h4 className="font-semibold text-sm sm:text-base text-gray-900 dark:text-white break-words">{feature.title}</h4>
                            <div className="flex flex-wrap items-center gap-1 sm:gap-2">
                              {getStatusBadge(feature.status)}
                              {getPriorityBadge(feature.priority)}
                            </div>
                          </div>
                          <p className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-3 break-words">{feature.description}</p>
                          <div className="space-y-1 sm:space-y-2">
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Impact: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words">{feature.impact}</span>
                            </div>
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Files Modified: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words">{feature.files.join(', ')}</span>
                            </div>
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Completed: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400">{feature.completionDate}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </CardContent>
          </Card>
        )}

        {showInProgressDetails && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center text-sm sm:text-base">
                <Clock className="w-4 h-4 sm:w-5 sm:h-5 text-blue-500 mr-2 flex-shrink-0" />
                <span className="truncate">In Progress Details</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3 sm:space-y-4">
                {inProgressFeatures.map((feature) => {
                  const IconComponent = feature.icon;
                  return (
                    <div key={feature.id} className="border border-blue-200 dark:border-blue-800 rounded-lg p-3 sm:p-4">
                      <div className="flex items-start space-x-2 sm:space-x-3 lg:space-x-4">
                        <IconComponent className="w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-blue-600 dark:text-blue-400 mt-0.5 sm:mt-1 flex-shrink-0" />
                        <div className="flex-1 min-w-0">
                          <div className="flex flex-col gap-2 mb-2">
                            <h4 className="font-semibold text-sm sm:text-base text-gray-900 dark:text-white break-words">{feature.title}</h4>
                            <div className="flex flex-wrap items-center gap-1 sm:gap-2">
                              {getStatusBadge(feature.status)}
                              {getPriorityBadge(feature.priority)}
                            </div>
                          </div>
                          <p className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-3 break-words">{feature.description}</p>
                          <div className="space-y-1 sm:space-y-2">
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Progress: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400">{feature.progress}%</span>
                            </div>
                            <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                              <div
                                className="bg-blue-500 h-2 rounded-full transition-all duration-300"
                                style={{ width: `${feature.progress}%` }}
                              ></div>
                            </div>
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Next Steps: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words">{feature.nextSteps.join(', ')}</span>
                            </div>
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">ETA: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400">{feature.estimatedCompletion}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </CardContent>
          </Card>
        )}

        {showPendingDetails && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center text-sm sm:text-base">
                <AlertCircle className="w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 mr-2 flex-shrink-0" />
                <span className="truncate">Pending Features Details</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3 sm:space-y-4">
                {pendingFeatures.map((feature) => {
                  const IconComponent = feature.icon;
                  return (
                    <div key={feature.id} className="border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 sm:p-4">
                      <div className="flex items-start space-x-2 sm:space-x-3 lg:space-x-4">
                        <IconComponent className="w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-yellow-600 dark:text-yellow-400 mt-0.5 sm:mt-1 flex-shrink-0" />
                        <div className="flex-1 min-w-0">
                          <div className="flex flex-col gap-2 mb-2">
                            <h4 className="font-semibold text-sm sm:text-base text-gray-900 dark:text-white break-words">{feature.title}</h4>
                            <div className="flex flex-wrap items-center gap-1 sm:gap-2">
                              {getStatusBadge(feature.status)}
                              {getPriorityBadge(feature.priority)}
                            </div>
                          </div>
                          <p className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-3 break-words">{feature.description}</p>
                          <div className="space-y-1 sm:space-y-2">
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Dependencies: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words">{feature.dependencies}</span>
                            </div>
                            <div>
                              <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">Estimated Effort: </span>
                              <span className="text-xs sm:text-sm text-gray-600 dark:text-gray-400">{feature.estimatedEffort}</span>
                            </div>
                            {'githubUrl' in feature && feature.githubUrl && (
                              <div>
                                <span className="text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300">GitHub Issue: </span>
                                <a 
                                  href={feature.githubUrl as string} 
                                  target="_blank" 
                                  rel="noopener noreferrer"
                                  className="text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:underline inline-flex items-center gap-1 break-words"
                                >
                                  View Issue <ExternalLink className="w-3 h-3 flex-shrink-0" />
                                </a>
                              </div>
                            )}
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </CardContent>
          </Card>
        )}
        </div>
      </div>
    </AdminLayout>
  );
}

---
description: Remove build, restart server after push to GitHub
globs: ['**/*']
alwaysApply: true
---

postPush:

- echo "ğŸ§¹ Removing old build..."
- rm -rf .next build
- echo "ğŸ’€ Killing old server..."
- pkill -f "npm run dev" || true
- pkill -f "npm run start" || true
- pkill -f "next-server" || true
- echo "ğŸš€ Restarting server..."
- nohup npm run dev > dev.log 2>&1 &

postCommit:

- echo "ğŸ“ Post-commit hook triggered..."
- current_branch=$(git branch --show-current)
- if [[ "$current_branch" == "release/v1.0.0-main-website" ]]; then
-   echo "ğŸ”„ On main development branch, cleaning and restarting server..."
-   pkill -f "npm run dev" || true
-   rm -rf .next build
-   sleep 2
-   nohup npm run dev > dev.log 2>&1 &
-   echo "âœ… Development server restarted!"
- else
-   echo "â„¹ï¸  On branch '$current_branch', skipping server restart"
- fi

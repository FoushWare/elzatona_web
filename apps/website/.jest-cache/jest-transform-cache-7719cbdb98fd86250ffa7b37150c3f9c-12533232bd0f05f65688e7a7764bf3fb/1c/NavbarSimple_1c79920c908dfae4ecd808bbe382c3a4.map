{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useLayoutEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\nimport {\n  Sun,\n  Moon,\n  Menu,\n  X,\n  Map,\n  Compass,\n  User,\n  LogOut,\n  Settings,\n  Loader2,\n} from 'lucide-react';\nimport AlzatonaLogo from './AlzatonaLogo';\nimport { useUserType } from '@elzatona/shared-contexts';\nimport { useMobileMenu } from '@elzatona/shared-contexts';\nimport { useTheme } from '@elzatona/shared-contexts';\nimport { useAuth } from '@elzatona/shared-contexts';\nimport {\n  supabaseClient as supabase,\n  isSupabaseAvailable,\n} from '@/lib/supabase-client';\nimport { clearSession } from '@/lib/auth-session';\nimport { useLearningType } from '@/context/LearningTypeContext';\n\nexport const NavbarSimple: React.FC = () => {\n  const [isScrolled, setIsScrolled] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n  const [isUserDropdownOpen, setIsUserDropdownOpen] = useState(false);\n  const [isHydrated, setIsHydrated] = useState(false);\n  const [hasSnapshotApplied, setHasSnapshotApplied] = useState(false);\n  const [supabaseChecked, setSupabaseChecked] = useState(false);\n  const [stableAuthState, setStableAuthState] = useState<{\n    isAuthenticated: boolean;\n    isLoading: boolean;\n  }>(() => ({ isAuthenticated: false, isLoading: true }));\n  const [isSigningOut, setIsSigningOut] = useState(false);\n  const [isModeSwitching, setIsModeSwitching] = useState(false);\n  const [switchingToMode, setSwitchingToMode] = useState<\n    'guided' | 'self-directed' | null\n  >(null);\n\n  const { userType, setUserType } = useUserType();\n  const { learningType, setLearningType } = useLearningType();\n  const { setIsMobileMenuOpen } = useMobileMenu();\n  const { isDarkMode, toggleDarkMode } = useTheme();\n  const { user, isAuthenticated, isLoading: isAuthLoading, logout } = useAuth();\n  const pathname = usePathname();\n  const router = useRouter();\n\n  // Read persisted auth snapshot before paint to avoid visible flicker\n  useLayoutEffect(() => {\n    try {\n      const stored = window.sessionStorage.getItem('navbar-auth-state');\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        if (\n          typeof parsed?.isAuthenticated === 'boolean' &&\n          typeof parsed?.isLoading === 'boolean'\n        ) {\n          setStableAuthState(parsed);\n        }\n      }\n    } catch (_) {}\n    setHasSnapshotApplied(true);\n    setIsHydrated(true);\n  }, []);\n\n  // Update stable auth state when auth changes, but only after hydration\n  useEffect(() => {\n    if (!isHydrated) return;\n    // Never downgrade to unauthenticated from the app auth context; Supabase owns final truth.\n    if (!isAuthenticated) return;\n    const newState = {\n      isAuthenticated: true,\n      isLoading: isAuthLoading,\n    };\n\n    if (\n      stableAuthState.isAuthenticated !== newState.isAuthenticated ||\n      stableAuthState.isLoading !== newState.isLoading\n    ) {\n      setStableAuthState(newState);\n      sessionStorage.setItem('navbar-auth-state', JSON.stringify(newState));\n    }\n  }, [\n    isAuthenticated,\n    isAuthLoading,\n    isHydrated,\n    stableAuthState.isAuthenticated,\n    stableAuthState.isLoading,\n  ]);\n\n  // Also reflect Supabase auth state in navbar (for OAuth logins)\n  useEffect(() => {\n    if (!isSupabaseAvailable() || !supabase) return;\n\n    // Initial check\n    supabase.auth\n      .getSession()\n      .then(({ data }) => {\n        const authed = !!data?.session;\n        if (authed) {\n          setStableAuthState({ isAuthenticated: true, isLoading: false });\n          sessionStorage.setItem(\n            'navbar-auth-state',\n            JSON.stringify({ isAuthenticated: true, isLoading: false })\n          );\n        }\n      })\n      .finally(() => setSupabaseChecked(true));\n\n    // Fast retry loop for first load after social redirect (max ~2s)\n    let retries = 10;\n    const interval = setInterval(async () => {\n      if (supabaseChecked || !supabase) {\n        clearInterval(interval);\n        return;\n      }\n      try {\n        const { data } = await supabase.auth.getSession();\n        if (data?.session) {\n          setStableAuthState({ isAuthenticated: true, isLoading: false });\n          sessionStorage.setItem(\n            'navbar-auth-state',\n            JSON.stringify({ isAuthenticated: true, isLoading: false })\n          );\n          clearInterval(interval);\n          setSupabaseChecked(true);\n        }\n      } catch (_) {}\n      if (--retries <= 0) {\n        clearInterval(interval);\n        setSupabaseChecked(true);\n      }\n    }, 200);\n\n    // Subscribe to changes\n    if (!supabase) return;\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((event, session) => {\n      const authed = !!session;\n      setStableAuthState({ isAuthenticated: authed, isLoading: false });\n      sessionStorage.setItem(\n        'navbar-auth-state',\n        JSON.stringify({ isAuthenticated: authed, isLoading: false })\n      );\n      setSupabaseChecked(true);\n    });\n\n    return () => {\n      subscription?.unsubscribe();\n    };\n  }, []);\n\n  // Helper function to check if a link is active\n  const isActiveLink = (href: string) => {\n    if (href === '/') {\n      return pathname === '/';\n    }\n    return pathname?.startsWith(href) || false;\n  };\n\n  // Handle learning mode switching\n  const handleModeSwitch = async (newMode: 'guided' | 'self-directed') => {\n    // Don't switch if already in that mode or currently switching\n    if (userType === newMode || isModeSwitching) return;\n\n    // Set loading state\n    setIsModeSwitching(true);\n    setSwitchingToMode(newMode);\n\n    // Update user type and learning type IMMEDIATELY to hide/show cart\n    setUserType(newMode);\n    // Explicitly set learning type to hide cart when guided is selected\n    if (newMode === 'guided') {\n      setLearningType('guided');\n    } else {\n      setLearningType('free-style');\n    }\n\n    // Navigate to the appropriate page\n    if (newMode === 'guided') {\n      // Redirect to guided learning if not already there\n      if (!pathname?.startsWith('/features/guided-learning')) {\n        try {\n          await router.push('/features/guided-learning');\n        } catch (error) {\n          console.error('Navigation error:', error);\n          setIsModeSwitching(false);\n          setSwitchingToMode(null);\n        }\n      } else {\n        // Already on the page, clear loading immediately\n        setIsModeSwitching(false);\n        setSwitchingToMode(null);\n      }\n    } else {\n      // Redirect to browse practice questions for free style\n      if (!pathname?.startsWith('/browse-practice-questions')) {\n        try {\n          await router.push('/browse-practice-questions');\n        } catch (error) {\n          console.error('Navigation error:', error);\n          setIsModeSwitching(false);\n          setSwitchingToMode(null);\n        }\n      } else {\n        // Already on the page, clear loading immediately\n        setIsModeSwitching(false);\n        setSwitchingToMode(null);\n      }\n    }\n  };\n\n  // Handle sign out\n  const handleSignOut = async () => {\n    try {\n      setIsSigningOut(true);\n      // Sign out from app auth context (if used)\n      if (typeof logout === 'function') {\n        await logout();\n      }\n      // Sign out from Supabase OAuth session\n      if (isSupabaseAvailable() && supabase) {\n        try {\n          await supabase.auth.signOut();\n        } catch (_) {}\n      }\n      // Clear persisted markers\n      clearSession();\n      setIsOpen(false);\n      setIsUserDropdownOpen(false);\n      // Clear the stable auth state and session storage\n      setStableAuthState({ isAuthenticated: false, isLoading: false });\n      try {\n        sessionStorage.clear();\n      } catch (_) {}\n      try {\n        localStorage.clear();\n      } catch (_) {}\n      // Navigate to home after logout for clarity\n      router.push('/');\n    } catch (error) {\n      console.error('Sign out error:', error);\n    } finally {\n      // If navigation is blocked for any reason, avoid leaving the UI stuck\n      setIsSigningOut(false);\n    }\n  };\n\n  // Sync learningType with userType on mount and when userType changes\n  useEffect(() => {\n    if (!isHydrated) return;\n\n    // If userType is 'guided', ensure learningType is also 'guided'\n    if (userType === 'guided' && learningType !== 'guided') {\n      setLearningType('guided');\n    }\n    // If userType is 'self-directed', ensure learningType is 'free-style'\n    else if (\n      userType === 'self-directed' &&\n      learningType !== 'free-style' &&\n      learningType !== 'custom'\n    ) {\n      setLearningType('free-style');\n    }\n  }, [isHydrated, userType, learningType, setLearningType]);\n\n  // Handle scroll effect and mobile detection\n  useEffect(() => {\n    if (!isHydrated) return;\n\n    const handleScroll = () => {\n      setIsScrolled(window.scrollY > 10);\n    };\n\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 1024);\n    };\n\n    // Initial check\n    handleResize();\n\n    window.addEventListener('scroll', handleScroll);\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [isHydrated]);\n\n  // Close mobile menu when clicking outside\n  useEffect(() => {\n    if (!isHydrated) return;\n\n    if (isOpen) {\n      document.body.style.overflow = 'hidden';\n      setIsMobileMenuOpen(true);\n    } else {\n      document.body.style.overflow = 'unset';\n      setIsMobileMenuOpen(false);\n    }\n\n    return () => {\n      document.body.style.overflow = 'unset';\n      setIsMobileMenuOpen(false);\n    };\n  }, [isOpen, setIsMobileMenuOpen, isHydrated]);\n\n  // Clear mode switching state when pathname changes (navigation completed)\n  useEffect(() => {\n    if (isModeSwitching && pathname) {\n      // Clear loading state after navigation completes\n      const timer = setTimeout(() => {\n        setIsModeSwitching(false);\n        setSwitchingToMode(null);\n      }, 300);\n      return () => clearTimeout(timer);\n    }\n  }, [pathname, isModeSwitching]);\n\n  // Persist last-known auth state across reloads to prevent flicker\n  // (No beforeunload cleanup to keep navbar-auth-state available on refresh)\n\n  return (\n    <>\n      <nav\n        className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ease-in-out ${\n          isScrolled\n            ? 'bg-white/98 dark:bg-gray-900/98 backdrop-blur-lg shadow-xl border-b border-gray-200 dark:border-gray-700'\n            : 'bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600'\n        }`}\n      >\n        <div className='w-full px-3 sm:px-4 lg:px-8'>\n          <div className='flex items-center justify-between h-16 sm:h-18 lg:h-20'>\n            {/* Logo */}\n            <Link\n              href='/'\n              className={`flex items-center transition-colors duration-200 ${\n                isScrolled\n                  ? 'text-gray-900 dark:text-white hover:text-indigo-600 dark:hover:text-indigo-400'\n                  : 'text-white hover:text-indigo-100'\n              }`}\n            >\n              <AlzatonaLogo size='sm' showText={false} />\n            </Link>\n\n            {/* Desktop Navigation - hidden for now per product decision */}\n            {stableAuthState.isAuthenticated && (\n              <div className='hidden lg:flex items-center space-x-6 flex-1 justify-center'></div>\n            )}\n\n            {/* Right Section - Desktop Only */}\n            <div\n              className='hidden lg:flex items-center space-x-4'\n              suppressHydrationWarning\n            >\n              {/* Learning Mode Switcher */}\n              <div className='flex items-center space-x-1 bg-white/20 dark:bg-gray-800/20 rounded-lg p-1'>\n                <button\n                  onClick={() => handleModeSwitch('guided')}\n                  disabled={isModeSwitching}\n                  className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-70 disabled:cursor-not-allowed ${\n                    userType === 'guided'\n                      ? isScrolled\n                        ? 'bg-indigo-600 text-white shadow-sm'\n                        : 'bg-white text-indigo-600 shadow-sm'\n                      : isScrolled\n                        ? 'text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\n                        : 'text-white hover:text-indigo-100'\n                  }`}\n                >\n                  {isModeSwitching && switchingToMode === 'guided' ? (\n                    <Loader2 className='w-4 h-4 inline mr-1 animate-spin' />\n                  ) : (\n                    <Compass className='w-4 h-4 inline mr-1' />\n                  )}\n                  Guided\n                </button>\n                <button\n                  onClick={() => handleModeSwitch('self-directed')}\n                  disabled={isModeSwitching}\n                  className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-70 disabled:cursor-not-allowed ${\n                    userType === 'self-directed'\n                      ? isScrolled\n                        ? 'bg-indigo-600 text-white shadow-sm'\n                        : 'bg-white text-indigo-600 shadow-sm'\n                      : isScrolled\n                        ? 'text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\n                        : 'text-white hover:text-indigo-100'\n                  }`}\n                >\n                  {isModeSwitching && switchingToMode === 'self-directed' ? (\n                    <Loader2 className='w-4 h-4 inline mr-1 animate-spin' />\n                  ) : (\n                    <Map className='w-4 h-4 inline mr-1' />\n                  )}\n                  Free Style\n                </button>\n              </div>\n\n              {/* Auth Controls - render stable placeholder until snapshot applied */}\n              {!hasSnapshotApplied ? (\n                <div\n                  className={`px-4 py-2 rounded-lg font-medium ${\n                    isScrolled\n                      ? 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400'\n                      : 'bg-gray-200/20 text-gray-300'\n                  }`}\n                >\n                  Loading...\n                </div>\n              ) : stableAuthState.isLoading ? (\n                <div\n                  className={`px-4 py-2 rounded-lg font-medium ${\n                    isScrolled\n                      ? 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400'\n                      : 'bg-gray-200/20 text-gray-300'\n                  }`}\n                >\n                  Loading...\n                </div>\n              ) : stableAuthState.isAuthenticated ? (\n                <div className='flex items-center gap-2 relative'>\n                  <Link\n                    href='/dashboard'\n                    className={`px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${\n                      isScrolled\n                        ? 'bg-indigo-600 hover:bg-indigo-700 text-white shadow-md hover:shadow-lg'\n                        : 'bg-indigo-500 hover:bg-indigo-600 text-white shadow-md hover:shadow-lg'\n                    }`}\n                    data-testid='dashboard-link'\n                  >\n                    Dashboard\n                  </Link>\n                  {/* User menu trigger */}\n                  <button\n                    type='button'\n                    aria-haspopup='menu'\n                    aria-expanded={isUserDropdownOpen}\n                    onClick={() => setIsUserDropdownOpen(v => !v)}\n                    title='Account menu'\n                    data-testid='user-menu-button'\n                    className={`px-2.5 py-2 rounded-lg transition-colors duration-200 ${\n                      isScrolled\n                        ? 'bg-gray-200 hover:bg-gray-300 text-gray-800'\n                        : 'bg-white/20 hover:bg-white/30 text-white border border-white/30'\n                    }`}\n                  >\n                    <User size={18} />\n                  </button>\n\n                  {/* Dropdown menu */}\n                  {isUserDropdownOpen && (\n                    <div\n                      role='menu'\n                      aria-label='User menu'\n                      className={`absolute right-0 top-12 w-44 rounded-lg shadow-lg border ${\n                        isScrolled\n                          ? 'bg-white border-gray-200'\n                          : 'bg-white/95 border-white/30 backdrop-blur'\n                      }`}\n                    >\n                      <Link\n                        href='/dashboard'\n                        role='menuitem'\n                        className='block w-full text-left px-3 py-2 text-sm text-gray-800 hover:bg-gray-100 rounded-t-lg'\n                        onClick={() => setIsUserDropdownOpen(false)}\n                      >\n                        Dashboard\n                      </Link>\n                      <Link\n                        href='/my-plans'\n                        role='menuitem'\n                        className='block w-full text-left px-3 py-2 text-sm text-gray-800 hover:bg-gray-100'\n                        onClick={() => setIsUserDropdownOpen(false)}\n                      >\n                        My Plans\n                      </Link>\n                      <Link\n                        href='/settings'\n                        role='menuitem'\n                        className='block w-full text-left px-3 py-2 text-sm text-gray-800 hover:bg-gray-100'\n                        onClick={() => setIsUserDropdownOpen(false)}\n                      >\n                        Settings\n                      </Link>\n                      <button\n                        role='menuitem'\n                        onClick={() => {\n                          setIsUserDropdownOpen(false);\n                          handleSignOut();\n                        }}\n                        data-testid='user-menu-logout'\n                        disabled={isSigningOut}\n                        className={`block w-full text-left px-3 py-2 text-sm rounded-b-lg ${\n                          isSigningOut\n                            ? 'text-red-400 bg-red-50/70 cursor-not-allowed'\n                            : 'text-red-600 hover:bg-red-50'\n                        }`}\n                      >\n                        {isSigningOut ? 'Signing outâ€¦' : 'Sign out'}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <Link\n                  href='/auth'\n                  className={`font-medium transition-colors duration-200 ${\n                    isActiveLink('/auth')\n                      ? isScrolled\n                        ? 'text-indigo-600 dark:text-indigo-400 font-semibold border-b-2 border-indigo-600 dark:border-indigo-400 pb-1'\n                        : 'text-indigo-100 font-semibold border-b-2 border-indigo-100 pb-1'\n                      : isScrolled\n                        ? 'text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\n                        : 'text-white hover:text-indigo-100'\n                  }`}\n                  data-testid='signin-link'\n                >\n                  Sign In\n                </Link>\n              )}\n\n              {/* Theme Toggle */}\n              <button\n                onClick={toggleDarkMode}\n                className={`p-2.5 rounded-lg transition-colors duration-200 ${\n                  isScrolled\n                    ? 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-indigo-100 dark:hover:bg-indigo-800'\n                    : 'bg-white/20 text-white hover:bg-white/30 border border-white/30'\n                }`}\n                aria-label='Toggle theme'\n              >\n                {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}\n              </button>\n            </div>\n\n            {/* Mobile/Tablet Menu Button */}\n            <div className='flex items-center space-x-1 sm:space-x-2 lg:hidden'>\n              {/* Theme Toggle for Mobile/Tablet */}\n              <button\n                onClick={toggleDarkMode}\n                className={`p-2 sm:p-2.5 rounded-lg transition-colors duration-200 ${\n                  isScrolled\n                    ? 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-indigo-100 dark:hover:bg-indigo-800'\n                    : 'bg-white/20 text-white hover:bg-white/30 border border-white/30'\n                }`}\n                aria-label='Toggle theme'\n              >\n                {isDarkMode ? (\n                  <Sun size={18} className='sm:w-5 sm:h-5' />\n                ) : (\n                  <Moon size={18} className='sm:w-5 sm:h-5' />\n                )}\n              </button>\n\n              {/* Mobile Logout (visible when authenticated) */}\n              {stableAuthState.isAuthenticated && (\n                <button\n                  onClick={handleSignOut}\n                  title='Sign out'\n                  className={`p-2 sm:p-2.5 rounded-lg transition-colors duration-200 bg-gray-200 hover:bg-gray-300 text-gray-800`}\n                  aria-label='Sign out'\n                  disabled={isSigningOut}\n                >\n                  <LogOut size={18} className='sm:w-5 sm:h-5' />\n                </button>\n              )}\n\n              {/* Mobile menu button */}\n              <button\n                onClick={() => setIsOpen(!isOpen)}\n                className={`p-2 sm:p-2.5 rounded-lg transition-colors duration-200 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-indigo-100 dark:hover:bg-indigo-800`}\n                aria-label='Toggle mobile menu'\n              >\n                {isOpen ? (\n                  <X size={18} className='sm:w-5 sm:h-5' />\n                ) : (\n                  <Menu size={18} className='sm:w-5 sm:h-5' />\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Navigation - Full Screen Overlay */}\n        {isOpen && (\n          <div className='fixed inset-0 bg-white dark:bg-gray-900 z-50 lg:hidden'>\n            <div className='flex flex-col h-full'>\n              {/* Mobile Header */}\n              <div className='flex items-center justify-between p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700'>\n                <AlzatonaLogo size='sm' showText={false} />\n                <button\n                  onClick={() => setIsOpen(false)}\n                  className='p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors'\n                  aria-label='Close mobile menu'\n                >\n                  <X size={20} />\n                </button>\n              </div>\n\n              {/* Mobile Navigation Links - hidden for now per product decision */}\n              {/* Remove spacer to reduce extra empty space before CTAs */}\n\n              {/* Mobile CTAs */}\n              <div className='pt-2 pb-3 px-2 sm:px-3 border-t border-gray-200 dark:border-gray-700 space-y-2 sm:space-y-2'>\n                {/* Learning Mode Switcher for Mobile */}\n                <div className='mb-2'>\n                  <div className='text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 sm:mb-2 px-2'>\n                    Learning Mode\n                  </div>\n                  <div className='space-y-1 sm:space-y-2'>\n                    <button\n                      onClick={() => {\n                        handleModeSwitch('guided');\n                        setIsOpen(false);\n                      }}\n                      className={`w-full flex items-center space-x-2 sm:space-x-3 px-3 py-2 sm:py-2.5 rounded-lg text-left transition-colors ${\n                        userType === 'guided'\n                          ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-900 dark:text-indigo-100'\n                          : 'hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-white'\n                      }`}\n                    >\n                      <Compass className='w-4 h-4 flex-shrink-0' />\n                      <span className='text-sm sm:text-base font-medium'>\n                        Guided Learning\n                      </span>\n                      {userType === 'guided' && (\n                        <div className='w-2 h-2 bg-indigo-600 rounded-full ml-auto'></div>\n                      )}\n                    </button>\n                    <button\n                      onClick={() => {\n                        handleModeSwitch('self-directed');\n                        setIsOpen(false);\n                      }}\n                      className={`w-full flex items-center space-x-2 sm:space-x-3 px-3 py-2 sm:py-2.5 rounded-lg text-left transition-colors ${\n                        userType === 'self-directed'\n                          ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-900 dark:text-indigo-100'\n                          : 'hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-white'\n                      }`}\n                    >\n                      <Map className='w-4 h-4 flex-shrink-0' />\n                      <span className='text-sm sm:text-base font-medium'>\n                        Free Style Learning\n                      </span>\n                      {userType === 'self-directed' && (\n                        <div className='w-2 h-2 bg-indigo-600 rounded-full ml-auto'></div>\n                      )}\n                    </button>\n                  </div>\n                </div>\n\n                {stableAuthState.isAuthenticated ? (\n                  <>\n                    {/* User Profile Section */}\n                    <div className='flex items-center space-x-3 px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n                      {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n                      {(user as any)?.photoURL || (user as any)?.avatar_url ? (\n                        <img\n                          src={\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            (user as any)?.photoURL || (user as any)?.avatar_url\n                          }\n                          alt='Profile'\n                          className='w-8 h-8 rounded-full object-cover'\n                        />\n                      ) : (\n                        <div className='w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center'>\n                          <User className='w-4 h-4 text-white' />\n                        </div>\n                      )}\n                      <div className='flex-1 min-w-0'>\n                        <p className='text-sm font-medium text-gray-900 dark:text-white truncate'>\n                          {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n                          {(user as any)?.displayName ||\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            (user as any)?.name ||\n                            'User'}\n                        </p>\n                        <p className='text-xs text-gray-500 dark:text-gray-400 truncate'>\n                          {user?.email}\n                        </p>\n                      </div>\n                    </div>\n\n                    <button\n                      onClick={handleSignOut}\n                      className='block w-full text-center py-2.5 sm:py-3 font-medium transition-colors duration-200 text-sm sm:text-base rounded-lg text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20'\n                    >\n                      <LogOut className='w-4 h-4 inline mr-2' />\n                      Sign Out\n                    </button>\n                  </>\n                ) : (\n                  <>\n                    {/* Learning Mode Switcher for non-authenticated users */}\n                    <div className='mb-4'>\n                      <div className='text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 sm:mb-3 px-3'>\n                        Learning Mode\n                      </div>\n                      <div className='space-y-1 sm:space-y-2'>\n                        <button\n                          onClick={() => {\n                            handleModeSwitch('guided');\n                            setIsOpen(false);\n                          }}\n                          className={`w-full flex items-center space-x-2 sm:space-x-3 px-3 py-2 sm:py-2.5 rounded-lg text-left transition-colors ${\n                            userType === 'guided'\n                              ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-900 dark:text-indigo-100'\n                              : 'hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-white'\n                          }`}\n                        >\n                          <Compass className='w-4 h-4 flex-shrink-0' />\n                          <span className='text-sm sm:text-base font-medium'>\n                            Guided Learning\n                          </span>\n                          {userType === 'guided' && (\n                            <div className='w-2 h-2 bg-indigo-600 rounded-full ml-auto'></div>\n                          )}\n                        </button>\n                        <button\n                          onClick={() => {\n                            handleModeSwitch('self-directed');\n                            setIsOpen(false);\n                          }}\n                          className={`w-full flex items-center space-x-2 sm:space-x-3 px-3 py-2 sm:py-2.5 rounded-lg text-left transition-colors ${\n                            userType === 'self-directed'\n                              ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-900 dark:text-indigo-100'\n                              : 'hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-white'\n                          }`}\n                        >\n                          <Map className='w-4 h-4 flex-shrink-0' />\n                          <span className='text-sm sm:text-base font-medium'>\n                            Free Style Learning\n                          </span>\n                          {userType === 'self-directed' && (\n                            <div className='w-2 h-2 bg-indigo-600 rounded-full ml-auto'></div>\n                          )}\n                        </button>\n                      </div>\n                    </div>\n\n                    {stableAuthState.isLoading ? (\n                      <div className='block w-full text-center py-2.5 sm:py-3 font-medium text-sm sm:text-base rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400'>\n                        Loading...\n                      </div>\n                    ) : (\n                      <Link\n                        href='/auth'\n                        className={`block w-full text-center py-2.5 sm:py-3 font-medium transition-colors duration-200 text-sm sm:text-base rounded-lg ${\n                          isActiveLink('/auth')\n                            ? 'text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 font-semibold'\n                            : 'text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-50 dark:hover:bg-gray-800'\n                        }`}\n                        onClick={() => setIsOpen(false)}\n                      >\n                        Sign In\n                      </Link>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </nav>\n      {/* Page Loading Overlay */}\n      {isModeSwitching && (\n        <div className='fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center'>\n          <div className='bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl flex flex-col items-center space-y-4'>\n            <Loader2 className='w-8 h-8 text-indigo-600 dark:text-indigo-400 animate-spin' />\n            <p className='text-gray-900 dark:text-white font-medium'>\n              Switching to{' '}\n              {switchingToMode === 'guided' ? 'Guided' : 'Free Style'}{' '}\n              Learning...\n            </p>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default NavbarSimple;\n"],"names":["NavbarSimple","isScrolled","setIsScrolled","useState","isOpen","setIsOpen","isMobile","setIsMobile","isUserDropdownOpen","setIsUserDropdownOpen","isHydrated","setIsHydrated","hasSnapshotApplied","setHasSnapshotApplied","supabaseChecked","setSupabaseChecked","stableAuthState","setStableAuthState","isAuthenticated","isLoading","isSigningOut","setIsSigningOut","isModeSwitching","setIsModeSwitching","switchingToMode","setSwitchingToMode","userType","setUserType","useUserType","learningType","setLearningType","useLearningType","setIsMobileMenuOpen","useMobileMenu","isDarkMode","toggleDarkMode","useTheme","user","isAuthLoading","logout","useAuth","pathname","usePathname","router","useRouter","useLayoutEffect","stored","window","sessionStorage","getItem","parsed","JSON","parse","_","useEffect","newState","setItem","stringify","isSupabaseAvailable","supabase","auth","getSession","then","data","authed","session","finally","retries","interval","setInterval","clearInterval","subscription","onAuthStateChange","event","unsubscribe","isActiveLink","href","startsWith","handleModeSwitch","newMode","push","error","console","handleSignOut","signOut","clearSession","clear","localStorage","handleScroll","scrollY","handleResize","innerWidth","addEventListener","removeEventListener","document","body","style","overflow","timer","setTimeout","clearTimeout","nav","className","div","Link","AlzatonaLogo","size","showText","suppressHydrationWarning","button","onClick","disabled","Loader2","Compass","Map","data-testid","type","aria-haspopup","aria-expanded","v","title","User","role","aria-label","Sun","Moon","LogOut","X","Menu","span","photoURL","avatar_url","img","src","alt","p","displayName","name","email"],"mappings":"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"}
a9ff7c890674b60d464b2552e7a7930e
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _supabasejs = require("@supabase/supabase-js");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
const supabase = (0, _supabasejs.createClient)(supabaseUrl, supabaseServiceRoleKey);
class FirestoreErrorBoundary extends _react.Component {
    constructor(props){
        super(props);
        this.state = {
            hasError: false
        };
    }
    static getDerivedStateFromError(error) {
        // Check if it's a Firestore internal assertion error
        const isFirestoreError = error.message && (error.message.includes('FIRESTORE') || error.message.includes('INTERNAL ASSERTION FAILED') || error.message.includes('Unexpected state') || error.message.includes('ID: b815') || error.message.includes('ID: ca9'));
        if (isFirestoreError) {
            // Suppress Firestore internal errors
            console.warn('⚠️ Suppressed Firestore internal error in ErrorBoundary:', error);
            return {
                hasError: false
            };
        }
        // For other errors, show the error boundary
        return {
            hasError: true,
            error
        };
    }
    componentDidCatch(error, errorInfo) {
        // Check if it's a Firestore internal assertion error
        const isFirestoreError = error.message && (error.message.includes('FIRESTORE') || error.message.includes('INTERNAL ASSERTION FAILED') || error.message.includes('Unexpected state') || error.message.includes('ID: b815') || error.message.includes('ID: ca9'));
        if (isFirestoreError) {
            // Suppress Firestore internal errors
            console.warn('⚠️ Suppressed Firestore internal error in componentDidCatch:', error);
            return;
        }
        // Log other errors
        console.error('ErrorBoundary caught an error:', error, errorInfo);
    }
    render() {
        if (this.state.hasError) {
            return this.props.fallback || /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                        className: "text-lg font-semibold text-red-800 dark:text-red-200 mb-2",
                        children: "Something went wrong"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-red-600 dark:text-red-300",
                        children: this.state.error?.message || 'An unexpected error occurred'
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: ()=>this.setState({
                                hasError: false,
                                error: undefined
                            }),
                        className: "mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",
                        children: "Try again"
                    })
                ]
            });
        }
        return this.props.children;
    }
}
const _default = FirestoreErrorBoundary;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL2xpYnMvc2hhcmVkLWNvbXBvbmVudHMvc3JjL2xpYi9jb21tb24vRmlyZXN0b3JlRXJyb3JCb3VuZGFyeS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBSZWFjdE5vZGUsIEVycm9ySW5mbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnZbJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCddITtcbmNvbnN0IHN1cGFiYXNlU2VydmljZVJvbGVLZXkgPSBwcm9jZXNzLmVudlsnU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSddITtcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5KTtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbiAgZmFsbGJhY2s/OiBSZWFjdE5vZGU7XG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGhhc0Vycm9yOiBib29sZWFuO1xuICBlcnJvcj86IEVycm9yO1xufVxuXG5jbGFzcyBGaXJlc3RvcmVFcnJvckJvdW5kYXJ5IGV4dGVuZHMgQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgaGFzRXJyb3I6IGZhbHNlIH07XG4gIH1cblxuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKGVycm9yOiBFcnJvcik6IFN0YXRlIHtcbiAgICAvLyBDaGVjayBpZiBpdCdzIGEgRmlyZXN0b3JlIGludGVybmFsIGFzc2VydGlvbiBlcnJvclxuICAgIGNvbnN0IGlzRmlyZXN0b3JlRXJyb3IgPVxuICAgICAgZXJyb3IubWVzc2FnZSAmJlxuICAgICAgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZJUkVTVE9SRScpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0lOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQnKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmV4cGVjdGVkIHN0YXRlJykgfHxcbiAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnSUQ6IGI4MTUnKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdJRDogY2E5JykpO1xuXG4gICAgaWYgKGlzRmlyZXN0b3JlRXJyb3IpIHtcbiAgICAgIC8vIFN1cHByZXNzIEZpcmVzdG9yZSBpbnRlcm5hbCBlcnJvcnNcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ+KaoO+4jyBTdXBwcmVzc2VkIEZpcmVzdG9yZSBpbnRlcm5hbCBlcnJvciBpbiBFcnJvckJvdW5kYXJ5OicsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgICAgcmV0dXJuIHsgaGFzRXJyb3I6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgLy8gRm9yIG90aGVyIGVycm9ycywgc2hvdyB0aGUgZXJyb3IgYm91bmRhcnlcbiAgICByZXR1cm4geyBoYXNFcnJvcjogdHJ1ZSwgZXJyb3IgfTtcbiAgfVxuXG4gIG92ZXJyaWRlIGNvbXBvbmVudERpZENhdGNoKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pIHtcbiAgICAvLyBDaGVjayBpZiBpdCdzIGEgRmlyZXN0b3JlIGludGVybmFsIGFzc2VydGlvbiBlcnJvclxuICAgIGNvbnN0IGlzRmlyZXN0b3JlRXJyb3IgPVxuICAgICAgZXJyb3IubWVzc2FnZSAmJlxuICAgICAgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZJUkVTVE9SRScpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0lOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQnKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmV4cGVjdGVkIHN0YXRlJykgfHxcbiAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnSUQ6IGI4MTUnKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdJRDogY2E5JykpO1xuXG4gICAgaWYgKGlzRmlyZXN0b3JlRXJyb3IpIHtcbiAgICAgIC8vIFN1cHByZXNzIEZpcmVzdG9yZSBpbnRlcm5hbCBlcnJvcnNcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ+KaoO+4jyBTdXBwcmVzc2VkIEZpcmVzdG9yZSBpbnRlcm5hbCBlcnJvciBpbiBjb21wb25lbnREaWRDYXRjaDonLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBMb2cgb3RoZXIgZXJyb3JzXG4gICAgY29uc29sZS5lcnJvcignRXJyb3JCb3VuZGFyeSBjYXVnaHQgYW4gZXJyb3I6JywgZXJyb3IsIGVycm9ySW5mbyk7XG4gIH1cblxuICBvdmVycmlkZSByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuaGFzRXJyb3IpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMucHJvcHMuZmFsbGJhY2sgfHwgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTQgYmctcmVkLTUwIGRhcms6YmctcmVkLTkwMC8yMCBib3JkZXIgYm9yZGVyLXJlZC0yMDAgZGFyazpib3JkZXItcmVkLTgwMCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXJlZC04MDAgZGFyazp0ZXh0LXJlZC0yMDAgbWItMic+XG4gICAgICAgICAgICAgIFNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXJlZC02MDAgZGFyazp0ZXh0LXJlZC0zMDAnPlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvcj8ubWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCd9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhhc0Vycm9yOiBmYWxzZSwgZXJyb3I6IHVuZGVmaW5lZCB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXQtMiBweC00IHB5LTIgYmctcmVkLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgaG92ZXI6YmctcmVkLTcwMCdcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgVHJ5IGFnYWluXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGaXJlc3RvcmVFcnJvckJvdW5kYXJ5O1xuIl0sIm5hbWVzIjpbInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsInN1cGFiYXNlU2VydmljZVJvbGVLZXkiLCJzdXBhYmFzZSIsImNyZWF0ZUNsaWVudCIsIkZpcmVzdG9yZUVycm9yQm91bmRhcnkiLCJDb21wb25lbnQiLCJwcm9wcyIsInN0YXRlIiwiaGFzRXJyb3IiLCJnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IiLCJlcnJvciIsImlzRmlyZXN0b3JlRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsImNvbXBvbmVudERpZENhdGNoIiwiZXJyb3JJbmZvIiwicmVuZGVyIiwiZmFsbGJhY2siLCJkaXYiLCJjbGFzc05hbWUiLCJoMiIsInAiLCJidXR0b24iLCJvbkNsaWNrIiwic2V0U3RhdGUiLCJ1bmRlZmluZWQiLCJjaGlsZHJlbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQW1HQTs7O2VBQUE7Ozs7K0RBakd1RDs0QkFDMUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU3QixNQUFNQSxjQUFjQyxRQUFRQyxHQUFHLENBQUMsMkJBQTJCO0FBQzNELE1BQU1DLHlCQUF5QkYsUUFBUUMsR0FBRyxDQUFDLDRCQUE0QjtBQUN2RSxNQUFNRSxXQUFXQyxJQUFBQSx3QkFBWSxFQUFDTCxhQUFhRztBQVkzQyxNQUFNRywrQkFBK0JDLGdCQUFTO0lBQzVDLFlBQVlDLEtBQVksQ0FBRTtRQUN4QixLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQyxLQUFLLEdBQUc7WUFBRUMsVUFBVTtRQUFNO0lBQ2pDO0lBRUEsT0FBT0MseUJBQXlCQyxLQUFZLEVBQVM7UUFDbkQscURBQXFEO1FBQ3JELE1BQU1DLG1CQUNKRCxNQUFNRSxPQUFPLElBQ1pGLENBQUFBLE1BQU1FLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGdCQUN0QkgsTUFBTUUsT0FBTyxDQUFDQyxRQUFRLENBQUMsZ0NBQ3ZCSCxNQUFNRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyx1QkFDdkJILE1BQU1FLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGVBQ3ZCSCxNQUFNRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyxVQUFTO1FBRXBDLElBQUlGLGtCQUFrQjtZQUNwQixxQ0FBcUM7WUFDckNHLFFBQVFDLElBQUksQ0FDViw0REFDQUw7WUFFRixPQUFPO2dCQUFFRixVQUFVO1lBQU07UUFDM0I7UUFFQSw0Q0FBNEM7UUFDNUMsT0FBTztZQUFFQSxVQUFVO1lBQU1FO1FBQU07SUFDakM7SUFFU00sa0JBQWtCTixLQUFZLEVBQUVPLFNBQW9CLEVBQUU7UUFDN0QscURBQXFEO1FBQ3JELE1BQU1OLG1CQUNKRCxNQUFNRSxPQUFPLElBQ1pGLENBQUFBLE1BQU1FLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGdCQUN0QkgsTUFBTUUsT0FBTyxDQUFDQyxRQUFRLENBQUMsZ0NBQ3ZCSCxNQUFNRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyx1QkFDdkJILE1BQU1FLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGVBQ3ZCSCxNQUFNRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyxVQUFTO1FBRXBDLElBQUlGLGtCQUFrQjtZQUNwQixxQ0FBcUM7WUFDckNHLFFBQVFDLElBQUksQ0FDVixnRUFDQUw7WUFFRjtRQUNGO1FBRUEsbUJBQW1CO1FBQ25CSSxRQUFRSixLQUFLLENBQUMsa0NBQWtDQSxPQUFPTztJQUN6RDtJQUVTQyxTQUFTO1FBQ2hCLElBQUksSUFBSSxDQUFDWCxLQUFLLENBQUNDLFFBQVEsRUFBRTtZQUN2QixPQUNFLElBQUksQ0FBQ0YsS0FBSyxDQUFDYSxRQUFRLGtCQUNqQixzQkFBQ0M7Z0JBQUlDLFdBQVU7O2tDQUNiLHFCQUFDQzt3QkFBR0QsV0FBVTtrQ0FBNEQ7O2tDQUcxRSxxQkFBQ0U7d0JBQUVGLFdBQVU7a0NBQ1YsSUFBSSxDQUFDZCxLQUFLLENBQUNHLEtBQUssRUFBRUUsV0FBVzs7a0NBRWhDLHFCQUFDWTt3QkFDQ0MsU0FBUyxJQUNQLElBQUksQ0FBQ0MsUUFBUSxDQUFDO2dDQUFFbEIsVUFBVTtnQ0FBT0UsT0FBT2lCOzRCQUFVO3dCQUVwRE4sV0FBVTtrQ0FDWDs7OztRQU1UO1FBRUEsT0FBTyxJQUFJLENBQUNmLEtBQUssQ0FBQ3NCLFFBQVE7SUFDNUI7QUFDRjtNQUVBLFdBQWV4QiJ9
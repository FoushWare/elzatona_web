f632b38a3caf67fdd3092768653d3333
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get DELETE () {
        return DELETE;
    },
    get GET () {
        return GET;
    },
    get PUT () {
        return PUT;
    }
});
const _server = require("next/server");
const _supabasejs = require("@supabase/supabase-js");
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;
const supabase = (0, _supabasejs.createClient)(supabaseUrl, supabaseServiceRoleKey);
async function GET(request, { params }) {
    try {
        const { id } = await params;
        const { data: cardSnap, error } = await supabase.from('learning_cards').select('*').eq('id', id).single();
        if (error || !cardSnap) {
            return _server.NextResponse.json({
                success: false,
                error: 'Card not found'
            }, {
                status: 404
            });
        }
        return _server.NextResponse.json({
            success: true,
            data: {
                id: cardSnap.id,
                ...cardSnap
            }
        });
    } catch (error) {
        console.error('Error fetching card:', error);
        return _server.NextResponse.json({
            success: false,
            error: 'Failed to fetch card'
        }, {
            status: 500
        });
    }
}
async function PUT(request, { params }) {
    try {
        const { id } = await params;
        const updateData = await request.json();
        const { error } = await supabase.from('learning_cards').update({
            ...updateData,
            updated_at: new Date().toISOString()
        }).eq('id', id);
        if (error) {
            throw error;
        }
        return _server.NextResponse.json({
            success: true,
            message: 'Card updated successfully'
        });
    } catch (error) {
        console.error('Error updating card:', error);
        return _server.NextResponse.json({
            success: false,
            error: 'Failed to update card'
        }, {
            status: 500
        });
    }
}
async function DELETE(request, { params }) {
    try {
        const { id } = await params;
        const { error } = await supabase.from('learning_cards').delete().eq('id', id);
        if (error) {
            throw error;
        }
        return _server.NextResponse.json({
            success: true,
            message: 'Card deleted successfully'
        });
    } catch (error) {
        console.error('Error deleting card:', error);
        return _server.NextResponse.json({
            success: false,
            error: 'Failed to delete card'
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL2FwcHMvd2Vic2l0ZS9zcmMvYXBwL2FwaS9jYXJkcy9baWRdL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSE7XG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlUm9sZUtleSk7XG5cbi8vIEdFVCAvYXBpL2NhcmRzL1tpZF0gLSBHZXQgYSBzaW5nbGUgY2FyZCBieSBJRFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9PiB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBwYXJhbXM7XG4gICAgY29uc3QgeyBkYXRhOiBjYXJkU25hcCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbGVhcm5pbmdfY2FyZHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IgfHwgIWNhcmRTbmFwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQ2FyZCBub3QgZm91bmQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHsgaWQ6IGNhcmRTbmFwLmlkLCAuLi5jYXJkU25hcCB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNhcmQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGNhcmQnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBVVCAvYXBpL2NhcmRzL1tpZF0gLSBVcGRhdGUgYSBjYXJkXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyBpZDogc3RyaW5nIH0+IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IHBhcmFtcztcbiAgICBjb25zdCB1cGRhdGVEYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2xlYXJuaW5nX2NhcmRzJylcbiAgICAgIC51cGRhdGUoeyAuLi51cGRhdGVEYXRhLCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSlcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0NhcmQgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGNhcmQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBjYXJkJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBERUxFVEUgL2FwaS9jYXJkcy9baWRdIC0gRGVsZXRlIGEgY2FyZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9PiB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBwYXJhbXM7XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2xlYXJuaW5nX2NhcmRzJylcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnQ2FyZCBkZWxldGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgY2FyZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIGNhcmQnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiREVMRVRFIiwiR0VUIiwiUFVUIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlUm9sZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJzdXBhYmFzZSIsImNyZWF0ZUNsaWVudCIsInJlcXVlc3QiLCJwYXJhbXMiLCJpZCIsImRhdGEiLCJjYXJkU25hcCIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJjb25zb2xlIiwidXBkYXRlRGF0YSIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXNzYWdlIiwiZGVsZXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztRQXdFc0JBO2VBQUFBOztRQWhFQUM7ZUFBQUE7O1FBaUNBQztlQUFBQTs7O3dCQXpDb0I7NEJBQ2I7QUFFN0IsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyx3QkFBd0I7QUFDeEQsTUFBTUMseUJBQXlCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUNwRSxNQUFNQyxXQUFXQyxJQUFBQSx3QkFBWSxFQUFDUCxhQUFhSTtBQUdwQyxlQUFlTixJQUNwQlUsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUF1QztJQUUvQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBRyxNQUFNRDtRQUNyQixNQUFNLEVBQUVFLE1BQU1DLFFBQVEsRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVAsU0FDckNRLElBQUksQ0FBQyxrQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxNQUFNTixJQUNUTyxNQUFNO1FBRVQsSUFBSUosU0FBUyxDQUFDRCxVQUFVO1lBQ3RCLE9BQU9NLG9CQUFZLENBQUNDLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9QLE9BQU87WUFBaUIsR0FDMUM7Z0JBQUVRLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9ILG9CQUFZLENBQUNDLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUVCxNQUFNO2dCQUFFRCxJQUFJRSxTQUFTRixFQUFFO2dCQUFFLEdBQUdFLFFBQVE7WUFBQztRQUN2QztJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkUyxRQUFRVCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxPQUFPSyxvQkFBWSxDQUFDQyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT1AsT0FBTztRQUF1QixHQUNoRDtZQUFFUSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUdPLGVBQWV0QixJQUNwQlMsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUF1QztJQUUvQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBRyxNQUFNRDtRQUNyQixNQUFNYyxhQUFhLE1BQU1mLFFBQVFXLElBQUk7UUFFckMsTUFBTSxFQUFFTixLQUFLLEVBQUUsR0FBRyxNQUFNUCxTQUNyQlEsSUFBSSxDQUFDLGtCQUNMVSxNQUFNLENBQUM7WUFBRSxHQUFHRCxVQUFVO1lBQUVFLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUFHLEdBQzdEWCxFQUFFLENBQUMsTUFBTU47UUFFWixJQUFJRyxPQUFPO1lBQ1QsTUFBTUE7UUFDUjtRQUVBLE9BQU9LLG9CQUFZLENBQUNDLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUUSxTQUFTO1FBQ1g7SUFDRixFQUFFLE9BQU9mLE9BQU87UUFDZFMsUUFBUVQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBT0ssb0JBQVksQ0FBQ0MsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9QLE9BQU87UUFBd0IsR0FDakQ7WUFBRVEsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFHTyxlQUFleEIsT0FDcEJXLE9BQW9CLEVBQ3BCLEVBQUVDLE1BQU0sRUFBdUM7SUFFL0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTUQ7UUFFckIsTUFBTSxFQUFFSSxLQUFLLEVBQUUsR0FBRyxNQUFNUCxTQUNyQlEsSUFBSSxDQUFDLGtCQUNMZSxNQUFNLEdBQ05iLEVBQUUsQ0FBQyxNQUFNTjtRQUVaLElBQUlHLE9BQU87WUFDVCxNQUFNQTtRQUNSO1FBRUEsT0FBT0ssb0JBQVksQ0FBQ0MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RRLFNBQVM7UUFDWDtJQUNGLEVBQUUsT0FBT2YsT0FBTztRQUNkUyxRQUFRVCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxPQUFPSyxvQkFBWSxDQUFDQyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT1AsT0FBTztRQUF3QixHQUNqRDtZQUFFUSxRQUFRO1FBQUk7SUFFbEI7QUFDRiJ9
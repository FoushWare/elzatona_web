{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/get-started/page.integration.test.tsx"],"sourcesContent":["/**\n * Integration Tests for Get Started Page (G-IT-003, G-IT-004, G-IT-005)\n * Task: G-002 - Get Started Page\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport GetStartedPage from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\n// Mock shared contexts\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useUserType: jest.fn(),\n  };\n});\n\n// Mock LearningTypeContext\nconst mockSetLearningType = jest.fn();\njest.mock('../../context/LearningTypeContext', () => ({\n  useLearningType: jest.fn(() => ({\n    learningType: null,\n    setLearningType: mockSetLearningType,\n  })),\n}));\n\n// Mock lucide-react icons\njest.mock('lucide-react', () => ({\n  ArrowRight: () => <span data-testid=\"arrow-right-icon\">‚Üí</span>,\n  Play: () => <span data-testid=\"play-icon\">‚ñ∂</span>,\n  Code: () => <span data-testid=\"code-icon\">üíª</span>,\n  Target: () => <span data-testid=\"target-icon\">üéØ</span>,\n  BookOpen: () => <span data-testid=\"book-icon\">üìñ</span>,\n  CheckCircle: () => <span data-testid=\"check-icon\">‚úì</span>,\n  Star: () => <span data-testid=\"star-icon\">‚≠ê</span>,\n  Users: () => <span data-testid=\"users-icon\">üë•</span>,\n  Award: () => <span data-testid=\"award-icon\">üèÜ</span>,\n  Map: () => <span data-testid=\"map-icon\">üó∫Ô∏è</span>,\n  Compass: () => <span data-testid=\"compass-icon\">üß≠</span>,\n  ExternalLink: () => <span data-testid=\"external-icon\">üîó</span>,\n}));\n\nconst mockPush = jest.fn();\nconst mockSetUserType = jest.fn();\nconst mockUseRouter = jest.fn();\n\njest.mock('next/navigation', () => ({\n  useRouter: () => mockUseRouter(),\n}));\n\ndescribe('G-IT-003: User Type Selection Updates State', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: mockSetUserType,\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n  });\n\n  afterEach(() => {\n    jest.runOnlyPendingTimers();\n    jest.useRealTimers();\n  });\n\n  it('should call setUserType when \"I need guidance\" is selected', async () => {\n    render(<GetStartedPage />);\n    \n    const guidedOption = screen.getByText(/I need guidance/i).closest('div[class*=\"cursor-pointer\"]');\n    if (guidedOption) {\n      fireEvent.click(guidedOption);\n      \n      jest.advanceTimersByTime(300);\n      \n      await waitFor(() => {\n        expect(mockSetUserType).toHaveBeenCalledWith('guided');\n      });\n    }\n  });\n\n  it('should call setUserType when \"I\\'m self-directed\" is selected', async () => {\n    render(<GetStartedPage />);\n    \n    const selfDirectedOption = screen.getByText(/I'm self-directed/i).closest('div[class*=\"cursor-pointer\"]');\n    if (selfDirectedOption) {\n      fireEvent.click(selfDirectedOption);\n      \n      jest.advanceTimersByTime(300);\n      \n      await waitFor(() => {\n        expect(mockSetUserType).toHaveBeenCalledWith('self-directed');\n      });\n    }\n  });\n});\n\ndescribe('G-IT-004: \"I need guidance\" Navigates to Guided Learning', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: mockSetUserType,\n    });\n    \n    mockPush.mockClear();\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n  });\n\n  afterEach(() => {\n    jest.runOnlyPendingTimers();\n    jest.useRealTimers();\n  });\n\n  it('should navigate to /features/guided-learning when \"I need guidance\" is selected', async () => {\n    render(<GetStartedPage />);\n    \n    const guidedOption = screen.getByText(/I need guidance/i).closest('div[class*=\"cursor-pointer\"]');\n    if (guidedOption) {\n      fireEvent.click(guidedOption);\n      \n      // Advance timers to trigger navigation (1500ms delay)\n      jest.advanceTimersByTime(1800);\n      \n      await waitFor(() => {\n        expect(mockPush).toHaveBeenCalledWith('/features/guided-learning');\n      });\n    }\n  });\n\n  it('should set learning type to \"guided\" when navigating', async () => {\n    render(<GetStartedPage />);\n    \n    const guidedOption = screen.getByText(/I need guidance/i).closest('div[class*=\"cursor-pointer\"]');\n    if (guidedOption) {\n      fireEvent.click(guidedOption);\n      \n      jest.advanceTimersByTime(300);\n      \n      await waitFor(() => {\n        expect(mockSetLearningType).toHaveBeenCalledWith('guided');\n      });\n    }\n  });\n});\n\ndescribe('G-IT-005: \"I\\'m self-directed\" Navigates to Browse Page', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: mockSetUserType,\n    });\n    \n    mockPush.mockClear();\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n  });\n\n  afterEach(() => {\n    jest.runOnlyPendingTimers();\n    jest.useRealTimers();\n  });\n\n  it('should navigate to /browse-practice-questions when \"I\\'m self-directed\" is selected', async () => {\n    render(<GetStartedPage />);\n    \n    const selfDirectedOption = screen.getByText(/I'm self-directed/i).closest('div[class*=\"cursor-pointer\"]');\n    if (selfDirectedOption) {\n      fireEvent.click(selfDirectedOption);\n      \n      // Advance timers to trigger navigation (1500ms delay)\n      jest.advanceTimersByTime(1800);\n      \n      await waitFor(() => {\n        expect(mockPush).toHaveBeenCalledWith('/browse-practice-questions');\n      });\n    }\n  });\n\n  it('should set learning type to \"free-style\" when navigating', async () => {\n    render(<GetStartedPage />);\n    \n    const selfDirectedOption = screen.getByText(/I'm self-directed/i).closest('div[class*=\"cursor-pointer\"]');\n    if (selfDirectedOption) {\n      fireEvent.click(selfDirectedOption);\n      \n      jest.advanceTimersByTime(300);\n      \n      await waitFor(() => {\n        expect(mockSetLearningType).toHaveBeenCalledWith('free-style');\n      });\n    }\n  });\n});\n\n"],"names":["jest","mock","actual","requireActual","useUserType","fn","useLearningType","learningType","setLearningType","mockSetLearningType","ArrowRight","span","data-testid","Play","Code","Target","BookOpen","CheckCircle","Star","Users","Award","Map","Compass","ExternalLink","useRouter","mockUseRouter","mockPush","mockSetUserType","describe","beforeEach","clearAllMocks","useFakeTimers","sharedContexts","mockReturnValue","userType","setUserType","push","replace","prefetch","afterEach","runOnlyPendingTimers","useRealTimers","it","render","GetStartedPage","guidedOption","screen","getByText","closest","fireEvent","click","advanceTimersByTime","waitFor","expect","toHaveBeenCalledWith","selfDirectedOption","mockClear"],"mappings":"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"}
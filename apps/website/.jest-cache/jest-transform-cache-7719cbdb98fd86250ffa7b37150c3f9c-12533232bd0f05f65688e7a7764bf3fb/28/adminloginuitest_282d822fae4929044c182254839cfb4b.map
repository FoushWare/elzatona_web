{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-login-ui.test.tsx"],"sourcesContent":["/**\n * Admin Login UI Tests\n *\n * Tests for the admin login page component to ensure:\n * - Form rendering and validation\n * - User interactions\n * - Error handling\n * - Loading states\n * - Responsive design\n */\n\n// Set up environment variables before any imports\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock Supabase before any imports that use it\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn().mockResolvedValue({ data: null, error: null }),\n        })),\n      })),\n    })),\n    auth: {\n      onAuthStateChange: jest.fn(() => ({\n        data: { subscription: null },\n        error: null,\n      })),\n      getSession: jest.fn().mockResolvedValue({ data: { session: null }, error: null }),\n      getUser: jest.fn().mockResolvedValue({ data: { user: null }, error: null }),\n    },\n  })),\n}));\n\n// Mock nuqs before any imports\njest.mock('nuqs', () => ({\n  useQueryState: jest.fn(() => [null, jest.fn()]),\n  useQueryStates: jest.fn(() => [{}, jest.fn()]),\n  parseAsString: jest.fn(),\n  parseAsInteger: jest.fn(),\n  createSearchParamsCache: jest.fn(),\n}));\n\n// Mock @tanstack/react-query\njest.mock('@tanstack/react-query', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    QueryClientProvider: ({ children }: { children: React.ReactNode }) => (\n      <>{children}</>\n    ),\n    QueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQuery: jest.fn(() => ({\n      data: null,\n      isLoading: false,\n      error: null,\n    })),\n    useMutation: jest.fn(() => ({\n      mutate: jest.fn(),\n      mutateAsync: jest.fn(),\n      isLoading: false,\n      error: null,\n    })),\n  };\n});\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: jest.fn(),\n  usePathname: jest.fn(() => '/admin/login'),\n}));\n\n// Create a mock function that can be configured per test\nconst mockUseAdminAuthFn = jest.fn();\n\n// Mock the actual AdminAuthContext file\njest.mock('../../libs/shared-contexts/src/lib/AdminAuthContext', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    AdminAuthProvider: ({ children }: { children: React.ReactNode }) => (\n      <>{children}</>\n    ),\n    useAdminAuth: mockUseAdminAuthFn,\n  };\n});\n\n// Mock the actual ThemeContext file\njest.mock('../../libs/shared-contexts/src/lib/ThemeContext', () => ({\n  ThemeProvider: ({ children }: { children: React.ReactNode }) => children,\n  useTheme: jest.fn(() => ({\n    isDarkMode: false,\n    toggleDarkMode: jest.fn(),\n    setDarkMode: jest.fn(),\n    isLoaded: true,\n  })),\n}));\n\n// Also mock the package entry point\njest.mock('@elzatona/shared-contexts', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    AdminAuthProvider: ({ children }: { children: React.ReactNode }) => (\n      <>{children}</>\n    ),\n    useAdminAuth: mockUseAdminAuthFn,\n    ThemeProvider: ({ children }: { children: React.ReactNode }) => (\n      <>{children}</>\n    ),\n    useTheme: jest.fn(() => ({\n      isDarkMode: false,\n      toggleDarkMode: jest.fn(),\n    })),\n  };\n});\n\n// Mock fetch for API calls\nglobal.fetch = jest.fn();\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor, act } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { useRouter } from 'next/navigation';\nimport AdminLoginPage from '@/app/admin/login/page';\nimport { AdminAuthProvider } from '@elzatona/shared-contexts';\n\n// Type definitions for mocks\ninterface MockRouter {\n  push: jest.MockedFunction<(url: string) => void>;\n  replace: jest.MockedFunction<(url: string) => void>;\n  prefetch: jest.MockedFunction<(url: string) => void>;\n  back: jest.MockedFunction<() => void>;\n  forward: jest.MockedFunction<() => void>;\n  refresh: jest.MockedFunction<() => void>;\n}\n\n// MockAdminAuth interface removed - not used in tests\n\ndescribe('Admin Login Page', () => {\n  const mockPush = jest.fn();\n  const mockUseRouter = useRouter as jest.MockedFunction<typeof useRouter>;\n  const mockLogin = jest.fn();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    // Reset mock admin auth function to return default values\n    // Use mockReturnValue to ensure consistent object reference\n    mockUseAdminAuthFn.mockReturnValue({\n      isAuthenticated: false,\n      isLoading: false,\n      login: mockLogin,\n      logout: jest.fn(),\n      user: null,\n    });\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n      back: jest.fn(),\n      forward: jest.fn(),\n      refresh: jest.fn(),\n    } as MockRouter);\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('Page Rendering', () => {\n    it('should render login form with all required elements', () => {\n      render(\n        <AdminAuthProvider>\n          <AdminLoginPage />\n        </AdminAuthProvider>\n      );\n\n      expect(screen.getByText('Admin Login')).toBeInTheDocument();\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: /sign in/i })\n      ).toBeInTheDocument();\n    });\n\n    it('should render admin navbar', () => {\n      render(<AdminLoginPage />);\n\n      expect(screen.getByText('Admin Access Portal')).toBeInTheDocument();\n      expect(screen.getByText('Secure Authentication Required')).toBeInTheDocument();\n    });\n\n    it('should show loading state when authentication is in progress', () => {\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: true,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      expect(screen.getByText('Loading...')).toBeInTheDocument();\n    });\n\n    it('should render login form when not authenticated', () => {\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      // Component should render the login form when not authenticated\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n    });\n  });\n\n  describe('Form Validation', () => {\n    it('should use HTML5 validation for empty fields', async () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i) as HTMLInputElement;\n      const passwordInput = screen.getByLabelText(/password/i) as HTMLInputElement;\n\n      // HTML5 validation - check required attribute\n      expect(emailInput).toHaveAttribute('required');\n      expect(passwordInput).toHaveAttribute('required');\n    });\n\n    it('should use HTML5 email validation', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i) as HTMLInputElement;\n\n      // HTML5 email validation\n      expect(emailInput).toHaveAttribute('type', 'email');\n    });\n\n    it('should allow form input changes', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      fireEvent.change(emailInput, { target: { value: 'test@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n\n      expect(emailInput).toHaveValue('test@example.com');\n      expect(passwordInput).toHaveValue('password123');\n    });\n  });\n\n  describe('Form Submission', () => {\n    it('should call login function with correct credentials', async () => {\n      const loginMock = jest.fn().mockResolvedValue({ success: true });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      const { container } = render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const form = container.querySelector('form');\n\n      // Verify the mock is set up correctly\n      expect(mockUseAdminAuthFn).toHaveBeenCalled();\n      const mockResult = mockUseAdminAuthFn.mock.results[0]?.value;\n      expect(mockResult?.login).toBe(loginMock);\n\n      await act(async () => {\n        fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n        fireEvent.change(passwordInput, { target: { value: 'password123' } });\n        \n        if (form) {\n          fireEvent.submit(form);\n        }\n      });\n\n      await waitFor(() => {\n        expect(loginMock).toHaveBeenCalledWith(\n          'admin@example.com',\n          'password123'\n        );\n      }, { timeout: 5000 });\n    });\n\n    it('should show loading state during login', async () => {\n      const loginMock = jest\n        .fn()\n        .mockImplementation(\n          () => new Promise(resolve => setTimeout(resolve, 100))\n        );\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n      const form = emailInput.closest('form');\n\n      await act(async () => {\n        fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n        fireEvent.change(passwordInput, { target: { value: 'password123' } });\n        \n        if (form) {\n          fireEvent.submit(form);\n        }\n      });\n\n      // Check loading state immediately after submission\n      await waitFor(() => {\n        expect(screen.getByText('Signing In...')).toBeInTheDocument();\n        expect(loginButton).toBeDisabled();\n      }, { timeout: 5000 });\n    });\n\n    it('should show error message on login failure', async () => {\n      const loginMock = jest\n        .fn()\n        .mockResolvedValue({ success: false, error: 'Invalid credentials' });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const form = emailInput.closest('form');\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      \n      if (form) {\n        fireEvent.submit(form);\n      }\n\n      await waitFor(() => {\n        expect(screen.getByText('Invalid credentials')).toBeInTheDocument();\n      }, { timeout: 5000 });\n    });\n\n    it('should handle network errors gracefully', async () => {\n      const loginMock = jest.fn().mockRejectedValue(new Error('Network error'));\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const form = emailInput.closest('form');\n\n      await act(async () => {\n        fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n        fireEvent.change(passwordInput, { target: { value: 'password123' } });\n        \n        if (form) {\n          fireEvent.submit(form);\n        }\n      });\n\n      await waitFor(() => {\n        expect(\n          screen.getByText('An unexpected error occurred')\n        ).toBeInTheDocument();\n      }, { timeout: 5000 });\n    });\n  });\n\n  describe('User Interactions', () => {\n    it('should have password field with password type', () => {\n      render(<AdminLoginPage />);\n\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      expect(passwordInput).toHaveAttribute('type', 'password');\n    });\n\n    it('should submit form on Enter key press', async () => {\n      const loginMock = jest.fn().mockResolvedValue({ success: true });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      await act(async () => {\n        fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n        fireEvent.change(passwordInput, { target: { value: 'password123' } });\n        fireEvent.keyDown(passwordInput, { key: 'Enter', code: 'Enter', charCode: 13 });\n      });\n\n      await waitFor(() => {\n        expect(loginMock).toHaveBeenCalledWith(\n          'admin@example.com',\n          'password123'\n        );\n      }, { timeout: 5000 });\n    });\n\n    it('should allow form field input', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n\n      expect(emailInput).toHaveValue('admin@example.com');\n      expect(passwordInput).toHaveValue('password123');\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('should have proper ARIA labels', () => {\n      render(<AdminLoginPage />);\n\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: /sign in/i })\n      ).toBeInTheDocument();\n    });\n\n    it('should be keyboard navigable', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      // Check that inputs are focusable\n      emailInput.focus();\n      expect(emailInput).toHaveFocus();\n\n      // Check that password input is focusable\n      passwordInput.focus();\n      expect(passwordInput).toHaveFocus();\n\n      // Check that button is focusable\n      loginButton.focus();\n      expect(loginButton).toHaveFocus();\n    });\n\n    it('should display error messages when login fails', async () => {\n      const loginMock = jest\n        .fn()\n        .mockResolvedValue({ success: false, error: 'Invalid credentials' });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const form = emailInput.closest('form');\n\n      await act(async () => {\n        fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n        fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n        \n        if (form) {\n          fireEvent.submit(form);\n        }\n      });\n\n      await waitFor(() => {\n        expect(screen.getByText('Invalid credentials')).toBeInTheDocument();\n      }, { timeout: 5000 });\n    });\n  });\n\n  describe('Responsive Design', () => {\n    it('should render correctly on mobile viewport', () => {\n      // Mock mobile viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 375,\n      });\n\n      render(<AdminLoginPage />);\n\n      // Check that the page renders without errors\n      expect(screen.getByText('Admin Login')).toBeInTheDocument();\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n    });\n\n    it('should render correctly on desktop viewport', () => {\n      // Mock desktop viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 1024,\n      });\n\n      render(<AdminLoginPage />);\n\n      // Check that the page renders without errors\n      expect(screen.getByText('Admin Login')).toBeInTheDocument();\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n    });\n  });\n\n  describe('Security Features', () => {\n    it('should not log sensitive information', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, {\n        target: { value: 'secretpassword123' },\n      });\n\n      // Check that password is not logged\n      expect(consoleSpy).not.toHaveBeenCalledWith(\n        expect.stringContaining('secretpassword123')\n      );\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should prevent XSS attacks in form inputs', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const maliciousInput = '<script>alert(\"xss\")</script>';\n\n      fireEvent.change(emailInput, { target: { value: maliciousInput } });\n\n      // The input should be sanitized and not execute the script\n      expect(emailInput).toHaveValue(maliciousInput);\n      expect(screen.queryByText('xss')).not.toBeInTheDocument();\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","from","select","eq","single","mockResolvedValue","data","error","auth","onAuthStateChange","subscription","getSession","session","getUser","user","useQueryState","useQueryStates","parseAsString","parseAsInteger","createSearchParamsCache","React","require","QueryClientProvider","children","QueryClient","invalidateQueries","setQueryData","getQueryData","useQueryClient","useQuery","isLoading","useMutation","mutate","mutateAsync","useRouter","usePathname","AdminAuthProvider","useAdminAuth","mockUseAdminAuthFn","ThemeProvider","useTheme","isDarkMode","toggleDarkMode","setDarkMode","isLoaded","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","global","fetch","describe","mockPush","mockUseRouter","mockLogin","beforeEach","clearAllMocks","mockReturnValue","isAuthenticated","login","logout","push","replace","prefetch","back","forward","refresh","afterEach","restoreAllMocks","it","render","AdminLoginPage","expect","screen","getByText","toBeInTheDocument","getByLabelText","getByRole","name","emailInput","passwordInput","toHaveAttribute","fireEvent","change","target","value","toHaveValue","loginMock","success","container","form","querySelector","toHaveBeenCalled","mockResult","results","toBe","act","submit","waitFor","toHaveBeenCalledWith","timeout","mockImplementation","Promise","resolve","setTimeout","loginButton","closest","toBeDisabled","mockRejectedValue","Error","keyDown","key","code","charCode","focus","toHaveFocus","Object","defineProperty","window","writable","configurable","consoleSpy","spyOn","console","not","stringContaining","mockRestore","maliciousInput","queryByText"],"mappings":"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"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-components/src/lib/admin/FrontendTaskEditor.tsx"],"sourcesContent":["// v2.0 - Frontend Task Editor with Three-Panel Layout (Description/Editor/Preview)\n\n'use client';\n\nimport React, { useState, useEffect, useMemo, useRef, ReactNode } from 'react';\nimport { Editor } from '@monaco-editor/react';\nimport {\n  Play,\n  Save,\n  FileText,\n  FolderPlus,\n  FilePlus,\n  Trash2,\n  Eye,\n  Code,\n  Palette,\n  Settings,\n  Plus,\n  X,\n  ChevronRight,\n  ChevronDown,\n  ArrowLeft,\n  Sun,\n  Moon,\n  Monitor,\n  Folder,\n  FolderOpen,\n  Circle,\n  AlertCircle,\n  CheckCircle,\n  Clock,\n  Target,\n  Flame,\n  Copy,\n  Check,\n  RotateCcw,\n  MoreVertical,\n} from 'lucide-react';\nimport {\n  FrontendTask,\n  FrontendTaskFile,\n  FrontendTaskFormData,\n} from '@elzatona/shared-types';\n\ninterface FrontendTaskEditorProps {\n  task?: FrontendTask | null;\n  onSave: (taskData: FrontendTaskFormData) => Promise<void>;\n  onCancel: () => void;\n  mode?: 'create' | 'edit' | 'view';\n}\n\ninterface FileNode {\n  id: string;\n  name: string;\n  type: 'file' | 'folder';\n  children?: FileNode[];\n  content?: string;\n  fileType?: string;\n  isEntryPoint?: boolean;\n}\n\nexport default function FrontendTaskEditor({\n  task,\n  onSave,\n  onCancel,\n  mode = 'create',\n}: FrontendTaskEditorProps) {\n  // Theme state\n  const [theme, setTheme] = useState<'light' | 'dark' | 'system'>('system');\n  const [isDark, setIsDark] = useState(false);\n\n  // Form data state\n  const [formData, setFormData] = useState<FrontendTaskFormData>({\n    title: '',\n    description: '',\n    requirements: '',\n    solution: '',\n    category: 'react',\n    difficulty: 'easy',\n    estimatedTime: 30,\n    author: '',\n    starterCode: '',\n    tags: [],\n    hints: [],\n    files: [],\n    is_active: true,\n  });\n\n  // Panel layout state\n  const [leftPanelWidth, setLeftPanelWidth] = useState(25);\n  const [rightPanelWidth, setRightPanelWidth] = useState(25);\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizeStartX, setResizeStartX] = useState(0);\n\n  // Editor states\n  const [activeFile, setActiveFile] = useState<string | null>(null);\n  const [fileTree, setFileTree] = useState<FileNode[]>([]);\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(\n    new Set()\n  );\n  const [openFiles, setOpenFiles] = useState<\n    Array<{\n      id: string;\n      name: string;\n      type: 'tsx' | 'css' | 'html' | 'js' | 'json';\n      content: string;\n    }>\n  >([]);\n  const [showFileExplorer, setShowFileExplorer] = useState(true);\n  const [showPreview, setShowPreview] = useState(true);\n  const [showConsole, setShowConsole] = useState(true);\n  const [consoleOutput, setConsoleOutput] = useState<string[]>([]);\n  const [copied, setCopied] = useState(false);\n\n  // Content tabs\n  const [activeTab, setActiveTab] = useState<'description' | 'solution'>(\n    'description'\n  );\n\n  // Browser/Console tabs\n  const [activeBrowserTab, setActiveBrowserTab] = useState<\n    'browser' | 'console'\n  >('browser');\n\n  // Form inputs\n  const [newHint, setNewHint] = useState('');\n  const [newTag, setNewTag] = useState('');\n  const [newFileName, setNewFileName] = useState('');\n  const [newFolderName, setNewFolderName] = useState('');\n  const [showAddFile, setShowAddFile] = useState(false);\n  const [showAddFolder, setShowAddFolder] = useState(false);\n\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  // Theme detection\n  useEffect(() => {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const updateTheme = () => {\n      if (theme === 'system') {\n        setIsDark(mediaQuery.matches);\n      } else {\n        setIsDark(theme === 'dark');\n      }\n    };\n\n    updateTheme();\n    mediaQuery.addEventListener('change', updateTheme);\n    return () => mediaQuery.removeEventListener('change', updateTheme);\n  }, [theme]);\n\n  // Initialize form data when task changes\n  useEffect(() => {\n    if (task) {\n      setFormData({\n        title: task.title || '',\n        description: task.description || '',\n        requirements: task.requirements || '',\n        solution: task.solution || '',\n        category: task.category || 'react',\n        difficulty: task.difficulty || 'easy',\n        estimatedTime: task.estimatedTime || 30,\n        author: task.author || '',\n        starterCode: task.starterCode || '',\n        tags: task.tags || [],\n        hints: task.hints || [],\n        files: task.files || [],\n        is_active: task.is_active !== false,\n      });\n\n      // Initialize file tree and open files\n      if (task.files && task.files.length > 0) {\n        const files = task.files.map(file => ({\n          id: file.id,\n          name: file.name,\n          type: 'file' as const,\n          content: file.content,\n          fileType: file.type,\n          isEntryPoint: file.isEntryPoint,\n        }));\n\n        setFileTree([\n          {\n            id: 'src',\n            name: 'src',\n            type: 'folder',\n            children: files.filter(\n              f => f.fileType !== 'html' && f.fileType !== 'json'\n            ),\n          },\n          {\n            id: 'public',\n            name: 'public',\n            type: 'folder',\n            children: files.filter(f => f.fileType === 'html'),\n          },\n          {\n            id: 'root',\n            name: 'Root',\n            type: 'folder',\n            children: files.filter(f => f.fileType === 'json'),\n          },\n        ]);\n\n        setOpenFiles(\n          files.map(f => ({\n            id: f.id,\n            name: f.name,\n            type: f.fileType as 'tsx' | 'css' | 'html' | 'js' | 'json',\n            content: f.content,\n          }))\n        );\n        setActiveFile(\n          files.find(f => f.isEntryPoint)?.id || files[0]?.id || null\n        );\n        setExpandedFolders(new Set(['src', 'public', 'root']));\n      } else {\n        // Default files\n        const defaultFiles = [\n          {\n            id: 'app',\n            name: 'App.tsx',\n            type: 'file' as const,\n            fileType: 'tsx',\n            content: '',\n          },\n          {\n            id: 'styles',\n            name: 'styles.css',\n            type: 'file' as const,\n            fileType: 'css',\n            content: '',\n          },\n          {\n            id: 'index',\n            name: 'index.html',\n            type: 'file' as const,\n            fileType: 'html',\n            content:\n              '<!doctype html>\\n<html lang=\"en\">\\n  <head>\\n    <meta charset=\"UTF-8\" />\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\\n  </head>\\n  <body>\\n    <div id=\"root\"></div>\\n  </body>\\n</html>',\n          },\n        ];\n\n        setFileTree([\n          {\n            id: 'src',\n            name: 'src',\n            type: 'folder',\n            children: defaultFiles.filter(f => f.fileType !== 'html'),\n          },\n          {\n            id: 'public',\n            name: 'public',\n            type: 'folder',\n            children: defaultFiles.filter(f => f.fileType === 'html'),\n          },\n        ]);\n\n        setOpenFiles(\n          defaultFiles.map(f => ({\n            id: f.id,\n            name: f.name,\n            type: f.fileType as 'tsx' | 'css' | 'html' | 'js' | 'json',\n            content: f.content,\n          }))\n        );\n        setActiveFile('app');\n        setExpandedFolders(new Set(['src', 'public']));\n      }\n    }\n  }, [task]);\n\n  // Resize handlers\n  const handleMouseDown = (e: React.MouseEvent, panel: 'left' | 'right') => {\n    e.preventDefault();\n    setIsResizing(true);\n    setResizeStartX(e.clientX);\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (!isResizing) return;\n\n    const deltaX = e.clientX - resizeStartX;\n    const containerWidth = window.innerWidth;\n    const deltaPercent = (deltaX / containerWidth) * 100;\n\n    if (deltaPercent !== 0) {\n      setLeftPanelWidth(prev =>\n        Math.max(20, Math.min(60, prev + deltaPercent))\n      );\n      setRightPanelWidth(prev =>\n        Math.max(20, Math.min(60, prev - deltaPercent))\n      );\n      setResizeStartX(e.clientX);\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsResizing(false);\n  };\n\n  useEffect(() => {\n    if (isResizing) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = 'col-resize';\n      document.body.style.userSelect = 'none';\n    } else {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n    };\n  }, [isResizing, resizeStartX]);\n\n  // Console message listener\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      if (event.data.type === 'console') {\n        setConsoleOutput(prev => [...prev.slice(-19), event.data.message]);\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, []);\n\n  // File operations\n  const addFile = (name: string, type: string, content: string = '') => {\n    const id = `file_${Date.now()}`;\n    const newFile: FileNode = {\n      id,\n      name,\n      type: 'file',\n      content,\n      fileType: type,\n    };\n\n    setFileTree(prev => {\n      const srcFolder = prev.find(f => f.id === 'src');\n      if (srcFolder) {\n        return prev.map(folder =>\n          folder.id === 'src'\n            ? { ...folder, children: [...(folder.children || []), newFile] }\n            : folder\n        );\n      }\n      return prev;\n    });\n\n    setOpenFiles(prev => [...prev, { id, name, type: type as any, content }]);\n    setActiveFile(id);\n    setNewFileName('');\n    setShowAddFile(false);\n  };\n\n  const addFolder = (name: string) => {\n    const id = `folder_${Date.now()}`;\n    const newFolder: FileNode = {\n      id,\n      name,\n      type: 'folder',\n      children: [],\n    };\n\n    setFileTree(prev => [...prev, newFolder]);\n    setNewFolderName('');\n    setShowAddFolder(false);\n  };\n\n  const deleteFile = (fileId: string) => {\n    setFileTree(prev =>\n      prev.map(folder => ({\n        ...folder,\n        children: folder.children?.filter(child => child.id !== fileId) || [],\n      }))\n    );\n\n    setOpenFiles(prev => prev.filter(file => file.id !== fileId));\n    if (activeFile === fileId) {\n      const remainingFiles = openFiles.filter(file => file.id !== fileId);\n      setActiveFile(remainingFiles.length > 0 ? remainingFiles[0].id : null);\n    }\n  };\n\n  const updateFileContent = (fileId: string, content: string) => {\n    setFileTree(prev =>\n      prev.map(folder => ({\n        ...folder,\n        children:\n          folder.children?.map(child =>\n            child.id === fileId ? { ...child, content } : child\n          ) || [],\n      }))\n    );\n\n    setOpenFiles(prev =>\n      prev.map(file => (file.id === fileId ? { ...file, content } : file))\n    );\n  };\n\n  const toggleFolder = (folderId: string) => {\n    setExpandedFolders(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(folderId)) {\n        newSet.delete(folderId);\n      } else {\n        newSet.add(folderId);\n      }\n      return newSet;\n    });\n  };\n\n  const openFile = (fileId: string) => {\n    setActiveFile(fileId);\n    const file = openFiles.find(f => f.id === fileId);\n    if (file && !openFiles.some(f => f.id === fileId)) {\n      setOpenFiles(prev => [...prev, file]);\n    }\n  };\n\n  const handleCloseFile = (fileId: string) => {\n    if (openFiles.length <= 1) return;\n\n    setOpenFiles(prev => prev.filter(file => file.id !== fileId));\n    if (activeFile === fileId) {\n      const remainingFiles = openFiles.filter(file => file.id !== fileId);\n      setActiveFile(remainingFiles.length > 0 ? remainingFiles[0].id : null);\n    }\n  };\n\n  // Helper functions\n  const getFileIcon = (type: string) => {\n    switch (type) {\n      case 'tsx':\n        return (\n          <div className='w-4 h-4 bg-blue-500 rounded text-white text-xs flex items-center justify-center font-bold'>\n            TS\n          </div>\n        );\n      case 'css':\n        return <div className='w-4 h-4 text-gray-400'>#</div>;\n      case 'html':\n        return <div className='w-4 h-4 text-orange-500'>H</div>;\n      case 'js':\n        return (\n          <div className='w-4 h-4 bg-yellow-500 rounded text-white text-xs flex items-center justify-center font-bold'>\n            JS\n          </div>\n        );\n      default:\n        return <FileText className='w-4 h-4 text-gray-400' />;\n    }\n  };\n\n  const getCurrentFileContent = () => {\n    const file = openFiles.find(f => f.id === activeFile);\n    return file?.content || '';\n  };\n\n  const setCurrentFileContent = (value: string) => {\n    if (!activeFile) return;\n\n    updateFileContent(activeFile, value);\n  };\n\n  const getCurrentLanguage = () => {\n    const file = openFiles.find(f => f.id === activeFile);\n    switch (file?.type) {\n      case 'tsx':\n        return 'typescript';\n      case 'css':\n        return 'css';\n      case 'html':\n        return 'html';\n      case 'js':\n        return 'javascript';\n      case 'json':\n        return 'json';\n      default:\n        return 'typescript';\n    }\n  };\n\n  // Preview generation\n  const previewSrcDoc = useMemo(() => {\n    const appFile = openFiles.find(f => f.id === 'app');\n    const stylesFile = openFiles.find(f => f.id === 'styles');\n    const indexFile = openFiles.find(f => f.id === 'index');\n\n    const reactCode = appFile?.content || '';\n    const cssCode = stylesFile?.content || '';\n    const htmlCode = indexFile?.content || '<div id=\"root\"></div>';\n\n    const cssText = `\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        body {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n          margin: 0;\n          padding: 16px;\n          background: #ffffff;\n          color: #333;\n          line-height: 1.6;\n        }\n        #root {\n          min-height: 100vh;\n        }\n        .error-boundary {\n          padding: 16px;\n          background: #fee;\n          border: 1px solid #fcc;\n          border-radius: 4px;\n          color: #c33;\n          font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n          font-size: 12px;\n          white-space: pre-wrap;\n        }\n        ${cssCode}\n      </style>\n    `;\n\n    if (\n      reactCode.includes('import') ||\n      reactCode.includes('export default') ||\n      reactCode.includes('React')\n    ) {\n      const cleanReactCode = reactCode\n        .replace(/import\\s+.*?from\\s+['\"][^'\"]*['\"];?\\s*/g, '')\n        .replace(/import\\s+\\{.*?\\}\\s+from\\s+['\"][^'\"]*['\"];?\\s*/g, '')\n        .replace(/import\\s+\\*\\s+as\\s+\\w+\\s+from\\s+['\"][^'\"]*['\"];?\\s*/g, '')\n        .replace(/export\\s+default\\s+/g, '')\n        .replace(/export\\s+\\{.*?\\};?\\s*/g, '')\n        .replace(/export\\s+.*?;?\\s*/g, '');\n\n      const jsText = `\n        <script crossorigin src=\"https://unpkg.com/react@18/umd/react.development.js\"></script>\n        <script crossorigin src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\"></script>\n        <script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"></script>\n        <script>\n          const originalConsole = {\n            log: console.log,\n            error: console.error,\n            warn: console.warn,\n            info: console.info\n          };\n          \n          const consoleOutput = [];\n          \n          function captureConsole(method, args) {\n            const timestamp = new Date().toLocaleTimeString();\n            const message = Array.from(args).map(arg => \n              typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)\n            ).join(' ');\n            \n            const logEntry = \\`[\\${timestamp}] [\\${method.toUpperCase()}] \\${message}\\`;\n            consoleOutput.push(logEntry);\n            \n            try {\n              window.parent.postMessage({\n                type: 'console',\n                method: method,\n                message: logEntry,\n                timestamp: timestamp\n              }, '*');\n            } catch (e) {}\n            \n            originalConsole[method].apply(console, args);\n          }\n          \n          console.log = (...args) => captureConsole('log', args);\n          console.error = (...args) => captureConsole('error', args);\n          console.warn = (...args) => captureConsole('warn', args);\n          console.info = (...args) => captureConsole('info', args);\n          \n          class ErrorBoundary extends React.Component {\n            constructor(props) {\n              super(props);\n              this.state = { hasError: false, error: null };\n            }\n            \n            static getDerivedStateFromError(error) {\n              return { hasError: true, error };\n            }\n            \n            componentDidCatch(error, errorInfo) {\n              console.error('React Error:', error, errorInfo);\n            }\n            \n            render() {\n              if (this.state.hasError) {\n                return React.createElement('div', {\n                  className: 'error-boundary'\n                }, \\`Error: \\${this.state.error?.message || 'Unknown error'}\\\\n\\\\n\\${this.state.error?.stack || ''}\\`);\n              }\n              return this.props.children;\n            }\n          }\n          \n          try {\n            const { useState, useEffect, useMemo, useCallback, useRef, useContext, useReducer } = React;\n            window.React = React;\n            window.useState = useState;\n            window.useEffect = useEffect;\n            window.useMemo = useMemo;\n            window.useCallback = useCallback;\n            window.useRef = useRef;\n            window.useContext = useContext;\n            window.useReducer = useReducer;\n            \n            if (window.App) {\n              delete window.App;\n            }\n            \n            const cleanCode = \\`${cleanReactCode.replace(/`/g, '\\\\`').replace(/\\$/g, '\\\\$')}\\`;\n            const transpiledCode = Babel.transform(cleanCode, { \n              presets: ['react'],\n              plugins: ['transform-class-properties']\n            }).code;\n            \n            const wrappedCode = \\`(function() {\n              \\${transpiledCode}\n              return App;\n            })()\\`;\n            \n            const App = eval(wrappedCode);\n            \n            const rootElement = document.getElementById('root');\n            if (rootElement) {\n              rootElement.innerHTML = '';\n            }\n            \n            if (!window.reactRoot) {\n              window.reactRoot = ReactDOM.createRoot(rootElement);\n            }\n            \n            window.reactRoot.render(React.createElement(ErrorBoundary, null, \n              React.createElement(App)\n            ));\n            \n            console.log('React app loaded successfully');\n            console.info('Ready to start coding!');\n            \n          } catch (error) {\n            console.error('Compilation Error:', error);\n            document.getElementById('root').innerHTML = \\`\n              <div class=\"error-boundary\">\n                Compilation Error: \\${error.message}\n                \\\\n\\\\n\\${error.stack || ''}\n              </div>\n            \\`;\n          }\n        </script>\n      `;\n\n      return (\n        '<!DOCTYPE html>' +\n        '<html>' +\n        '<head>' +\n        '<meta charset=\"utf-8\">' +\n        '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">' +\n        '<title>Live Preview</title>' +\n        cssText +\n        '</head>' +\n        '<body>' +\n        htmlCode +\n        jsText +\n        '</body>' +\n        '</html>'\n      );\n    } else {\n      const jsText = '<script>' + reactCode + '</script>';\n      return (\n        '<!DOCTYPE html>' +\n        '<html>' +\n        '<head>' +\n        '<meta charset=\"utf-8\">' +\n        '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">' +\n        '<title>Live Preview</title>' +\n        cssText +\n        '</head>' +\n        '<body>' +\n        htmlCode +\n        jsText +\n        '</body>' +\n        '</html>'\n      );\n    }\n  }, [openFiles]);\n\n  // Form handlers\n  const handleSave = async () => {\n    const files: FrontendTaskFile[] = fileTree\n      .flatMap(folder => folder.children || [])\n      .map(file => ({\n        id: file.id,\n        name: file.name,\n        type: file.fileType as any,\n        content: file.content || '',\n        isEntryPoint: file.isEntryPoint || false,\n      }));\n\n    const taskData: FrontendTaskFormData = {\n      ...formData,\n      files,\n    };\n\n    await onSave(taskData);\n  };\n\n  const handleCopyCode = async () => {\n    try {\n      await navigator.clipboard.writeText(getCurrentFileContent());\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy code:', err);\n    }\n  };\n\n  const handleReset = () => {\n    if (task?.files && task.files.length > 0) {\n      const files = task.files.map(file => ({\n        id: file.id,\n        name: file.name,\n        type: file.type as any,\n        content: file.content,\n      }));\n      setOpenFiles(files);\n      setActiveFile(\n        files.find(f => f.id === 'app')?.id || files[0]?.id || null\n      );\n    }\n  };\n\n  const getCategoryIcon = (category: string) => {\n    switch (category.toLowerCase()) {\n      case 'react':\n        return <Code className='w-4 h-4' />;\n      case 'javascript':\n        return <Code className='w-4 h-4' />;\n      case 'css':\n        return <Code className='w-4 h-4' />;\n      default:\n        return <Code className='w-4 h-4' />;\n    }\n  };\n\n  return (\n    <div\n      className={`fixed inset-0 z-50 transition-colors duration-300 ${\n        isDark ? 'bg-gray-900' : 'bg-gray-100'\n      }`}\n    >\n      {/* Header */}\n      <div\n        className={`border-b px-6 py-4 transition-colors duration-300 ${\n          isDark ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n        }`}\n      >\n        <div className='flex items-center justify-between'>\n          <div className='flex items-center gap-4'>\n            <button\n              onClick={onCancel}\n              className={`p-2 transition-colors ${\n                isDark\n                  ? 'text-gray-400 hover:text-white'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              <ArrowLeft className='w-5 h-5' />\n            </button>\n            <div className='flex items-center gap-3'>\n              <div\n                className={`w-8 h-8 rounded-lg flex items-center justify-center ${\n                  isDark\n                    ? 'bg-gradient-to-r from-purple-500 to-indigo-500'\n                    : 'bg-gradient-to-r from-blue-500 to-purple-500'\n                }`}\n              >\n                {getCategoryIcon(formData.category)}\n              </div>\n              <div>\n                <h1\n                  className={`text-xl font-bold ${\n                    isDark ? 'text-white' : 'text-gray-900'\n                  }`}\n                >\n                  {mode === 'create'\n                    ? 'Create Frontend Task'\n                    : mode === 'edit'\n                      ? 'Edit Frontend Task'\n                      : 'View Frontend Task'}\n                </h1>\n                <div\n                  className={`flex items-center gap-2 text-sm ${\n                    isDark ? 'text-gray-400' : 'text-gray-600'\n                  }`}\n                >\n                  <span className='flex items-center gap-1'>\n                    <Code className='w-3 h-3' />\n                    {formData.category}\n                  </span>\n                  <span className='flex items-center gap-1'>\n                    <Flame className='w-3 h-3' />\n                    {formData.difficulty}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className='flex items-center gap-3'>\n            {/* Theme Toggle */}\n            <div className='flex items-center gap-1 p-1 rounded-lg bg-gray-200 dark:bg-gray-700'>\n              <button\n                onClick={() => setTheme('light')}\n                className={`p-2 rounded transition-colors ${\n                  theme === 'light'\n                    ? 'bg-white text-gray-900 shadow-sm'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                <Sun className='w-4 h-4' />\n              </button>\n              <button\n                onClick={() => setTheme('dark')}\n                className={`p-2 rounded transition-colors ${\n                  theme === 'dark'\n                    ? 'bg-gray-800 text-white shadow-sm'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                <Moon className='w-4 h-4' />\n              </button>\n              <button\n                onClick={() => setTheme('system')}\n                className={`p-2 rounded transition-colors ${\n                  theme === 'system'\n                    ? 'bg-gray-800 text-white shadow-sm'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                <Monitor className='w-4 h-4' />\n              </button>\n            </div>\n\n            {mode !== 'view' && (\n              <>\n                <button\n                  onClick={handleSave}\n                  className='px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors flex items-center gap-2'\n                >\n                  <Save className='w-4 h-4' />\n                  Save\n                </button>\n              </>\n            )}\n            <button\n              onClick={onCancel}\n              className={`px-4 py-2 rounded-lg transition-colors ${\n                isDark\n                  ? 'bg-gray-700 hover:bg-gray-600 text-white'\n                  : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\n              }`}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className='flex h-[calc(100vh-80px)]'>\n        {/* Left Panel - Description */}\n        <div\n          className={`border-r flex flex-col overflow-hidden relative group transition-colors duration-300 ${\n            isDark ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n          }`}\n          style={{\n            width: `${leftPanelWidth}%`,\n            minWidth: '300px',\n            maxWidth: '60%',\n          }}\n        >\n          {/* Resize Handle */}\n          <div\n            className='absolute right-0 top-0 bottom-0 w-1 bg-transparent hover:bg-blue-500 cursor-col-resize z-30 transition-colors select-none'\n            onMouseDown={e => handleMouseDown(e, 'left')}\n          ></div>\n\n          {/* Tabs */}\n          <div\n            className={`flex border-b transition-colors duration-300 ${\n              isDark ? 'border-gray-700' : 'border-gray-200'\n            }`}\n          >\n            <button\n              onClick={() => setActiveTab('description')}\n              className={`px-4 py-3 text-sm font-medium transition-colors ${\n                activeTab === 'description'\n                  ? `text-white border-b-2 border-blue-500 ${isDark ? 'bg-gray-800' : 'bg-white'}`\n                  : `${isDark ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-gray-900'}`\n              }`}\n            >\n              Description\n            </button>\n            <button\n              onClick={() => setActiveTab('solution')}\n              className={`px-4 py-3 text-sm font-medium transition-colors ${\n                activeTab === 'solution'\n                  ? `text-white border-b-2 border-blue-500 ${isDark ? 'bg-gray-800' : 'bg-white'}`\n                  : `${isDark ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-gray-900'}`\n              }`}\n            >\n              Solution\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className='flex-1 overflow-y-auto p-6'>\n            {activeTab === 'description' && (\n              <div className='space-y-6'>\n                {/* Task Metadata - Editable */}\n                {mode !== 'view' && (\n                  <div className='space-y-4'>\n                    <div>\n                      <label\n                        className={`block text-sm font-medium mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                      >\n                        Task Title\n                      </label>\n                      <input\n                        type='text'\n                        value={formData.title}\n                        onChange={e =>\n                          setFormData(prev => ({\n                            ...prev,\n                            title: e.target.value,\n                          }))\n                        }\n                        placeholder='Enter task title...'\n                        className={`w-full p-3 rounded-lg border transition-colors duration-300 ${\n                          isDark\n                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                            : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                        }`}\n                      />\n                    </div>\n\n                    <div className='grid grid-cols-2 gap-4'>\n                      <div>\n                        <label\n                          className={`block text-sm font-medium mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                        >\n                          Category\n                        </label>\n                        <select\n                          value={formData.category}\n                          onChange={e =>\n                            setFormData(prev => ({\n                              ...prev,\n                              category: e.target.value,\n                            }))\n                          }\n                          className={`w-full p-3 rounded-lg border transition-colors duration-300 ${\n                            isDark\n                              ? 'bg-gray-700 border-gray-600 text-white'\n                              : 'bg-white border-gray-300 text-gray-900'\n                          }`}\n                        >\n                          <option value='react'>React</option>\n                          <option value='javascript'>JavaScript</option>\n                          <option value='css'>CSS</option>\n                          <option value='html'>HTML</option>\n                          <option value='typescript'>TypeScript</option>\n                          <option value='vue'>Vue.js</option>\n                          <option value='angular'>Angular</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label\n                          className={`block text-sm font-medium mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                        >\n                          Difficulty\n                        </label>\n                        <select\n                          value={formData.difficulty}\n                          onChange={e =>\n                            setFormData(prev => ({\n                              ...prev,\n                              difficulty: e.target.value as\n                                | 'easy'\n                                | 'medium'\n                                | 'hard',\n                            }))\n                          }\n                          className={`w-full p-3 rounded-lg border transition-colors duration-300 ${\n                            isDark\n                              ? 'bg-gray-700 border-gray-600 text-white'\n                              : 'bg-white border-gray-300 text-gray-900'\n                          }`}\n                        >\n                          <option value='easy'>Easy</option>\n                          <option value='medium'>Medium</option>\n                          <option value='hard'>Hard</option>\n                        </select>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label\n                        className={`block text-sm font-medium mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                      >\n                        Tags\n                      </label>\n                      <div className='space-y-2'>\n                        {formData.tags.map((tag, index) => (\n                          <div key={index} className='flex items-center gap-2'>\n                            <input\n                              type='text'\n                              value={tag}\n                              onChange={e => {\n                                const newTags = [...formData.tags];\n                                newTags[index] = e.target.value;\n                                setFormData(prev => ({\n                                  ...prev,\n                                  tags: newTags,\n                                }));\n                              }}\n                              className={`flex-1 p-2 rounded border transition-colors duration-300 ${\n                                isDark\n                                  ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                                  : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                              }`}\n                              placeholder={`Tag ${index + 1}`}\n                            />\n                            <button\n                              onClick={() => {\n                                const newTags = formData.tags.filter(\n                                  (_, i) => i !== index\n                                );\n                                setFormData(prev => ({\n                                  ...prev,\n                                  tags: newTags,\n                                }));\n                              }}\n                              className={`p-2 transition-colors ${\n                                isDark\n                                  ? 'text-red-400 hover:text-red-300'\n                                  : 'text-red-600 hover:text-red-500'\n                              }`}\n                            >\n                              <X className='w-4 h-4' />\n                            </button>\n                          </div>\n                        ))}\n                        <button\n                          onClick={() =>\n                            setFormData(prev => ({\n                              ...prev,\n                              tags: [...prev.tags, ''],\n                            }))\n                          }\n                          className={`w-full p-2 border-2 border-dashed rounded-lg transition-colors ${\n                            isDark\n                              ? 'border-gray-600 text-gray-400 hover:border-gray-500 hover:text-gray-300'\n                              : 'border-gray-300 text-gray-500 hover:border-gray-400 hover:text-gray-600'\n                          }`}\n                        >\n                          <Plus className='w-4 h-4 mx-auto' />\n                          Add Tag\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Task Info Display */}\n                <div>\n                  <h2\n                    className={`text-2xl font-bold mb-2 ${isDark ? 'text-white' : 'text-gray-900'}`}\n                  >\n                    {formData.title || 'Untitled Task'}\n                  </h2>\n                  <div\n                    className={`flex items-center gap-4 text-sm mb-4 ${\n                      isDark ? 'text-gray-400' : 'text-gray-600'\n                    }`}\n                  >\n                    <span className='flex items-center gap-1'>\n                      <Code className='w-4 h-4' />\n                      {formData.category}\n                    </span>\n                    <span className='flex items-center gap-1'>\n                      <Flame className='w-4 h-4' />\n                      {formData.difficulty}\n                    </span>\n                    <span className='flex items-center gap-1'>\n                      <Clock className='w-4 h-4' />\n                      5-10 minutes\n                    </span>\n                  </div>\n                </div>\n\n                {/* Description */}\n                <div>\n                  <h3\n                    className={`text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'}`}\n                  >\n                    Description\n                  </h3>\n                  {mode === 'view' ? (\n                    <p\n                      className={`leading-relaxed ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                    >\n                      {formData.description || 'No description provided.'}\n                    </p>\n                  ) : (\n                    <textarea\n                      value={formData.description}\n                      onChange={e =>\n                        setFormData(prev => ({\n                          ...prev,\n                          description: e.target.value,\n                        }))\n                      }\n                      placeholder='Enter task description...'\n                      className={`w-full p-3 rounded-lg border transition-colors duration-300 ${\n                        isDark\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                          : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                      }`}\n                      rows={4}\n                    />\n                  )}\n                </div>\n\n                {/* Requirements */}\n                <div>\n                  <h3\n                    className={`text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'}`}\n                  >\n                    Requirements\n                  </h3>\n                  {mode === 'view' ? (\n                    <div\n                      className={`rounded-lg p-4 ${isDark ? 'bg-gray-900' : 'bg-gray-100'}`}\n                    >\n                      <pre\n                        className={`text-sm overflow-x-auto ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                      >\n                        {formData.requirements || 'No requirements provided.'}\n                      </pre>\n                    </div>\n                  ) : (\n                    <textarea\n                      value={formData.requirements}\n                      onChange={e =>\n                        setFormData(prev => ({\n                          ...prev,\n                          requirements: e.target.value,\n                        }))\n                      }\n                      placeholder='Enter task requirements...'\n                      className={`w-full p-3 rounded-lg border transition-colors duration-300 ${\n                        isDark\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                          : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                      }`}\n                      rows={4}\n                    />\n                  )}\n                </div>\n\n                {/* Hints */}\n                <div>\n                  <h3\n                    className={`text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'}`}\n                  >\n                    Hints\n                  </h3>\n                  {mode === 'view' ? (\n                    <ul className='space-y-2'>\n                      {formData.hints.map((hint, index) => (\n                        <li\n                          key={index}\n                          className={`flex items-start gap-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                        >\n                          <AlertCircle className='w-4 h-4 mt-1 flex-shrink-0 text-blue-400' />\n                          <span>{hint}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  ) : (\n                    <div className='space-y-2'>\n                      {formData.hints.map((hint, index) => (\n                        <div key={index} className='flex items-center gap-2'>\n                          <input\n                            type='text'\n                            value={hint}\n                            onChange={e => {\n                              const newHints = [...formData.hints];\n                              newHints[index] = e.target.value;\n                              setFormData(prev => ({\n                                ...prev,\n                                hints: newHints,\n                              }));\n                            }}\n                            className={`flex-1 p-2 rounded border transition-colors duration-300 ${\n                              isDark\n                                ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                                : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                            }`}\n                            placeholder={`Hint ${index + 1}`}\n                          />\n                          <button\n                            onClick={() => {\n                              const newHints = formData.hints.filter(\n                                (_, i) => i !== index\n                              );\n                              setFormData(prev => ({\n                                ...prev,\n                                hints: newHints,\n                              }));\n                            }}\n                            className={`p-2 transition-colors ${\n                              isDark\n                                ? 'text-red-400 hover:text-red-300'\n                                : 'text-red-600 hover:text-red-500'\n                            }`}\n                          >\n                            <X className='w-4 h-4' />\n                          </button>\n                        </div>\n                      ))}\n                      <button\n                        onClick={() =>\n                          setFormData(prev => ({\n                            ...prev,\n                            hints: [...prev.hints, ''],\n                          }))\n                        }\n                        className={`w-full p-2 border-2 border-dashed rounded-lg transition-colors ${\n                          isDark\n                            ? 'border-gray-600 text-gray-400 hover:border-gray-500 hover:text-gray-300'\n                            : 'border-gray-300 text-gray-500 hover:border-gray-400 hover:text-gray-600'\n                        }`}\n                      >\n                        <Plus className='w-4 h-4 mx-auto' />\n                        Add Hint\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'solution' && (\n              <div>\n                <h3\n                  className={`text-lg font-semibold mb-4 ${isDark ? 'text-white' : 'text-gray-900'}`}\n                >\n                  Solution\n                </h3>\n                {mode === 'view' ? (\n                  <div\n                    className={`rounded-lg p-4 ${isDark ? 'bg-gray-900' : 'bg-gray-100'}`}\n                  >\n                    <pre\n                      className={`text-sm overflow-x-auto ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                    >\n                      <code>\n                        {formData.files.find(f => f.isEntryPoint)?.content ||\n                          'No solution available.'}\n                      </code>\n                    </pre>\n                  </div>\n                ) : (\n                  <div className='space-y-4'>\n                    <div>\n                      <label\n                        className={`block text-sm font-medium mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                      >\n                        Solution Code\n                      </label>\n                      <textarea\n                        value={\n                          formData.files.find(f => f.isEntryPoint)?.content ||\n                          ''\n                        }\n                        onChange={e => {\n                          const entryPointFile = formData.files.find(\n                            f => f.isEntryPoint\n                          );\n                          if (entryPointFile) {\n                            const updatedFiles = formData.files.map(f =>\n                              f.id === entryPointFile.id\n                                ? { ...f, content: e.target.value }\n                                : f\n                            );\n                            setFormData(prev => ({\n                              ...prev,\n                              files: updatedFiles,\n                            }));\n                          }\n                        }}\n                        placeholder='Enter solution code...'\n                        className={`w-full p-3 rounded-lg border transition-colors duration-300 font-mono text-sm ${\n                          isDark\n                            ? 'bg-gray-800 border-gray-600 text-white placeholder-gray-400'\n                            : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                        }`}\n                        rows={15}\n                      />\n                    </div>\n                    <div>\n                      <label\n                        className={`block text-sm font-medium mb-2 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                      >\n                        Solution Description\n                      </label>\n                      <textarea\n                        value={formData.solution || ''}\n                        onChange={e =>\n                          setFormData(prev => ({\n                            ...prev,\n                            solution: e.target.value,\n                          }))\n                        }\n                        placeholder='Enter solution description...'\n                        className={`w-full p-3 rounded-lg border transition-colors duration-300 ${\n                          isDark\n                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                            : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                        }`}\n                        rows={4}\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Main Editor Panel */}\n        <div\n          className={`flex flex-col overflow-hidden relative group transition-colors duration-300 ${\n            isDark ? 'bg-gray-900' : 'bg-gray-50'\n          }`}\n          style={{\n            width: `${100 - leftPanelWidth - rightPanelWidth}%`,\n            minWidth: '400px',\n          }}\n        >\n          {/* Resize Handle */}\n          <div\n            className='absolute right-0 top-0 bottom-0 w-1 bg-transparent hover:bg-blue-500 cursor-col-resize z-30 transition-colors select-none'\n            onMouseDown={e => handleMouseDown(e, 'right')}\n          ></div>\n\n          {/* Editor Layout */}\n          <div className='flex h-full'>\n            {/* File Explorer Sidebar */}\n            <div\n              className={`border-r transition-all duration-300 ${\n                showFileExplorer ? 'w-64' : 'w-0 overflow-hidden'\n              } ${isDark ? 'bg-gray-800 border-gray-700' : 'bg-gray-100 border-gray-200'}`}\n            >\n              {showFileExplorer && (\n                <div className='h-full flex flex-col'>\n                  {/* File Explorer Header */}\n                  <div\n                    className={`px-3 py-2 border-b flex items-center justify-between ${\n                      isDark\n                        ? 'bg-gray-700 border-gray-700'\n                        : 'bg-gray-200 border-gray-200'\n                    }`}\n                  >\n                    <div className='flex items-center gap-2'>\n                      <div\n                        className={`w-4 h-4 rounded flex items-center justify-center ${\n                          isDark ? 'bg-gray-500' : 'bg-gray-400'\n                        }`}\n                      >\n                        <Plus className='w-3 h-3 text-white' />\n                      </div>\n                      <span\n                        className={`text-sm font-medium ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                      >\n                        Explorer\n                      </span>\n                    </div>\n                    <button\n                      onClick={() => setShowFileExplorer(false)}\n                      className={`p-1 transition-colors ${\n                        isDark\n                          ? 'text-gray-400 hover:text-white'\n                          : 'text-gray-600 hover:text-gray-900'\n                      }`}\n                    >\n                      <X className='w-3 h-3' />\n                    </button>\n                  </div>\n\n                  {/* File Tree */}\n                  <div\n                    className={`flex-1 p-2 text-sm overflow-y-auto ${\n                      isDark ? 'text-gray-300' : 'text-gray-700'\n                    }`}\n                  >\n                    <div className='space-y-1'>\n                      {fileTree.map(folder => (\n                        <div key={folder.id}>\n                          <div\n                            className={`flex items-center gap-2 py-1 px-2 cursor-pointer hover:bg-gray-700 rounded transition-colors ${\n                              isDark\n                                ? 'text-gray-300 hover:bg-gray-700'\n                                : 'text-gray-700 hover:bg-gray-200'\n                            }`}\n                            onClick={() => toggleFolder(folder.id)}\n                          >\n                            {expandedFolders.has(folder.id) ? (\n                              <FolderOpen className='w-4 h-4' />\n                            ) : (\n                              <Folder className='w-4 h-4' />\n                            )}\n                            <span>{folder.name}</span>\n                          </div>\n\n                          {expandedFolders.has(folder.id) &&\n                            folder.children && (\n                              <div className='ml-6 space-y-1'>\n                                {folder.children.map(file => (\n                                  <div\n                                    key={file.id}\n                                    className={`flex items-center gap-2 py-1 px-2 rounded cursor-pointer transition-colors ${\n                                      activeFile === file.id\n                                        ? 'bg-blue-600 text-white'\n                                        : isDark\n                                          ? 'text-gray-300 hover:bg-gray-700'\n                                          : 'text-gray-700 hover:bg-gray-200'\n                                    }`}\n                                    onClick={() => openFile(file.id)}\n                                  >\n                                    {getFileIcon(file.fileType || 'tsx')}\n                                    <span>{file.name}</span>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Editor Content */}\n            <div className='flex-1 flex flex-col'>\n              {/* Editor Header with File Tabs */}\n              <div\n                className={`border-b flex items-center transition-colors duration-300 ${\n                  isDark\n                    ? 'bg-gray-800 border-gray-700'\n                    : 'bg-white border-gray-200'\n                }`}\n              >\n                {/* File Explorer Toggle */}\n                <button\n                  onClick={() => setShowFileExplorer(!showFileExplorer)}\n                  className={`p-2 border-r transition-colors ${\n                    isDark\n                      ? 'text-gray-400 hover:text-white border-gray-700'\n                      : 'text-gray-600 hover:text-gray-900 border-gray-200'\n                  }`}\n                  title={`File Explorer: ${showFileExplorer ? 'Open' : 'Closed'}`}\n                >\n                  <Folder className='w-4 h-4' />\n                </button>\n\n                {/* File Tabs */}\n                <div className='flex items-center'>\n                  {openFiles.map(file => (\n                    <div\n                      key={file.id}\n                      className={`flex items-center gap-2 px-3 py-2 border-r cursor-pointer transition-colors ${\n                        activeFile === file.id\n                          ? isDark\n                            ? 'bg-gray-900 text-white border-gray-700'\n                            : 'bg-gray-50 text-gray-900 border-gray-200'\n                          : isDark\n                            ? 'bg-gray-800 text-gray-300 hover:bg-gray-750 border-gray-700'\n                            : 'bg-white text-gray-600 hover:bg-gray-100 border-gray-200'\n                      }`}\n                      onClick={() => setActiveFile(file.id)}\n                    >\n                      {getFileIcon(file.type)}\n                      <span className='text-sm'>{file.name}</span>\n                      <button\n                        className={`p-1 rounded ml-1 transition-colors ${\n                          isDark ? 'hover:bg-gray-600' : 'hover:bg-gray-200'\n                        }`}\n                        onClick={e => {\n                          e.stopPropagation();\n                          handleCloseFile(file.id);\n                        }}\n                      >\n                        <X className='w-3 h-3' />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Editor Actions */}\n                <div className='ml-auto flex items-center gap-2 px-4'>\n                  <button\n                    onClick={handleCopyCode}\n                    className={`p-1 transition-colors ${\n                      isDark\n                        ? 'text-gray-400 hover:text-white'\n                        : 'text-gray-600 hover:text-gray-900'\n                    }`}\n                  >\n                    {copied ? (\n                      <Check className='w-4 h-4' />\n                    ) : (\n                      <Copy className='w-4 h-4' />\n                    )}\n                  </button>\n                  <button\n                    onClick={handleReset}\n                    className={`p-1 transition-colors ${\n                      isDark\n                        ? 'text-gray-400 hover:text-white'\n                        : 'text-gray-600 hover:text-gray-900'\n                    }`}\n                  >\n                    <RotateCcw className='w-4 h-4' />\n                  </button>\n                  <button\n                    className={`p-1 transition-colors ${\n                      isDark\n                        ? 'text-gray-400 hover:text-white'\n                        : 'text-gray-600 hover:text-gray-900'\n                    }`}\n                  >\n                    <MoreVertical className='w-4 h-4' />\n                  </button>\n                </div>\n              </div>\n\n              {/* Monaco Editor */}\n              <div className='flex-1'>\n                <Editor\n                  height='100%'\n                  language={getCurrentLanguage()}\n                  value={getCurrentFileContent()}\n                  onChange={value => setCurrentFileContent(value || '')}\n                  theme={isDark ? 'vs-dark' : 'vs-light'}\n                  options={{\n                    fontSize: 14,\n                    lineNumbers: 'on',\n                    roundedSelection: false,\n                    scrollBeyondLastLine: false,\n                    automaticLayout: true,\n                    minimap: { enabled: false },\n                    wordWrap: 'on',\n                    tabSize: 2,\n                    insertSpaces: true,\n                    renderWhitespace: 'selection',\n                    cursorBlinking: 'blink',\n                    cursorStyle: 'line',\n                    selectOnLineNumbers: true,\n                    folding: true,\n                    foldingStrategy: 'indentation',\n                    showFoldingControls: 'always',\n                    bracketPairColorization: { enabled: true },\n                    guides: {\n                      bracketPairs: true,\n                      indentation: true,\n                    },\n                  }}\n                  beforeMount={monaco => {\n                    monaco.languages.typescript.typescriptDefaults.setCompilerOptions(\n                      {\n                        target: monaco.languages.typescript.ScriptTarget.ES2020,\n                        allowNonTsExtensions: true,\n                        moduleResolution:\n                          monaco.languages.typescript.ModuleResolutionKind\n                            .NodeJs,\n                        module: monaco.languages.typescript.ModuleKind.CommonJS,\n                        noEmit: true,\n                        esModuleInterop: true,\n                        jsx: monaco.languages.typescript.JsxEmit.React,\n                        reactNamespace: 'React',\n                        allowJs: true,\n                        typeRoots: ['node_modules/@types'],\n                      }\n                    );\n\n                    monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions(\n                      {\n                        noSemanticValidation: true,\n                        noSyntaxValidation: false,\n                        noSuggestionDiagnostics: true,\n                      }\n                    );\n\n                    monaco.languages.typescript.typescriptDefaults.addExtraLib(\n                      `declare module 'react' {\n                        export = React;\n                        export as namespace React;\n                        declare namespace React {\n                          type ReactElement = any;\n                          type ReactNode = any;\n                          function createElement(type: any, props?: any, ...children: any[]): ReactElement;\n                          function useState<T>(initialState: T): [T, (value: T) => void];\n                          function useEffect(effect: () => void, deps?: any[]): void;\n                          function useCallback<T extends (...args: any[]) => any>(callback: T, deps?: any[]): T;\n                          function useMemo<T>(factory: () => T, deps?: any[]): T;\n                        }\n                      }`,\n                      'file:///node_modules/@types/react/index.d.ts'\n                    );\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Browser Preview */}\n        <div\n          className={`border-l flex flex-col overflow-hidden relative group transition-colors duration-300 ${\n            isDark ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n          }`}\n          style={{\n            width: `${rightPanelWidth}%`,\n            minWidth: '300px',\n            maxWidth: '60%',\n          }}\n        >\n          {/* Browser Header */}\n          <div\n            className={`px-4 py-2 flex items-center justify-between ${\n              isDark ? 'bg-gray-700' : 'bg-gray-100'\n            }`}\n          >\n            <div className='flex items-center gap-2'>\n              <button\n                className={`p-1 transition-colors ${\n                  isDark\n                    ? 'text-gray-400 hover:text-white'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                <ArrowLeft className='w-3 h-3 rotate-180' />\n              </button>\n              <button\n                className={`p-1 transition-colors ${\n                  isDark\n                    ? 'text-gray-400 hover:text-white'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                <ArrowLeft className='w-3 h-3' />\n              </button>\n              <button\n                className={`p-1 transition-colors ${\n                  isDark\n                    ? 'text-gray-400 hover:text-white'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                <RotateCcw className='w-3 h-3' />\n              </button>\n              <div\n                className={`rounded px-2 py-1 text-xs ${\n                  isDark\n                    ? 'bg-gray-600 text-gray-300'\n                    : 'bg-gray-200 text-gray-700'\n                }`}\n              >\n                localhost:3000\n              </div>\n            </div>\n            <button\n              onClick={() => setShowPreview(!showPreview)}\n              className={`p-1 transition-colors ${\n                isDark\n                  ? 'text-gray-400 hover:text-white'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              {showPreview ? (\n                <Eye className='w-4 h-4' />\n              ) : (\n                <Eye className='w-4 h-4' />\n              )}\n            </button>\n          </div>\n\n          {/* Browser/Console Tabs */}\n          <div\n            className={`flex border-b ${\n              isDark ? 'border-gray-700' : 'border-gray-200'\n            }`}\n          >\n            <button\n              onClick={() => setActiveBrowserTab('browser')}\n              className={`px-4 py-2 text-sm font-medium transition-colors ${\n                activeBrowserTab === 'browser'\n                  ? isDark\n                    ? 'bg-gray-800 text-white border-b-2 border-blue-500'\n                    : 'bg-white text-gray-900 border-b-2 border-blue-500'\n                  : isDark\n                    ? 'text-gray-400 hover:text-white'\n                    : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              Browser\n            </button>\n            <button\n              onClick={() => setActiveBrowserTab('console')}\n              className={`px-4 py-2 text-sm font-medium transition-colors ${\n                activeBrowserTab === 'console'\n                  ? isDark\n                    ? 'bg-gray-800 text-white border-b-2 border-blue-500'\n                    : 'bg-white text-gray-900 border-b-2 border-blue-500'\n                  : isDark\n                    ? 'text-gray-400 hover:text-white'\n                    : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              Console\n            </button>\n          </div>\n\n          {/* Preview Content */}\n          <div className='flex-1 bg-white relative flex flex-col'>\n            {activeBrowserTab === 'browser' ? (\n              showPreview ? (\n                <iframe\n                  ref={iframeRef}\n                  title='live-preview'\n                  className='flex-1 bg-white border-0'\n                  srcDoc={previewSrcDoc}\n                  sandbox='allow-scripts allow-same-origin'\n                  onLoad={() => console.log('Preview loaded successfully')}\n                  onError={e => console.error('Preview error:', e)}\n                />\n              ) : (\n                <div\n                  className={`flex-1 flex items-center justify-center ${\n                    isDark ? 'text-gray-400' : 'text-gray-600'\n                  }`}\n                >\n                  <div className='text-center'>\n                    <Eye className='w-12 h-12 mx-auto mb-4 opacity-50' />\n                    <p>Preview hidden</p>\n                  </div>\n                </div>\n              )\n            ) : (\n              <div\n                className={`flex-1 overflow-y-auto ${\n                  isDark ? 'bg-gray-900' : 'bg-gray-100'\n                }`}\n              >\n                <div\n                  className={`px-3 py-2 border-b flex items-center justify-between ${\n                    isDark ? 'border-gray-700' : 'border-gray-200'\n                  }`}\n                >\n                  <div className='flex items-center gap-2'>\n                    <div className='w-2 h-2 bg-green-500 rounded-full'></div>\n                    <span\n                      className={`text-xs ${isDark ? 'text-gray-300' : 'text-gray-700'}`}\n                    >\n                      Console\n                    </span>\n                  </div>\n                  <button\n                    onClick={() => setConsoleOutput([])}\n                    className={`text-xs transition-colors ${\n                      isDark\n                        ? 'text-gray-400 hover:text-white'\n                        : 'text-gray-600 hover:text-gray-900'\n                    }`}\n                  >\n                    Clear\n                  </button>\n                </div>\n                <div\n                  className={`px-3 py-2 text-xs font-mono ${\n                    isDark ? 'text-gray-300' : 'text-gray-700'\n                  }`}\n                >\n                  {consoleOutput.length > 0 ? (\n                    consoleOutput.map((line, index) => {\n                      const isError = line.includes('[ERROR]');\n                      const isWarning = line.includes('[WARN]');\n                      const isInfo = line.includes('[INFO]');\n\n                      return (\n                        <div\n                          key={index}\n                          className={`mb-1 ${\n                            isError\n                              ? 'text-red-400'\n                              : isWarning\n                                ? 'text-yellow-400'\n                                : isInfo\n                                  ? 'text-blue-400'\n                                  : isDark\n                                    ? 'text-gray-300'\n                                    : 'text-gray-700'\n                          }`}\n                        >\n                          {line}\n                        </div>\n                      );\n                    })\n                  ) : (\n                    <div\n                      className={`${isDark ? 'text-gray-500' : 'text-gray-500'}`}\n                    >\n                      No console output\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["FrontendTaskEditor","task","onSave","onCancel","mode","theme","setTheme","useState","isDark","setIsDark","formData","setFormData","title","description","requirements","solution","category","difficulty","estimatedTime","author","starterCode","tags","hints","files","is_active","leftPanelWidth","setLeftPanelWidth","rightPanelWidth","setRightPanelWidth","isResizing","setIsResizing","resizeStartX","setResizeStartX","activeFile","setActiveFile","fileTree","setFileTree","expandedFolders","setExpandedFolders","Set","openFiles","setOpenFiles","showFileExplorer","setShowFileExplorer","showPreview","setShowPreview","showConsole","setShowConsole","consoleOutput","setConsoleOutput","copied","setCopied","activeTab","setActiveTab","activeBrowserTab","setActiveBrowserTab","newHint","setNewHint","newTag","setNewTag","newFileName","setNewFileName","newFolderName","setNewFolderName","showAddFile","setShowAddFile","showAddFolder","setShowAddFolder","iframeRef","useRef","useEffect","mediaQuery","window","matchMedia","updateTheme","matches","addEventListener","removeEventListener","length","map","file","id","name","type","content","fileType","isEntryPoint","children","filter","f","find","defaultFiles","handleMouseDown","e","panel","preventDefault","clientX","handleMouseMove","deltaX","containerWidth","innerWidth","deltaPercent","prev","Math","max","min","handleMouseUp","document","body","style","cursor","userSelect","handleMessage","event","data","slice","message","addFile","Date","now","newFile","srcFolder","folder","addFolder","newFolder","deleteFile","fileId","child","remainingFiles","updateFileContent","toggleFolder","folderId","newSet","has","delete","add","openFile","some","handleCloseFile","getFileIcon","div","className","FileText","getCurrentFileContent","setCurrentFileContent","value","getCurrentLanguage","previewSrcDoc","useMemo","appFile","stylesFile","indexFile","reactCode","cssCode","htmlCode","cssText","includes","cleanReactCode","replace","jsText","handleSave","flatMap","taskData","handleCopyCode","navigator","clipboard","writeText","setTimeout","err","console","error","handleReset","getCategoryIcon","toLowerCase","Code","button","onClick","ArrowLeft","h1","span","Flame","Sun","Moon","Monitor","Save","width","minWidth","maxWidth","onMouseDown","label","input","onChange","target","placeholder","select","option","tag","index","newTags","_","i","X","Plus","h2","Clock","h3","p","textarea","rows","pre","ul","hint","li","AlertCircle","newHints","code","entryPointFile","updatedFiles","FolderOpen","Folder","stopPropagation","Check","Copy","RotateCcw","MoreVertical","Editor","height","language","options","fontSize","lineNumbers","roundedSelection","scrollBeyondLastLine","automaticLayout","minimap","enabled","wordWrap","tabSize","insertSpaces","renderWhitespace","cursorBlinking","cursorStyle","selectOnLineNumbers","folding","foldingStrategy","showFoldingControls","bracketPairColorization","guides","bracketPairs","indentation","beforeMount","monaco","languages","typescript","typescriptDefaults","setCompilerOptions","ScriptTarget","ES2020","allowNonTsExtensions","moduleResolution","ModuleResolutionKind","NodeJs","module","ModuleKind","CommonJS","noEmit","esModuleInterop","jsx","JsxEmit","React","reactNamespace","allowJs","typeRoots","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","noSuggestionDiagnostics","addExtraLib","Eye","iframe","ref","srcDoc","sandbox","onLoad","log","onError","line","isError","isWarning","isInfo"],"mappings":"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"}
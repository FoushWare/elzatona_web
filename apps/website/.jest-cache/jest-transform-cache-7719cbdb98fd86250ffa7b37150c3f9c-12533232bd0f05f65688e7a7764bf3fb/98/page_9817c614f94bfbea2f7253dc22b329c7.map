{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/content-management/page.tsx"],"sourcesContent":["'use client';\n\nimport React, {\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n  Suspense,\n} from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\nconst supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n\nimport {\n  useCards,\n  usePlans,\n  useCategories,\n  useTopics,\n  useQuestionsUnified,\n  useCreateCard,\n  useUpdateCard,\n  useDeleteCard,\n  useCreatePlan,\n  useUpdatePlan,\n  useDeletePlan,\n  useCreateCategory,\n  useUpdateCategory,\n  useDeleteCategory,\n  useCreateTopic,\n  useUpdateTopic,\n  useDeleteTopic,\n  useCreateQuestion,\n  useUpdateQuestion,\n  useDeleteQuestion,\n} from '@elzatona/shared-hooks';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useNotificationActions } from '@elzatona/shared-hooks';\nimport { BulkOperations } from '@elzatona/shared-components';\nimport { LearningCard } from '@elzatona/shared-types';\nimport { UnifiedQuestion } from '@elzatona/shared-types';\nimport { useToast, ToastContainer } from '@elzatona/shared-components';\n\n// Define types for other entities (these should be moved to proper type files)\ntype LearningPlan = any;\ntype Category = any;\ntype Topic = any;\n\n// Types for API responses\ninterface ApiResponse<T> {\n  success: boolean;\n  data: T;\n  count?: number;\n  error?: string;\n}\n\ninterface BasicCard {\n  id: string;\n  name: string;\n  description: string;\n  color: string;\n  icon: string;\n  order: number;\n}\n\ninterface BasicPlan {\n  id: string;\n  name: string;\n  description: string;\n  duration: string;\n  difficulty: string;\n  color: string;\n  estimatedHours: number;\n}\n\n// Lazy load UI components to improve initial bundle size\nconst Button = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.Button,\n  }))\n);\nconst Input = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.Input,\n  }))\n);\nconst Badge = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.Badge,\n  }))\n);\nconst Card = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.Card,\n  }))\n);\nconst CardContent = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.CardContent,\n  }))\n);\nconst CardHeader = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.CardHeader,\n  }))\n);\nconst CardTitle = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.CardTitle,\n  }))\n);\nconst Select = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.Select,\n  }))\n);\nconst SelectContent = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.SelectContent,\n  }))\n);\nconst SelectItem = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.SelectItem,\n  }))\n);\nconst SelectTrigger = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.SelectTrigger,\n  }))\n);\nconst SelectValue = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.SelectValue,\n  }))\n);\nimport { Modal } from '@elzatona/shared-components';\n\n// Import icons with tree shaking\nimport {\n  ChevronDown,\n  ChevronRight,\n  Plus,\n  Edit,\n  Trash2,\n  MessageSquare,\n  BookOpen,\n  Layers,\n  Puzzle,\n  Network,\n  Users,\n  Calendar,\n  Target,\n} from 'lucide-react';\n\n// Lazy load forms to reduce initial bundle size\nconst CategoryForm = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.CategoryForm,\n  }))\n);\nconst TopicForm = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.TopicForm,\n  }))\n);\nconst QuestionForm = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.QuestionForm,\n  }))\n);\nconst CardForm = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.CardForm,\n  }))\n);\nconst PlanForm = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.PlanForm,\n  }))\n);\nconst EmptyState = React.lazy(() =>\n  import('@elzatona/shared-components').then(module => ({\n    default: module.EmptyState,\n  }))\n);\n\ninterface Stats {\n  totalCards: number;\n  totalPlans: number;\n  totalCategories: number;\n  totalTopics: number;\n  totalQuestions: number;\n}\n\n// Memoized constants to prevent recreation on each render\nconst CARD_ICONS = {\n  'Core Technologies': { icon: BookOpen, color: '#3B82F6' },\n  'Framework Questions': { icon: Layers, color: '#10B981' },\n  'Problem Solving': { icon: Puzzle, color: '#F59E0B' },\n  'System Design': { icon: Network, color: '#EF4444' },\n} as const;\n\n// Loading skeleton component for better UX\nconst LoadingSkeleton = () => (\n  <div className='animate-pulse'>\n    <div className='h-4 bg-gray-200 rounded w-3/4 mb-2'></div>\n    <div className='h-3 bg-gray-200 rounded w-1/2'></div>\n  </div>\n);\n\n// Memoized stats card component\nconst StatsCard = React.memo(\n  ({\n    icon: Icon,\n    label,\n    value,\n    color,\n  }: {\n    icon: React.ComponentType<{\n      className?: string;\n      style?: React.CSSProperties;\n    }>;\n    label: string;\n    value: number;\n    color: string;\n  }) => (\n    <Card>\n      <CardContent className='p-4'>\n        <div className='flex items-center'>\n          <Icon className='h-8 w-8 mr-3' style={{ color }} />\n          <div>\n            <p className='text-sm font-medium text-gray-600 dark:text-gray-400'>\n              {label}\n            </p>\n            <p className='text-2xl font-bold text-gray-900 dark:text-white'>\n              {value}\n            </p>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n);\n\nStatsCard.displayName = 'StatsCard';\n\nexport default function UnifiedAdminPage() {\n  // Use TanStack Query hooks for data fetching\n  const {\n    data: cardsData,\n    isLoading: cardsLoading,\n    error: cardsError,\n  } = useCards();\n\n  const {\n    data: plansData,\n    isLoading: plansLoading,\n    error: plansError,\n  } = usePlans();\n\n  const {\n    data: categoriesData,\n    isLoading: categoriesLoading,\n    error: categoriesError,\n  } = useCategories();\n\n  const {\n    data: topicsData,\n    isLoading: topicsLoading,\n    error: topicsError,\n  } = useTopics();\n\n  const {\n    data: questionsData,\n    isLoading: questionsLoading,\n    error: questionsError,\n  } = useQuestionsUnified();\n\n  // Mutation hooks\n  const createCardMutation = useCreateCard();\n  const updateCardMutation = useUpdateCard();\n  const deleteCardMutation = useDeleteCard();\n  const createPlanMutation = useCreatePlan();\n  const updatePlanMutation = useUpdatePlan();\n  const deletePlanMutation = useDeletePlan();\n  const createCategoryMutation = useCreateCategory();\n  const updateCategoryMutation = useUpdateCategory();\n  const deleteCategoryMutation = useDeleteCategory();\n  const createTopicMutation = useCreateTopic();\n  const updateTopicMutation = useUpdateTopic();\n  const deleteTopicMutation = useDeleteTopic();\n  const createQuestionMutation = useCreateQuestion();\n  const updateQuestionMutation = useUpdateQuestion();\n  const deleteQuestionMutation = useDeleteQuestion();\n\n  // Notification actions\n  const { notifyContentUpdate, notifyAdminAction } = useNotificationActions();\n\n  // Query client for manual invalidation\n  const queryClient = useQueryClient();\n\n  // Toast notifications\n  const { showSuccess, showError, toasts, removeToast } = useToast();\n\n  // Debug logging for TanStack Query\n  console.log('TanStack Query Status:', {\n    cardsLoading,\n    cardsError,\n    cardsData: cardsData\n      ? { count: cardsData.count, dataLength: cardsData.data?.length }\n      : null,\n    plansLoading,\n    plansError,\n    plansData: plansData\n      ? { count: plansData.count, dataLength: plansData.data?.length }\n      : null,\n    categoriesLoading,\n    categoriesError,\n    categoriesData: categoriesData\n      ? { count: categoriesData.count, dataLength: categoriesData.data?.length }\n      : null,\n    topicsLoading,\n    topicsError,\n    topicsData: topicsData\n      ? { count: topicsData.count, dataLength: topicsData.data?.length }\n      : null,\n    questionsLoading,\n    questionsError,\n    questionsData: questionsData\n      ? {\n          count: questionsData.pagination?.totalCount || 0,\n          dataLength: questionsData.data?.length,\n        }\n      : null,\n  });\n\n  // Derived data\n  const cards = cardsData?.data || [];\n  const plans = plansData?.data || [];\n  const categories = categoriesData?.data || [];\n  const topics = topicsData?.data || [];\n  const questions = questionsData?.data || [];\n\n  // Force fresh data on mount\n  useEffect(() => {\n    console.log('üîÑ Force refreshing all queries on mount...');\n    queryClient.invalidateQueries({ queryKey: ['cards'] });\n    queryClient.invalidateQueries({ queryKey: ['plans'] });\n    queryClient.invalidateQueries({ queryKey: ['categories'] });\n    queryClient.invalidateQueries({ queryKey: ['topics'] });\n    queryClient.invalidateQueries({ queryKey: ['questionsUnified'] });\n  }, []); // Only run on mount\n\n  // Immediate retry on mount if no data\n  useEffect(() => {\n    console.log('üöÄ Component mounted, checking initial data...');\n\n    // If we have loading states but no data after a short delay, retry immediately\n    const immediateTimer = setTimeout(() => {\n      if (cardsLoading && !cardsData) {\n        console.log('üîÑ Immediate retry for cards');\n        queryClient.invalidateQueries({ queryKey: ['cards'] });\n      }\n      if (plansLoading && !plansData) {\n        console.log('üîÑ Immediate retry for plans');\n        queryClient.invalidateQueries({ queryKey: ['plans'] });\n      }\n    }, 500); // Very short delay for immediate retry\n\n    return () => clearTimeout(immediateTimer);\n  }, []); // Only run on mount\n\n  // Fallback mechanism - refetch if no data after initial load\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      console.log('üîç Checking data availability after 2 seconds...');\n\n      if (\n        !cardsLoading &&\n        (!cardsData || !cardsData.data || cardsData.data.length === 0)\n      ) {\n        console.log('üîÑ Refetching cards due to empty data');\n        queryClient.invalidateQueries({ queryKey: ['cards'] });\n      }\n      if (\n        !plansLoading &&\n        (!plansData || !plansData.data || plansData.data.length === 0)\n      ) {\n        console.log('üîÑ Refetching plans due to empty data');\n        queryClient.invalidateQueries({ queryKey: ['plans'] });\n      }\n      if (\n        !categoriesLoading &&\n        (!categoriesData ||\n          !categoriesData.data ||\n          categoriesData.data.length === 0)\n      ) {\n        console.log('üîÑ Refetching categories due to empty data');\n        queryClient.invalidateQueries({ queryKey: ['categories'] });\n      }\n      if (\n        !topicsLoading &&\n        (!topicsData || !topicsData.data || topicsData.data.length === 0)\n      ) {\n        console.log('üîÑ Refetching topics due to empty data');\n        queryClient.invalidateQueries({ queryKey: ['topics'] });\n      }\n      if (\n        !questionsLoading &&\n        (!questionsData ||\n          !questionsData.data ||\n          questionsData.data.length === 0)\n      ) {\n        console.log('üîÑ Refetching questions due to empty data');\n        queryClient.invalidateQueries({ queryKey: ['questionsUnified'] });\n      }\n    }, 2000); // Wait 2 seconds after component mount\n\n    return () => clearTimeout(timer);\n  }, [\n    cardsLoading,\n    cardsData,\n    plansLoading,\n    plansData,\n    categoriesLoading,\n    categoriesData,\n    topicsLoading,\n    topicsData,\n    questionsLoading,\n    questionsData,\n    queryClient,\n  ]);\n\n  // Loading state\n  const loading =\n    cardsLoading ||\n    plansLoading ||\n    categoriesLoading ||\n    topicsLoading ||\n    questionsLoading;\n\n  // Stats calculation\n  const stats = useMemo(\n    () => ({\n      totalCards: cardsData?.count || 0,\n      totalPlans: plansData?.count || 0,\n      totalCategories: categoriesData?.count || 0,\n      totalTopics: topicsData?.count || 0,\n      totalQuestions: questionsData?.pagination?.totalCount || 0,\n    }),\n    [cardsData, plansData, categoriesData, topicsData, questionsData]\n  );\n\n  // UI state\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCardType, setFilterCardType] = useState('all');\n  const [expandedCards, setExpandedCards] = useState<Set<string>>(new Set());\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(\n    new Set()\n  );\n  const [expandedTopics, setExpandedTopics] = useState<Set<string>>(new Set());\n  const [expandedPlans, setExpandedPlans] = useState<Set<string>>(new Set());\n\n  // Modal states\n  const [isCardModalOpen, setIsCardModalOpen] = useState(false);\n  const [isPlanModalOpen, setIsPlanModalOpen] = useState(false);\n  const [isCategoryModalOpen, setIsCategoryModalOpen] = useState(false);\n  const [isTopicModalOpen, setIsTopicModalOpen] = useState(false);\n  const [isQuestionModalOpen, setIsQuestionModalOpen] = useState(false);\n\n  // Confirmation modal states\n  const [isDeleteCardModalOpen, setIsDeleteCardModalOpen] = useState(false);\n  const [isDeletePlanModalOpen, setIsDeletePlanModalOpen] = useState(false);\n  const [isDeleteCategoryModalOpen, setIsDeleteCategoryModalOpen] =\n    useState(false);\n  const [isDeleteTopicModalOpen, setIsDeleteTopicModalOpen] = useState(false);\n  const [isDeleteQuestionModalOpen, setIsDeleteQuestionModalOpen] =\n    useState(false);\n\n  // Item to delete states\n  const [cardToDelete, setCardToDelete] = useState<LearningCard | null>(null);\n  const [planToDelete, setPlanToDelete] = useState<LearningPlan | null>(null);\n  const [categoryToDelete, setCategoryToDelete] = useState<Category | null>(\n    null\n  );\n  const [topicToDelete, setTopicToDelete] = useState<Topic | null>(null);\n  const [questionToDelete, setQuestionToDelete] =\n    useState<UnifiedQuestion | null>(null);\n\n  const [editingCard, setEditingCard] = useState<LearningCard | null>(null);\n  const [editingPlan, setEditingPlan] = useState<LearningPlan | null>(null);\n  const [editingCategory, setEditingCategory] = useState<Category | null>(null);\n  const [editingTopic, setEditingTopic] = useState<Topic | null>(null);\n  const [editingQuestion, setEditingQuestion] =\n    useState<UnifiedQuestion | null>(null);\n\n  // Questions state\n  const [questionsByTopic, setQuestionsByTopic] = useState<\n    Record<\n      string,\n      { id: string; title: string; difficulty: string; type: string }[]\n    >\n  >({});\n\n  // Bulk operations state\n  const [selectedCards, setSelectedCards] = useState<string[]>([]);\n  const [selectedPlans, setSelectedPlans] = useState<string[]>([]);\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\n  const [selectedTopics, setSelectedTopics] = useState<string[]>([]);\n  const [selectedQuestions, setSelectedQuestions] = useState<string[]>([]);\n  const [activeBulkSection, setActiveBulkSection] = useState<\n    'cards' | 'plans' | 'categories' | 'topics' | 'questions'\n  >('cards');\n\n  // CRUD handlers using TanStack Query mutations\n  const handleCreateCard = async (cardData: Partial<LearningCard>) => {\n    try {\n      await createCardMutation.mutateAsync(cardData);\n      await notifyContentUpdate('Learning Card', 'created');\n      showSuccess(\n        'Card Created Successfully',\n        `\"${cardData.title}\" has been created successfully.`\n      );\n      // Close modal on successful creation\n      setIsCardModalOpen(false);\n    } catch (error) {\n      console.error('Failed to create card:', error);\n      showError(\n        'Failed to Create Card',\n        'There was an error creating the card. Please try again.'\n      );\n    }\n  };\n\n  const handleUpdateCard = async (\n    card_id: string,\n    cardData: Partial<LearningCard>\n  ) => {\n    try {\n      await updateCardMutation.mutateAsync({ id: card_id, data: cardData });\n      await notifyContentUpdate('Learning Card', 'updated');\n      showSuccess(\n        'Card Updated Successfully',\n        `\"${cardData.title}\" has been updated successfully.`\n      );\n      // Close modal on successful update\n      setIsCardModalOpen(false);\n      setEditingCard(null);\n    } catch (error) {\n      console.error('Failed to update card:', error);\n      showError(\n        'Failed to Update Card',\n        'There was an error updating the card. Please try again.'\n      );\n    }\n  };\n\n  // Form submission wrappers\n  const handleCardFormSubmit = (data: any) => {\n    if (editingCard?.id) {\n      handleUpdateCard(editingCard.id, data);\n    } else {\n      handleCreateCard(data);\n    }\n  };\n\n  const handlePlanFormSubmit = (data: any) => {\n    if (editingPlan?.id) {\n      handleUpdatePlan(editingPlan.id, data);\n    } else {\n      handleCreatePlan(data);\n    }\n  };\n\n  const handleCategoryFormSubmit = async (data: any) => {\n    if (editingCategory?.id) {\n      await handleUpdateCategory(editingCategory.id, data);\n    } else {\n      await handleCreateCategory(data);\n    }\n  };\n\n  const handleTopicFormSubmit = async (data: any) => {\n    if (editingTopic?.id) {\n      await handleUpdateTopic(editingTopic.id, data);\n    } else {\n      await handleCreateTopic(data);\n    }\n  };\n\n  const handleQuestionFormSubmit = async (data: any) => {\n    if (editingQuestion?.id) {\n      await handleUpdateQuestion(editingQuestion.id, data);\n    } else {\n      await handleCreateQuestion(data);\n    }\n  };\n\n  const handleDeleteCard = async (card_id: string) => {\n    const card = cards.find(c => c.id === card_id);\n    if (card) {\n      setCardToDelete(card);\n      setIsDeleteCardModalOpen(true);\n    }\n  };\n\n  const handleCreatePlan = async (planData: Partial<LearningPlan>) => {\n    try {\n      await createPlanMutation.mutateAsync(planData);\n      await notifyContentUpdate('Learning Plan', 'created');\n    } catch (error) {\n      console.error('Failed to create plan:', error);\n    }\n  };\n\n  const handleUpdatePlan = async (\n    plan_id: string,\n    planData: Partial<LearningPlan>\n  ) => {\n    try {\n      await updatePlanMutation.mutateAsync({ id: plan_id, data: planData });\n      await notifyContentUpdate('Learning Plan', 'updated');\n      // Close modal on successful update\n      setIsPlanModalOpen(false);\n      setEditingPlan(null);\n    } catch (error) {\n      console.error('Failed to update plan:', error);\n    }\n  };\n\n  const handleDeletePlan = async (plan_id: string) => {\n    const plan = plans.find(p => p.id === plan_id);\n    if (plan) {\n      setPlanToDelete(plan);\n      setIsDeletePlanModalOpen(true);\n    }\n  };\n\n  const confirmDeleteCard = async () => {\n    if (!cardToDelete) return;\n\n    try {\n      await deleteCardMutation.mutateAsync(cardToDelete.id);\n      await notifyContentUpdate('Learning Card', 'deleted');\n      showSuccess(\n        'Card Deleted Successfully',\n        `\"${cardToDelete.title}\" has been deleted successfully.`\n      );\n      setIsDeleteCardModalOpen(false);\n      setCardToDelete(null);\n    } catch (error) {\n      console.error('Failed to delete card:', error);\n      showError(\n        'Failed to Delete Card',\n        'There was an error deleting the card. Please try again.'\n      );\n    }\n  };\n\n  const confirmDeletePlan = async () => {\n    if (!planToDelete) return;\n\n    try {\n      await deletePlanMutation.mutateAsync(planToDelete.id);\n      await notifyContentUpdate('Learning Plan', 'deleted');\n      showSuccess(\n        'Plan Deleted Successfully',\n        `\"${planToDelete.title}\" has been deleted successfully.`\n      );\n      setIsDeletePlanModalOpen(false);\n      setPlanToDelete(null);\n    } catch (error) {\n      console.error('Failed to delete plan:', error);\n      showError(\n        'Failed to Delete Plan',\n        'There was an error deleting the plan. Please try again.'\n      );\n    }\n  };\n\n  const handleCreateCategory = async (categoryData: Partial<Category>) => {\n    try {\n      await createCategoryMutation.mutateAsync(categoryData);\n    } catch (error) {\n      console.error('Failed to create category:', error);\n    }\n  };\n\n  const handleUpdateCategory = async (\n    categoryId: string,\n    categoryData: Partial<Category>\n  ) => {\n    try {\n      await updateCategoryMutation.mutateAsync({\n        id: categoryId,\n        data: categoryData,\n      });\n    } catch (error) {\n      console.error('Failed to update category:', error);\n    }\n  };\n\n  const handleDeleteCategory = async (categoryId: string) => {\n    try {\n      await deleteCategoryMutation.mutateAsync(categoryId);\n    } catch (error) {\n      console.error('Failed to delete category:', error);\n    }\n  };\n\n  const handleCreateTopic = async (topicData: Partial<Topic>) => {\n    try {\n      await createTopicMutation.mutateAsync(topicData);\n    } catch (error) {\n      console.error('Failed to create topic:', error);\n    }\n  };\n\n  const handleUpdateTopic = async (\n    topicId: string,\n    topicData: Partial<Topic>\n  ) => {\n    try {\n      await updateTopicMutation.mutateAsync({ id: topicId, data: topicData });\n    } catch (error) {\n      console.error('Failed to update topic:', error);\n    }\n  };\n\n  const handleDeleteTopic = async (topicId: string) => {\n    try {\n      await deleteTopicMutation.mutateAsync(topicId);\n    } catch (error) {\n      console.error('Failed to delete topic:', error);\n    }\n  };\n\n  const handleCreateQuestion = async (\n    questionData: Partial<UnifiedQuestion>\n  ) => {\n    try {\n      await createQuestionMutation.mutateAsync(questionData);\n    } catch (error) {\n      console.error('Failed to create question:', error);\n    }\n  };\n\n  const handleUpdateQuestion = async (\n    question_id: string,\n    questionData: Partial<UnifiedQuestion>\n  ) => {\n    try {\n      await updateQuestionMutation.mutateAsync({\n        id: question_id,\n        data: questionData,\n      });\n    } catch (error) {\n      console.error('Failed to update question:', error);\n    }\n  };\n\n  const handleDeleteQuestion = async (question_id: string) => {\n    try {\n      await deleteQuestionMutation.mutateAsync(question_id);\n    } catch (error) {\n      console.error('Failed to delete question:', error);\n    }\n  };\n\n  // Debounced search to improve performance\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchTerm(searchTerm);\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n\n  // Memoized filtered data to prevent unnecessary recalculations\n  const filteredCards = useMemo(() => {\n    return cards.filter(card => {\n      // Add null checks to prevent runtime errors\n      if (!card || !card.title || !card.description) {\n        return false;\n      }\n\n      const matchesSearch =\n        card.title.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||\n        card.description\n          .toLowerCase()\n          .includes(debouncedSearchTerm.toLowerCase());\n      const matchesCardType =\n        filterCardType === 'all' || card.title === filterCardType;\n      return matchesSearch && matchesCardType;\n    });\n  }, [cards, debouncedSearchTerm, filterCardType]);\n\n  const filteredPlans = useMemo(() => {\n    return plans.filter(plan => {\n      // Add null checks to prevent runtime errors\n      if (!plan || !plan.name || !plan.description) {\n        return false;\n      }\n\n      return (\n        plan.name.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||\n        plan.description\n          .toLowerCase()\n          .includes(debouncedSearchTerm.toLowerCase())\n      );\n    });\n  }, [plans, debouncedSearchTerm]);\n\n  // Helper functions for UI interactions\n  const toggleCard = useCallback((card_id: string) => {\n    setExpandedCards(prev => {\n      const newExpanded = new Set(prev);\n      if (newExpanded.has(card_id)) {\n        newExpanded.delete(card_id);\n      } else {\n        newExpanded.add(card_id);\n      }\n      return newExpanded;\n    });\n  }, []);\n\n  const toggleCategory = useCallback((categoryId: string) => {\n    setExpandedCategories(prev => {\n      const newExpanded = new Set(prev);\n      if (newExpanded.has(categoryId)) {\n        newExpanded.delete(categoryId);\n      } else {\n        newExpanded.add(categoryId);\n      }\n      return newExpanded;\n    });\n  }, []);\n\n  const toggleTopic = useCallback((topicId: string) => {\n    setExpandedTopics(prev => {\n      const newExpanded = new Set(prev);\n      if (newExpanded.has(topicId)) {\n        newExpanded.delete(topicId);\n      } else {\n        newExpanded.add(topicId);\n      }\n      return newExpanded;\n    });\n  }, []);\n\n  const togglePlan = useCallback((plan_id: string) => {\n    setExpandedPlans(prev => {\n      const newExpanded = new Set(prev);\n      if (newExpanded.has(plan_id)) {\n        newExpanded.delete(plan_id);\n      } else {\n        newExpanded.add(plan_id);\n      }\n      return newExpanded;\n    });\n  }, []);\n\n  if (loading) {\n    return (\n      <div className='container mx-auto p-6'>\n        <div className='flex items-center justify-center h-64'>\n          <div className='text-center'>\n            <div className='animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4'></div>\n            <p className='text-gray-600'>Loading unified admin data...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Error handling\n  if (\n    cardsError ||\n    plansError ||\n    categoriesError ||\n    topicsError ||\n    questionsError\n  ) {\n    return (\n      <div className='container mx-auto p-6'>\n        <div className='flex items-center justify-center h-64'>\n          <div className='text-center'>\n            <div className='text-red-500 text-6xl mb-4'>‚ö†Ô∏è</div>\n            <h2 className='text-xl font-semibold text-gray-900 dark:text-white mb-2'>\n              Error Loading Data\n            </h2>\n            <p className='text-gray-600 dark:text-gray-400 mb-4'>\n              There was an error loading the admin data. Please try refreshing\n              the page.\n            </p>\n            <button\n              onClick={() => window.location.reload()}\n              className='px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700'\n            >\n              Refresh Page\n            </button>\n            <div className='mt-4 text-sm text-gray-500'>\n              {cardsError && <p>Cards Error: {cardsError.message}</p>}\n              {plansError && <p>Plans Error: {plansError.message}</p>}\n              {categoriesError && (\n                <p>Categories Error: {categoriesError.message}</p>\n              )}\n              {topicsError && <p>Topics Error: {topicsError.message}</p>}\n              {questionsError && (\n                <p>Questions Error: {questionsError.message}</p>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='container mx-auto p-6'>\n      {/* Header */}\n      <div className='mb-8'>\n        <h1 className='text-3xl font-bold text-gray-900 dark:text-white mb-2'>\n          üéØ Unified Learning Management\n        </h1>\n        <p className='text-gray-600 dark:text-gray-400'>\n          Comprehensive admin interface for managing learning cards, plans,\n          categories, topics, and questions\n        </p>\n      </div>\n\n      {/* Stats */}\n      <div className='grid grid-cols-2 md:grid-cols-5 gap-4 mb-8'>\n        <StatsCard\n          icon={Layers}\n          label='Cards'\n          value={stats.totalCards}\n          color='#3B82F6'\n        />\n        <StatsCard\n          icon={Users}\n          label='Plans'\n          value={stats.totalPlans}\n          color='#10B981'\n        />\n        <StatsCard\n          icon={BookOpen}\n          label='Categories'\n          value={stats.totalCategories}\n          color='#8B5CF6'\n        />\n        <StatsCard\n          icon={Target}\n          label='Topics'\n          value={stats.totalTopics}\n          color='#F59E0B'\n        />\n        <StatsCard\n          icon={MessageSquare}\n          label='Questions'\n          value={stats.totalQuestions}\n          color='#EF4444'\n        />\n      </div>\n\n      {/* Bulk Operations */}\n      <div className='mb-8'>\n        <BulkOperations\n          targetType={activeBulkSection}\n          selectedItems={\n            activeBulkSection === 'cards'\n              ? selectedCards\n              : activeBulkSection === 'plans'\n                ? selectedPlans\n                : activeBulkSection === 'categories'\n                  ? selectedCategories\n                  : activeBulkSection === 'topics'\n                    ? selectedTopics\n                    : selectedQuestions\n          }\n          onSelectionChange={items => {\n            if (activeBulkSection === 'cards') setSelectedCards(items);\n            else if (activeBulkSection === 'plans') setSelectedPlans(items);\n            else if (activeBulkSection === 'categories')\n              setSelectedCategories(items);\n            else if (activeBulkSection === 'topics') setSelectedTopics(items);\n            else setSelectedQuestions(items);\n          }}\n          onOperationComplete={() => {\n            // Refresh data after bulk operation\n            queryClient.invalidateQueries();\n          }}\n        />\n      </div>\n\n      {/* Search and Filters */}\n      <div className='flex flex-col md:flex-row gap-4 mb-6'>\n        <div className='flex-1'>\n          <Suspense fallback={<LoadingSkeleton />}>\n            <Input\n              placeholder='Search cards, plans, categories, topics...'\n              value={searchTerm}\n              onChange={e => setSearchTerm(e.target.value)}\n              className='w-full'\n            />\n          </Suspense>\n        </div>\n        <Suspense fallback={<LoadingSkeleton />}>\n          <Select value={filterCardType} onValueChange={setFilterCardType}>\n            <SelectTrigger className='w-full md:w-48'>\n              <SelectValue placeholder='Filter by card type' />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value='all'>All Card Types</SelectItem>\n              <SelectItem value='Core Technologies'>\n                Core Technologies\n              </SelectItem>\n              <SelectItem value='Framework Questions'>\n                Framework Questions\n              </SelectItem>\n              <SelectItem value='Problem Solving'>Problem Solving</SelectItem>\n              <SelectItem value='System Design'>System Design</SelectItem>\n            </SelectContent>\n          </Select>\n        </Suspense>\n      </div>\n\n      {/* Action Buttons */}\n      <div className='flex flex-wrap gap-2 mb-6'>\n        <Suspense fallback={<LoadingSkeleton />}>\n          <Button\n            onClick={() => {\n              setEditingCard(null);\n              setIsCardModalOpen(true);\n            }}\n            className='bg-blue-600 hover:bg-blue-700'\n          >\n            <Plus className='h-4 w-4 mr-2' />\n            Add Card\n          </Button>\n        </Suspense>\n        <Suspense fallback={<LoadingSkeleton />}>\n          <Button\n            onClick={() => {\n              setEditingPlan(null);\n              setIsPlanModalOpen(true);\n            }}\n            className='bg-green-600 hover:bg-green-700'\n          >\n            <Plus className='h-4 w-4 mr-2' />\n            Add Plan\n          </Button>\n        </Suspense>\n        <Suspense fallback={<LoadingSkeleton />}>\n          <Button\n            onClick={() => {\n              setEditingCategory(null);\n              setIsCategoryModalOpen(true);\n            }}\n            className='bg-purple-600 hover:bg-purple-700'\n          >\n            <Plus className='h-4 w-4 mr-2' />\n            Add Category\n          </Button>\n        </Suspense>\n        <Suspense fallback={<LoadingSkeleton />}>\n          <Button\n            onClick={() => {\n              setEditingTopic(null);\n              setIsTopicModalOpen(true);\n            }}\n            className='bg-orange-600 hover:bg-orange-700'\n          >\n            <Plus className='h-4 w-4 mr-2' />\n            Add Topic\n          </Button>\n        </Suspense>\n      </div>\n\n      {/* Cards Section */}\n      <div className='mb-8'>\n        <div className='flex items-center justify-between mb-4'>\n          <h2 className='text-xl font-semibold text-gray-900 dark:text-white flex items-center'>\n            <Layers className='h-5 w-5 mr-2 text-blue-600' />\n            Learning Cards ({stats.totalCards})\n          </h2>\n        </div>\n\n        <div className='space-y-4'>\n          {filteredCards.length === 0 ? (\n            <Suspense fallback={<LoadingSkeleton />}>\n              <EmptyState\n                icon={Layers}\n                title='No Learning Cards'\n                description='Create your first learning card to organize categories and topics for structured learning.'\n                action={{\n                  label: 'Create First Card',\n                  onClick: () => {\n                    setEditingCard(null);\n                    setIsCardModalOpen(true);\n                  },\n                }}\n                className='border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg'\n              />\n            </Suspense>\n          ) : (\n            filteredCards.map(card => {\n              const cardCategories = categories.filter(\n                cat => cat.cardType === card.title\n              );\n              const IconComponent =\n                CARD_ICONS[card.title as keyof typeof CARD_ICONS]?.icon ||\n                Layers;\n\n              return (\n                <Card\n                  key={card.id}\n                  className='border-l-4'\n                  style={{ borderLeftColor: card.color }}\n                >\n                  <CardHeader className='pb-3'>\n                    <div className='flex items-center justify-between'>\n                      <div className='flex items-center space-x-3'>\n                        <button\n                          onClick={() => toggleCard(card.id)}\n                          className='p-1 hover:bg-gray-100 rounded'\n                        >\n                          {expandedCards.has(card.id) ? (\n                            <ChevronDown className='h-4 w-4' />\n                          ) : (\n                            <ChevronRight className='h-4 w-4' />\n                          )}\n                        </button>\n                        <IconComponent\n                          className='h-5 w-5'\n                          style={{ color: card.color }}\n                        />\n                        <div>\n                          <CardTitle className='text-lg'>\n                            {card.title}\n                          </CardTitle>\n                          <p className='text-sm text-gray-600 dark:text-gray-400'>\n                            {card.description}\n                          </p>\n                        </div>\n                      </div>\n                      <div className='flex items-center space-x-2'>\n                        <Badge\n                          variant='outline'\n                          className='bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\n                        >\n                          {cardCategories.length} Categories\n                        </Badge>\n                        <Badge\n                          variant='outline'\n                          className='bg-purple-50 text-purple-700 dark:bg-purple-900 dark:text-purple-300'\n                        >\n                          {cardCategories.reduce((total, cat) => {\n                            const categoryTopics = topics.filter(\n                              topic => topic.categoryId === cat.id\n                            );\n                            return total + categoryTopics.length;\n                          }, 0)}{' '}\n                          Topics\n                        </Badge>\n                        <Badge\n                          variant='outline'\n                          className='bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300'\n                        >\n                          {cardCategories.reduce((total, cat) => {\n                            const categoryTopics = topics.filter(\n                              topic => topic.categoryId === cat.id\n                            );\n                            return (\n                              total +\n                              categoryTopics.reduce((topicTotal, topic) => {\n                                const topicQuestions =\n                                  questionsByTopic[topic.id] || [];\n                                return topicTotal + topicQuestions.length;\n                              }, 0)\n                            );\n                          }, 0)}{' '}\n                          Questions\n                        </Badge>\n                        <Button\n                          variant='ghost'\n                          size='sm'\n                          onClick={() => {\n                            setEditingCard(card);\n                            setIsCardModalOpen(true);\n                          }}\n                        >\n                          <Edit className='h-4 w-4' />\n                        </Button>\n                        <Button\n                          variant='ghost'\n                          size='sm'\n                          onClick={() => handleDeleteCard(card.id)}\n                          disabled={deleteCardMutation?.isPending}\n                        >\n                          <Trash2 className='h-4 w-4' />\n                        </Button>\n                      </div>\n                    </div>\n                  </CardHeader>\n\n                  {expandedCards.has(card.id) && (\n                    <CardContent className='pt-0'>\n                      <div className='space-y-4'>\n                        {/* Categories under this card */}\n                        {cardCategories.map(category => {\n                          const categoryTopics = topics.filter(\n                            topic => topic.categoryId === category.id\n                          );\n\n                          return (\n                            <div\n                              key={category.id}\n                              className='ml-6 border-l-2 border-gray-200 pl-4'\n                            >\n                              <div className='flex items-center justify-between py-2'>\n                                <div className='flex items-center space-x-2'>\n                                  <button\n                                    onClick={() => toggleCategory(category.id)}\n                                    className='p-1 hover:bg-gray-100 rounded'\n                                  >\n                                    {expandedCategories.has(category.id) ? (\n                                      <ChevronDown className='h-4 w-4' />\n                                    ) : (\n                                      <ChevronRight className='h-4 w-4' />\n                                    )}\n                                  </button>\n                                  <BookOpen className='h-4 w-4 text-purple-600' />\n                                  <div>\n                                    <h4 className='font-medium'>\n                                      {category.name}\n                                    </h4>\n                                    <p className='text-sm text-gray-600 dark:text-gray-400'>\n                                      {category.description}\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className='flex items-center space-x-2'>\n                                  <Badge\n                                    variant='outline'\n                                    className='bg-purple-50 text-purple-700 dark:bg-purple-900 dark:text-purple-300'\n                                  >\n                                    {categoryTopics.length} Topics\n                                  </Badge>\n                                  <Badge\n                                    variant='outline'\n                                    className='bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300'\n                                  >\n                                    {categoryTopics.reduce((total, topic) => {\n                                      const topicQuestions =\n                                        questionsByTopic[topic.id] || [];\n                                      return total + topicQuestions.length;\n                                    }, 0)}{' '}\n                                    Questions\n                                  </Badge>\n                                  <Button\n                                    variant='ghost'\n                                    size='sm'\n                                    onClick={() => {\n                                      setEditingCategory(category);\n                                      setIsCategoryModalOpen(true);\n                                    }}\n                                  >\n                                    <Edit className='h-4 w-4' />\n                                  </Button>\n                                  <Button\n                                    variant='ghost'\n                                    size='sm'\n                                    onClick={() =>\n                                      handleDeleteCategory(category.id)\n                                    }\n                                    disabled={deleteCategoryMutation?.isPending}\n                                  >\n                                    <Trash2 className='h-4 w-4' />\n                                  </Button>\n                                </div>\n                              </div>\n\n                              {expandedCategories.has(category.id) && (\n                                <div className='ml-6 space-y-2'>\n                                  {categoryTopics.map(topic => {\n                                    const topicQuestions =\n                                      questionsByTopic[topic.id] || [];\n\n                                    return (\n                                      <div\n                                        key={topic.id}\n                                        className='border-l-2 border-gray-100 pl-4 py-2'\n                                      >\n                                        <div className='flex items-center justify-between'>\n                                          <div className='flex items-center space-x-2'>\n                                            <button\n                                              onClick={() =>\n                                                toggleTopic(topic.id)\n                                              }\n                                              className='p-1 hover:bg-gray-100 rounded'\n                                            >\n                                              {expandedTopics.has(topic.id) ? (\n                                                <ChevronDown className='h-4 w-4' />\n                                              ) : (\n                                                <ChevronRight className='h-4 w-4' />\n                                              )}\n                                            </button>\n                                            <Target className='h-4 w-4 text-orange-600' />\n                                            <div>\n                                              <h5 className='font-medium'>\n                                                {topic.name}\n                                              </h5>\n                                              <p className='text-sm text-gray-600 dark:text-gray-400'>\n                                                {topic.description}\n                                              </p>\n                                            </div>\n                                          </div>\n                                          <div className='flex items-center space-x-2'>\n                                            <Badge\n                                              variant='outline'\n                                              className='bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300'\n                                            >\n                                              {topicQuestions.length} Questions\n                                            </Badge>\n                                            <Button\n                                              variant='ghost'\n                                              size='sm'\n                                              onClick={() => {\n                                                setEditingTopic(topic);\n                                                setIsTopicModalOpen(true);\n                                              }}\n                                            >\n                                              <Edit className='h-4 w-4' />\n                                            </Button>\n                                            <Button\n                                              variant='ghost'\n                                              size='sm'\n                                              onClick={() =>\n                                                handleDeleteTopic(topic.id)\n                                              }\n                                              disabled={\n                                                deleteTopicMutation?.isPending\n                                              }\n                                            >\n                                              <Trash2 className='h-4 w-4' />\n                                            </Button>\n                                          </div>\n                                        </div>\n\n                                        {expandedTopics.has(topic.id) && (\n                                          <div className='ml-6 space-y-2'>\n                                            {topicQuestions.map(question => (\n                                              <div\n                                                key={question.id}\n                                                className='flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-800 rounded'\n                                              >\n                                                <div className='flex items-center space-x-2'>\n                                                  <MessageSquare className='h-4 w-4 text-red-600' />\n                                                  <div>\n                                                    <h6 className='font-medium text-sm'>\n                                                      {question.title}\n                                                    </h6>\n                                                    <p className='text-xs text-gray-600 dark:text-gray-400'>\n                                                      {question.difficulty} ‚Ä¢{' '}\n                                                      {question.type}\n                                                    </p>\n                                                  </div>\n                                                </div>\n                                                <div className='flex items-center space-x-1'>\n                                                  <Button\n                                                    variant='ghost'\n                                                    size='sm'\n                                                    onClick={() => {\n                                                      setEditingQuestion(\n                                                        question as UnifiedQuestion\n                                                      );\n                                                      setIsQuestionModalOpen(\n                                                        true\n                                                      );\n                                                    }}\n                                                  >\n                                                    <Edit className='h-3 w-3' />\n                                                  </Button>\n                                                  <Button\n                                                    variant='ghost'\n                                                    size='sm'\n                                                    onClick={() =>\n                                                      handleDeleteQuestion(\n                                                        question.id\n                                                      )\n                                                    }\n                                                    disabled={\n                                                      deleteQuestionMutation?.isPending\n                                                    }\n                                                  >\n                                                    <Trash2 className='h-3 w-3' />\n                                                  </Button>\n                                                </div>\n                                              </div>\n                                            ))}\n                                            <Button\n                                              onClick={() => {\n                                                setEditingQuestion(null);\n                                                setIsQuestionModalOpen(true);\n                                              }}\n                                              variant='outline'\n                                              size='sm'\n                                              className='ml-6'\n                                            >\n                                              <Plus className='h-3 w-3 mr-1' />\n                                              Add Question\n                                            </Button>\n                                          </div>\n                                        )}\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </CardContent>\n                  )}\n                </Card>\n              );\n            })\n          )}\n        </div>\n      </div>\n\n      {/* Plans Section */}\n      <div className='mb-8'>\n        <div className='flex items-center justify-between mb-4'>\n          <h2 className='text-xl font-semibold text-gray-900 dark:text-white flex items-center'>\n            <Users className='h-5 w-5 mr-2 text-green-600' />\n            Learning Plans ({stats.totalPlans})\n          </h2>\n        </div>\n\n        <div className='space-y-4'>\n          {filteredPlans.length === 0 ? (\n            <Suspense fallback={<LoadingSkeleton />}>\n              <EmptyState\n                icon={Calendar}\n                title='No Learning Plans'\n                description='Create your first learning plan to provide structured learning paths for users.'\n                action={{\n                  label: 'Create First Plan',\n                  onClick: () => {\n                    setEditingPlan(null);\n                    setIsPlanModalOpen(true);\n                  },\n                }}\n                className='border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg'\n              />\n            </Suspense>\n          ) : (\n            filteredPlans.map(plan => (\n              <Card\n                key={plan.id}\n                className='border-l-4'\n                style={{ borderLeftColor: plan.color }}\n              >\n                <CardHeader className='pb-3'>\n                  <div className='flex items-center justify-between'>\n                    <div className='flex items-center space-x-3'>\n                      <button\n                        onClick={() => togglePlan(plan.id)}\n                        className='p-1 hover:bg-gray-100 rounded'\n                      >\n                        {expandedPlans.has(plan.id) ? (\n                          <ChevronDown className='h-4 w-4' />\n                        ) : (\n                          <ChevronRight className='h-4 w-4' />\n                        )}\n                      </button>\n                      <Calendar\n                        className='h-5 w-5'\n                        style={{ color: plan.color }}\n                      />\n                      <div>\n                        <CardTitle className='text-lg'>{plan.name}</CardTitle>\n                        <p className='text-sm text-gray-600 dark:text-gray-400'>\n                          {plan.description}\n                        </p>\n                      </div>\n                    </div>\n                    <div className='flex items-center space-x-2'>\n                      <Badge variant='outline'>\n                        {plan.duration} ‚Ä¢ {plan.difficulty}\n                      </Badge>\n                      <Badge variant='outline'>{plan.estimatedHours}h</Badge>\n                      <Button\n                        variant='ghost'\n                        size='sm'\n                        onClick={() => {\n                          setEditingPlan(plan);\n                          setIsPlanModalOpen(true);\n                        }}\n                      >\n                        <Edit className='h-4 w-4' />\n                      </Button>\n                      <Button\n                        variant='ghost'\n                        size='sm'\n                        onClick={() => handleDeletePlan(plan.id)}\n                        disabled={deletePlanMutation?.isPending}\n                      >\n                        <Trash2 className='h-4 w-4' />\n                      </Button>\n                    </div>\n                  </div>\n                </CardHeader>\n\n                {expandedPlans.has(plan.id) && (\n                  <CardContent className='pt-0'>\n                    <div className='text-sm text-gray-600 dark:text-gray-400'>\n                      <p>\n                        <strong>Duration:</strong> {plan.duration}\n                      </p>\n                      <p>\n                        <strong>Difficulty:</strong> {plan.difficulty}\n                      </p>\n                      <p>\n                        <strong>Estimated Hours:</strong> {plan.estimatedHours}\n                      </p>\n                    </div>\n                  </CardContent>\n                )}\n              </Card>\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      <Modal\n        isOpen={isCardModalOpen}\n        onClose={() => {\n          setIsCardModalOpen(false);\n          setEditingCard(null);\n        }}\n        title={editingCard ? 'Edit Card' : 'Create New Card'}\n      >\n        <CardForm\n          card={editingCard}\n          onSubmit={handleCardFormSubmit}\n          onCancel={() => {\n            setIsCardModalOpen(false);\n            setEditingCard(null);\n          }}\n          isLoading={\n            createCardMutation.isPending || updateCardMutation.isPending\n          }\n        />\n      </Modal>\n\n      <Modal\n        isOpen={isPlanModalOpen}\n        onClose={() => {\n          setIsPlanModalOpen(false);\n          setEditingPlan(null);\n        }}\n        title={editingPlan ? 'Edit Plan' : 'Create New Plan'}\n      >\n        <PlanForm\n          plan={editingPlan}\n          onSubmit={handlePlanFormSubmit}\n          onCancel={() => {\n            setIsPlanModalOpen(false);\n            setEditingPlan(null);\n          }}\n          isLoading={\n            createPlanMutation.isPending || updatePlanMutation.isPending\n          }\n        />\n      </Modal>\n\n      <Modal\n        isOpen={isCategoryModalOpen}\n        onClose={() => {\n          setIsCategoryModalOpen(false);\n          setEditingCategory(null);\n        }}\n        title={editingCategory ? 'Edit Category' : 'Create New Category'}\n      >\n        <CategoryForm\n          category={editingCategory}\n          onSubmit={handleCategoryFormSubmit}\n          onCancel={() => {\n            setIsCategoryModalOpen(false);\n            setEditingCategory(null);\n          }}\n          isLoading={\n            createCategoryMutation.isPending || updateCategoryMutation.isPending\n          }\n        />\n      </Modal>\n\n      <Modal\n        isOpen={isTopicModalOpen}\n        onClose={() => {\n          setIsTopicModalOpen(false);\n          setEditingTopic(null);\n        }}\n        title={editingTopic ? 'Edit Topic' : 'Create New Topic'}\n      >\n        <TopicForm\n          topic={editingTopic}\n          categories={categories}\n          onSubmit={handleTopicFormSubmit}\n          onCancel={() => {\n            setIsTopicModalOpen(false);\n            setEditingTopic(null);\n          }}\n          isLoading={\n            createTopicMutation.isPending || updateTopicMutation.isPending\n          }\n        />\n      </Modal>\n\n      <Modal\n        isOpen={isQuestionModalOpen}\n        onClose={() => {\n          setIsQuestionModalOpen(false);\n          setEditingQuestion(null);\n        }}\n        title={editingQuestion ? 'Edit Question' : 'Create New Question'}\n      >\n        <QuestionForm\n          question={editingQuestion as any}\n          topics={topics}\n          categories={categories}\n          onSubmit={handleQuestionFormSubmit}\n          onCancel={() => {\n            setIsQuestionModalOpen(false);\n            setEditingQuestion(null);\n          }}\n          isLoading={\n            createQuestionMutation.isPending || updateQuestionMutation.isPending\n          }\n        />\n      </Modal>\n\n      {/* Confirmation Modals */}\n      <Modal\n        isOpen={isDeleteCardModalOpen}\n        onClose={() => {\n          setIsDeleteCardModalOpen(false);\n          setCardToDelete(null);\n        }}\n        title='Delete Card'\n      >\n        <div className='space-y-4'>\n          <p className='text-sm text-muted-foreground'>\n            Are you sure you want to delete the card \"{cardToDelete?.title}\"?\n            This action cannot be undone.\n          </p>\n          <div className='flex justify-end space-x-2'>\n            <Button\n              variant='outline'\n              onClick={() => {\n                setIsDeleteCardModalOpen(false);\n                setCardToDelete(null);\n              }}\n            >\n              Cancel\n            </Button>\n            <Button\n              variant='destructive'\n              onClick={confirmDeleteCard}\n              disabled={deleteCardMutation.isPending}\n            >\n              {deleteCardMutation.isPending ? 'Deleting...' : 'Delete'}\n            </Button>\n          </div>\n        </div>\n      </Modal>\n\n      <Modal\n        isOpen={isDeletePlanModalOpen}\n        onClose={() => {\n          setIsDeletePlanModalOpen(false);\n          setPlanToDelete(null);\n        }}\n        title='Delete Plan'\n      >\n        <div className='space-y-4'>\n          <p className='text-sm text-muted-foreground'>\n            Are you sure you want to delete the plan \"{planToDelete?.title}\"?\n            This action cannot be undone.\n          </p>\n          <div className='flex justify-end space-x-2'>\n            <Button\n              variant='outline'\n              onClick={() => {\n                setIsDeletePlanModalOpen(false);\n                setPlanToDelete(null);\n              }}\n            >\n              Cancel\n            </Button>\n            <Button\n              variant='destructive'\n              onClick={confirmDeletePlan}\n              disabled={deletePlanMutation.isPending}\n            >\n              {deletePlanMutation.isPending ? 'Deleting...' : 'Delete'}\n            </Button>\n          </div>\n        </div>\n      </Modal>\n\n      {/* Toast Notifications */}\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\n    </div>\n  );\n}\n"],"names":["UnifiedAdminPage","supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseServiceRoleKey","SUPABASE_SERVICE_ROLE_KEY","supabase","createClient","Button","React","lazy","then","module","default","Input","Badge","Card","CardContent","CardHeader","CardTitle","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","CategoryForm","TopicForm","QuestionForm","CardForm","PlanForm","EmptyState","CARD_ICONS","icon","BookOpen","color","Layers","Puzzle","Network","LoadingSkeleton","div","className","StatsCard","memo","Icon","label","value","style","p","displayName","data","cardsData","isLoading","cardsLoading","error","cardsError","useCards","plansData","plansLoading","plansError","usePlans","categoriesData","categoriesLoading","categoriesError","useCategories","topicsData","topicsLoading","topicsError","useTopics","questionsData","questionsLoading","questionsError","useQuestionsUnified","createCardMutation","useCreateCard","updateCardMutation","useUpdateCard","deleteCardMutation","useDeleteCard","createPlanMutation","useCreatePlan","updatePlanMutation","useUpdatePlan","deletePlanMutation","useDeletePlan","createCategoryMutation","useCreateCategory","updateCategoryMutation","useUpdateCategory","deleteCategoryMutation","useDeleteCategory","createTopicMutation","useCreateTopic","updateTopicMutation","useUpdateTopic","deleteTopicMutation","useDeleteTopic","createQuestionMutation","useCreateQuestion","updateQuestionMutation","useUpdateQuestion","deleteQuestionMutation","useDeleteQuestion","notifyContentUpdate","notifyAdminAction","useNotificationActions","queryClient","useQueryClient","showSuccess","showError","toasts","removeToast","useToast","console","log","count","dataLength","length","pagination","totalCount","cards","plans","categories","topics","questions","useEffect","invalidateQueries","queryKey","immediateTimer","setTimeout","clearTimeout","timer","loading","stats","useMemo","totalCards","totalPlans","totalCategories","totalTopics","totalQuestions","searchTerm","setSearchTerm","useState","filterCardType","setFilterCardType","expandedCards","setExpandedCards","Set","expandedCategories","setExpandedCategories","expandedTopics","setExpandedTopics","expandedPlans","setExpandedPlans","isCardModalOpen","setIsCardModalOpen","isPlanModalOpen","setIsPlanModalOpen","isCategoryModalOpen","setIsCategoryModalOpen","isTopicModalOpen","setIsTopicModalOpen","isQuestionModalOpen","setIsQuestionModalOpen","isDeleteCardModalOpen","setIsDeleteCardModalOpen","isDeletePlanModalOpen","setIsDeletePlanModalOpen","isDeleteCategoryModalOpen","setIsDeleteCategoryModalOpen","isDeleteTopicModalOpen","setIsDeleteTopicModalOpen","isDeleteQuestionModalOpen","setIsDeleteQuestionModalOpen","cardToDelete","setCardToDelete","planToDelete","setPlanToDelete","categoryToDelete","setCategoryToDelete","topicToDelete","setTopicToDelete","questionToDelete","setQuestionToDelete","editingCard","setEditingCard","editingPlan","setEditingPlan","editingCategory","setEditingCategory","editingTopic","setEditingTopic","editingQuestion","setEditingQuestion","questionsByTopic","setQuestionsByTopic","selectedCards","setSelectedCards","selectedPlans","setSelectedPlans","selectedCategories","setSelectedCategories","selectedTopics","setSelectedTopics","selectedQuestions","setSelectedQuestions","activeBulkSection","setActiveBulkSection","handleCreateCard","cardData","mutateAsync","title","handleUpdateCard","card_id","id","handleCardFormSubmit","handlePlanFormSubmit","handleUpdatePlan","handleCreatePlan","handleCategoryFormSubmit","handleUpdateCategory","handleCreateCategory","handleTopicFormSubmit","handleUpdateTopic","handleCreateTopic","handleQuestionFormSubmit","handleUpdateQuestion","handleCreateQuestion","handleDeleteCard","card","find","c","planData","plan_id","handleDeletePlan","plan","confirmDeleteCard","confirmDeletePlan","categoryData","categoryId","handleDeleteCategory","topicData","topicId","handleDeleteTopic","questionData","question_id","handleDeleteQuestion","debouncedSearchTerm","setDebouncedSearchTerm","filteredCards","filter","description","matchesSearch","toLowerCase","includes","matchesCardType","filteredPlans","name","toggleCard","useCallback","prev","newExpanded","has","delete","add","toggleCategory","toggleTopic","togglePlan","h2","button","onClick","window","location","reload","message","h1","Users","Target","MessageSquare","BulkOperations","targetType","selectedItems","onSelectionChange","items","onOperationComplete","Suspense","fallback","placeholder","onChange","e","target","onValueChange","Plus","action","map","cardCategories","cat","cardType","IconComponent","borderLeftColor","ChevronDown","ChevronRight","variant","reduce","total","categoryTopics","topic","topicTotal","topicQuestions","size","Edit","disabled","isPending","Trash2","category","h4","h5","question","h6","difficulty","type","Calendar","duration","estimatedHours","strong","Modal","isOpen","onClose","onSubmit","onCancel","ToastContainer","onRemove"],"mappings":"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"}
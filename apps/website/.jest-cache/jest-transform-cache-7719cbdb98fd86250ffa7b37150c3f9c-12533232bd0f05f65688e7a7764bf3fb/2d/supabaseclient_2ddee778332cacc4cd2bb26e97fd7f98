d3d8c8bdb3b7fb91973ea0e0291d44ee
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get isSupabaseAvailable () {
        return isSupabaseAvailable;
    },
    get supabaseClient () {
        return supabaseClient;
    }
});
const _supabasejs = require("@supabase/supabase-js");
// Get Supabase credentials from environment variables
const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'] || '';
const supabaseAnonKey = process.env['NEXT_PUBLIC_SUPABASE_ANON_KEY'] || '';
// Validate that we have the required credentials
const isValidConfig = supabaseUrl && supabaseUrl !== '' && supabaseUrl !== 'https://placeholder.supabase.co' && supabaseAnonKey && supabaseAnonKey !== '' && supabaseAnonKey !== 'placeholder_key';
// Log configuration status
if (!isValidConfig) {
    console.error('❌ Supabase configuration is missing or invalid!');
    console.error('Please check your .env.local file has:');
    console.error('- NEXT_PUBLIC_SUPABASE_URL');
    console.error('- NEXT_PUBLIC_SUPABASE_ANON_KEY');
} else {
    console.log('✅ Supabase client configured successfully');
    console.log('URL:', supabaseUrl);
}
const supabaseClient = isValidConfig ? (0, _supabasejs.createClient)(supabaseUrl, supabaseAnonKey, {
    auth: {
        autoRefreshToken: true,
        persistSession: true,
        detectSessionInUrl: true
    }
}) : null;
const isSupabaseAvailable = ()=>supabaseClient !== null;
// Mirror auth session to cookie for simple client persistence across reloads
// Only set up on client side to avoid SSR issues
if (supabaseClient && typeof window !== 'undefined' && supabaseClient.auth) {
    supabaseClient.auth.onAuthStateChange((event, session)=>{
        try {
            if (typeof document === 'undefined') return;
            if (session?.access_token) {
                const expires = new Date(Date.now() + (session.expires_in ? session.expires_in * 1000 : 7 * 86400000)).toUTCString();
                document.cookie = `sb_session=1; path=/; expires=${expires}`;
            } else {
                document.cookie = 'sb_session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
            }
        } catch (e) {
        // no-op
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL2FwcHMvd2Vic2l0ZS9zcmMvbGliL3N1cGFiYXNlLWNsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBHZXQgU3VwYWJhc2UgY3JlZGVudGlhbHMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnZbJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCddIHx8ICcnO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnZbJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJ10gfHwgJyc7XG5cbi8vIFZhbGlkYXRlIHRoYXQgd2UgaGF2ZSB0aGUgcmVxdWlyZWQgY3JlZGVudGlhbHNcbmNvbnN0IGlzVmFsaWRDb25maWcgPVxuICBzdXBhYmFzZVVybCAmJlxuICBzdXBhYmFzZVVybCAhPT0gJycgJiZcbiAgc3VwYWJhc2VVcmwgIT09ICdodHRwczovL3BsYWNlaG9sZGVyLnN1cGFiYXNlLmNvJyAmJlxuICBzdXBhYmFzZUFub25LZXkgJiZcbiAgc3VwYWJhc2VBbm9uS2V5ICE9PSAnJyAmJlxuICBzdXBhYmFzZUFub25LZXkgIT09ICdwbGFjZWhvbGRlcl9rZXknO1xuXG4vLyBMb2cgY29uZmlndXJhdGlvbiBzdGF0dXNcbmlmICghaXNWYWxpZENvbmZpZykge1xuICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2UgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQhJyk7XG4gIGNvbnNvbGUuZXJyb3IoJ1BsZWFzZSBjaGVjayB5b3VyIC5lbnYubG9jYWwgZmlsZSBoYXM6Jyk7XG4gIGNvbnNvbGUuZXJyb3IoJy0gTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJyk7XG4gIGNvbnNvbGUuZXJyb3IoJy0gTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknKTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUubG9nKCfinIUgU3VwYWJhc2UgY2xpZW50IGNvbmZpZ3VyZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIGNvbnNvbGUubG9nKCdVUkw6Jywgc3VwYWJhc2VVcmwpO1xufVxuXG4vLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50XG5leHBvcnQgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBpc1ZhbGlkQ29uZmlnXG4gID8gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICAgICAgcGVyc2lzdFNlc3Npb246IHRydWUsXG4gICAgICAgIGRldGVjdFNlc3Npb25JblVybDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSlcbiAgOiBudWxsO1xuXG4vLyBFeHBvcnQgYSBoZWxwZXIgdG8gY2hlY2sgaWYgU3VwYWJhc2UgaXMgYXZhaWxhYmxlXG5leHBvcnQgY29uc3QgaXNTdXBhYmFzZUF2YWlsYWJsZSA9ICgpID0+IHN1cGFiYXNlQ2xpZW50ICE9PSBudWxsO1xuXG4vLyBNaXJyb3IgYXV0aCBzZXNzaW9uIHRvIGNvb2tpZSBmb3Igc2ltcGxlIGNsaWVudCBwZXJzaXN0ZW5jZSBhY3Jvc3MgcmVsb2Fkc1xuLy8gT25seSBzZXQgdXAgb24gY2xpZW50IHNpZGUgdG8gYXZvaWQgU1NSIGlzc3Vlc1xuaWYgKHN1cGFiYXNlQ2xpZW50ICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHN1cGFiYXNlQ2xpZW50LmF1dGgpIHtcbiAgc3VwYWJhc2VDbGllbnQuYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZSgoZXZlbnQsIHNlc3Npb24pID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICAgIGlmIChzZXNzaW9uPy5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgY29uc3QgZXhwaXJlcyA9IG5ldyBEYXRlKFxuICAgICAgICAgIERhdGUubm93KCkgK1xuICAgICAgICAgICAgKHNlc3Npb24uZXhwaXJlc19pbiA/IHNlc3Npb24uZXhwaXJlc19pbiAqIDEwMDAgOiA3ICogODY0MDAwMDApXG4gICAgICAgICkudG9VVENTdHJpbmcoKTtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHNiX3Nlc3Npb249MTsgcGF0aD0vOyBleHBpcmVzPSR7ZXhwaXJlc31gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID1cbiAgICAgICAgICAnc2Jfc2Vzc2lvbj07IHBhdGg9LzsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVCc7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gbm8tb3BcbiAgICB9XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImlzU3VwYWJhc2VBdmFpbGFibGUiLCJzdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsInN1cGFiYXNlQW5vbktleSIsImlzVmFsaWRDb25maWciLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJjcmVhdGVDbGllbnQiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZGV0ZWN0U2Vzc2lvbkluVXJsIiwid2luZG93Iiwib25BdXRoU3RhdGVDaGFuZ2UiLCJldmVudCIsInNlc3Npb24iLCJkb2N1bWVudCIsImFjY2Vzc190b2tlbiIsImV4cGlyZXMiLCJEYXRlIiwibm93IiwiZXhwaXJlc19pbiIsInRvVVRDU3RyaW5nIiwiY29va2llIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUFzQ2FBO2VBQUFBOztRQVhBQztlQUFBQTs7OzRCQTNCZ0I7QUFFN0Isc0RBQXNEO0FBQ3RELE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQywyQkFBMkIsSUFBSTtBQUMvRCxNQUFNQyxrQkFBa0JGLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0MsSUFBSTtBQUV4RSxpREFBaUQ7QUFDakQsTUFBTUUsZ0JBQ0pKLGVBQ0FBLGdCQUFnQixNQUNoQkEsZ0JBQWdCLHFDQUNoQkcsbUJBQ0FBLG9CQUFvQixNQUNwQkEsb0JBQW9CO0FBRXRCLDJCQUEyQjtBQUMzQixJQUFJLENBQUNDLGVBQWU7SUFDbEJDLFFBQVFDLEtBQUssQ0FBQztJQUNkRCxRQUFRQyxLQUFLLENBQUM7SUFDZEQsUUFBUUMsS0FBSyxDQUFDO0lBQ2RELFFBQVFDLEtBQUssQ0FBQztBQUNoQixPQUFPO0lBQ0xELFFBQVFFLEdBQUcsQ0FBQztJQUNaRixRQUFRRSxHQUFHLENBQUMsUUFBUVA7QUFDdEI7QUFHTyxNQUFNRCxpQkFBaUJLLGdCQUMxQkksSUFBQUEsd0JBQVksRUFBQ1IsYUFBYUcsaUJBQWlCO0lBQ3pDTSxNQUFNO1FBQ0pDLGtCQUFrQjtRQUNsQkMsZ0JBQWdCO1FBQ2hCQyxvQkFBb0I7SUFDdEI7QUFDRixLQUNBO0FBR0csTUFBTWQsc0JBQXNCLElBQU1DLG1CQUFtQjtBQUU1RCw2RUFBNkU7QUFDN0UsaURBQWlEO0FBQ2pELElBQUlBLGtCQUFrQixPQUFPYyxXQUFXLGVBQWVkLGVBQWVVLElBQUksRUFBRTtJQUMxRVYsZUFBZVUsSUFBSSxDQUFDSyxpQkFBaUIsQ0FBQyxDQUFDQyxPQUFPQztRQUM1QyxJQUFJO1lBQ0YsSUFBSSxPQUFPQyxhQUFhLGFBQWE7WUFDckMsSUFBSUQsU0FBU0UsY0FBYztnQkFDekIsTUFBTUMsVUFBVSxJQUFJQyxLQUNsQkEsS0FBS0MsR0FBRyxLQUNMTCxDQUFBQSxRQUFRTSxVQUFVLEdBQUdOLFFBQVFNLFVBQVUsR0FBRyxPQUFPLElBQUksUUFBTyxHQUMvREMsV0FBVztnQkFDYk4sU0FBU08sTUFBTSxHQUFHLENBQUMsOEJBQThCLEVBQUVMLFNBQVM7WUFDOUQsT0FBTztnQkFDTEYsU0FBU08sTUFBTSxHQUNiO1lBQ0o7UUFDRixFQUFFLE9BQU9DLEdBQUc7UUFDVixRQUFRO1FBQ1Y7SUFDRjtBQUNGIn0=
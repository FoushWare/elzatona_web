{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-login-page.test.tsx"],"sourcesContent":["/**\n * Admin Login Page Tests\n *\n * Comprehensive tests for the admin login page component to ensure:\n * - Form rendering and validation\n * - User interactions\n * - Error handling\n * - Loading states\n * - Authentication flow\n * - Accessibility\n */\n\n// Set up environment variables before any imports\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock nuqs before any imports that use it\njest.mock('nuqs', () => ({\n  useQueryState: jest.fn(() => [null, jest.fn()]),\n  useQueryStates: jest.fn(() => [{}, jest.fn()]),\n  parseAsString: jest.fn(),\n  parseAsInteger: jest.fn(),\n  createSearchParamsCache: jest.fn(),\n}));\n\n// Mock Supabase before any imports\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn().mockResolvedValue({ data: null, error: null }),\n      })),\n    })),\n  })),\n}));\n\n// Mock @tanstack/react-query\njest.mock('@tanstack/react-query', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    QueryClientProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    QueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQuery: jest.fn(() => ({\n      data: null,\n      isLoading: false,\n      error: null,\n    })),\n    useMutation: jest.fn(() => ({\n      mutate: jest.fn(),\n      mutateAsync: jest.fn(),\n      isLoading: false,\n      error: null,\n    })),\n  };\n});\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { useRouter } from 'next/navigation';\nimport {\n  AdminAuthProvider,\n  ThemeProvider,\n} from '@elzatona/shared-contexts';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport AdminLoginPage from '@/app/admin/login/page';\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: jest.fn(),\n}));\n\n// Create a mock function that can be configured per test\nconst mockUseAdminAuthFn = jest.fn(() => ({\n  isAuthenticated: false,\n  isLoading: false,\n  login: jest.fn(),\n  logout: jest.fn(),\n  user: null,\n}));\n\n// Mock AdminAuthContext\njest.mock('@elzatona/shared-contexts', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    AdminAuthProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    useAdminAuth: mockUseAdminAuthFn,\n    ThemeProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    useTheme: jest.fn(() => ({\n      isDarkMode: false,\n      toggleDarkMode: jest.fn(),\n      setDarkMode: jest.fn(),\n      isLoaded: true,\n    })),\n  };\n});\n\n// Mock fetch for API calls\nglobal.fetch = jest.fn();\n\n// Type definitions for mocks\ninterface MockRouter {\n  push: jest.MockedFunction<(url: string) => void>;\n  replace: jest.MockedFunction<(url: string) => void>;\n  prefetch: jest.MockedFunction<(url: string) => void>;\n  back: jest.MockedFunction<() => void>;\n  forward: jest.MockedFunction<() => void>;\n  refresh: jest.MockedFunction<() => void>;\n}\n\ndescribe('Admin Login Page', () => {\n  const mockPush = jest.fn();\n  const mockUseRouter = useRouter as jest.MockedFunction<typeof useRouter>;\n  const queryClient = new QueryClient();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    // Reset mock admin auth function to return default values\n    mockUseAdminAuthFn.mockReturnValue({\n      isAuthenticated: false,\n      isLoading: false,\n      login: jest.fn(),\n      logout: jest.fn(),\n      user: null,\n    });\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n      back: jest.fn(),\n      forward: jest.fn(),\n      refresh: jest.fn(),\n    } as MockRouter);\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('Page Rendering', () => {\n    it('should render login form with all required elements', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      expect(screen.getByText('Admin Login')).toBeInTheDocument();\n      expect(\n        screen.getByText('Access the admin dashboard')\n      ).toBeInTheDocument();\n      expect(screen.getByLabelText('Email Address')).toBeInTheDocument();\n      expect(screen.getByLabelText('Password')).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: 'Sign In' })\n      ).toBeInTheDocument();\n      expect(screen.getByText('← Back to Home')).toBeInTheDocument();\n    });\n\n    it('should render admin navbar with correct elements', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      expect(screen.getByText('Admin Access Portal')).toBeInTheDocument();\n      expect(\n        screen.getByText('Secure Authentication Required')\n      ).toBeInTheDocument();\n      expect(screen.getByText('Back to Site')).toBeInTheDocument();\n    });\n\n    it('should show loading state when authentication is in progress', () => {\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: true,\n        login: jest.fn(),\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      expect(screen.getByText('Loading...')).toBeInTheDocument();\n      expect(screen.getByRole('status')).toBeInTheDocument();\n    });\n\n    it('should redirect authenticated users to dashboard', () => {\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: true,\n        isLoading: false,\n        login: jest.fn(),\n        logout: jest.fn(),\n        user: {\n          id: '1',\n          email: 'afouadsoftwareengineer@gmail.com',\n          name: 'Admin User',\n          role: 'super_admin',\n        },\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n    });\n  });\n\n  describe('Form Validation', () => {\n    it('should show validation errors for empty fields', async () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByDisplayValue('')).toBeInTheDocument();\n      });\n\n      // Check that form validation prevents submission\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n\n      expect(emailInput).toBeRequired();\n      expect(passwordInput).toBeRequired();\n    });\n\n    it('should validate email format', async () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, { target: { value: 'invalid-email' } });\n      fireEvent.click(loginButton);\n\n      // HTML5 validation should prevent submission with invalid email\n      expect(emailInput).toHaveAttribute('type', 'email');\n    });\n\n    it('should clear error messages when user starts typing', async () => {\n      const mockLogin = jest.fn().mockResolvedValue({\n        success: false,\n        error: 'Invalid credentials',\n      });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // Submit with wrong credentials to trigger error\n      fireEvent.change(emailInput, { target: { value: 'wrong@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Invalid credentials')).toBeInTheDocument();\n      });\n\n      // Start typing to clear error\n      fireEvent.change(emailInput, { target: { value: 'test@example.com' } });\n\n      await waitFor(() => {\n        expect(\n          screen.queryByText('Invalid credentials')\n        ).not.toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Form Submission', () => {\n    it('should call login function with correct credentials', async () => {\n      const mockLogin = jest.fn().mockResolvedValue({ success: true });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(mockLogin).toHaveBeenCalledWith(\n          'afouadsoftwareengineer@gmail.com',\n          'ZatonaFoushware$8888'\n        );\n      });\n    });\n\n    it('should show loading state during login', async () => {\n      const mockLogin = jest\n        .fn()\n        .mockImplementation(\n          () =>\n            new Promise(resolve =>\n              setTimeout(() => resolve({ success: true }), 100)\n            )\n        );\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      expect(screen.getByText('Signing In...')).toBeInTheDocument();\n      expect(loginButton).toBeDisabled();\n    });\n\n    it('should show error message on login failure', async () => {\n      const mockLogin = jest\n        .fn()\n        .mockResolvedValue({ success: false, error: 'Invalid credentials' });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, { target: { value: 'wrong@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Invalid credentials')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle network errors gracefully', async () => {\n      const mockLogin = jest.fn().mockRejectedValue(new Error('Network error'));\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(\n          screen.getByText('An unexpected error occurred')\n        ).toBeInTheDocument();\n      });\n    });\n\n    it('should handle generic login failure', async () => {\n      const mockLogin = jest.fn().mockResolvedValue({ success: false });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, { target: { value: 'wrong@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Login failed')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('User Interactions', () => {\n    it('should submit form on Enter key press', async () => {\n      const mockLogin = jest.fn().mockResolvedValue({ success: true });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.keyDown(passwordInput, { key: 'Enter', code: 'Enter' });\n\n      await waitFor(() => {\n        expect(mockLogin).toHaveBeenCalledWith(\n          'afouadsoftwareengineer@gmail.com',\n          'ZatonaFoushware$8888'\n        );\n      });\n    });\n\n    it('should update form fields correctly', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n\n      fireEvent.change(emailInput, { target: { value: 'test@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'testpassword' } });\n\n      expect(emailInput).toHaveValue('test@example.com');\n      expect(passwordInput).toHaveValue('testpassword');\n    });\n\n    it('should disable submit button during loading', async () => {\n      const mockLogin = jest\n        .fn()\n        .mockImplementation(\n          () =>\n            new Promise(resolve =>\n              setTimeout(() => resolve({ success: true }), 100)\n            )\n        );\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      expect(loginButton).toBeDisabled();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('should have proper ARIA labels and roles', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      expect(screen.getByLabelText('Email Address')).toBeInTheDocument();\n      expect(screen.getByLabelText('Password')).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: 'Sign In' })\n      ).toBeInTheDocument();\n      expect(screen.getByRole('form')).toBeInTheDocument();\n    });\n\n    it('should be keyboard navigable', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      emailInput.focus();\n      expect(emailInput).toHaveFocus();\n\n      fireEvent.keyDown(emailInput, { key: 'Tab' });\n      expect(passwordInput).toHaveFocus();\n\n      fireEvent.keyDown(passwordInput, { key: 'Tab' });\n      expect(loginButton).toHaveFocus();\n    });\n\n    it('should have proper form structure', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const form = screen.getByRole('form');\n      expect(form).toBeInTheDocument();\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n\n      expect(emailInput).toHaveAttribute('type', 'email');\n      expect(passwordInput).toHaveAttribute('type', 'password');\n      expect(emailInput).toBeRequired();\n      expect(passwordInput).toBeRequired();\n    });\n  });\n\n  describe('Security Features', () => {\n    it('should not log sensitive information', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n\n      // Check that password is not logged\n      expect(consoleSpy).not.toHaveBeenCalledWith(\n        expect.stringContaining('ZatonaFoushware$8888')\n      );\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should prevent XSS attacks in form inputs', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const maliciousInput = '<script>alert(\"xss\")</script>';\n\n      fireEvent.change(emailInput, { target: { value: maliciousInput } });\n\n      // The input should be sanitized and not execute the script\n      expect(emailInput).toHaveValue(maliciousInput);\n      expect(screen.queryByText('xss')).not.toBeInTheDocument();\n    });\n\n    it('should use secure password input type', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const passwordInput = screen.getByLabelText('Password');\n      expect(passwordInput).toHaveAttribute('type', 'password');\n    });\n  });\n\n  describe('Navigation', () => {\n    it('should have working back to home link', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const backLink = screen.getByText('← Back to Home');\n      expect(backLink).toBeInTheDocument();\n      expect(backLink.closest('a')).toHaveAttribute('href', '/');\n    });\n\n    it('should have working back to site link in navbar', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const backToSiteLink = screen.getByText('Back to Site');\n      expect(backToSiteLink).toBeInTheDocument();\n      expect(backToSiteLink.closest('a')).toHaveAttribute('href', '/');\n    });\n  });\n\n  describe('Theme Support', () => {\n    it('should support dark mode classes', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const container = screen.getByText('Admin Login').closest('div');\n      expect(container).toHaveClass('dark:text-white');\n    });\n\n    it('should have theme toggle button in navbar', () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const themeButton = screen.getByLabelText('Toggle theme');\n      expect(themeButton).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should display error messages with proper styling', async () => {\n      const mockLogin = jest\n        .fn()\n        .mockResolvedValue({ success: false, error: 'Test error message' });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, { target: { value: 'test@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'testpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        const errorMessage = screen.getByText('Test error message');\n        expect(errorMessage).toBeInTheDocument();\n        expect(errorMessage).toHaveClass('text-red-600');\n      });\n    });\n\n    it('should clear error state when form is resubmitted', async () => {\n      const mockLogin = jest\n        .fn()\n        .mockResolvedValueOnce({ success: false, error: 'First error' })\n        .mockResolvedValueOnce({ success: true });\n      mockUseAdminAuthFn.mockReturnValue({\n        isAuthenticated: false,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // First submission with error\n      fireEvent.change(emailInput, { target: { value: 'test@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('First error')).toBeInTheDocument();\n      });\n\n      // Second submission with success\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.queryByText('First error')).not.toBeInTheDocument();\n      });\n    });\n  });\n});\n"],"names":["jest","mock","useQueryState","fn","useQueryStates","parseAsString","parseAsInteger","createSearchParamsCache","createClient","from","select","eq","mockResolvedValue","data","error","React","require","QueryClientProvider","children","QueryClient","invalidateQueries","setQueryData","getQueryData","useQueryClient","useQuery","isLoading","useMutation","mutate","mutateAsync","useRouter","AdminAuthProvider","useAdminAuth","mockUseAdminAuthFn","ThemeProvider","useTheme","isDarkMode","toggleDarkMode","setDarkMode","isLoaded","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","isAuthenticated","login","logout","user","global","fetch","describe","mockPush","mockUseRouter","queryClient","beforeEach","clearAllMocks","mockReturnValue","push","replace","prefetch","back","forward","refresh","afterEach","restoreAllMocks","it","render","client","AdminLoginPage","expect","screen","getByText","toBeInTheDocument","getByLabelText","getByRole","name","id","email","role","toHaveBeenCalledWith","loginButton","fireEvent","click","waitFor","getByDisplayValue","emailInput","passwordInput","toBeRequired","change","target","value","toHaveAttribute","mockLogin","success","queryByText","not","mockImplementation","Promise","resolve","setTimeout","toBeDisabled","mockRejectedValue","Error","keyDown","key","code","toHaveValue","focus","toHaveFocus","form","consoleSpy","spyOn","console","stringContaining","mockRestore","maliciousInput","backLink","closest","backToSiteLink","container","toHaveClass","themeButton","errorMessage","mockResolvedValueOnce"],"mappings":"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"}
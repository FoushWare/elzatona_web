{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-integration.test.tsx"],"sourcesContent":["/**\n * Admin Integration Tests\n *\n * End-to-end integration tests for complete admin workflows:\n * - Complete CRUD workflows for all content types\n * - Cross-component interactions\n * - Data consistency across admin pages\n * - User journey testing\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\n\n// Mock TanStack Query\njest.mock('@tanstack/react-query', () => ({\n  useQuery: jest.fn(),\n  useMutation: jest.fn(),\n  useQueryClient: jest.fn(() => ({\n    invalidateQueries: jest.fn(),\n  })),\n}));\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n  useSearchParams: () => new URLSearchParams(),\n  usePathname: () => '/admin/content-management',\n}));\n\n// Set up environment variables\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock nuqs\njest.mock('nuqs', () => ({\n  useQueryState: jest.fn(() => [null, jest.fn()]),\n  useQueryStates: jest.fn(() => [{}, jest.fn()]),\n  parseAsString: jest.fn(),\n  parseAsInteger: jest.fn(),\n  createSearchParamsCache: jest.fn(),\n}));\n\n// Mock Supabase\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn().mockResolvedValue({ data: null, error: null }),\n      })),\n    })),\n  })),\n}));\n\n// Mock admin auth context - use correct import path\njest.mock('@elzatona/shared-contexts', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    AdminAuthProvider: ({ children }: { children: React.ReactNode }) =>\n      children,\n    useAdminAuth: jest.fn(() => ({\n      isAuthenticated: true,\n      user: { email: 'admin@test.com' },\n      login: jest.fn(),\n      logout: jest.fn(),\n    })),\n    ThemeProvider: ({ children }: { children: React.ReactNode }) => children,\n    useTheme: jest.fn(() => ({\n      isDarkMode: false,\n      toggleDarkMode: jest.fn(),\n    })),\n  };\n});\n\ndescribe('Admin Integration Tests', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const mockUseQuery = require('@tanstack/react-query').useQuery;\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const mockUseMutation = require('@tanstack/react-query').useMutation;\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const mockQueryClient = require('@tanstack/react-query').useQueryClient();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n\n    // Default mock for useQuery\n    mockUseQuery.mockReturnValue({\n      data: { data: [] },\n      isLoading: false,\n      error: null,\n      refetch: jest.fn(),\n    });\n\n    // Default mock for useMutation\n    mockUseMutation.mockReturnValue({\n      mutate: jest.fn(),\n      isLoading: false,\n      error: null,\n      isSuccess: false,\n    });\n  });\n\n  describe('Complete Card Management Workflow', () => {\n    it('should create, read, update, and delete a learning card', async () => {\n      const mockCards = [];\n      const mockMutation = jest.fn();\n      const mockInvalidateQueries = jest.fn();\n\n      mockQueryClient.invalidateQueries = mockInvalidateQueries;\n\n      mockUseQuery.mockReturnValue({\n        data: { data: mockCards },\n        isLoading: false,\n        error: null,\n      });\n\n      mockUseMutation.mockReturnValue({\n        mutate: mockMutation,\n        isLoading: false,\n        error: null,\n        isSuccess: true,\n      });\n\n      const ContentManagementPage = (\n        await import('@/app/admin/content-management/page')\n      ).default;\n      render(<ContentManagementPage />);\n\n      // Step 1: Create a new card\n      const addCardButton = screen.getByText(/add card/i);\n      await userEvent.click(addCardButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/create new card/i)).toBeInTheDocument();\n      });\n\n      const cardNameInput = screen.getByLabelText(/card name/i);\n      await userEvent.type(cardNameInput, 'Test Card');\n\n      const cardDescriptionInput = screen.getByLabelText(/description/i);\n      await userEvent.type(cardDescriptionInput, 'Test card description');\n\n      const createButton = screen.getByText(/create card/i);\n      await userEvent.click(createButton);\n\n      expect(mockMutation).toHaveBeenCalledWith(\n        expect.objectContaining({\n          name: 'Test Card',\n          description: 'Test card description',\n        })\n      );\n\n      // Step 2: Verify card appears in list (simulate successful creation)\n      mockUseQuery.mockReturnValue({\n        data: {\n          data: [\n            {\n              id: 'test-card-id',\n              name: 'Test Card',\n              description: 'Test card description',\n              type: 'core-technologies',\n              color: 'blue',\n            },\n          ],\n        },\n        isLoading: false,\n        error: null,\n      });\n\n      // Re-render to show updated data\n      render(<ContentManagementPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Test Card')).toBeInTheDocument();\n      });\n\n      // Step 3: Edit the card\n      const editButton = screen.getByLabelText(/edit card/i);\n      await userEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByDisplayValue('Test Card')).toBeInTheDocument();\n      });\n\n      const editNameInput = screen.getByDisplayValue('Test Card');\n      await userEvent.clear(editNameInput);\n      await userEvent.type(editNameInput, 'Updated Test Card');\n\n      const saveButton = screen.getByText(/save changes/i);\n      await userEvent.click(saveButton);\n\n      expect(mockMutation).toHaveBeenCalledWith(\n        expect.objectContaining({\n          name: 'Updated Test Card',\n        })\n      );\n\n      // Step 4: Delete the card\n      const deleteButton = screen.getByLabelText(/delete card/i);\n      await userEvent.click(deleteButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/confirm deletion/i)).toBeInTheDocument();\n      });\n\n      const confirmDeleteButton = screen.getByText(/delete/i);\n      await userEvent.click(confirmDeleteButton);\n\n      expect(mockMutation).toHaveBeenCalledWith('test-card-id');\n    });\n  });\n\n  describe('Complete Question Management Workflow', () => {\n    it('should create, read, update, and delete a question', async () => {\n      const mockQuestions = [];\n      const mockCards = [\n        { id: 'card-1', name: 'Core Technologies', type: 'core-technologies' },\n      ];\n      const mockPlans = [{ id: 'plan-1', name: '1 Day Plan', duration: 1 }];\n      const mockMutation = jest.fn();\n\n      mockUseQuery\n        .mockReturnValueOnce({\n          data: { data: mockQuestions },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: mockCards },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: mockPlans },\n          isLoading: false,\n          error: null,\n        });\n\n      mockUseMutation.mockReturnValue({\n        mutate: mockMutation,\n        isLoading: false,\n        error: null,\n        isSuccess: true,\n      });\n\n      const QuestionsPage = (await import('@/app/admin/content/questions/page'))\n        .default;\n      render(<QuestionsPage />);\n\n      // Step 1: Create a new question\n      const addQuestionButton = screen.getByText(/add question/i);\n      await userEvent.click(addQuestionButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/create new question/i)).toBeInTheDocument();\n      });\n\n      const questionInput = screen.getByLabelText(/question/i);\n      await userEvent.type(questionInput, 'What is JavaScript?');\n\n      const typeSelect = screen.getByLabelText(/type/i);\n      await userEvent.selectOptions(typeSelect, 'multiple-choice');\n\n      const difficultySelect = screen.getByLabelText(/difficulty/i);\n      await userEvent.selectOptions(difficultySelect, 'beginner');\n\n      const createButton = screen.getByText(/create question/i);\n      await userEvent.click(createButton);\n\n      expect(mockMutation).toHaveBeenCalledWith(\n        expect.objectContaining({\n          question: 'What is JavaScript?',\n          type: 'multiple-choice',\n          difficulty: 'beginner',\n        })\n      );\n\n      // Step 2: Verify question appears in list\n      mockUseQuery.mockReturnValue({\n        data: {\n          data: [\n            {\n              id: 'question-1',\n              question: 'What is JavaScript?',\n              type: 'multiple-choice',\n              difficulty: 'beginner',\n              category: 'javascript',\n            },\n          ],\n        },\n        isLoading: false,\n        error: null,\n      });\n\n      render(<QuestionsPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('What is JavaScript?')).toBeInTheDocument();\n      });\n\n      // Step 3: Edit the question\n      const editButton = screen.getByLabelText(/edit question/i);\n      await userEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(\n          screen.getByDisplayValue('What is JavaScript?')\n        ).toBeInTheDocument();\n      });\n\n      const editQuestionInput = screen.getByDisplayValue('What is JavaScript?');\n      await userEvent.clear(editQuestionInput);\n      await userEvent.type(\n        editQuestionInput,\n        'What is JavaScript programming language?'\n      );\n\n      const saveButton = screen.getByText(/save changes/i);\n      await userEvent.click(saveButton);\n\n      expect(mockMutation).toHaveBeenCalledWith(\n        expect.objectContaining({\n          question: 'What is JavaScript programming language?',\n        })\n      );\n\n      // Step 4: Delete the question\n      const deleteButton = screen.getByLabelText(/delete question/i);\n      await userEvent.click(deleteButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/confirm deletion/i)).toBeInTheDocument();\n      });\n\n      const confirmDeleteButton = screen.getByText(/delete/i);\n      await userEvent.click(confirmDeleteButton);\n\n      expect(mockMutation).toHaveBeenCalledWith('question-1');\n    });\n  });\n\n  describe('Cross-Component Data Consistency', () => {\n    it('should maintain data consistency between content management and questions pages', async () => {\n      const mockCards = [\n        { id: 'card-1', name: 'Core Technologies', type: 'core-technologies' },\n      ];\n      const mockQuestions = [\n        {\n          id: 'question-1',\n          question: 'What is JavaScript?',\n          category: 'javascript',\n          cardType: 'core-technologies',\n        },\n      ];\n\n      // Mock for content management page\n      mockUseQuery\n        .mockReturnValueOnce({\n          data: { data: mockCards },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: [] },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: [] },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: [] },\n          isLoading: false,\n          error: null,\n        });\n\n      const ContentManagementPage = (\n        await import('@/app/admin/content-management/page')\n      ).default;\n      render(<ContentManagementPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Core Technologies')).toBeInTheDocument();\n      });\n\n      // Mock for questions page\n      mockUseQuery\n        .mockReturnValueOnce({\n          data: { data: mockQuestions },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: mockCards },\n          isLoading: false,\n          error: null,\n        })\n        .mockReturnValueOnce({\n          data: { data: [] },\n          isLoading: false,\n          error: null,\n        });\n\n      const QuestionsPage = (await import('@/app/admin/content/questions/page'))\n        .default;\n      render(<QuestionsPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('What is JavaScript?')).toBeInTheDocument();\n        expect(screen.getByText('core-technologies')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Search and Filter Integration', () => {\n    it('should maintain search state across different admin pages', async () => {\n      const mockQuestions = [\n        { id: 'q1', question: 'What is React?', category: 'react' },\n        { id: 'q2', question: 'What is JavaScript?', category: 'javascript' },\n      ];\n\n      mockUseQuery.mockReturnValue({\n        data: { data: mockQuestions },\n        isLoading: false,\n        error: null,\n      });\n\n      const QuestionsPage = (await import('@/app/admin/content/questions/page'))\n        .default;\n      render(<QuestionsPage />);\n\n      // Search for React questions\n      const searchInput = screen.getByPlaceholderText(/search questions/i);\n      await userEvent.type(searchInput, 'React');\n\n      await waitFor(() => {\n        expect(screen.getByText('What is React?')).toBeInTheDocument();\n        expect(\n          screen.queryByText('What is JavaScript?')\n        ).not.toBeInTheDocument();\n      });\n\n      // Filter by category\n      const categoryFilter = screen.getByLabelText(/filter by category/i);\n      await userEvent.selectOptions(categoryFilter, 'react');\n\n      await waitFor(() => {\n        expect(screen.getByText('What is React?')).toBeInTheDocument();\n        expect(\n          screen.queryByText('What is JavaScript?')\n        ).not.toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Bulk Operations Integration', () => {\n    it('should handle bulk operations across multiple content types', async () => {\n      const mockQuestions = [\n        { id: 'q1', question: 'Question 1', category: 'react' },\n        { id: 'q2', question: 'Question 2', category: 'react' },\n        { id: 'q3', question: 'Question 3', category: 'javascript' },\n      ];\n\n      const mockMutation = jest.fn();\n\n      mockUseQuery.mockReturnValue({\n        data: { data: mockQuestions },\n        isLoading: false,\n        error: null,\n      });\n\n      mockUseMutation.mockReturnValue({\n        mutate: mockMutation,\n        isLoading: false,\n        error: null,\n        isSuccess: true,\n      });\n\n      const QuestionsPage = (await import('@/app/admin/content/questions/page'))\n        .default;\n      render(<QuestionsPage />);\n\n      // Select multiple questions\n      const checkboxes = screen.getAllByRole('checkbox');\n      await userEvent.click(checkboxes[1]); // Select second question\n      await userEvent.click(checkboxes[2]); // Select third question\n\n      // Perform bulk operation (e.g., bulk delete)\n      const bulkDeleteButton = screen.getByText(/bulk delete/i);\n      await userEvent.click(bulkDeleteButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/confirm bulk deletion/i)).toBeInTheDocument();\n      });\n\n      const confirmBulkDeleteButton = screen.getByText(/delete selected/i);\n      await userEvent.click(confirmBulkDeleteButton);\n\n      expect(mockMutation).toHaveBeenCalledWith(['q2', 'q3']);\n    });\n  });\n\n  describe('Error Recovery Integration', () => {\n    it('should handle and recover from errors gracefully across components', async () => {\n      // Simulate initial error\n      mockUseQuery.mockReturnValue({\n        data: undefined,\n        isLoading: false,\n        error: new Error('Network error'),\n      });\n\n      const ContentManagementPage = (\n        await import('@/app/admin/content-management/page')\n      ).default;\n      render(<ContentManagementPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText(/error/i)).toBeInTheDocument();\n      });\n\n      // Simulate retry\n      const retryButton = screen.getByText(/retry/i);\n      await userEvent.click(retryButton);\n\n      // Mock successful retry\n      mockUseQuery.mockReturnValue({\n        data: { data: [] },\n        isLoading: false,\n        error: null,\n      });\n\n      await waitFor(() => {\n        expect(screen.queryByText(/error/i)).not.toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Performance Integration', () => {\n    it('should handle large datasets efficiently', async () => {\n      // Create large dataset\n      const largeDataset = Array.from({ length: 1000 }, (_, i) => ({\n        id: `item-${i}`,\n        name: `Item ${i}`,\n        category: `category-${i % 10}`,\n      }));\n\n      mockUseQuery.mockReturnValue({\n        data: { data: largeDataset },\n        isLoading: false,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      const QuestionsPage = (await import('@/app/admin/content/questions/page'))\n        .default;\n      render(<QuestionsPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Item 0')).toBeInTheDocument();\n      });\n\n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n\n      // Should render within reasonable time (less than 1 second)\n      expect(renderTime).toBeLessThan(1000);\n    });\n  });\n});\n"],"names":["jest","mock","useQuery","fn","useMutation","useQueryClient","invalidateQueries","useRouter","push","replace","prefetch","useSearchParams","URLSearchParams","usePathname","useQueryState","useQueryStates","parseAsString","parseAsInteger","createSearchParamsCache","createClient","from","select","eq","mockResolvedValue","data","error","React","require","AdminAuthProvider","children","useAdminAuth","isAuthenticated","user","email","login","logout","ThemeProvider","useTheme","isDarkMode","toggleDarkMode","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","describe","mockUseQuery","mockUseMutation","mockQueryClient","beforeEach","clearAllMocks","mockReturnValue","isLoading","refetch","mutate","isSuccess","it","mockCards","mockMutation","mockInvalidateQueries","ContentManagementPage","default","render","addCardButton","screen","getByText","userEvent","click","waitFor","expect","toBeInTheDocument","cardNameInput","getByLabelText","type","cardDescriptionInput","createButton","toHaveBeenCalledWith","objectContaining","name","description","id","color","editButton","getByDisplayValue","editNameInput","clear","saveButton","deleteButton","confirmDeleteButton","mockQuestions","mockPlans","duration","mockReturnValueOnce","QuestionsPage","addQuestionButton","questionInput","typeSelect","selectOptions","difficultySelect","question","difficulty","category","editQuestionInput","cardType","searchInput","getByPlaceholderText","queryByText","not","categoryFilter","checkboxes","getAllByRole","bulkDeleteButton","confirmBulkDeleteButton","undefined","Error","retryButton","largeDataset","Array","length","_","i","startTime","performance","now","endTime","renderTime","toBeLessThan"],"mappings":"AAAA;;;;;;;;CAQC;AAMD,sBAAsB;AACtBA,KAAKC,IAAI,CAAC,yBAAyB,IAAO,CAAA;QACxCC,UAAUF,KAAKG,EAAE;QACjBC,aAAaJ,KAAKG,EAAE;QACpBE,gBAAgBL,KAAKG,EAAE,CAAC,IAAO,CAAA;gBAC7BG,mBAAmBN,KAAKG,EAAE;YAC5B,CAAA;IACF,CAAA;AAEA,sBAAsB;AACtBH,KAAKC,IAAI,CAAC,mBAAmB,IAAO,CAAA;QAClCM,WAAW,IAAO,CAAA;gBAChBC,MAAMR,KAAKG,EAAE;gBACbM,SAAST,KAAKG,EAAE;gBAChBO,UAAUV,KAAKG,EAAE;YACnB,CAAA;QACAQ,iBAAiB,IAAM,IAAIC;QAC3BC,aAAa,IAAM;IACrB,CAAA;AAOA,YAAY;AACZb,KAAKC,IAAI,CAAC,QAAQ,IAAO,CAAA;QACvBa,eAAed,KAAKG,EAAE,CAAC,IAAM;gBAAC;gBAAMH,KAAKG,EAAE;aAAG;QAC9CY,gBAAgBf,KAAKG,EAAE,CAAC,IAAM;gBAAC,CAAC;gBAAGH,KAAKG,EAAE;aAAG;QAC7Ca,eAAehB,KAAKG,EAAE;QACtBc,gBAAgBjB,KAAKG,EAAE;QACvBe,yBAAyBlB,KAAKG,EAAE;IAClC,CAAA;AAEA,gBAAgB;AAChBH,KAAKC,IAAI,CAAC,yBAAyB,IAAO,CAAA;QACxCkB,cAAcnB,KAAKG,EAAE,CAAC,IAAO,CAAA;gBAC3BiB,MAAMpB,KAAKG,EAAE,CAAC,IAAO,CAAA;wBACnBkB,QAAQrB,KAAKG,EAAE,CAAC,IAAO,CAAA;gCACrBmB,IAAItB,KAAKG,EAAE,GAAGoB,iBAAiB,CAAC;oCAAEC,MAAM;oCAAMC,OAAO;gCAAK;4BAC5D,CAAA;oBACF,CAAA;YACF,CAAA;IACF,CAAA;AAEA,oDAAoD;AACpDzB,KAAKC,IAAI,CAAC,6BAA6B;IACrC,iEAAiE;IACjE,MAAMyB,QAAQC,QAAQ;IACtB,OAAO;QACLC,mBAAmB,CAAC,EAAEC,QAAQ,EAAiC,GAC7DA;QACFC,cAAc9B,KAAKG,EAAE,CAAC,IAAO,CAAA;gBAC3B4B,iBAAiB;gBACjBC,MAAM;oBAAEC,OAAO;gBAAiB;gBAChCC,OAAOlC,KAAKG,EAAE;gBACdgC,QAAQnC,KAAKG,EAAE;YACjB,CAAA;QACAiC,eAAe,CAAC,EAAEP,QAAQ,EAAiC,GAAKA;QAChEQ,UAAUrC,KAAKG,EAAE,CAAC,IAAO,CAAA;gBACvBmC,YAAY;gBACZC,gBAAgBvC,KAAKG,EAAE;YACzB,CAAA;IACF;AACF;;;;;8DApEkB;wBACiC;kEAC7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBtB,+BAA+B;AAC/BqC,QAAQC,GAAG,CAACC,wBAAwB,GAAG;AACvCF,QAAQC,GAAG,CAACE,6BAA6B,GAAG;AAC5CH,QAAQC,GAAG,CAACG,yBAAyB,GAAG;AA2CxCC,SAAS,2BAA2B;IAClC,iEAAiE;IACjE,MAAMC,eAAenB,QAAQ,yBAAyBzB,QAAQ;IAC9D,iEAAiE;IACjE,MAAM6C,kBAAkBpB,QAAQ,yBAAyBvB,WAAW;IACpE,iEAAiE;IACjE,MAAM4C,kBAAkBrB,QAAQ,yBAAyBtB,cAAc;IAEvE4C,WAAW;QACTjD,KAAKkD,aAAa;QAElB,4BAA4B;QAC5BJ,aAAaK,eAAe,CAAC;YAC3B3B,MAAM;gBAAEA,MAAM,EAAE;YAAC;YACjB4B,WAAW;YACX3B,OAAO;YACP4B,SAASrD,KAAKG,EAAE;QAClB;QAEA,+BAA+B;QAC/B4C,gBAAgBI,eAAe,CAAC;YAC9BG,QAAQtD,KAAKG,EAAE;YACfiD,WAAW;YACX3B,OAAO;YACP8B,WAAW;QACb;IACF;IAEAV,SAAS,qCAAqC;QAC5CW,GAAG,2DAA2D;YAC5D,MAAMC,YAAY,EAAE;YACpB,MAAMC,eAAe1D,KAAKG,EAAE;YAC5B,MAAMwD,wBAAwB3D,KAAKG,EAAE;YAErC6C,gBAAgB1C,iBAAiB,GAAGqD;YAEpCb,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBAAEA,MAAMiC;gBAAU;gBACxBL,WAAW;gBACX3B,OAAO;YACT;YAEAsB,gBAAgBI,eAAe,CAAC;gBAC9BG,QAAQI;gBACRN,WAAW;gBACX3B,OAAO;gBACP8B,WAAW;YACb;YAEA,MAAMK,wBAAwB,AAC5B,CAAA,MAAM,mEAAA,QAAO,6DAAqC,EAClDC,OAAO;YACTC,IAAAA,cAAM,gBAAC,qBAACF;YAER,4BAA4B;YAC5B,MAAMG,gBAAgBC,cAAM,CAACC,SAAS,CAAC;YACvC,MAAMC,kBAAS,CAACC,KAAK,CAACJ;YAEtB,MAAMK,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,qBAAqBK,iBAAiB;YAChE;YAEA,MAAMC,gBAAgBP,cAAM,CAACQ,cAAc,CAAC;YAC5C,MAAMN,kBAAS,CAACO,IAAI,CAACF,eAAe;YAEpC,MAAMG,uBAAuBV,cAAM,CAACQ,cAAc,CAAC;YACnD,MAAMN,kBAAS,CAACO,IAAI,CAACC,sBAAsB;YAE3C,MAAMC,eAAeX,cAAM,CAACC,SAAS,CAAC;YACtC,MAAMC,kBAAS,CAACC,KAAK,CAACQ;YAEtBN,OAAOX,cAAckB,oBAAoB,CACvCP,OAAOQ,gBAAgB,CAAC;gBACtBC,MAAM;gBACNC,aAAa;YACf;YAGF,qEAAqE;YACrEjC,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBACJA,MAAM;wBACJ;4BACEwD,IAAI;4BACJF,MAAM;4BACNC,aAAa;4BACbN,MAAM;4BACNQ,OAAO;wBACT;qBACD;gBACH;gBACA7B,WAAW;gBACX3B,OAAO;YACT;YAEA,iCAAiC;YACjCqC,IAAAA,cAAM,gBAAC,qBAACF;YAER,MAAMQ,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,cAAcK,iBAAiB;YACzD;YAEA,wBAAwB;YACxB,MAAMY,aAAalB,cAAM,CAACQ,cAAc,CAAC;YACzC,MAAMN,kBAAS,CAACC,KAAK,CAACe;YAEtB,MAAMd,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACmB,iBAAiB,CAAC,cAAcb,iBAAiB;YACjE;YAEA,MAAMc,gBAAgBpB,cAAM,CAACmB,iBAAiB,CAAC;YAC/C,MAAMjB,kBAAS,CAACmB,KAAK,CAACD;YACtB,MAAMlB,kBAAS,CAACO,IAAI,CAACW,eAAe;YAEpC,MAAME,aAAatB,cAAM,CAACC,SAAS,CAAC;YACpC,MAAMC,kBAAS,CAACC,KAAK,CAACmB;YAEtBjB,OAAOX,cAAckB,oBAAoB,CACvCP,OAAOQ,gBAAgB,CAAC;gBACtBC,MAAM;YACR;YAGF,0BAA0B;YAC1B,MAAMS,eAAevB,cAAM,CAACQ,cAAc,CAAC;YAC3C,MAAMN,kBAAS,CAACC,KAAK,CAACoB;YAEtB,MAAMnB,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,sBAAsBK,iBAAiB;YACjE;YAEA,MAAMkB,sBAAsBxB,cAAM,CAACC,SAAS,CAAC;YAC7C,MAAMC,kBAAS,CAACC,KAAK,CAACqB;YAEtBnB,OAAOX,cAAckB,oBAAoB,CAAC;QAC5C;IACF;IAEA/B,SAAS,yCAAyC;QAChDW,GAAG,sDAAsD;YACvD,MAAMiC,gBAAgB,EAAE;YACxB,MAAMhC,YAAY;gBAChB;oBAAEuB,IAAI;oBAAUF,MAAM;oBAAqBL,MAAM;gBAAoB;aACtE;YACD,MAAMiB,YAAY;gBAAC;oBAAEV,IAAI;oBAAUF,MAAM;oBAAca,UAAU;gBAAE;aAAE;YACrE,MAAMjC,eAAe1D,KAAKG,EAAE;YAE5B2C,aACG8C,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAMiE;gBAAc;gBAC5BrC,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAMiC;gBAAU;gBACxBL,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAMkE;gBAAU;gBACxBtC,WAAW;gBACX3B,OAAO;YACT;YAEFsB,gBAAgBI,eAAe,CAAC;gBAC9BG,QAAQI;gBACRN,WAAW;gBACX3B,OAAO;gBACP8B,WAAW;YACb;YAEA,MAAMsC,gBAAgB,AAAC,CAAA,MAAM,mEAAA,QAAO,4DAAoC,EACrEhC,OAAO;YACVC,IAAAA,cAAM,gBAAC,qBAAC+B;YAER,gCAAgC;YAChC,MAAMC,oBAAoB9B,cAAM,CAACC,SAAS,CAAC;YAC3C,MAAMC,kBAAS,CAACC,KAAK,CAAC2B;YAEtB,MAAM1B,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,yBAAyBK,iBAAiB;YACpE;YAEA,MAAMyB,gBAAgB/B,cAAM,CAACQ,cAAc,CAAC;YAC5C,MAAMN,kBAAS,CAACO,IAAI,CAACsB,eAAe;YAEpC,MAAMC,aAAahC,cAAM,CAACQ,cAAc,CAAC;YACzC,MAAMN,kBAAS,CAAC+B,aAAa,CAACD,YAAY;YAE1C,MAAME,mBAAmBlC,cAAM,CAACQ,cAAc,CAAC;YAC/C,MAAMN,kBAAS,CAAC+B,aAAa,CAACC,kBAAkB;YAEhD,MAAMvB,eAAeX,cAAM,CAACC,SAAS,CAAC;YACtC,MAAMC,kBAAS,CAACC,KAAK,CAACQ;YAEtBN,OAAOX,cAAckB,oBAAoB,CACvCP,OAAOQ,gBAAgB,CAAC;gBACtBsB,UAAU;gBACV1B,MAAM;gBACN2B,YAAY;YACd;YAGF,0CAA0C;YAC1CtD,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBACJA,MAAM;wBACJ;4BACEwD,IAAI;4BACJmB,UAAU;4BACV1B,MAAM;4BACN2B,YAAY;4BACZC,UAAU;wBACZ;qBACD;gBACH;gBACAjD,WAAW;gBACX3B,OAAO;YACT;YAEAqC,IAAAA,cAAM,gBAAC,qBAAC+B;YAER,MAAMzB,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,wBAAwBK,iBAAiB;YACnE;YAEA,4BAA4B;YAC5B,MAAMY,aAAalB,cAAM,CAACQ,cAAc,CAAC;YACzC,MAAMN,kBAAS,CAACC,KAAK,CAACe;YAEtB,MAAMd,IAAAA,eAAO,EAAC;gBACZC,OACEL,cAAM,CAACmB,iBAAiB,CAAC,wBACzBb,iBAAiB;YACrB;YAEA,MAAMgC,oBAAoBtC,cAAM,CAACmB,iBAAiB,CAAC;YACnD,MAAMjB,kBAAS,CAACmB,KAAK,CAACiB;YACtB,MAAMpC,kBAAS,CAACO,IAAI,CAClB6B,mBACA;YAGF,MAAMhB,aAAatB,cAAM,CAACC,SAAS,CAAC;YACpC,MAAMC,kBAAS,CAACC,KAAK,CAACmB;YAEtBjB,OAAOX,cAAckB,oBAAoB,CACvCP,OAAOQ,gBAAgB,CAAC;gBACtBsB,UAAU;YACZ;YAGF,8BAA8B;YAC9B,MAAMZ,eAAevB,cAAM,CAACQ,cAAc,CAAC;YAC3C,MAAMN,kBAAS,CAACC,KAAK,CAACoB;YAEtB,MAAMnB,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,sBAAsBK,iBAAiB;YACjE;YAEA,MAAMkB,sBAAsBxB,cAAM,CAACC,SAAS,CAAC;YAC7C,MAAMC,kBAAS,CAACC,KAAK,CAACqB;YAEtBnB,OAAOX,cAAckB,oBAAoB,CAAC;QAC5C;IACF;IAEA/B,SAAS,oCAAoC;QAC3CW,GAAG,mFAAmF;YACpF,MAAMC,YAAY;gBAChB;oBAAEuB,IAAI;oBAAUF,MAAM;oBAAqBL,MAAM;gBAAoB;aACtE;YACD,MAAMgB,gBAAgB;gBACpB;oBACET,IAAI;oBACJmB,UAAU;oBACVE,UAAU;oBACVE,UAAU;gBACZ;aACD;YAED,mCAAmC;YACnCzD,aACG8C,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAMiC;gBAAU;gBACxBL,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAM,EAAE;gBAAC;gBACjB4B,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAM,EAAE;gBAAC;gBACjB4B,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAM,EAAE;gBAAC;gBACjB4B,WAAW;gBACX3B,OAAO;YACT;YAEF,MAAMmC,wBAAwB,AAC5B,CAAA,MAAM,mEAAA,QAAO,6DAAqC,EAClDC,OAAO;YACTC,IAAAA,cAAM,gBAAC,qBAACF;YAER,MAAMQ,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,sBAAsBK,iBAAiB;YACjE;YAEA,0BAA0B;YAC1BxB,aACG8C,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAMiE;gBAAc;gBAC5BrC,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAMiC;gBAAU;gBACxBL,WAAW;gBACX3B,OAAO;YACT,GACCmE,mBAAmB,CAAC;gBACnBpE,MAAM;oBAAEA,MAAM,EAAE;gBAAC;gBACjB4B,WAAW;gBACX3B,OAAO;YACT;YAEF,MAAMoE,gBAAgB,AAAC,CAAA,MAAM,mEAAA,QAAO,4DAAoC,EACrEhC,OAAO;YACVC,IAAAA,cAAM,gBAAC,qBAAC+B;YAER,MAAMzB,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,wBAAwBK,iBAAiB;gBACjED,OAAOL,cAAM,CAACC,SAAS,CAAC,sBAAsBK,iBAAiB;YACjE;QACF;IACF;IAEAzB,SAAS,iCAAiC;QACxCW,GAAG,6DAA6D;YAC9D,MAAMiC,gBAAgB;gBACpB;oBAAET,IAAI;oBAAMmB,UAAU;oBAAkBE,UAAU;gBAAQ;gBAC1D;oBAAErB,IAAI;oBAAMmB,UAAU;oBAAuBE,UAAU;gBAAa;aACrE;YAEDvD,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBAAEA,MAAMiE;gBAAc;gBAC5BrC,WAAW;gBACX3B,OAAO;YACT;YAEA,MAAMoE,gBAAgB,AAAC,CAAA,MAAM,mEAAA,QAAO,4DAAoC,EACrEhC,OAAO;YACVC,IAAAA,cAAM,gBAAC,qBAAC+B;YAER,6BAA6B;YAC7B,MAAMW,cAAcxC,cAAM,CAACyC,oBAAoB,CAAC;YAChD,MAAMvC,kBAAS,CAACO,IAAI,CAAC+B,aAAa;YAElC,MAAMpC,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,mBAAmBK,iBAAiB;gBAC5DD,OACEL,cAAM,CAAC0C,WAAW,CAAC,wBACnBC,GAAG,CAACrC,iBAAiB;YACzB;YAEA,qBAAqB;YACrB,MAAMsC,iBAAiB5C,cAAM,CAACQ,cAAc,CAAC;YAC7C,MAAMN,kBAAS,CAAC+B,aAAa,CAACW,gBAAgB;YAE9C,MAAMxC,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,mBAAmBK,iBAAiB;gBAC5DD,OACEL,cAAM,CAAC0C,WAAW,CAAC,wBACnBC,GAAG,CAACrC,iBAAiB;YACzB;QACF;IACF;IAEAzB,SAAS,+BAA+B;QACtCW,GAAG,+DAA+D;YAChE,MAAMiC,gBAAgB;gBACpB;oBAAET,IAAI;oBAAMmB,UAAU;oBAAcE,UAAU;gBAAQ;gBACtD;oBAAErB,IAAI;oBAAMmB,UAAU;oBAAcE,UAAU;gBAAQ;gBACtD;oBAAErB,IAAI;oBAAMmB,UAAU;oBAAcE,UAAU;gBAAa;aAC5D;YAED,MAAM3C,eAAe1D,KAAKG,EAAE;YAE5B2C,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBAAEA,MAAMiE;gBAAc;gBAC5BrC,WAAW;gBACX3B,OAAO;YACT;YAEAsB,gBAAgBI,eAAe,CAAC;gBAC9BG,QAAQI;gBACRN,WAAW;gBACX3B,OAAO;gBACP8B,WAAW;YACb;YAEA,MAAMsC,gBAAgB,AAAC,CAAA,MAAM,mEAAA,QAAO,4DAAoC,EACrEhC,OAAO;YACVC,IAAAA,cAAM,gBAAC,qBAAC+B;YAER,4BAA4B;YAC5B,MAAMgB,aAAa7C,cAAM,CAAC8C,YAAY,CAAC;YACvC,MAAM5C,kBAAS,CAACC,KAAK,CAAC0C,UAAU,CAAC,EAAE,GAAG,yBAAyB;YAC/D,MAAM3C,kBAAS,CAACC,KAAK,CAAC0C,UAAU,CAAC,EAAE,GAAG,wBAAwB;YAE9D,6CAA6C;YAC7C,MAAME,mBAAmB/C,cAAM,CAACC,SAAS,CAAC;YAC1C,MAAMC,kBAAS,CAACC,KAAK,CAAC4C;YAEtB,MAAM3C,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,2BAA2BK,iBAAiB;YACtE;YAEA,MAAM0C,0BAA0BhD,cAAM,CAACC,SAAS,CAAC;YACjD,MAAMC,kBAAS,CAACC,KAAK,CAAC6C;YAEtB3C,OAAOX,cAAckB,oBAAoB,CAAC;gBAAC;gBAAM;aAAK;QACxD;IACF;IAEA/B,SAAS,8BAA8B;QACrCW,GAAG,sEAAsE;YACvE,yBAAyB;YACzBV,aAAaK,eAAe,CAAC;gBAC3B3B,MAAMyF;gBACN7D,WAAW;gBACX3B,OAAO,IAAIyF,MAAM;YACnB;YAEA,MAAMtD,wBAAwB,AAC5B,CAAA,MAAM,mEAAA,QAAO,6DAAqC,EAClDC,OAAO;YACTC,IAAAA,cAAM,gBAAC,qBAACF;YAER,MAAMQ,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,WAAWK,iBAAiB;YACtD;YAEA,iBAAiB;YACjB,MAAM6C,cAAcnD,cAAM,CAACC,SAAS,CAAC;YACrC,MAAMC,kBAAS,CAACC,KAAK,CAACgD;YAEtB,wBAAwB;YACxBrE,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBAAEA,MAAM,EAAE;gBAAC;gBACjB4B,WAAW;gBACX3B,OAAO;YACT;YAEA,MAAM2C,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAAC0C,WAAW,CAAC,WAAWC,GAAG,CAACrC,iBAAiB;YAC5D;QACF;IACF;IAEAzB,SAAS,2BAA2B;QAClCW,GAAG,4CAA4C;YAC7C,uBAAuB;YACvB,MAAM4D,eAAeC,MAAMjG,IAAI,CAAC;gBAAEkG,QAAQ;YAAK,GAAG,CAACC,GAAGC,IAAO,CAAA;oBAC3DxC,IAAI,CAAC,KAAK,EAAEwC,GAAG;oBACf1C,MAAM,CAAC,KAAK,EAAE0C,GAAG;oBACjBnB,UAAU,CAAC,SAAS,EAAEmB,IAAI,IAAI;gBAChC,CAAA;YAEA1E,aAAaK,eAAe,CAAC;gBAC3B3B,MAAM;oBAAEA,MAAM4F;gBAAa;gBAC3BhE,WAAW;gBACX3B,OAAO;YACT;YAEA,MAAMgG,YAAYC,YAAYC,GAAG;YAEjC,MAAM9B,gBAAgB,AAAC,CAAA,MAAM,mEAAA,QAAO,4DAAoC,EACrEhC,OAAO;YACVC,IAAAA,cAAM,gBAAC,qBAAC+B;YAER,MAAMzB,IAAAA,eAAO,EAAC;gBACZC,OAAOL,cAAM,CAACC,SAAS,CAAC,WAAWK,iBAAiB;YACtD;YAEA,MAAMsD,UAAUF,YAAYC,GAAG;YAC/B,MAAME,aAAaD,UAAUH;YAE7B,4DAA4D;YAC5DpD,OAAOwD,YAAYC,YAAY,CAAC;QAClC;IACF;AACF"}
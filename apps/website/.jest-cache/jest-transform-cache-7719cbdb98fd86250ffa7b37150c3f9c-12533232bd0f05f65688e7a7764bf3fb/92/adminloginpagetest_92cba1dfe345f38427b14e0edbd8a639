e840b88f16ea0c1c073a33dd04ba2377
/**
 * Admin Login Page Tests
 *
 * Comprehensive tests for the admin login page component to ensure:
 * - Form rendering and validation
 * - User interactions
 * - Error handling
 * - Loading states
 * - Authentication flow
 * - Accessibility
 */ // Set up environment variables before any imports
"use strict";
// Mock nuqs before any imports that use it
jest.mock('nuqs', ()=>({
        useQueryState: jest.fn(()=>[
                null,
                jest.fn()
            ]),
        useQueryStates: jest.fn(()=>[
                {},
                jest.fn()
            ]),
        parseAsString: jest.fn(),
        parseAsInteger: jest.fn(),
        createSearchParamsCache: jest.fn()
    }));
// Mock Supabase before any imports
jest.mock('@supabase/supabase-js', ()=>({
        createClient: jest.fn(()=>({
                from: jest.fn(()=>({
                        select: jest.fn(()=>({
                                eq: jest.fn().mockResolvedValue({
                                    data: null,
                                    error: null
                                })
                            }))
                    }))
            }))
    }));
// Mock @tanstack/react-query
jest.mock('@tanstack/react-query', ()=>{
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    const React = require('react');
    return {
        QueryClientProvider: ({ children })=>children,
        QueryClient: jest.fn(()=>({
                invalidateQueries: jest.fn(),
                setQueryData: jest.fn(),
                getQueryData: jest.fn()
            })),
        useQueryClient: jest.fn(()=>({
                invalidateQueries: jest.fn(),
                setQueryData: jest.fn(),
                getQueryData: jest.fn()
            })),
        useQuery: jest.fn(()=>({
                data: null,
                isLoading: false,
                error: null
            })),
        useMutation: jest.fn(()=>({
                mutate: jest.fn(),
                mutateAsync: jest.fn(),
                isLoading: false,
                error: null
            }))
    };
});
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
// Mock AdminAuthContext
jest.mock('@elzatona/shared-contexts', ()=>{
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    const React = require('react');
    return {
        AdminAuthProvider: ({ children })=>children,
        useAdminAuth: mockUseAdminAuthFn,
        ThemeProvider: ({ children })=>children,
        useTheme: jest.fn(()=>({
                isDarkMode: false,
                toggleDarkMode: jest.fn(),
                setDarkMode: jest.fn(),
                isLoaded: true
            }))
    };
});
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _navigation = require("next/navigation");
const _sharedcontexts = require("../../libs/shared-contexts/src");
const _reactquery = require("@tanstack/react-query");
const _page = /*#__PURE__*/ _interop_require_default(require("../../apps/website/src/app/admin/login/page"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';
process.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';
// Create a mock function that can be configured per test
const mockUseAdminAuthFn = jest.fn(()=>({
        isAuthenticated: false,
        isLoading: false,
        login: jest.fn(),
        logout: jest.fn(),
        user: null
    }));
// Mock fetch for API calls
global.fetch = jest.fn();
describe('Admin Login Page', ()=>{
    const mockPush = jest.fn();
    const mockUseRouter = _navigation.useRouter;
    const queryClient = new _reactquery.QueryClient();
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock admin auth function to return default values
        mockUseAdminAuthFn.mockReturnValue({
            isAuthenticated: false,
            isLoading: false,
            login: jest.fn(),
            logout: jest.fn(),
            user: null
        });
        mockUseRouter.mockReturnValue({
            push: mockPush,
            replace: jest.fn(),
            prefetch: jest.fn(),
            back: jest.fn(),
            forward: jest.fn(),
            refresh: jest.fn()
        });
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('Page Rendering', ()=>{
        it('should render login form with all required elements', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText('Admin Login')).toBeInTheDocument();
            expect(_react1.screen.getByText('Access the admin dashboard')).toBeInTheDocument();
            expect(_react1.screen.getByLabelText('Email Address')).toBeInTheDocument();
            expect(_react1.screen.getByLabelText('Password')).toBeInTheDocument();
            expect(_react1.screen.getByRole('button', {
                name: 'Sign In'
            })).toBeInTheDocument();
            expect(_react1.screen.getByText('← Back to Home')).toBeInTheDocument();
        });
        it('should render admin navbar with correct elements', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText('Admin Access Portal')).toBeInTheDocument();
            expect(_react1.screen.getByText('Secure Authentication Required')).toBeInTheDocument();
            expect(_react1.screen.getByText('Back to Site')).toBeInTheDocument();
        });
        it('should show loading state when authentication is in progress', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: true,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText('Loading...')).toBeInTheDocument();
            expect(_react1.screen.getByRole('status')).toBeInTheDocument();
        });
        it('should redirect authenticated users to dashboard', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    id: '1',
                    email: 'afouadsoftwareengineer@gmail.com',
                    name: 'Admin User',
                    role: 'super_admin'
                }
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
        });
    });
    describe('Form Validation', ()=>{
        it('should show validation errors for empty fields', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByDisplayValue('')).toBeInTheDocument();
            });
            // Check that form validation prevents submission
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            expect(emailInput).toBeRequired();
            expect(passwordInput).toBeRequired();
        });
        it('should validate email format', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'invalid-email'
                }
            });
            _react1.fireEvent.click(loginButton);
            // HTML5 validation should prevent submission with invalid email
            expect(emailInput).toHaveAttribute('type', 'email');
        });
        it('should clear error messages when user starts typing', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: false,
                error: 'Invalid credentials'
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            // Submit with wrong credentials to trigger error
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'wrong@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'wrongpassword'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid credentials')).toBeInTheDocument();
            });
            // Start typing to clear error
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'test@example.com'
                }
            });
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.queryByText('Invalid credentials')).not.toBeInTheDocument();
            });
        });
    });
    describe('Form Submission', ()=>{
        it('should call login function with correct credentials', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: true
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(mockLogin).toHaveBeenCalledWith('afouadsoftwareengineer@gmail.com', 'ZatonaFoushware$8888');
            });
        });
        it('should show loading state during login', async ()=>{
            const mockLogin = jest.fn().mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            success: true
                        }), 100)));
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            _react1.fireEvent.click(loginButton);
            expect(_react1.screen.getByText('Signing In...')).toBeInTheDocument();
            expect(loginButton).toBeDisabled();
        });
        it('should show error message on login failure', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: false,
                error: 'Invalid credentials'
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'wrong@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'wrongpassword'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid credentials')).toBeInTheDocument();
            });
        });
        it('should handle network errors gracefully', async ()=>{
            const mockLogin = jest.fn().mockRejectedValue(new Error('Network error'));
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('An unexpected error occurred')).toBeInTheDocument();
            });
        });
        it('should handle generic login failure', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: false
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'wrong@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'wrongpassword'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Login failed')).toBeInTheDocument();
            });
        });
    });
    describe('User Interactions', ()=>{
        it('should submit form on Enter key press', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: true
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            _react1.fireEvent.keyDown(passwordInput, {
                key: 'Enter',
                code: 'Enter'
            });
            await (0, _react1.waitFor)(()=>{
                expect(mockLogin).toHaveBeenCalledWith('afouadsoftwareengineer@gmail.com', 'ZatonaFoushware$8888');
            });
        });
        it('should update form fields correctly', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'test@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'testpassword'
                }
            });
            expect(emailInput).toHaveValue('test@example.com');
            expect(passwordInput).toHaveValue('testpassword');
        });
        it('should disable submit button during loading', async ()=>{
            const mockLogin = jest.fn().mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            success: true
                        }), 100)));
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            _react1.fireEvent.click(loginButton);
            expect(loginButton).toBeDisabled();
        });
    });
    describe('Accessibility', ()=>{
        it('should have proper ARIA labels and roles', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByLabelText('Email Address')).toBeInTheDocument();
            expect(_react1.screen.getByLabelText('Password')).toBeInTheDocument();
            expect(_react1.screen.getByRole('button', {
                name: 'Sign In'
            })).toBeInTheDocument();
            expect(_react1.screen.getByRole('form')).toBeInTheDocument();
        });
        it('should be keyboard navigable', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            emailInput.focus();
            expect(emailInput).toHaveFocus();
            _react1.fireEvent.keyDown(emailInput, {
                key: 'Tab'
            });
            expect(passwordInput).toHaveFocus();
            _react1.fireEvent.keyDown(passwordInput, {
                key: 'Tab'
            });
            expect(loginButton).toHaveFocus();
        });
        it('should have proper form structure', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const form = _react1.screen.getByRole('form');
            expect(form).toBeInTheDocument();
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            expect(emailInput).toHaveAttribute('type', 'email');
            expect(passwordInput).toHaveAttribute('type', 'password');
            expect(emailInput).toBeRequired();
            expect(passwordInput).toBeRequired();
        });
    });
    describe('Security Features', ()=>{
        it('should not log sensitive information', ()=>{
            const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            // Check that password is not logged
            expect(consoleSpy).not.toHaveBeenCalledWith(expect.stringContaining('ZatonaFoushware$8888'));
            consoleSpy.mockRestore();
        });
        it('should prevent XSS attacks in form inputs', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const maliciousInput = '<script>alert("xss")</script>';
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: maliciousInput
                }
            });
            // The input should be sanitized and not execute the script
            expect(emailInput).toHaveValue(maliciousInput);
            expect(_react1.screen.queryByText('xss')).not.toBeInTheDocument();
        });
        it('should use secure password input type', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const passwordInput = _react1.screen.getByLabelText('Password');
            expect(passwordInput).toHaveAttribute('type', 'password');
        });
    });
    describe('Navigation', ()=>{
        it('should have working back to home link', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const backLink = _react1.screen.getByText('← Back to Home');
            expect(backLink).toBeInTheDocument();
            expect(backLink.closest('a')).toHaveAttribute('href', '/');
        });
        it('should have working back to site link in navbar', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const backToSiteLink = _react1.screen.getByText('Back to Site');
            expect(backToSiteLink).toBeInTheDocument();
            expect(backToSiteLink.closest('a')).toHaveAttribute('href', '/');
        });
    });
    describe('Theme Support', ()=>{
        it('should support dark mode classes', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const container = _react1.screen.getByText('Admin Login').closest('div');
            expect(container).toHaveClass('dark:text-white');
        });
        it('should have theme toggle button in navbar', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const themeButton = _react1.screen.getByLabelText('Toggle theme');
            expect(themeButton).toBeInTheDocument();
        });
    });
    describe('Error Handling', ()=>{
        it('should display error messages with proper styling', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: false,
                error: 'Test error message'
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'test@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'testpassword'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                const errorMessage = _react1.screen.getByText('Test error message');
                expect(errorMessage).toBeInTheDocument();
                expect(errorMessage).toHaveClass('text-red-600');
            });
        });
        it('should clear error state when form is resubmitted', async ()=>{
            const mockLogin = jest.fn().mockResolvedValueOnce({
                success: false,
                error: 'First error'
            }).mockResolvedValueOnce({
                success: true
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText('Email Address');
            const passwordInput = _react1.screen.getByLabelText('Password');
            const loginButton = _react1.screen.getByRole('button', {
                name: 'Sign In'
            });
            // First submission with error
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'test@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'wrongpassword'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('First error')).toBeInTheDocument();
            });
            // Second submission with success
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'afouadsoftwareengineer@gmail.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'ZatonaFoushware$8888'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.queryByText('First error')).not.toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL3Rlc3RzL2FkbWluL2FkbWluLWxvZ2luLXBhZ2UudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZG1pbiBMb2dpbiBQYWdlIFRlc3RzXG4gKlxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0cyBmb3IgdGhlIGFkbWluIGxvZ2luIHBhZ2UgY29tcG9uZW50IHRvIGVuc3VyZTpcbiAqIC0gRm9ybSByZW5kZXJpbmcgYW5kIHZhbGlkYXRpb25cbiAqIC0gVXNlciBpbnRlcmFjdGlvbnNcbiAqIC0gRXJyb3IgaGFuZGxpbmdcbiAqIC0gTG9hZGluZyBzdGF0ZXNcbiAqIC0gQXV0aGVudGljYXRpb24gZmxvd1xuICogLSBBY2Nlc3NpYmlsaXR5XG4gKi9cblxuLy8gU2V0IHVwIGVudmlyb25tZW50IHZhcmlhYmxlcyBiZWZvcmUgYW55IGltcG9ydHNcbnByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCA9ICdodHRwczovL3Rlc3Quc3VwYWJhc2UuY28nO1xucHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPSAndGVzdC1hbm9uLWtleSc7XG5wcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZID0gJ3Rlc3Qtc2VydmljZS1yb2xlLWtleSc7XG5cbi8vIE1vY2sgbnVxcyBiZWZvcmUgYW55IGltcG9ydHMgdGhhdCB1c2UgaXRcbmplc3QubW9jaygnbnVxcycsICgpID0+ICh7XG4gIHVzZVF1ZXJ5U3RhdGU6IGplc3QuZm4oKCkgPT4gW251bGwsIGplc3QuZm4oKV0pLFxuICB1c2VRdWVyeVN0YXRlczogamVzdC5mbigoKSA9PiBbe30sIGplc3QuZm4oKV0pLFxuICBwYXJzZUFzU3RyaW5nOiBqZXN0LmZuKCksXG4gIHBhcnNlQXNJbnRlZ2VyOiBqZXN0LmZuKCksXG4gIGNyZWF0ZVNlYXJjaFBhcmFtc0NhY2hlOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgU3VwYWJhc2UgYmVmb3JlIGFueSBpbXBvcnRzXG5qZXN0Lm1vY2soJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcycsICgpID0+ICh7XG4gIGNyZWF0ZUNsaWVudDogamVzdC5mbigoKSA9PiAoe1xuICAgIGZyb206IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfSksXG4gICAgICB9KSksXG4gICAgfSkpLFxuICB9KSksXG59KSk7XG5cbi8vIE1vY2sgQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5XG5qZXN0Lm1vY2soJ0B0YW5zdGFjay9yZWFjdC1xdWVyeScsICgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHNcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICByZXR1cm4ge1xuICAgIFF1ZXJ5Q2xpZW50UHJvdmlkZXI6ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PlxuICAgICAgY2hpbGRyZW4sXG4gICAgUXVlcnlDbGllbnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIGludmFsaWRhdGVRdWVyaWVzOiBqZXN0LmZuKCksXG4gICAgICBzZXRRdWVyeURhdGE6IGplc3QuZm4oKSxcbiAgICAgIGdldFF1ZXJ5RGF0YTogamVzdC5mbigpLFxuICAgIH0pKSxcbiAgICB1c2VRdWVyeUNsaWVudDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgaW52YWxpZGF0ZVF1ZXJpZXM6IGplc3QuZm4oKSxcbiAgICAgIHNldFF1ZXJ5RGF0YTogamVzdC5mbigpLFxuICAgICAgZ2V0UXVlcnlEYXRhOiBqZXN0LmZuKCksXG4gICAgfSkpLFxuICAgIHVzZVF1ZXJ5OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pKSxcbiAgICB1c2VNdXRhdGlvbjogamVzdC5mbigoKSA9PiAoe1xuICAgICAgbXV0YXRlOiBqZXN0LmZuKCksXG4gICAgICBtdXRhdGVBc3luYzogamVzdC5mbigpLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pKSxcbiAgfTtcbn0pO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCB7XG4gIHVzZUFkbWluQXV0aCxcbiAgQWRtaW5BdXRoUHJvdmlkZXIsXG4gIFRoZW1lUHJvdmlkZXIsXG59IGZyb20gJ0BlbHphdG9uYS9zaGFyZWQtY29udGV4dHMnO1xuaW1wb3J0IHsgUXVlcnlDbGllbnQsIFF1ZXJ5Q2xpZW50UHJvdmlkZXIgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IEFkbWluTG9naW5QYWdlIGZyb20gJ0AvYXBwL2FkbWluL2xvZ2luL3BhZ2UnO1xuXG4vLyBNb2NrIE5leHQuanMgcm91dGVyXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxufSkpO1xuXG4vLyBDcmVhdGUgYSBtb2NrIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNvbmZpZ3VyZWQgcGVyIHRlc3RcbmNvbnN0IG1vY2tVc2VBZG1pbkF1dGhGbiA9IGplc3QuZm4oKCkgPT4gKHtcbiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgbG9naW46IGplc3QuZm4oKSxcbiAgbG9nb3V0OiBqZXN0LmZuKCksXG4gIHVzZXI6IG51bGwsXG59KSk7XG5cbi8vIE1vY2sgQWRtaW5BdXRoQ29udGV4dFxuamVzdC5tb2NrKCdAZWx6YXRvbmEvc2hhcmVkLWNvbnRleHRzJywgKCkgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0c1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIHJldHVybiB7XG4gICAgQWRtaW5BdXRoUHJvdmlkZXI6ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PlxuICAgICAgY2hpbGRyZW4sXG4gICAgdXNlQWRtaW5BdXRoOiBtb2NrVXNlQWRtaW5BdXRoRm4sXG4gICAgVGhlbWVQcm92aWRlcjogKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pID0+IGNoaWxkcmVuLFxuICAgIHVzZVRoZW1lOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBpc0RhcmtNb2RlOiBmYWxzZSxcbiAgICAgIHRvZ2dsZURhcmtNb2RlOiBqZXN0LmZuKCksXG4gICAgICBzZXREYXJrTW9kZTogamVzdC5mbigpLFxuICAgICAgaXNMb2FkZWQ6IHRydWUsXG4gICAgfSkpLFxuICB9O1xufSk7XG5cbi8vIE1vY2sgZmV0Y2ggZm9yIEFQSSBjYWxsc1xuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG4vLyBUeXBlIGRlZmluaXRpb25zIGZvciBtb2Nrc1xuaW50ZXJmYWNlIE1vY2tSb3V0ZXIge1xuICBwdXNoOiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPCh1cmw6IHN0cmluZykgPT4gdm9pZD47XG4gIHJlcGxhY2U6IGplc3QuTW9ja2VkRnVuY3Rpb248KHVybDogc3RyaW5nKSA9PiB2b2lkPjtcbiAgcHJlZmV0Y2g6IGplc3QuTW9ja2VkRnVuY3Rpb248KHVybDogc3RyaW5nKSA9PiB2b2lkPjtcbiAgYmFjazogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbiAgZm9yd2FyZDogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbiAgcmVmcmVzaDogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbn1cblxuaW50ZXJmYWNlIE1vY2tBZG1pbkF1dGgge1xuICBsb2dpbjogamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgICAoXG4gICAgICBlbWFpbDogc3RyaW5nLFxuICAgICAgcGFzc3dvcmQ6IHN0cmluZ1xuICAgICkgPT4gUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+XG4gID47XG4gIGxvZ291dDogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbiAgdXNlcjogeyBpZDogc3RyaW5nOyBlbWFpbDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHJvbGU6IHN0cmluZyB9IHwgbnVsbDtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG59XG5cbmRlc2NyaWJlKCdBZG1pbiBMb2dpbiBQYWdlJywgKCkgPT4ge1xuICBjb25zdCBtb2NrUHVzaCA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja1VzZVJvdXRlciA9IHVzZVJvdXRlciBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VSb3V0ZXI+O1xuICBjb25zdCBxdWVyeUNsaWVudCA9IG5ldyBRdWVyeUNsaWVudCgpO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vIFJlc2V0IG1vY2sgYWRtaW4gYXV0aCBmdW5jdGlvbiB0byByZXR1cm4gZGVmYXVsdCB2YWx1ZXNcbiAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgdXNlcjogbnVsbCxcbiAgICB9KTtcbiAgICBtb2NrVXNlUm91dGVyLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBwdXNoOiBtb2NrUHVzaCxcbiAgICAgIHJlcGxhY2U6IGplc3QuZm4oKSxcbiAgICAgIHByZWZldGNoOiBqZXN0LmZuKCksXG4gICAgICBiYWNrOiBqZXN0LmZuKCksXG4gICAgICBmb3J3YXJkOiBqZXN0LmZuKCksXG4gICAgICByZWZyZXNoOiBqZXN0LmZuKCksXG4gICAgfSBhcyBNb2NrUm91dGVyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGFnZSBSZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgbG9naW4gZm9ybSB3aXRoIGFsbCByZXF1aXJlZCBlbGVtZW50cycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZG1pbiBMb2dpbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4uZ2V0QnlUZXh0KCdBY2Nlc3MgdGhlIGFkbWluIGRhc2hib2FyZCcpXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6ICdTaWduIEluJyB9KVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+KGkCBCYWNrIHRvIEhvbWUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIGFkbWluIG5hdmJhciB3aXRoIGNvcnJlY3QgZWxlbWVudHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWRtaW4gQWNjZXNzIFBvcnRhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4uZ2V0QnlUZXh0KCdTZWN1cmUgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnKVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JhY2sgdG8gU2l0ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaG93IGxvYWRpbmcgc3RhdGUgd2hlbiBhdXRoZW50aWNhdGlvbiBpcyBpbiBwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMb2FkaW5nLi4uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnc3RhdHVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZGlyZWN0IGF1dGhlbnRpY2F0ZWQgdXNlcnMgdG8gZGFzaGJvYXJkJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgIGVtYWlsOiAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nLFxuICAgICAgICAgIG5hbWU6ICdBZG1pbiBVc2VyJyxcbiAgICAgICAgICByb2xlOiAnc3VwZXJfYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hZG1pbi9kYXNoYm9hcmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Zvcm0gVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNob3cgdmFsaWRhdGlvbiBlcnJvcnMgZm9yIGVtcHR5IGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAnU2lnbiBJbicgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobG9naW5CdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgdGhhdCBmb3JtIHZhbGlkYXRpb24gcHJldmVudHMgc3VibWlzc2lvblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRW1haWwgQWRkcmVzcycpO1xuICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUGFzc3dvcmQnKTtcblxuICAgICAgZXhwZWN0KGVtYWlsSW5wdXQpLnRvQmVSZXF1aXJlZCgpO1xuICAgICAgZXhwZWN0KHBhc3N3b3JkSW5wdXQpLnRvQmVSZXF1aXJlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBlbWFpbCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnaW52YWxpZC1lbWFpbCcgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsb2dpbkJ1dHRvbik7XG5cbiAgICAgIC8vIEhUTUw1IHZhbGlkYXRpb24gc2hvdWxkIHByZXZlbnQgc3VibWlzc2lvbiB3aXRoIGludmFsaWQgZW1haWxcbiAgICAgIGV4cGVjdChlbWFpbElucHV0KS50b0hhdmVBdHRyaWJ1dGUoJ3R5cGUnLCAnZW1haWwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgZXJyb3IgbWVzc2FnZXMgd2hlbiB1c2VyIHN0YXJ0cyB0eXBpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrTG9naW4gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyxcbiAgICAgIH0pO1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0VtYWlsIEFkZHJlc3MnKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJyk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pO1xuXG4gICAgICAvLyBTdWJtaXQgd2l0aCB3cm9uZyBjcmVkZW50aWFscyB0byB0cmlnZ2VyIGVycm9yXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnd3JvbmdAZXhhbXBsZS5jb20nIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHBhc3N3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnd3JvbmdwYXNzd29yZCcgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsb2dpbkJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSW52YWxpZCBjcmVkZW50aWFscycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0YXJ0IHR5cGluZyB0byBjbGVhciBlcnJvclxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3Rlc3RAZXhhbXBsZS5jb20nIH0gfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoXG4gICAgICAgICAgc2NyZWVuLnF1ZXJ5QnlUZXh0KCdJbnZhbGlkIGNyZWRlbnRpYWxzJylcbiAgICAgICAgKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRm9ybSBTdWJtaXNzaW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCBsb2dpbiBmdW5jdGlvbiB3aXRoIGNvcnJlY3QgY3JlZGVudGlhbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrTG9naW4gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0VtYWlsIEFkZHJlc3MnKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJyk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nIH0sXG4gICAgICB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocGFzc3dvcmRJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdaYXRvbmFGb3VzaHdhcmUkODg4OCcgfSxcbiAgICAgIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxvZ2luQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrTG9naW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICdhZm91YWRzb2Z0d2FyZWVuZ2luZWVyQGdtYWlsLmNvbScsXG4gICAgICAgICAgJ1phdG9uYUZvdXNod2FyZSQ4ODg4J1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgbG9hZGluZyBzdGF0ZSBkdXJpbmcgbG9naW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrTG9naW4gPSBqZXN0XG4gICAgICAgIC5mbigpXG4gICAgICAgIC5tb2NrSW1wbGVtZW50YXRpb24oXG4gICAgICAgICAgKCkgPT5cbiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT5cbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KSwgMTAwKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0VtYWlsIEFkZHJlc3MnKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJyk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nIH0sXG4gICAgICB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocGFzc3dvcmRJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdaYXRvbmFGb3VzaHdhcmUkODg4OCcgfSxcbiAgICAgIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxvZ2luQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NpZ25pbmcgSW4uLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChsb2dpbkJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgZXJyb3IgbWVzc2FnZSBvbiBsb2dpbiBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xvZ2luID0gamVzdFxuICAgICAgICAuZm4oKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogbW9ja0xvZ2luLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpO1xuICAgICAgY29uc3QgbG9naW5CdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6ICdTaWduIEluJyB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3dyb25nQGV4YW1wbGUuY29tJyB9IH0pO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwYXNzd29yZElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3dyb25ncGFzc3dvcmQnIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobG9naW5CdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ludmFsaWQgY3JlZGVudGlhbHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmV0d29yayBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMb2dpbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IG1vY2tMb2dpbixcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRW1haWwgQWRkcmVzcycpO1xuICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUGFzc3dvcmQnKTtcbiAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAnU2lnbiBJbicgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZW1haWxJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdhZm91YWRzb2Z0d2FyZWVuZ2luZWVyQGdtYWlsLmNvbScgfSxcbiAgICAgIH0pO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwYXNzd29yZElucHV0LCB7XG4gICAgICAgIHRhcmdldDogeyB2YWx1ZTogJ1phdG9uYUZvdXNod2FyZSQ4ODg4JyB9LFxuICAgICAgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobG9naW5CdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KFxuICAgICAgICAgIHNjcmVlbi5nZXRCeVRleHQoJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnKVxuICAgICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGdlbmVyaWMgbG9naW4gZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMb2dpbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHN1Y2Nlc3M6IGZhbHNlIH0pO1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0VtYWlsIEFkZHJlc3MnKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJyk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnd3JvbmdAZXhhbXBsZS5jb20nIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHBhc3N3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnd3JvbmdwYXNzd29yZCcgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsb2dpbkJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9naW4gZmFpbGVkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VzZXIgSW50ZXJhY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3VibWl0IGZvcm0gb24gRW50ZXIga2V5IHByZXNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xvZ2luID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogbW9ja0xvZ2luLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nIH0sXG4gICAgICB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocGFzc3dvcmRJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdaYXRvbmFGb3VzaHdhcmUkODg4OCcgfSxcbiAgICAgIH0pO1xuICAgICAgZmlyZUV2ZW50LmtleURvd24ocGFzc3dvcmRJbnB1dCwgeyBrZXk6ICdFbnRlcicsIGNvZGU6ICdFbnRlcicgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0xvZ2luKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nLFxuICAgICAgICAgICdaYXRvbmFGb3VzaHdhcmUkODg4OCdcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgZm9ybSBmaWVsZHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRW1haWwgQWRkcmVzcycpO1xuICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUGFzc3dvcmQnKTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3Rlc3RAZXhhbXBsZS5jb20nIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHBhc3N3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAndGVzdHBhc3N3b3JkJyB9IH0pO1xuXG4gICAgICBleHBlY3QoZW1haWxJbnB1dCkudG9IYXZlVmFsdWUoJ3Rlc3RAZXhhbXBsZS5jb20nKTtcbiAgICAgIGV4cGVjdChwYXNzd29yZElucHV0KS50b0hhdmVWYWx1ZSgndGVzdHBhc3N3b3JkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgc3VibWl0IGJ1dHRvbiBkdXJpbmcgbG9hZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMb2dpbiA9IGplc3RcbiAgICAgICAgLmZuKClcbiAgICAgICAgLm1vY2tJbXBsZW1lbnRhdGlvbihcbiAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PlxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoeyBzdWNjZXNzOiB0cnVlIH0pLCAxMDApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IG1vY2tMb2dpbixcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRW1haWwgQWRkcmVzcycpO1xuICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUGFzc3dvcmQnKTtcbiAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAnU2lnbiBJbicgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZW1haWxJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdhZm91YWRzb2Z0d2FyZWVuZ2luZWVyQGdtYWlsLmNvbScgfSxcbiAgICAgIH0pO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwYXNzd29yZElucHV0LCB7XG4gICAgICAgIHRhcmdldDogeyB2YWx1ZTogJ1phdG9uYUZvdXNod2FyZSQ4ODg4JyB9LFxuICAgICAgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobG9naW5CdXR0b24pO1xuXG4gICAgICBleHBlY3QobG9naW5CdXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIEFSSUEgbGFiZWxzIGFuZCByb2xlcycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0VtYWlsIEFkZHJlc3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnZm9ybScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBiZSBrZXlib2FyZCBuYXZpZ2FibGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpO1xuICAgICAgY29uc3QgbG9naW5CdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6ICdTaWduIEluJyB9KTtcblxuICAgICAgZW1haWxJbnB1dC5mb2N1cygpO1xuICAgICAgZXhwZWN0KGVtYWlsSW5wdXQpLnRvSGF2ZUZvY3VzKCk7XG5cbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGVtYWlsSW5wdXQsIHsga2V5OiAnVGFiJyB9KTtcbiAgICAgIGV4cGVjdChwYXNzd29yZElucHV0KS50b0hhdmVGb2N1cygpO1xuXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihwYXNzd29yZElucHV0LCB7IGtleTogJ1RhYicgfSk7XG4gICAgICBleHBlY3QobG9naW5CdXR0b24pLnRvSGF2ZUZvY3VzKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGZvcm0gc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZm9ybSA9IHNjcmVlbi5nZXRCeVJvbGUoJ2Zvcm0nKTtcbiAgICAgIGV4cGVjdChmb3JtKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpO1xuXG4gICAgICBleHBlY3QoZW1haWxJbnB1dCkudG9IYXZlQXR0cmlidXRlKCd0eXBlJywgJ2VtYWlsJyk7XG4gICAgICBleHBlY3QocGFzc3dvcmRJbnB1dCkudG9IYXZlQXR0cmlidXRlKCd0eXBlJywgJ3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QoZW1haWxJbnB1dCkudG9CZVJlcXVpcmVkKCk7XG4gICAgICBleHBlY3QocGFzc3dvcmRJbnB1dCkudG9CZVJlcXVpcmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBGZWF0dXJlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG5vdCBsb2cgc2Vuc2l0aXZlIGluZm9ybWF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nIH0sXG4gICAgICB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocGFzc3dvcmRJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdaYXRvbmFGb3VzaHdhcmUkODg4OCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayB0aGF0IHBhc3N3b3JkIGlzIG5vdCBsb2dnZWRcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS5ub3QudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdaYXRvbmFGb3VzaHdhcmUkODg4OCcpXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgWFNTIGF0dGFja3MgaW4gZm9ybSBpbnB1dHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBtYWxpY2lvdXNJbnB1dCA9ICc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+JztcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogbWFsaWNpb3VzSW5wdXQgfSB9KTtcblxuICAgICAgLy8gVGhlIGlucHV0IHNob3VsZCBiZSBzYW5pdGl6ZWQgYW5kIG5vdCBleGVjdXRlIHRoZSBzY3JpcHRcbiAgICAgIGV4cGVjdChlbWFpbElucHV0KS50b0hhdmVWYWx1ZShtYWxpY2lvdXNJbnB1dCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCd4c3MnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBzZWN1cmUgcGFzc3dvcmQgaW5wdXQgdHlwZScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QocGFzc3dvcmRJbnB1dCkudG9IYXZlQXR0cmlidXRlKCd0eXBlJywgJ3Bhc3N3b3JkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOYXZpZ2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSB3b3JraW5nIGJhY2sgdG8gaG9tZSBsaW5rJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgYmFja0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCfihpAgQmFjayB0byBIb21lJyk7XG4gICAgICBleHBlY3QoYmFja0xpbmspLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoYmFja0xpbmsuY2xvc2VzdCgnYScpKS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnLycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHdvcmtpbmcgYmFjayB0byBzaXRlIGxpbmsgaW4gbmF2YmFyJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgYmFja1RvU2l0ZUxpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdCYWNrIHRvIFNpdGUnKTtcbiAgICAgIGV4cGVjdChiYWNrVG9TaXRlTGluaykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChiYWNrVG9TaXRlTGluay5jbG9zZXN0KCdhJykpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUaGVtZSBTdXBwb3J0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBkYXJrIG1vZGUgY2xhc3NlcycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRleHQoJ0FkbWluIExvZ2luJykuY2xvc2VzdCgnZGl2Jyk7XG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVDbGFzcygnZGFyazp0ZXh0LXdoaXRlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgdGhlbWUgdG9nZ2xlIGJ1dHRvbiBpbiBuYXZiYXInLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB0aGVtZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnVG9nZ2xlIHRoZW1lJyk7XG4gICAgICBleHBlY3QodGhlbWVCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZXMgd2l0aCBwcm9wZXIgc3R5bGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMb2dpbiA9IGplc3RcbiAgICAgICAgLmZuKClcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVGVzdCBlcnJvciBtZXNzYWdlJyB9KTtcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogbW9ja0xvZ2luLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFbWFpbCBBZGRyZXNzJyk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQYXNzd29yZCcpO1xuICAgICAgY29uc3QgbG9naW5CdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6ICdTaWduIEluJyB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3Rlc3RAZXhhbXBsZS5jb20nIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHBhc3N3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAndGVzdHBhc3N3b3JkJyB9IH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxvZ2luQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHNjcmVlbi5nZXRCeVRleHQoJ1Rlc3QgZXJyb3IgbWVzc2FnZScpO1xuICAgICAgICBleHBlY3QoZXJyb3JNZXNzYWdlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3QoZXJyb3JNZXNzYWdlKS50b0hhdmVDbGFzcygndGV4dC1yZWQtNjAwJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgZXJyb3Igc3RhdGUgd2hlbiBmb3JtIGlzIHJlc3VibWl0dGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xvZ2luID0gamVzdFxuICAgICAgICAuZm4oKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlyc3QgZXJyb3InIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0VtYWlsIEFkZHJlc3MnKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1Bhc3N3b3JkJyk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ1NpZ24gSW4nIH0pO1xuXG4gICAgICAvLyBGaXJzdCBzdWJtaXNzaW9uIHdpdGggZXJyb3JcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZW1haWxJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICd0ZXN0QGV4YW1wbGUuY29tJyB9IH0pO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwYXNzd29yZElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3dyb25ncGFzc3dvcmQnIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobG9naW5CdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZpcnN0IGVycm9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2Vjb25kIHN1Ym1pc3Npb24gd2l0aCBzdWNjZXNzXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAnYWZvdWFkc29mdHdhcmVlbmdpbmVlckBnbWFpbC5jb20nIH0sXG4gICAgICB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocGFzc3dvcmRJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6ICdaYXRvbmFGb3VzaHdhcmUkODg4OCcgfSxcbiAgICAgIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxvZ2luQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0ZpcnN0IGVycm9yJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VRdWVyeVN0YXRlIiwiZm4iLCJ1c2VRdWVyeVN0YXRlcyIsInBhcnNlQXNTdHJpbmciLCJwYXJzZUFzSW50ZWdlciIsImNyZWF0ZVNlYXJjaFBhcmFtc0NhY2hlIiwiY3JlYXRlQ2xpZW50IiwiZnJvbSIsInNlbGVjdCIsImVxIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJkYXRhIiwiZXJyb3IiLCJSZWFjdCIsInJlcXVpcmUiLCJRdWVyeUNsaWVudFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJRdWVyeUNsaWVudCIsImludmFsaWRhdGVRdWVyaWVzIiwic2V0UXVlcnlEYXRhIiwiZ2V0UXVlcnlEYXRhIiwidXNlUXVlcnlDbGllbnQiLCJ1c2VRdWVyeSIsImlzTG9hZGluZyIsInVzZU11dGF0aW9uIiwibXV0YXRlIiwibXV0YXRlQXN5bmMiLCJ1c2VSb3V0ZXIiLCJBZG1pbkF1dGhQcm92aWRlciIsInVzZUFkbWluQXV0aCIsIm1vY2tVc2VBZG1pbkF1dGhGbiIsIlRoZW1lUHJvdmlkZXIiLCJ1c2VUaGVtZSIsImlzRGFya01vZGUiLCJ0b2dnbGVEYXJrTW9kZSIsInNldERhcmtNb2RlIiwiaXNMb2FkZWQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiaXNBdXRoZW50aWNhdGVkIiwibG9naW4iLCJsb2dvdXQiLCJ1c2VyIiwiZ2xvYmFsIiwiZmV0Y2giLCJkZXNjcmliZSIsIm1vY2tQdXNoIiwibW9ja1VzZVJvdXRlciIsInF1ZXJ5Q2xpZW50IiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJwdXNoIiwicmVwbGFjZSIsInByZWZldGNoIiwiYmFjayIsImZvcndhcmQiLCJyZWZyZXNoIiwiYWZ0ZXJFYWNoIiwicmVzdG9yZUFsbE1vY2tzIiwiaXQiLCJyZW5kZXIiLCJjbGllbnQiLCJBZG1pbkxvZ2luUGFnZSIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwiZ2V0QnlMYWJlbFRleHQiLCJnZXRCeVJvbGUiLCJuYW1lIiwiaWQiLCJlbWFpbCIsInJvbGUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImxvZ2luQnV0dG9uIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ3YWl0Rm9yIiwiZ2V0QnlEaXNwbGF5VmFsdWUiLCJlbWFpbElucHV0IiwicGFzc3dvcmRJbnB1dCIsInRvQmVSZXF1aXJlZCIsImNoYW5nZSIsInRhcmdldCIsInZhbHVlIiwidG9IYXZlQXR0cmlidXRlIiwibW9ja0xvZ2luIiwic3VjY2VzcyIsInF1ZXJ5QnlUZXh0Iiwibm90IiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidG9CZURpc2FibGVkIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImtleURvd24iLCJrZXkiLCJjb2RlIiwidG9IYXZlVmFsdWUiLCJmb2N1cyIsInRvSGF2ZUZvY3VzIiwiZm9ybSIsImNvbnNvbGVTcHkiLCJzcHlPbiIsImNvbnNvbGUiLCJzdHJpbmdDb250YWluaW5nIiwibW9ja1Jlc3RvcmUiLCJtYWxpY2lvdXNJbnB1dCIsImJhY2tMaW5rIiwiY2xvc2VzdCIsImJhY2tUb1NpdGVMaW5rIiwiY29udGFpbmVyIiwidG9IYXZlQ2xhc3MiLCJ0aGVtZUJ1dHRvbiIsImVycm9yTWVzc2FnZSIsIm1v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
ea93a1323bc5462d7355ddab908800cd
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useLearningPaths", {
    enumerable: true,
    get: function() {
        return useLearningPaths;
    }
});
const _react = require("react");
function useLearningPaths() {
    console.log('ðŸš€ useLearningPaths hook called');
    const [learningPaths, setLearningPaths] = (0, _react.useState)([]);
    const [isLoading, setIsLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const fetchLearningPaths = (0, _react.useCallback)(async ()=>{
        try {
            console.log('ðŸ”„ Fetching learning paths...');
            setIsLoading(true);
            setError(null);
            // Fallback to existing plans endpoint since learning_paths table is not present
            const response = await fetch('/api/plans', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            console.log('ðŸ“¡ API response status:', response.status);
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            const data = await response.json();
            console.log('ðŸ“Š API response data:', data);
            // Map plans to LearningPath shape minimally
            if (Array.isArray(data.plans)) {
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                const mapped = data.plans.map((p)=>({
                        id: p.id,
                        name: p.name || 'Plan',
                        description: p.title || '',
                        question_count: 0,
                        icon: 'Target',
                        color: 'indigo',
                        order: 0,
                        is_active: true,
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString(),
                        sectors: []
                    }));
                console.log('âœ… Learning plans mapped:', mapped.length);
                setLearningPaths(mapped);
            } else if (data.success && Array.isArray(data.data)) {
                // Support original learning-paths response shape if added later
                console.log('âœ… Learning paths loaded:', data.data.length);
                setLearningPaths(data.data);
            } else {
                throw new Error(data.error || 'Invalid response format');
            }
        } catch (err) {
            console.error('âŒ Error fetching learning paths:', err);
            const errorMessage = err instanceof Error ? err.message : 'Failed to fetch learning paths';
            setError(errorMessage);
            setLearningPaths([]);
        } finally{
            setIsLoading(false);
        }
    }, []);
    const refetch = (0, _react.useCallback)(()=>{
        fetchLearningPaths();
    }, [
        fetchLearningPaths
    ]);
    (0, _react.useEffect)(()=>{
        // Only run on client side
        if (typeof window !== 'undefined') {
            fetchLearningPaths();
        }
    }, [
        fetchLearningPaths
    ]);
    return {
        learningPaths,
        isLoading,
        error,
        refetch
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL2xpYnMvc2hhcmVkLWhvb2tzL3NyYy9saWIvdXNlTGVhcm5pbmdQYXRocy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nUGF0aCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcXVlc3Rpb25fY291bnQ6IG51bWJlcjtcbiAgaWNvbjogc3RyaW5nO1xuICBjb2xvcjogc3RyaW5nO1xuICBvcmRlcjogbnVtYmVyO1xuICBpc19hY3RpdmU6IGJvb2xlYW47XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xuICBkaWZmaWN1bHR5PzogJ2JlZ2lubmVyJyB8ICdpbnRlcm1lZGlhdGUnIHwgJ2FkdmFuY2VkJzsgLy8gb3B0aW9uYWxcbiAgZXN0aW1hdGVkVGltZT86IG51bWJlcjsgLy8gaW4gbWludXRlcyAtIG9wdGlvbmFsXG4gIGNhdGVnb3J5Pzogc3RyaW5nOyAvLyBvcHRpb25hbFxuICBzZWN0b3JzPzogQXJyYXk8e1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHF1ZXN0aW9uX2NvdW50OiBudW1iZXI7XG4gIH0+O1xufVxuXG5pbnRlcmZhY2UgVXNlTGVhcm5pbmdQYXRoc1JldHVybiB7XG4gIGxlYXJuaW5nUGF0aHM6IExlYXJuaW5nUGF0aFtdO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xuICByZWZldGNoOiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlTGVhcm5pbmdQYXRocygpOiBVc2VMZWFybmluZ1BhdGhzUmV0dXJuIHtcbiAgY29uc29sZS5sb2coJ/CfmoAgdXNlTGVhcm5pbmdQYXRocyBob29rIGNhbGxlZCcpO1xuICBjb25zdCBbbGVhcm5pbmdQYXRocywgc2V0TGVhcm5pbmdQYXRoc10gPSB1c2VTdGF0ZTxMZWFybmluZ1BhdGhbXT4oW10pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgZmV0Y2hMZWFybmluZ1BhdGhzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBGZXRjaGluZyBsZWFybmluZyBwYXRocy4uLicpO1xuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICAgIC8vIEZhbGxiYWNrIHRvIGV4aXN0aW5nIHBsYW5zIGVuZHBvaW50IHNpbmNlIGxlYXJuaW5nX3BhdGhzIHRhYmxlIGlzIG5vdCBwcmVzZW50XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3BsYW5zJywge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+ToSBBUEkgcmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cyk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfk4ogQVBJIHJlc3BvbnNlIGRhdGE6JywgZGF0YSk7XG5cbiAgICAgIC8vIE1hcCBwbGFucyB0byBMZWFybmluZ1BhdGggc2hhcGUgbWluaW1hbGx5XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLnBsYW5zKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBtYXBwZWQgPSBkYXRhLnBsYW5zLm1hcCgocDogYW55KSA9PiAoe1xuICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgIG5hbWU6IHAubmFtZSB8fCAnUGxhbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHAudGl0bGUgfHwgJycsXG4gICAgICAgICAgcXVlc3Rpb25fY291bnQ6IDAsXG4gICAgICAgICAgaWNvbjogJ1RhcmdldCcsXG4gICAgICAgICAgY29sb3I6ICdpbmRpZ28nLFxuICAgICAgICAgIG9yZGVyOiAwLFxuICAgICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHNlY3RvcnM6IFtdLFxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgTGVhcm5pbmcgcGxhbnMgbWFwcGVkOicsIG1hcHBlZC5sZW5ndGgpO1xuICAgICAgICBzZXRMZWFybmluZ1BhdGhzKG1hcHBlZCk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEuc3VjY2VzcyAmJiBBcnJheS5pc0FycmF5KGRhdGEuZGF0YSkpIHtcbiAgICAgICAgLy8gU3VwcG9ydCBvcmlnaW5hbCBsZWFybmluZy1wYXRocyByZXNwb25zZSBzaGFwZSBpZiBhZGRlZCBsYXRlclxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIExlYXJuaW5nIHBhdGhzIGxvYWRlZDonLCBkYXRhLmRhdGEubGVuZ3RoKTtcbiAgICAgICAgc2V0TGVhcm5pbmdQYXRocyhkYXRhLmRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZmV0Y2hpbmcgbGVhcm5pbmcgcGF0aHM6JywgZXJyKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgIGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIGxlYXJuaW5nIHBhdGhzJztcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICBzZXRMZWFybmluZ1BhdGhzKFtdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCByZWZldGNoID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGZldGNoTGVhcm5pbmdQYXRocygpO1xuICB9LCBbZmV0Y2hMZWFybmluZ1BhdGhzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHJ1biBvbiBjbGllbnQgc2lkZVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZmV0Y2hMZWFybmluZ1BhdGhzKCk7XG4gICAgfVxuICB9LCBbZmV0Y2hMZWFybmluZ1BhdGhzXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBsZWFybmluZ1BhdGhzLFxuICAgIGlzTG9hZGluZyxcbiAgICBlcnJvcixcbiAgICByZWZldGNoLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUxlYXJuaW5nUGF0aHMiLCJjb25zb2xlIiwibG9nIiwibGVhcm5pbmdQYXRocyIsInNldExlYXJuaW5nUGF0aHMiLCJ1c2VTdGF0ZSIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJmZXRjaExlYXJuaW5nUGF0aHMiLCJ1c2VDYWxsYmFjayIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwic3RhdHVzIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJkYXRhIiwianNvbiIsIkFycmF5IiwiaXNBcnJheSIsInBsYW5zIiwibWFwcGVkIiwibWFwIiwicCIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwidGl0bGUiLCJxdWVzdGlvbl9jb3VudCIsImljb24iLCJjb2xvciIsIm9yZGVyIiwiaXNfYWN0aXZlIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJzZWN0b3JzIiwibGVuZ3RoIiwic3VjY2VzcyIsImVyciIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJyZWZldGNoIiwidXNlRWZmZWN0Iiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBZ0NnQkE7OztlQUFBQTs7O3VCQTlCaUM7QUE4QjFDLFNBQVNBO0lBQ2RDLFFBQVFDLEdBQUcsQ0FBQztJQUNaLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUdDLElBQUFBLGVBQVEsRUFBaUIsRUFBRTtJQUNyRSxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR0YsSUFBQUEsZUFBUSxFQUFDO0lBQzNDLE1BQU0sQ0FBQ0csT0FBT0MsU0FBUyxHQUFHSixJQUFBQSxlQUFRLEVBQWdCO0lBRWxELE1BQU1LLHFCQUFxQkMsSUFBQUEsa0JBQVcsRUFBQztRQUNyQyxJQUFJO1lBQ0ZWLFFBQVFDLEdBQUcsQ0FBQztZQUNaSyxhQUFhO1lBQ2JFLFNBQVM7WUFFVCxnRkFBZ0Y7WUFDaEYsTUFBTUcsV0FBVyxNQUFNQyxNQUFNLGNBQWM7Z0JBQ3pDQyxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7WUFDRjtZQUVBZCxRQUFRQyxHQUFHLENBQUMsMkJBQTJCVSxTQUFTSSxNQUFNO1lBRXRELElBQUksQ0FBQ0osU0FBU0ssRUFBRSxFQUFFO2dCQUNoQixNQUFNLElBQUlDLE1BQU0sQ0FBQyxLQUFLLEVBQUVOLFNBQVNJLE1BQU0sQ0FBQyxFQUFFLEVBQUVKLFNBQVNPLFVBQVUsRUFBRTtZQUNuRTtZQUVBLE1BQU1DLE9BQU8sTUFBTVIsU0FBU1MsSUFBSTtZQUNoQ3BCLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJrQjtZQUVyQyw0Q0FBNEM7WUFDNUMsSUFBSUUsTUFBTUMsT0FBTyxDQUFDSCxLQUFLSSxLQUFLLEdBQUc7Z0JBQzdCLDhEQUE4RDtnQkFDOUQsTUFBTUMsU0FBU0wsS0FBS0ksS0FBSyxDQUFDRSxHQUFHLENBQUMsQ0FBQ0MsSUFBWSxDQUFBO3dCQUN6Q0MsSUFBSUQsRUFBRUMsRUFBRTt3QkFDUkMsTUFBTUYsRUFBRUUsSUFBSSxJQUFJO3dCQUNoQkMsYUFBYUgsRUFBRUksS0FBSyxJQUFJO3dCQUN4QkMsZ0JBQWdCO3dCQUNoQkMsTUFBTTt3QkFDTkMsT0FBTzt3QkFDUEMsT0FBTzt3QkFDUEMsV0FBVzt3QkFDWEMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO3dCQUNsQ0MsWUFBWSxJQUFJRixPQUFPQyxXQUFXO3dCQUNsQ0UsU0FBUyxFQUFFO29CQUNiLENBQUE7Z0JBQ0F4QyxRQUFRQyxHQUFHLENBQUMsNEJBQTRCdUIsT0FBT2lCLE1BQU07Z0JBQ3JEdEMsaUJBQWlCcUI7WUFDbkIsT0FBTyxJQUFJTCxLQUFLdUIsT0FBTyxJQUFJckIsTUFBTUMsT0FBTyxDQUFDSCxLQUFLQSxJQUFJLEdBQUc7Z0JBQ25ELGdFQUFnRTtnQkFDaEVuQixRQUFRQyxHQUFHLENBQUMsNEJBQTRCa0IsS0FBS0EsSUFBSSxDQUFDc0IsTUFBTTtnQkFDeER0QyxpQkFBaUJnQixLQUFLQSxJQUFJO1lBQzVCLE9BQU87Z0JBQ0wsTUFBTSxJQUFJRixNQUFNRSxLQUFLWixLQUFLLElBQUk7WUFDaEM7UUFDRixFQUFFLE9BQU9vQyxLQUFLO1lBQ1ozQyxRQUFRTyxLQUFLLENBQUMsb0NBQW9Db0M7WUFDbEQsTUFBTUMsZUFDSkQsZUFBZTFCLFFBQVEwQixJQUFJRSxPQUFPLEdBQUc7WUFDdkNyQyxTQUFTb0M7WUFDVHpDLGlCQUFpQixFQUFFO1FBQ3JCLFNBQVU7WUFDUkcsYUFBYTtRQUNmO0lBQ0YsR0FBRyxFQUFFO0lBRUwsTUFBTXdDLFVBQVVwQyxJQUFBQSxrQkFBVyxFQUFDO1FBQzFCRDtJQUNGLEdBQUc7UUFBQ0E7S0FBbUI7SUFFdkJzQyxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsMEJBQTBCO1FBQzFCLElBQUksT0FBT0MsV0FBVyxhQUFhO1lBQ2pDdkM7UUFDRjtJQUNGLEdBQUc7UUFBQ0E7S0FBbUI7SUFFdkIsT0FBTztRQUNMUDtRQUNBRztRQUNBRTtRQUNBdUM7SUFDRjtBQUNGIn0=
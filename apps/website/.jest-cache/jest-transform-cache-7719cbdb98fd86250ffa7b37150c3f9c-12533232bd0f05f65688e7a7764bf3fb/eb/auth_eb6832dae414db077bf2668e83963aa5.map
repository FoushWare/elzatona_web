{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-atoms/src/lib/auth.ts"],"sourcesContent":["import { atom } from 'jotai';\n\n// Supabase user atom\nexport const supabaseUserAtom = atom<any | null>(null);\n\n// Auth loading state\nexport const authLoadingAtom = atom(false);\n\n// Auth error state\nexport const authErrorAtom = atom<string | null>(null);\n\n// User profile type\ntype UserProfile = {\n  uid: string;\n  email: string | null;\n  displayName: string | null;\n  photoURL: string | null;\n  emailVerified: boolean;\n  createdAt?: Date;\n  lastLoginAt?: Date;\n  preferences?: {\n    theme: 'light' | 'dark';\n    language: 'en' | 'ar';\n    notifications: boolean;\n  };\n};\n\n// User profile atom (extended user data)\nexport const userProfileAtom = atom<UserProfile | null>(null);\n\n// Auth status atom\nexport const isAuthenticatedAtom = atom(get => {\n  const user = get(supabaseUserAtom);\n  return user !== null;\n});\n\n// Sign in atom\nexport const signInAtom = atom(\n  null,\n  async (\n    get,\n    set,\n    { email, password }: { email: string; password: string }\n  ) => {\n    set(authLoadingAtom, true);\n    set(authErrorAtom, null);\n\n    try {\n      // This will be implemented with actual Firebase auth\n      // For now, just a placeholder\n      console.log('Sign in with:', { email, password });\n    } catch (error) {\n      set(\n        authErrorAtom,\n        error instanceof Error ? error.message : 'Sign in failed'\n      );\n    } finally {\n      set(authLoadingAtom, false);\n    }\n  }\n);\n\n// Sign out atom\nexport const signOutAtom = atom(null, async (get, set) => {\n  set(authLoadingAtom, true);\n  set(authErrorAtom, null);\n\n  try {\n    // This will be implemented with actual Firebase auth\n    // For now, just a placeholder\n    console.log('Sign out');\n    set(supabaseUserAtom, null);\n    set(userProfileAtom, null);\n  } catch (error) {\n    set(\n      authErrorAtom,\n      error instanceof Error ? error.message : 'Sign out failed'\n    );\n  } finally {\n    set(authLoadingAtom, false);\n  }\n});\n\n// Update user profile atom\nexport const updateUserProfileAtom = atom(\n  null,\n  async (get, set, updates: Partial<UserProfile>) => {\n    const currentProfile = get(userProfileAtom);\n    if (currentProfile) {\n      set(userProfileAtom, { ...currentProfile, ...updates });\n    }\n  }\n);\n"],"names":["authErrorAtom","authLoadingAtom","isAuthenticatedAtom","signInAtom","signOutAtom","supabaseUserAtom","updateUserProfileAtom","userProfileAtom","atom","get","user","set","email","password","console","log","error","Error","message","updates","currentProfile"],"mappings":";;;;;;;;;;;QASaA;eAAAA;;QAHAC;eAAAA;;QAyBAC;eAAAA;;QAMAC;eAAAA;;QA0BAC;eAAAA;;QA5DAC;eAAAA;;QAiFAC;eAAAA;;QAxDAC;eAAAA;;;uBA5BQ;AAGd,MAAMF,mBAAmBG,IAAAA,WAAI,EAAa;AAG1C,MAAMP,kBAAkBO,IAAAA,WAAI,EAAC;AAG7B,MAAMR,gBAAgBQ,IAAAA,WAAI,EAAgB;AAmB1C,MAAMD,kBAAkBC,IAAAA,WAAI,EAAqB;AAGjD,MAAMN,sBAAsBM,IAAAA,WAAI,EAACC,CAAAA;IACtC,MAAMC,OAAOD,IAAIJ;IACjB,OAAOK,SAAS;AAClB;AAGO,MAAMP,aAAaK,IAAAA,WAAI,EAC5B,MACA,OACEC,KACAE,KACA,EAAEC,KAAK,EAAEC,QAAQ,EAAuC;IAExDF,IAAIV,iBAAiB;IACrBU,IAAIX,eAAe;IAEnB,IAAI;QACF,qDAAqD;QACrD,8BAA8B;QAC9Bc,QAAQC,GAAG,CAAC,iBAAiB;YAAEH;YAAOC;QAAS;IACjD,EAAE,OAAOG,OAAO;QACdL,IACEX,eACAgB,iBAAiBC,QAAQD,MAAME,OAAO,GAAG;IAE7C,SAAU;QACRP,IAAIV,iBAAiB;IACvB;AACF;AAIK,MAAMG,cAAcI,IAAAA,WAAI,EAAC,MAAM,OAAOC,KAAKE;IAChDA,IAAIV,iBAAiB;IACrBU,IAAIX,eAAe;IAEnB,IAAI;QACF,qDAAqD;QACrD,8BAA8B;QAC9Bc,QAAQC,GAAG,CAAC;QACZJ,IAAIN,kBAAkB;QACtBM,IAAIJ,iBAAiB;IACvB,EAAE,OAAOS,OAAO;QACdL,IACEX,eACAgB,iBAAiBC,QAAQD,MAAME,OAAO,GAAG;IAE7C,SAAU;QACRP,IAAIV,iBAAiB;IACvB;AACF;AAGO,MAAMK,wBAAwBE,IAAAA,WAAI,EACvC,MACA,OAAOC,KAAKE,KAAKQ;IACf,MAAMC,iBAAiBX,IAAIF;IAC3B,IAAIa,gBAAgB;QAClBT,IAAIJ,iBAAiB;YAAE,GAAGa,cAAc;YAAE,GAAGD,OAAO;QAAC;IACvD;AACF"}
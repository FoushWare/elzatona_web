{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.test.tsx"],"sourcesContent":["/**\n * Unit Tests for Admin Dashboard (A-UT-011, A-UT-012, A-UT-013)\n * Task: A-003 - Admin Dashboard\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport AdminDashboard from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\n// Mock shared contexts\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useAdminAuth: jest.fn(),\n  };\n});\n\n// Mock shared hooks\nconst mockRefetch = jest.fn();\njest.mock('@elzatona/shared-hooks', () => ({\n  useAdminStats: jest.fn(() => ({\n    data: {\n      questions: 100,\n      categories: 10,\n      topics: 50,\n      learningCards: 5,\n      learningPlans: 3,\n      frontendTasks: 20,\n      problemSolvingTasks: 15,\n      totalContent: 200,\n      totalUsers: 50,\n    },\n    isLoading: false,\n    error: null,\n    refetch: mockRefetch,\n    isRefetching: false,\n  })),\n}));\n\n// Mock lucide-react icons\njest.mock('lucide-react', () => ({\n  BookOpen: () => <span>üìñ</span>,\n  HelpCircle: () => <span>‚ùì</span>,\n  CreditCard: () => <span>üí≥</span>,\n  FileText: () => <span>üìÑ</span>,\n  Settings: () => <span>‚öôÔ∏è</span>,\n  Code: () => <span>üíª</span>,\n  Calculator: () => <span>üî¢</span>,\n  BarChart3: () => <span>üìä</span>,\n  FolderOpen: () => <span>üìÅ</span>,\n  Users: () => <span>üë•</span>,\n  Database: () => <span>üóÑÔ∏è</span>,\n  TrendingUp: () => <span>üìà</span>,\n  CheckCircle: () => <span>‚úÖ</span>,\n  Clock: () => <span>‚è∞</span>,\n  Target: () => <span>üéØ</span>,\n  Activity: () => <span>üìä</span>,\n  Zap: () => <span>‚ö°</span>,\n  Star: () => <span>‚≠ê</span>,\n  ArrowRight: () => <span>‚Üí</span>,\n  Plus: () => <span>+</span>,\n  Eye: () => <span>üëÅÔ∏è</span>,\n  Edit: () => <span>‚úèÔ∏è</span>,\n  Trash2: () => <span>üóëÔ∏è</span>,\n  RefreshCw: () => <span>üîÑ</span>,\n  AlertCircle: () => <span>‚ö†Ô∏è</span>,\n  Info: () => <span>‚ÑπÔ∏è</span>,\n  ExternalLink: () => <span>üîó</span>,\n}));\n\ndescribe('A-UT-011: Dashboard Renders', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAdminAuth as jest.Mock).mockReturnValue({\n      user: {\n        id: '1',\n        email: 'admin@example.com',\n        role: 'super_admin',\n        name: 'Admin User',\n      },\n    });\n  });\n\n  it('should render without errors', () => {\n    const { container } = render(<AdminDashboard />);\n    expect(container).toBeInTheDocument();\n  });\n\n  it('should display dashboard title', () => {\n    render(<AdminDashboard />);\n    expect(screen.getByText(/Admin Dashboard/i)).toBeInTheDocument();\n  });\n\n  it('should display welcome message with user name', () => {\n    render(<AdminDashboard />);\n    expect(screen.getByText(/Welcome back/i)).toBeInTheDocument();\n    expect(screen.getByText(/Admin User/i)).toBeInTheDocument();\n  });\n});\n\ndescribe('A-UT-012: Stats Display', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAdminAuth as jest.Mock).mockReturnValue({\n      user: {\n        id: '1',\n        email: 'admin@example.com',\n        role: 'super_admin',\n        name: 'Admin User',\n      },\n    });\n  });\n\n  it('should display total questions stat', () => {\n    render(<AdminDashboard />);\n    expect(screen.getByText(/Total Questions/i)).toBeInTheDocument();\n  });\n\n  it('should display categories stat', () => {\n    render(<AdminDashboard />);\n    expect(screen.getByText(/Categories/i)).toBeInTheDocument();\n  });\n\n  it('should display admin menu items', () => {\n    render(<AdminDashboard />);\n    expect(screen.getByText(/Questions/i)).toBeInTheDocument();\n    expect(screen.getByText(/Content Management/i)).toBeInTheDocument();\n  });\n});\n\ndescribe('A-UT-013: Refresh Functionality', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockRefetch.mockClear();\n    \n    (sharedContexts.useAdminAuth as jest.Mock).mockReturnValue({\n      user: {\n        id: '1',\n        email: 'admin@example.com',\n        role: 'super_admin',\n        name: 'Admin User',\n      },\n    });\n  });\n\n  it('should have refresh button', () => {\n    render(<AdminDashboard />);\n    const refreshButton = screen.getByText(/Refresh/i);\n    expect(refreshButton).toBeInTheDocument();\n  });\n\n  it('should call refetch when refresh button is clicked', () => {\n    render(<AdminDashboard />);\n    const refreshButton = screen.getByText(/Refresh/i);\n    fireEvent.click(refreshButton);\n    \n    expect(mockRefetch).toHaveBeenCalled();\n  });\n});\n\ndescribe('A-UT-SNAPSHOT: Admin Dashboard Snapshot Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAdminAuth as jest.Mock).mockReturnValue({\n      user: {\n        id: '1',\n        email: 'admin@example.com',\n        role: 'super_admin',\n        name: 'Admin User',\n      },\n    });\n  });\n\n  it('should match admin dashboard snapshot (with stats)', () => {\n    const { container } = render(<AdminDashboard />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n});\n"],"names":["jest","mock","actual","requireActual","useAdminAuth","fn","useAdminStats","data","questions","categories","topics","learningCards","learningPlans","frontendTasks","problemSolvingTasks","totalContent","totalUsers","isLoading","error","refetch","mockRefetch","isRefetching","BookOpen","span","HelpCircle","CreditCard","FileText","Settings","Code","Calculator","BarChart3","FolderOpen","Users","Database","TrendingUp","CheckCircle","Clock","Target","Activity","Zap","Star","ArrowRight","Plus","Eye","Edit","Trash2","RefreshCw","AlertCircle","Info","ExternalLink","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","user","id","email","role","name","it","container","render","AdminDashboard","expect","toBeInTheDocument","screen","getByText","mockClear","refreshButton","fireEvent","click","toHaveBeenCalled","firstChild","toMatchSnapshot"],"mappings":"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"}
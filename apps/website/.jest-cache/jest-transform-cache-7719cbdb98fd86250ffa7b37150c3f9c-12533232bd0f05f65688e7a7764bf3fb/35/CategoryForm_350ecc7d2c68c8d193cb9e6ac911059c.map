{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-components/src/lib/forms/CategoryForm.tsx"],"sourcesContent":["'use client';\n\n// Category Form Component\n// v1.0 - Form for creating and editing categories\n\nimport React, { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL']!;\nconst supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY']!;\nconst supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n\nimport { Button } from '@elzatona/shared-components';\nimport { Input } from '@elzatona/shared-components';\nimport { Label } from '@elzatona/shared-components';\nimport { Textarea } from '@elzatona/shared-components';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@elzatona/shared-components';\nimport { CardType } from '@elzatona/shared-types';\n\ninterface CategoryFormProps {\n  category?: {\n    id: string;\n    name: string;\n    description?: string;\n    color?: string;\n    cardType?: string;\n    icon?: string;\n    slug?: string;\n    order?: number;\n  };\n  onSubmit: (data: CategoryFormData) => Promise<void>;\n  onCancel: () => void;\n  isLoading?: boolean;\n}\n\nexport interface CategoryFormData {\n  name: string;\n  description: string;\n  color: string;\n  cardType: string;\n  icon: string;\n  slug: string;\n  order: number;\n}\n\nconst CARD_TYPES: CardType[] = [\n  'core-technologies',\n  'framework-questions',\n  'problem-solving',\n  'system-design',\n];\n\nconst COLORS = [\n  '#61DAFB', // React Blue\n  '#F7DF1E', // JavaScript Yellow\n  '#1572B6', // CSS Blue\n  '#E34F26', // HTML Red\n  '#000000', // Next.js Black\n  '#9B59B6', // Purple\n  '#FF6B6B', // Red\n  '#4ECDC4', // Teal\n  '#45B7D1', // Sky Blue\n  '#96CEB4', // Mint Green\n];\n\nconst ICONS = [\n  'react',\n  'javascript',\n  'css',\n  'html',\n  'nextjs',\n  'design-patterns',\n  'system-design',\n  'folder-open',\n  'code',\n  'layers',\n  'cpu',\n  'database',\n  'globe',\n];\n\nexport const CategoryForm: React.FC<CategoryFormProps> = ({\n  category,\n  onSubmit,\n  onCancel,\n  isLoading = false,\n}) => {\n  const [formData, setFormData] = useState<CategoryFormData>({\n    name: category?.name || '',\n    description: category?.description || '',\n    color: category?.color || COLORS[0],\n    cardType: category?.cardType || CARD_TYPES[0],\n    icon: category?.icon || ICONS[0],\n    slug: category?.slug || '',\n    order: category?.['order'] || 1,\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  // Auto-generate slug from name\n  useEffect(() => {\n    if (!category && formData['name']) {\n      const slug = formData['name']\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/(^-|-$)/g, '');\n      setFormData(prev => ({ ...prev, slug }));\n    }\n  }, [formData['name'], category]);\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData['name'].trim()) {\n      newErrors['name'] = 'Category name is required';\n    }\n\n    if (!formData['description'].trim()) {\n      newErrors['description'] = 'Description is required';\n    }\n\n    if (!formData['slug'].trim()) {\n      newErrors['slug'] = 'Slug is required';\n    }\n\n    if (formData['order'] < 1) {\n      newErrors['order'] = 'Order must be at least 1';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      await onSubmit(formData);\n    } catch (error) {\n      console.error('Error submitting category:', error);\n    }\n  };\n\n  const handleChange = (\n    field: keyof CategoryFormData,\n    value: string | number\n  ) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className='space-y-6'>\n      <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\n        {/* Name */}\n        <div className='space-y-2'>\n          <Label htmlFor='name'>Category Name *</Label>\n          <Input\n            id='name'\n            value={formData['name']}\n            onChange={e => handleChange('name', e.target.value)}\n            placeholder='e.g., React'\n            className={errors['name'] ? 'border-red-500' : ''}\n          />\n          {errors['name'] && (\n            <p className='text-sm text-red-500'>{errors['name']}</p>\n          )}\n        </div>\n\n        {/* Slug */}\n        <div className='space-y-2'>\n          <Label htmlFor='slug'>Slug *</Label>\n          <Input\n            id='slug'\n            value={formData['slug']}\n            onChange={e => handleChange('slug', e.target.value)}\n            placeholder='e.g., react'\n            className={errors['slug'] ? 'border-red-500' : ''}\n          />\n          {errors['slug'] && (\n            <p className='text-sm text-red-500'>{errors['slug']}</p>\n          )}\n        </div>\n\n        {/* Card Type */}\n        <div className='space-y-2'>\n          <Label htmlFor='cardType'>Card Type</Label>\n          <Select\n            value={formData['cardType']}\n            onValueChange={value => handleChange('cardType', value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder='Select card type' />\n            </SelectTrigger>\n            <SelectContent>\n              {CARD_TYPES.map(type => (\n                <SelectItem key={type} value={type}>\n                  {type}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Order */}\n        <div className='space-y-2'>\n          <Label htmlFor='order'>Order</Label>\n          <Input\n            id='order'\n            type='number'\n            min='1'\n            value={formData['order']}\n            onChange={e => handleChange('order', parseInt(e.target.value) || 1)}\n            className={errors['order'] ? 'border-red-500' : ''}\n          />\n          {errors['order'] && (\n            <p className='text-sm text-red-500'>{errors['order']}</p>\n          )}\n        </div>\n\n        {/* Color */}\n        <div className='space-y-2'>\n          <Label htmlFor='color'>Color</Label>\n          <div className='flex gap-2'>\n            <Input\n              id='color'\n              type='color'\n              value={formData['color']}\n              onChange={e => handleChange('color', e.target.value)}\n              className='w-16 h-10 p-1'\n            />\n            <Select\n              value={formData['color']}\n              onValueChange={value => handleChange('color', value)}\n            >\n              <SelectTrigger className='flex-1'>\n                <SelectValue placeholder='Select color' />\n              </SelectTrigger>\n              <SelectContent>\n                {COLORS.map(color => (\n                  <SelectItem key={color} value={color}>\n                    <div className='flex items-center gap-2'>\n                      <div\n                        className='w-4 h-4 rounded-full border'\n                        style={{ backgroundColor: color }}\n                      />\n                      {color}\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        {/* Icon */}\n        <div className='space-y-2'>\n          <Label htmlFor='icon'>Icon</Label>\n          <Select\n            value={formData['icon']}\n            onValueChange={value => handleChange('icon', value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder='Select icon' />\n            </SelectTrigger>\n            <SelectContent>\n              {ICONS.map(icon => (\n                <SelectItem key={icon} value={icon}>\n                  {icon}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      {/* Description */}\n      <div className='space-y-2'>\n        <Label htmlFor='description'>Description *</Label>\n        <Textarea\n          id='description'\n          value={formData['description']}\n          onChange={e => handleChange('description', e.target.value)}\n          placeholder='Describe what this category covers...'\n          rows={3}\n          className={errors['description'] ? 'border-red-500' : ''}\n        />\n        {errors['description'] && (\n          <p className='text-sm text-red-500'>{errors['description']}</p>\n        )}\n      </div>\n\n      {/* Actions */}\n      <div className='flex justify-end gap-3 pt-4'>\n        <Button type='button' variant='outline' onClick={onCancel}>\n          Cancel\n        </Button>\n        <Button type='submit' disabled={isLoading}>\n          {isLoading\n            ? 'Saving...'\n            : category\n              ? 'Update Category'\n              : 'Create Category'}\n        </Button>\n      </div>\n    </form>\n  );\n};\n"],"names":["CategoryForm","supabaseUrl","process","env","supabaseServiceRoleKey","supabase","createClient","CARD_TYPES","COLORS","ICONS","category","onSubmit","onCancel","isLoading","formData","setFormData","useState","name","description","color","cardType","icon","slug","order","errors","setErrors","useEffect","toLowerCase","replace","prev","validateForm","newErrors","trim","Object","keys","length","handleSubmit","e","preventDefault","error","console","handleChange","field","value","form","className","div","Label","htmlFor","Input","id","onChange","target","placeholder","p","Select","onValueChange","SelectTrigger","SelectValue","SelectContent","map","type","SelectItem","min","parseInt","style","backgroundColor","Textarea","rows","Button","variant","onClick","disabled"],"mappings":"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"}
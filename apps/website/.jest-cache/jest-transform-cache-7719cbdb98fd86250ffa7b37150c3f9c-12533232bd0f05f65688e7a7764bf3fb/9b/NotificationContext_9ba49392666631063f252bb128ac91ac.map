{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/NotificationContext.tsx"],"sourcesContent":["'use client';\n\n// Only create Supabase client if environment variables are available\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet supabase: any = null;\nif (\n  process.env['NEXT_PUBLIC_SUPABASE_URL'] &&\n  process.env['SUPABASE_SERVICE_ROLE_KEY']\n) {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { createClient } = require('@supabase/supabase-js');\n  const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];\n  const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];\n  supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n}\nimport React, {\n  useState,\n  useEffect,\n  useCallback,\n  ReactNode,\n  createContext,\n  useContext,\n} from 'react';\n\n// Simple notification types\ninterface Notification {\n  id: string;\n  title: string;\n  message: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  timestamp: Date;\n  read: boolean;\n}\n\ninterface NotificationContextType {\n  notifications: Notification[];\n  unreadCount: number;\n  isLoading: boolean;\n  error: string | null;\n  markAsRead: (notificationId: string) => Promise<void>;\n  markAllAsRead: () => Promise<void>;\n  refreshNotifications: () => void;\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(\n  undefined\n);\n\ninterface NotificationProviderProps {\n  children: ReactNode;\n  userId?: string;\n  adminId?: string;\n}\n\nexport function NotificationProvider({\n  children,\n  userId,\n  adminId,\n}: NotificationProviderProps) {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const refreshNotifications = useCallback(async () => {\n    // Simple implementation - just reset state\n    setIsLoading(false);\n    setError(null);\n  }, []);\n\n  const markAsRead = useCallback(async (notificationId: string) => {\n    setNotifications(prev =>\n      prev.map(notification =>\n        notification.id === notificationId\n          ? { ...notification, read: true }\n          : notification\n      )\n    );\n  }, []);\n\n  const markAllAsRead = useCallback(async () => {\n    setNotifications(prev =>\n      prev.map(notification => ({ ...notification, read: true }))\n    );\n  }, []);\n\n  // Update unread count when notifications change\n  useEffect(() => {\n    const unread = notifications.filter(n => !n.read).length;\n    setUnreadCount(unread);\n  }, [notifications]);\n\n  const value: NotificationContextType = {\n    notifications,\n    unreadCount,\n    isLoading,\n    error,\n    markAsRead,\n    markAllAsRead,\n    refreshNotifications,\n  };\n\n  return (\n    <NotificationContext.Provider value={value}>\n      {children}\n    </NotificationContext.Provider>\n  );\n}\n\nexport function useNotifications(): NotificationContextType {\n  const context = useContext(NotificationContext);\n  if (context === undefined) {\n    throw new Error(\n      'useNotifications must be used within a NotificationProvider'\n    );\n  }\n  return context;\n}\n"],"names":["NotificationProvider","useNotifications","supabase","process","env","createClient","require","supabaseUrl","supabaseServiceRoleKey","NotificationContext","createContext","undefined","children","userId","adminId","notifications","setNotifications","useState","unreadCount","setUnreadCount","isLoading","setIsLoading","error","setError","refreshNotifications","useCallback","markAsRead","notificationId","prev","map","notification","id","read","markAllAsRead","useEffect","unread","filter","n","length","value","Provider","context","useContext","Error"],"mappings":"AAAA;;;;;;;;;;;;QAsDgBA;eAAAA;;QAuDAC;eAAAA;;;;+DAvFT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AApBP,qEAAqE;AACrE,8DAA8D;AAC9D,IAAIC,WAAgB;AACpB,IACEC,QAAQC,GAAG,CAAC,2BAA2B,IACvCD,QAAQC,GAAG,CAAC,4BAA4B,EACxC;IACA,iEAAiE;IACjE,MAAM,EAAEC,YAAY,EAAE,GAAGC,QAAQ;IACjC,MAAMC,cAAcJ,QAAQC,GAAG,CAAC,2BAA2B;IAC3D,MAAMI,yBAAyBL,QAAQC,GAAG,CAAC,4BAA4B;IACvEF,WAAWG,aAAaE,aAAaC;AACvC;AA8BA,MAAMC,oCAAsBC,IAAAA,oBAAa,EACvCC;AASK,SAASX,qBAAqB,EACnCY,QAAQ,EACRC,MAAM,EACNC,OAAO,EACmB;IAC1B,MAAM,CAACC,eAAeC,iBAAiB,GAAGC,IAAAA,eAAQ,EAAiB,EAAE;IACrE,MAAM,CAACC,aAAaC,eAAe,GAAGF,IAAAA,eAAQ,EAAC;IAC/C,MAAM,CAACG,WAAWC,aAAa,GAAGJ,IAAAA,eAAQ,EAAC;IAC3C,MAAM,CAACK,OAAOC,SAAS,GAAGN,IAAAA,eAAQ,EAAgB;IAElD,MAAMO,uBAAuBC,IAAAA,kBAAW,EAAC;QACvC,2CAA2C;QAC3CJ,aAAa;QACbE,SAAS;IACX,GAAG,EAAE;IAEL,MAAMG,aAAaD,IAAAA,kBAAW,EAAC,OAAOE;QACpCX,iBAAiBY,CAAAA,OACfA,KAAKC,GAAG,CAACC,CAAAA,eACPA,aAAaC,EAAE,KAAKJ,iBAChB;oBAAE,GAAGG,YAAY;oBAAEE,MAAM;gBAAK,IAC9BF;IAGV,GAAG,EAAE;IAEL,MAAMG,gBAAgBR,IAAAA,kBAAW,EAAC;QAChCT,iBAAiBY,CAAAA,OACfA,KAAKC,GAAG,CAACC,CAAAA,eAAiB,CAAA;oBAAE,GAAGA,YAAY;oBAAEE,MAAM;gBAAK,CAAA;IAE5D,GAAG,EAAE;IAEL,gDAAgD;IAChDE,IAAAA,gBAAS,EAAC;QACR,MAAMC,SAASpB,cAAcqB,MAAM,CAACC,CAAAA,IAAK,CAACA,EAAEL,IAAI,EAAEM,MAAM;QACxDnB,eAAegB;IACjB,GAAG;QAACpB;KAAc;IAElB,MAAMwB,QAAiC;QACrCxB;QACAG;QACAE;QACAE;QACAI;QACAO;QACAT;IACF;IAEA,qBACE,qBAACf,oBAAoB+B,QAAQ;QAACD,OAAOA;kBAClC3B;;AAGP;AAEO,SAASX;IACd,MAAMwC,UAAUC,IAAAA,iBAAU,EAACjC;IAC3B,IAAIgC,YAAY9B,WAAW;QACzB,MAAM,IAAIgC,MACR;IAEJ;IACA,OAAOF;AACT"}
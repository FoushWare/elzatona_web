{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/OnboardingContext.tsx"],"sourcesContent":["'use client';\n\n// Only create Supabase client if environment variables are available\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet supabase: any = null;\nif (\n  process.env['NEXT_PUBLIC_SUPABASE_URL'] &&\n  process.env['SUPABASE_SERVICE_ROLE_KEY']\n) {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { createClient } = require('@supabase/supabase-js');\n  const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];\n  const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];\n  supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n}\nimport React, {\n  useState,\n  useEffect,\n  ReactNode,\n  createContext,\n  useContext,\n} from 'react';\n\ninterface OnboardingContextType {\n  hasSeenOnboarding: boolean;\n  showOnboarding: boolean;\n  startOnboarding: () => void;\n  completeOnboarding: () => void;\n  skipOnboarding: () => void;\n}\n\nconst OnboardingContext = createContext<OnboardingContextType | undefined>(\n  undefined\n);\n\nexport const OnboardingProvider: React.FC<{ children: ReactNode }> = ({\n  children,\n}) => {\n  const [hasSeenOnboarding, setHasSeenOnboarding] = useState(false);\n  const [showOnboarding, setShowOnboarding] = useState(false);\n\n  useEffect(() => {\n    // Check if user has seen onboarding (only after they sign in)\n    // For now, we'll check localStorage but only after authentication\n    if (typeof window !== 'undefined') {\n      const seen = localStorage.getItem('hasSeenOnboarding');\n      setHasSeenOnboarding(seen === 'true');\n    }\n  }, []);\n\n  const startOnboarding = () => {\n    setShowOnboarding(true);\n  };\n\n  const completeOnboarding = () => {\n    setShowOnboarding(false);\n    setHasSeenOnboarding(true);\n    // Only save to localStorage if user is authenticated\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('hasSeenOnboarding', 'true');\n    }\n  };\n\n  const skipOnboarding = () => {\n    setShowOnboarding(false);\n    setHasSeenOnboarding(true);\n    // Only save to localStorage if user is authenticated\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('hasSeenOnboarding', 'true');\n    }\n  };\n\n  return (\n    <OnboardingContext.Provider\n      value={{\n        hasSeenOnboarding,\n        showOnboarding,\n        startOnboarding,\n        completeOnboarding,\n        skipOnboarding,\n      }}\n    >\n      {children}\n    </OnboardingContext.Provider>\n  );\n};\n\nexport const useOnboarding = (): OnboardingContextType => {\n  const context = useContext(OnboardingContext);\n  if (context === undefined) {\n    throw new Error('useOnboarding must be used within an OnboardingProvider');\n  }\n  return context;\n};\n"],"names":["OnboardingProvider","useOnboarding","supabase","process","env","createClient","require","supabaseUrl","supabaseServiceRoleKey","OnboardingContext","createContext","undefined","children","hasSeenOnboarding","setHasSeenOnboarding","useState","showOnboarding","setShowOnboarding","useEffect","window","seen","localStorage","getItem","startOnboarding","completeOnboarding","setItem","skipOnboarding","Provider","value","context","useContext","Error"],"mappings":"AAAA;;;;;;;;;;;;QAmCaA;eAAAA;;QAoDAC;eAAAA;;;;+DAlEN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAnBP,qEAAqE;AACrE,8DAA8D;AAC9D,IAAIC,WAAgB;AACpB,IACEC,QAAQC,GAAG,CAAC,2BAA2B,IACvCD,QAAQC,GAAG,CAAC,4BAA4B,EACxC;IACA,iEAAiE;IACjE,MAAM,EAAEC,YAAY,EAAE,GAAGC,QAAQ;IACjC,MAAMC,cAAcJ,QAAQC,GAAG,CAAC,2BAA2B;IAC3D,MAAMI,yBAAyBL,QAAQC,GAAG,CAAC,4BAA4B;IACvEF,WAAWG,aAAaE,aAAaC;AACvC;AAiBA,MAAMC,kCAAoBC,IAAAA,oBAAa,EACrCC;AAGK,MAAMX,qBAAwD,CAAC,EACpEY,QAAQ,EACT;IACC,MAAM,CAACC,mBAAmBC,qBAAqB,GAAGC,IAAAA,eAAQ,EAAC;IAC3D,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGF,IAAAA,eAAQ,EAAC;IAErDG,IAAAA,gBAAS,EAAC;QACR,8DAA8D;QAC9D,kEAAkE;QAClE,IAAI,OAAOC,WAAW,aAAa;YACjC,MAAMC,OAAOC,aAAaC,OAAO,CAAC;YAClCR,qBAAqBM,SAAS;QAChC;IACF,GAAG,EAAE;IAEL,MAAMG,kBAAkB;QACtBN,kBAAkB;IACpB;IAEA,MAAMO,qBAAqB;QACzBP,kBAAkB;QAClBH,qBAAqB;QACrB,qDAAqD;QACrD,IAAI,OAAOK,WAAW,aAAa;YACjCE,aAAaI,OAAO,CAAC,qBAAqB;QAC5C;IACF;IAEA,MAAMC,iBAAiB;QACrBT,kBAAkB;QAClBH,qBAAqB;QACrB,qDAAqD;QACrD,IAAI,OAAOK,WAAW,aAAa;YACjCE,aAAaI,OAAO,CAAC,qBAAqB;QAC5C;IACF;IAEA,qBACE,qBAAChB,kBAAkBkB,QAAQ;QACzBC,OAAO;YACLf;YACAG;YACAO;YACAC;YACAE;QACF;kBAECd;;AAGP;AAEO,MAAMX,gBAAgB;IAC3B,MAAM4B,UAAUC,IAAAA,iBAAU,EAACrB;IAC3B,IAAIoB,YAAYlB,WAAW;QACzB,MAAM,IAAIoB,MAAM;IAClB;IACA,OAAOF;AACT"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/page.test.tsx"],"sourcesContent":["/**\n * Unit Tests for Homepage (G-UT-001, G-UT-002, G-UT-003)\n * Task: G-001 - Homepage Rendering\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport HomePage from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\n// Mock shared contexts - use the test utils mock\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useUserType: jest.fn(),\n    useAuth: jest.fn(),\n    UserStatistics: jest.fn(() => <div data-testid=\"user-statistics\">User Statistics</div>),\n    ErrorBoundary: ({ children }: { children: React.ReactNode }) => <>{children}</>,\n  };\n});\n\n// Mock LearningTypeContext\njest.mock('../context/LearningTypeContext', () => ({\n  useLearningType: jest.fn(() => ({\n    learningType: null,\n    setLearningType: jest.fn(),\n  })),\n}));\n\n// Mock Next.js Link\njest.mock('next/link', () => {\n  return ({ children, href }: { children: React.ReactNode; href: string }) => {\n    return <a href={href}>{children}</a>;\n  };\n});\n\n// Mock lucide-react icons\njest.mock('lucide-react', () => ({\n  ArrowRight: () => <span data-testid=\"arrow-right-icon\">‚Üí</span>,\n  Play: () => <span data-testid=\"play-icon\">‚ñ∂</span>,\n  BookOpen: () => <span data-testid=\"book-icon\">üìñ</span>,\n  Star: () => <span data-testid=\"star-icon\">‚≠ê</span>,\n  Map: () => <span data-testid=\"map-icon\">üó∫Ô∏è</span>,\n  Compass: () => <span data-testid=\"compass-icon\">üß≠</span>,\n  Sparkles: () => <span data-testid=\"sparkles-icon\">‚ú®</span>,\n  Zap: () => <span data-testid=\"zap-icon\">‚ö°</span>,\n}));\n\nconst mockUseRouter = jest.fn();\njest.mock('next/navigation', () => ({\n  useRouter: () => mockUseRouter(),\n}));\n\ndescribe('G-UT-001: Homepage Renders Correctly', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    // Default mocks\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    // Mock localStorage\n    Storage.prototype.getItem = jest.fn(() => null);\n    Storage.prototype.setItem = jest.fn();\n    Storage.prototype.removeItem = jest.fn();\n  });\n\n  it('should render homepage without errors', () => {\n    const { container } = render(<HomePage />);\n    expect(container).toBeInTheDocument();\n  });\n\n  it('should not have console errors', () => {\n    const consoleError = jest.spyOn(console, 'error').mockImplementation(() => {});\n    render(<HomePage />);\n    expect(consoleError).not.toHaveBeenCalled();\n    consoleError.mockRestore();\n  });\n\n  it('should render all required elements', () => {\n    render(<HomePage />);\n    \n    // Check for main title\n    expect(screen.getByText(/Master Frontend Development|Start Your Learning Path|Build Your Custom Roadmap/i)).toBeInTheDocument();\n    \n    // Check for CTA button\n    const ctaButton = screen.getByRole('link', { name: /Get Started|Choose Learning Plan|View My Roadmap|Continue Practice/i });\n    expect(ctaButton).toBeInTheDocument();\n  });\n});\n\ndescribe('G-UT-002: Get Started Button Exists and is Clickable', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => null);\n  });\n\n  it('should have Get Started button element', () => {\n    render(<HomePage />);\n    const button = screen.getByRole('link', { name: /Get Started/i });\n    expect(button).toBeInTheDocument();\n  });\n\n  it('should have Get Started button visible', () => {\n    render(<HomePage />);\n    const button = screen.getByRole('link', { name: /Get Started/i });\n    expect(button).toBeVisible();\n  });\n\n  it('should have onClick handler attached (via Link href)', () => {\n    render(<HomePage />);\n    const button = screen.getByRole('link', { name: /Get Started/i });\n    expect(button).toHaveAttribute('href', '/get-started');\n  });\n});\n\ndescribe('G-UT-003: Navigation Links Render Correctly', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => null);\n  });\n\n  it('should render all navigation links', () => {\n    render(<HomePage />);\n    \n    // Check for main CTA links\n    expect(screen.getByRole('link', { name: /Get Started|Start Learning Now/i })).toBeInTheDocument();\n    expect(screen.getByRole('link', { name: /Explore Learning Paths/i })).toBeInTheDocument();\n  });\n\n  it('should have correct hrefs for navigation links', () => {\n    render(<HomePage />);\n    \n    const getStartedLink = screen.getByRole('link', { name: /Get Started|Start Learning Now/i });\n    expect(getStartedLink).toHaveAttribute('href', '/get-started');\n    \n    const learnLink = screen.getByRole('link', { name: /Explore Learning Paths/i });\n    expect(learnLink).toHaveAttribute('href', '/learn');\n  });\n\n  it('should have clickable navigation links', () => {\n    render(<HomePage />);\n    \n    const links = screen.getAllByRole('link');\n    links.forEach(link => {\n      expect(link).toBeInTheDocument();\n      expect(link).toBeVisible();\n    });\n  });\n});\n\ndescribe('G-UT-SNAPSHOT: Homepage Snapshot Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => null);\n  });\n\n  it('should match homepage snapshot (unauthenticated)', () => {\n    const { container } = render(<HomePage />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('should match homepage snapshot (authenticated, guided user)', () => {\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'guided',\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1', email: 'test@example.com' },\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => JSON.stringify([{ id: '1', name: 'Test Plan' }]));\n    \n    const { container } = render(<HomePage />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('should match homepage snapshot (authenticated, self-directed user)', () => {\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1', email: 'test@example.com' },\n    });\n    \n    const { container } = render(<HomePage />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n});\n\n"],"names":["jest","mock","actual","requireActual","useUserType","fn","useAuth","UserStatistics","div","data-testid","ErrorBoundary","children","useLearningType","learningType","setLearningType","href","a","ArrowRight","span","Play","BookOpen","Star","Map","Compass","Sparkles","Zap","useRouter","mockUseRouter","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","userType","setUserType","isAuthenticated","user","push","replace","prefetch","Storage","prototype","getItem","setItem","removeItem","it","container","render","HomePage","expect","toBeInTheDocument","consoleError","spyOn","console","mockImplementation","not","toHaveBeenCalled","mockRestore","screen","getByText","ctaButton","getByRole","name","button","toBeVisible","toHaveAttribute","getStartedLink","learnLink","links","getAllByRole","forEach","link","firstChild","toMatchSnapshot","id","email","JSON","stringify"],"mappings":"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"}
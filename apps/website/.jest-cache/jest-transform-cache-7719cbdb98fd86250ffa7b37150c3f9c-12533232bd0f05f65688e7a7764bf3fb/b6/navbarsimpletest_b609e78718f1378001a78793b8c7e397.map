{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx"],"sourcesContent":["// v1.1 - Fixed test with proper mocks\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport NavbarSimple from '../components/NavbarSimple';\n\n// Mock shared contexts used by NavbarSimple\njest.mock('@elzatona/shared-contexts', () => ({\n  useUserType: () => ({ userType: 'guided', setUserType: jest.fn() }),\n  useMobileMenu: () => ({ setIsMobileMenuOpen: jest.fn() }),\n  useTheme: () => ({ isDarkMode: false, toggleDarkMode: jest.fn() }),\n  useAuth: () => ({\n    user: null,\n    isAuthenticated: false,\n    isLoading: false,\n    logout: jest.fn(),\n  }),\n}));\n\n// Mock LearningTypeContext\njest.mock('@/context/LearningTypeContext', () => ({\n  useLearningType: () => ({\n    learningType: 'guided',\n    setLearningType: jest.fn(),\n  }),\n}));\n\n// Mock Next.js navigation\njest.mock('next/navigation', () => ({\n  usePathname: () => '/',\n  useRouter: () => ({ push: jest.fn() }),\n}));\n\n// Mock Supabase client\njest.mock('@/lib/supabase-client', () => ({\n  supabaseClient: null,\n  isSupabaseAvailable: () => false,\n}));\n\n// Mock auth session\njest.mock('@/lib/auth-session', () => ({\n  clearSession: jest.fn(),\n}));\n\ndescribe('NavbarSimple', () => {\n  beforeEach(() => {\n    sessionStorage.clear();\n    jest.clearAllMocks();\n  });\n\n  it('renders Sign In by default (unauthenticated)', () => {\n    render(<NavbarSimple />);\n    expect(screen.getByText('Sign In')).toBeInTheDocument();\n  });\n\n  it('renders Dashboard when persisted auth is set in sessionStorage', () => {\n    sessionStorage.setItem(\n      'navbar-auth-state',\n      JSON.stringify({ isAuthenticated: true, isLoading: false })\n    );\n    render(<NavbarSimple />);\n    expect(screen.getByText('Dashboard')).toBeInTheDocument();\n  });\n});\n"],"names":["jest","mock","useUserType","userType","setUserType","fn","useMobileMenu","setIsMobileMenuOpen","useTheme","isDarkMode","toggleDarkMode","useAuth","user","isAuthenticated","isLoading","logout","useLearningType","learningType","setLearningType","usePathname","useRouter","push","supabaseClient","isSupabaseAvailable","clearSession","describe","beforeEach","sessionStorage","clear","clearAllMocks","it","render","NavbarSimple","expect","screen","getByText","toBeInTheDocument","setItem","JSON","stringify"],"mappings":"AAAA,sCAAsC;;AAMtC,4CAA4C;AAC5CA,KAAKC,IAAI,CAAC,6BAA6B,IAAO,CAAA;QAC5CC,aAAa,IAAO,CAAA;gBAAEC,UAAU;gBAAUC,aAAaJ,KAAKK,EAAE;YAAG,CAAA;QACjEC,eAAe,IAAO,CAAA;gBAAEC,qBAAqBP,KAAKK,EAAE;YAAG,CAAA;QACvDG,UAAU,IAAO,CAAA;gBAAEC,YAAY;gBAAOC,gBAAgBV,KAAKK,EAAE;YAAG,CAAA;QAChEM,SAAS,IAAO,CAAA;gBACdC,MAAM;gBACNC,iBAAiB;gBACjBC,WAAW;gBACXC,QAAQf,KAAKK,EAAE;YACjB,CAAA;IACF,CAAA;AAEA,2BAA2B;AAC3BL,KAAKC,IAAI,CAAC,iCAAiC,IAAO,CAAA;QAChDe,iBAAiB,IAAO,CAAA;gBACtBC,cAAc;gBACdC,iBAAiBlB,KAAKK,EAAE;YAC1B,CAAA;IACF,CAAA;AAEA,0BAA0B;AAC1BL,KAAKC,IAAI,CAAC,mBAAmB,IAAO,CAAA;QAClCkB,aAAa,IAAM;QACnBC,WAAW,IAAO,CAAA;gBAAEC,MAAMrB,KAAKK,EAAE;YAAG,CAAA;IACtC,CAAA;AAEA,uBAAuB;AACvBL,KAAKC,IAAI,CAAC,yBAAyB,IAAO,CAAA;QACxCqB,gBAAgB;QAChBC,qBAAqB,IAAM;IAC7B,CAAA;AAEA,oBAAoB;AACpBvB,KAAKC,IAAI,CAAC,sBAAsB,IAAO,CAAA;QACrCuB,cAAcxB,KAAKK,EAAE;IACvB,CAAA;;;;;8DAzCkB;wBACa;QACxB;qEACkB;;;;;;AAwCzBoB,SAAS,gBAAgB;IACvBC,WAAW;QACTC,eAAeC,KAAK;QACpB5B,KAAK6B,aAAa;IACpB;IAEAC,GAAG,gDAAgD;QACjDC,IAAAA,cAAM,gBAAC,qBAACC,qBAAY;QACpBC,OAAOC,cAAM,CAACC,SAAS,CAAC,YAAYC,iBAAiB;IACvD;IAEAN,GAAG,kEAAkE;QACnEH,eAAeU,OAAO,CACpB,qBACAC,KAAKC,SAAS,CAAC;YAAE1B,iBAAiB;YAAMC,WAAW;QAAM;QAE3DiB,IAAAA,cAAM,gBAAC,qBAACC,qBAAY;QACpBC,OAAOC,cAAM,CAACC,SAAS,CAAC,cAAcC,iBAAiB;IACzD;AACF"}
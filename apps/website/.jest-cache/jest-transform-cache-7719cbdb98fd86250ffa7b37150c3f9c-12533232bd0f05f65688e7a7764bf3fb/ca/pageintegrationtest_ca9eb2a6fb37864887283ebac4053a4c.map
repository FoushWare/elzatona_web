{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/content-management/page.integration.test.tsx"],"sourcesContent":["/**\n * Integration Tests for Admin Content Management (A-IT-015, A-IT-016)\n * Task: A-004 - Admin Content Management\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport UnifiedAdminPage from './page';\n\n// Same mocks as unit tests\njest.mock('@elzatona/shared-hooks', () => ({\n  useCards: jest.fn(() => ({\n    data: { data: [], count: 0 },\n    isLoading: false,\n    error: null,\n  })),\n  usePlans: jest.fn(() => ({\n    data: { data: [], count: 0 },\n    isLoading: false,\n    error: null,\n  })),\n  useCategories: jest.fn(() => ({\n    data: { data: [], count: 0 },\n    isLoading: false,\n    error: null,\n  })),\n  useTopics: jest.fn(() => ({\n    data: { data: [], count: 0 },\n    isLoading: false,\n    error: null,\n  })),\n  useQuestionsUnified: jest.fn(() => ({\n    data: { data: [], pagination: { totalCount: 0 } },\n    isLoading: false,\n    error: null,\n  })),\n  useCreateCard: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useUpdateCard: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useDeleteCard: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useCreatePlan: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useUpdatePlan: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useDeletePlan: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useCreateCategory: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useUpdateCategory: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useDeleteCategory: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useCreateTopic: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useUpdateTopic: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useDeleteTopic: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useCreateQuestion: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useUpdateQuestion: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useDeleteQuestion: jest.fn(() => ({\n    mutateAsync: jest.fn().mockResolvedValue({ success: true }),\n    isPending: false,\n  })),\n  useNotificationActions: jest.fn(() => ({\n    notifyContentUpdate: jest.fn(),\n    notifyAdminAction: jest.fn(),\n  })),\n}));\n\njest.mock('@tanstack/react-query', () => ({\n  useQueryClient: () => ({\n    invalidateQueries: jest.fn(),\n  }),\n}));\n\njest.mock('@elzatona/shared-components', () => ({\n  BulkOperations: () => <div data-testid=\"bulk-operations\">Bulk Operations</div>,\n  useToast: () => ({\n    showSuccess: jest.fn(),\n    showError: jest.fn(),\n    toasts: [],\n    removeToast: jest.fn(),\n  }),\n  ToastContainer: () => <div>Toasts</div>,\n  Button: ({ children, onClick }: any) => <button onClick={onClick}>{children}</button>,\n  Card: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  CardContent: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  CardHeader: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  CardTitle: ({ children }: { children: React.ReactNode }) => <h2>{children}</h2>,\n  Input: ({ onChange, value }: any) => <input onChange={onChange} value={value} />,\n  Select: ({ children }: { children: React.ReactNode }) => <select>{children}</select>,\n  SelectContent: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  SelectItem: ({ children }: any) => <option>{children}</option>,\n  SelectTrigger: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  SelectValue: () => <span>Select...</span>,\n  Badge: ({ children }: { children: React.ReactNode }) => <span>{children}</span>,\n  Modal: ({ children, open }: any) => open ? <div>{children}</div> : null,\n}));\n\njest.mock('lucide-react', () => ({\n  ChevronDown: () => <span>‚ñº</span>,\n  ChevronRight: () => <span>‚ñ∂</span>,\n  Plus: () => <span>+</span>,\n  Edit: () => <span>‚úèÔ∏è</span>,\n  Trash2: () => <span>üóëÔ∏è</span>,\n  MessageSquare: () => <span>üí¨</span>,\n  BookOpen: () => <span>üìñ</span>,\n  Layers: () => <span>üìö</span>,\n  Puzzle: () => <span>üß©</span>,\n  Network: () => <span>üåê</span>,\n  Users: () => <span>üë•</span>,\n  Calendar: () => <span>üìÖ</span>,\n  Target: () => <span>üéØ</span>,\n}));\n\ndescribe('A-IT-015: Content Management Integration', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should handle data fetching from multiple hooks', async () => {\n    render(<UnifiedAdminPage />);\n    \n    await waitFor(() => {\n      const { useCards, usePlans, useCategories, useTopics, useQuestionsUnified } = require('@elzatona/shared-hooks');\n      expect(useCards).toHaveBeenCalled();\n      expect(usePlans).toHaveBeenCalled();\n      expect(useCategories).toHaveBeenCalled();\n      expect(useTopics).toHaveBeenCalled();\n      expect(useQuestionsUnified).toHaveBeenCalled();\n    });\n  });\n});\n\ndescribe('A-IT-016: CRUD Operations Integration', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should integrate with mutation hooks', async () => {\n    render(<UnifiedAdminPage />);\n    \n    // Component should be ready for CRUD operations\n    await waitFor(() => {\n      expect(screen.getByText(/.*/)).toBeTruthy();\n    });\n  });\n});\n\n"],"names":["jest","mock","useCards","fn","data","count","isLoading","error","usePlans","useCategories","useTopics","useQuestionsUnified","pagination","totalCount","useCreateCard","mutateAsync","mockResolvedValue","success","isPending","useUpdateCard","useDeleteCard","useCreatePlan","useUpdatePlan","useDeletePlan","useCreateCategory","useUpdateCategory","useDeleteCategory","useCreateTopic","useUpdateTopic","useDeleteTopic","useCreateQuestion","useUpdateQuestion","useDeleteQuestion","useNotificationActions","notifyContentUpdate","notifyAdminAction","useQueryClient","invalidateQueries","BulkOperations","div","data-testid","useToast","showSuccess","showError","toasts","removeToast","ToastContainer","Button","children","onClick","button","Card","CardContent","CardHeader","CardTitle","h2","Input","onChange","value","input","Select","select","SelectContent","SelectItem","option","SelectTrigger","SelectValue","span","Badge","Modal","open","ChevronDown","ChevronRight","Plus","Edit","Trash2","MessageSquare","BookOpen","Layers","Puzzle","Network","Users","Calendar","Target","describe","beforeEach","clearAllMocks","it","render","UnifiedAdminPage","waitFor","require","expect","toHaveBeenCalled","screen","getByText","toBeTruthy"],"mappings":"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"}
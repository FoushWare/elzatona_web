{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts"],"sourcesContent":["/**\n * Frontend Tasks & Problem Solving API Tests\n *\n * Comprehensive tests for CRUD operations in:\n * - Frontend Tasks API endpoints\n * - Problem Solving API endpoints\n */\n\nimport { NextRequest } from 'next/server';\n\n// Set up environment variables\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock Supabase instead of Firebase\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(),\n      insert: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n      eq: jest.fn(),\n      single: jest.fn(),\n      order: jest.fn(),\n    })),\n    auth: {\n      onAuthStateChange: jest.fn(() => ({\n        data: { subscription: null },\n        error: null,\n      })),\n      getSession: jest.fn().mockResolvedValue({ data: { session: null }, error: null }),\n      getUser: jest.fn().mockResolvedValue({ data: { user: null }, error: null }),\n    },\n  })),\n}));\n\ndescribe('Frontend Tasks & Problem Solving API Tests', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { createClient } = require('@supabase/supabase-js');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let mockSupabaseClient: any;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockSupabaseClient = createClient();\n    mockSupabaseClient.from.mockClear();\n  });\n\n  describe('Frontend Tasks API', () => {\n    describe('GET /api/frontend-tasks', () => {\n      it('should return all frontend tasks', async () => {\n        const mockTasks = [\n          {\n            id: 'task-1',\n            title: 'Build a Todo App',\n            description: 'Create a React todo application',\n            difficulty: 'easy',\n            category: 'react',\n            estimatedTime: 120,\n            starterCode: 'const App = () => { return <div>Todo App</div>; };',\n            testCases: [\n              {\n                input: 'Add task \"Learn React\"',\n                expectedOutput: 'Task added successfully',\n              },\n            ],\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrder = jest.fn().mockResolvedValue({\n          data: mockTasks,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          order: mockOrder,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/admin/frontend-tasks/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/frontend-tasks'\n        );\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].title).toBe('Build a Todo App');\n        expect(data.data[0].difficulty).toBe('easy');\n      });\n\n      it('should filter tasks by difficulty', async () => {\n        const mockTasks = [\n          {\n            id: 'task-1',\n            title: 'Easy Task',\n            difficulty: 'easy',\n            category: 'react',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrder = jest.fn().mockResolvedValue({\n          data: mockTasks,\n          error: null,\n        });\n\n        const mockEq = jest.fn().mockReturnValue({\n          order: mockOrder,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/admin/frontend-tasks/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/frontend-tasks?difficulty=easy'\n        );\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].difficulty).toBe('easy');\n      });\n    });\n\n    describe('POST /api/frontend-tasks', () => {\n      it('should create a new frontend task', async () => {\n        const newTask = {\n          title: 'Build a Calculator',\n          description: 'Create a calculator app with React',\n          difficulty: 'medium',\n          category: 'react',\n          estimatedTime: 180,\n          starterCode:\n            'const Calculator = () => { return <div>Calculator</div>; };',\n          testCases: [\n            {\n              input: '2 + 2',\n              expectedOutput: '4',\n            },\n          ],\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-task-id', ...newTask },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/admin/frontend-tasks/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/frontend-tasks',\n          {\n            method: 'POST',\n            body: JSON.stringify(newTask),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-task-id');\n        expect(data.data.title).toBe('Build a Calculator');\n      });\n\n      it('should validate required fields for frontend tasks', async () => {\n        const invalidTask = {\n          description: 'Missing title and difficulty',\n        };\n\n        const { POST } = await import('@/app/api/admin/frontend-tasks/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/frontend-tasks',\n          {\n            method: 'POST',\n            body: JSON.stringify(invalidTask),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(400);\n        expect(data.success).toBe(false);\n        expect(data.error).toBeDefined();\n      });\n    });\n\n    describe('PUT /api/admin/frontend-tasks/[id]', () => {\n      it('should update an existing frontend task', async () => {\n        const taskId = 'test-task-id';\n        const updateData = {\n          title: 'Updated Task Title',\n          description: 'Updated description',\n          estimatedTime: 240,\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: taskId, ...updateData },\n          error: null,\n        });\n\n        const mockEq = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        const mockUpdate = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          update: mockUpdate,\n        });\n\n        const { PUT } = await import(\n          '@/app/api/admin/frontend-tasks/[id]/route'\n        );\n        const request = new NextRequest(\n          `http://localhost:3000/api/admin/frontend-tasks/${taskId}`,\n          {\n            method: 'PUT',\n            body: JSON.stringify(updateData),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await PUT(request, { params: { id: taskId } });\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n      });\n    });\n\n    describe('DELETE /api/admin/frontend-tasks/[id]', () => {\n      it('should delete a frontend task', async () => {\n        const taskId = 'test-task-id';\n\n        const mockEq = jest.fn().mockResolvedValue({\n          data: null,\n          error: null,\n        });\n\n        const mockDelete = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          delete: mockDelete,\n        });\n\n        const { DELETE } = await import(\n          '@/app/api/admin/frontend-tasks/[id]/route'\n        );\n        const request = new NextRequest(\n          `http://localhost:3000/api/admin/frontend-tasks/${taskId}`,\n          {\n            method: 'DELETE',\n          }\n        );\n\n        const response = await DELETE(request, { params: { id: taskId } });\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n      });\n    });\n  });\n\n  describe('Problem Solving API', () => {\n    describe('GET /api/admin/problem-solving', () => {\n      it('should return all problem solving tasks', async () => {\n        const mockProblems = [\n          {\n            id: 'problem-1',\n            title: 'Two Sum',\n            description: 'Find two numbers that add up to target',\n            difficulty: 'easy',\n            category: 'arrays',\n            testCases: [\n              {\n                input: '[2,7,11,15], 9',\n                expectedOutput: '[0,1]',\n              },\n            ],\n            hints: ['Use a hash map to store complements'],\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrder = jest.fn().mockResolvedValue({\n          data: mockProblems,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          order: mockOrder,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/admin/problem-solving/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/problem-solving'\n        );\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].title).toBe('Two Sum');\n        expect(data.data[0].difficulty).toBe('easy');\n      });\n\n      it('should filter problems by category', async () => {\n        const mockProblems = [\n          {\n            id: 'problem-1',\n            title: 'Array Problem',\n            category: 'arrays',\n            difficulty: 'easy',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrder = jest.fn().mockResolvedValue({\n          data: mockProblems,\n          error: null,\n        });\n\n        const mockEq = jest.fn().mockReturnValue({\n          order: mockOrder,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/admin/problem-solving/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/problem-solving?category=arrays'\n        );\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].category).toBe('arrays');\n      });\n    });\n\n    describe('POST /api/admin/problem-solving', () => {\n      it('should create a new problem solving task', async () => {\n        const newProblem = {\n          title: 'Reverse String',\n          description: 'Reverse a given string',\n          difficulty: 'easy',\n          category: 'strings',\n          testCases: [\n            {\n              input: '\"hello\"',\n              expectedOutput: '\"olleh\"',\n            },\n          ],\n          hints: ['Use two pointers'],\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-problem-id', ...newProblem },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/admin/problem-solving/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/problem-solving',\n          {\n            method: 'POST',\n            body: JSON.stringify(newProblem),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-problem-id');\n        expect(data.data.title).toBe('Reverse String');\n      });\n\n      it('should validate required fields for problem solving tasks', async () => {\n        const invalidProblem = {\n          description: 'Missing title and difficulty',\n        };\n\n        const { POST } = await import('@/app/api/admin/problem-solving/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/admin/problem-solving',\n          {\n            method: 'POST',\n            body: JSON.stringify(invalidProblem),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(400);\n        expect(data.success).toBe(false);\n        expect(data.error).toBeDefined();\n      });\n    });\n\n    describe('PUT /api/admin/problem-solving/[id]', () => {\n      it('should update an existing problem solving task', async () => {\n        const problemId = 'test-problem-id';\n        const updateData = {\n          title: 'Updated Problem Title',\n          description: 'Updated description',\n          hints: ['Updated hint'],\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: problemId, ...updateData },\n          error: null,\n        });\n\n        const mockEq = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        const mockUpdate = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          update: mockUpdate,\n        });\n\n        const { PUT } = await import(\n          '@/app/api/admin/problem-solving/[id]/route'\n        );\n        const request = new NextRequest(\n          `http://localhost:3000/api/admin/problem-solving/${problemId}`,\n          {\n            method: 'PUT',\n            body: JSON.stringify(updateData),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await PUT(request, { params: { id: problemId } });\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n      });\n    });\n\n    describe('DELETE /api/admin/problem-solving/[id]', () => {\n      it('should delete a problem solving task', async () => {\n        const problemId = 'test-problem-id';\n\n        const mockEq = jest.fn().mockResolvedValue({\n          data: null,\n          error: null,\n        });\n\n        const mockDelete = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          delete: mockDelete,\n        });\n\n        const { DELETE } = await import(\n          '@/app/api/admin/problem-solving/[id]/route'\n        );\n        const request = new NextRequest(\n          `http://localhost:3000/api/admin/problem-solving/${problemId}`,\n          {\n            method: 'DELETE',\n          }\n        );\n\n        const response = await DELETE(request, { params: { id: problemId } });\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle Supabase connection errors gracefully', async () => {\n      const mockOrder = jest\n        .fn()\n        .mockRejectedValue(new Error('Supabase connection failed'));\n\n      const mockSelect = jest.fn().mockReturnValue({\n        order: mockOrder,\n      });\n\n      mockSupabaseClient.from.mockReturnValue({\n        select: mockSelect,\n      });\n\n      const { GET } = await import('@/app/api/admin/frontend-tasks/route');\n      const request = new NextRequest(\n        'http://localhost:3000/api/admin/frontend-tasks'\n      );\n\n      const response = await GET(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(500);\n      expect(data.success).toBe(false);\n      expect(data.error).toBeDefined();\n    });\n\n    it('should handle invalid JSON in request body', async () => {\n      const { POST } = await import('@/app/api/admin/frontend-tasks/route');\n      const request = new NextRequest(\n        'http://localhost:3000/api/admin/frontend-tasks',\n        {\n          method: 'POST',\n          body: 'invalid json',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      const response = await POST(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(400);\n      expect(data.success).toBe(false);\n      expect(data.error).toBeDefined();\n    });\n\n    it('should handle missing Content-Type header', async () => {\n      const { POST } = await import('@/app/api/admin/frontend-tasks/route');\n      const request = new NextRequest(\n        'http://localhost:3000/api/admin/frontend-tasks',\n        {\n          method: 'POST',\n          body: JSON.stringify({ title: 'Test Task' }),\n        }\n      );\n\n      const response = await POST(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(400);\n      expect(data.success).toBe(false);\n      expect(data.error).toBeDefined();\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","from","select","insert","update","delete","eq","single","order","auth","onAuthStateChange","data","subscription","error","getSession","mockResolvedValue","session","getUser","user","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","describe","require","mockSupabaseClient","beforeEach","clearAllMocks","mockClear","it","mockTasks","id","title","description","difficulty","category","estimatedTime","starterCode","testCases","input","expectedOutput","createdAt","Date","toISOString","updatedAt","mockOrder","mockSelect","mockReturnValue","GET","request","NextRequest","response","json","expect","status","toBe","success","toHaveLength","mockEq","newTask","mockSingle","mockInsert","POST","method","body","JSON","stringify","headers","invalidTask","toBeDefined","taskId","updateData","mockUpdate","PUT","params","mockDelete","DELETE","mockProblems","hints","created_at","updated_at","newProblem","invalidProblem","problemId","mockRejectedValue","Error"],"mappings":"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"}
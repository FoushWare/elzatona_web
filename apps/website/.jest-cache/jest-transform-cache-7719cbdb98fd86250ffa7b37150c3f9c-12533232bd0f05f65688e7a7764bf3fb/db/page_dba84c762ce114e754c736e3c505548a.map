{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/my-plans/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\nimport { useAuth } from '@elzatona/shared-contexts';\nimport {\n  Play,\n  Edit,\n  Trash2,\n  Calendar,\n  Target,\n  Clock,\n  CheckCircle,\n  Plus,\n  ArrowRight,\n  Loader2,\n  AlertCircle,\n  BookOpen,\n} from 'lucide-react';\n\ninterface CustomPlan {\n  id: string;\n  name: string;\n  description: string;\n  duration: number;\n  sections: {\n    id: string;\n    name: string;\n    selectedQuestions: string[];\n  }[];\n  totalQuestions: number;\n  dailyQuestions: number;\n  created_at: string;\n  isActive?: boolean;\n  progress?: {\n    completedQuestions: number;\n    currentDay: number;\n    lastActivity: string;\n  };\n}\n\nexport default function MyPlansPage() {\n  const router = useRouter();\n  const {\n    isAuthenticated: authIsAuthenticated,\n    user,\n    isLoading: authIsLoading,\n  } = useAuth();\n  const [isLoading, setIsLoading] = useState(true);\n  const [plans, setPlans] = useState<CustomPlan[]>([]);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<string | null>(\n    null\n  );\n\n  useEffect(() => {\n    let authCheckDone = false;\n\n    const checkAuth = () => {\n      if (authCheckDone) return;\n\n      // Check AuthContext first\n      if (authIsAuthenticated && user) {\n        console.log('✅ [MyPlans] Authenticated via AuthContext');\n        authCheckDone = true;\n        loadPlans();\n        return;\n      }\n\n      // Check localStorage and sessionStorage for various auth indicators\n      if (typeof window !== 'undefined') {\n        // Check for auth token in localStorage\n        const authToken = localStorage.getItem('auth-token');\n        const frontendUser = localStorage.getItem('frontend-koddev-user');\n\n        if (authToken || frontendUser) {\n          console.log(\n            '✅ [MyPlans] Authenticated via localStorage (token or user data found)'\n          );\n          authCheckDone = true;\n          loadPlans();\n          return;\n        }\n\n        // Check sessionStorage for isAuthenticated\n        try {\n          const commonAuthKeys = [\n            'navbar-auth-state',\n            'auth',\n            'auth-state',\n            'authentication',\n            'isAuthenticated',\n            'authStatus',\n            'authState',\n            'user-auth',\n            'session-auth',\n          ];\n\n          for (const key of commonAuthKeys) {\n            const value = sessionStorage.getItem(key);\n            if (value) {\n              try {\n                const parsed = JSON.parse(value);\n                if (\n                  parsed &&\n                  typeof parsed === 'object' &&\n                  parsed.isAuthenticated === true\n                ) {\n                  console.log(\n                    `✅ [MyPlans] Authenticated via sessionStorage (${key} with isAuthenticated=true)`\n                  );\n                  authCheckDone = true;\n                  loadPlans();\n                  return;\n                }\n              } catch {\n                // Not JSON, check if it's the string \"true\"\n                if (value === 'true') {\n                  console.log(\n                    `✅ [MyPlans] Authenticated via sessionStorage (${key}=true string)`\n                  );\n                  authCheckDone = true;\n                  loadPlans();\n                  return;\n                }\n              }\n            }\n          }\n        } catch (e) {\n          console.warn('Error checking sessionStorage:', e);\n        }\n      }\n\n      // If we've waited for auth to load and still no authentication found\n      if (!authIsLoading && !authCheckDone) {\n        console.log(\n          '❌ [MyPlans] No authentication found after checking all sources'\n        );\n        authCheckDone = true;\n        router.push(`/auth?redirect=${encodeURIComponent('/my-plans')}`);\n      } else if (authIsLoading && !authCheckDone) {\n        // If auth is still loading, wait a bit more\n        console.log('⏳ [MyPlans] Auth context still loading, waiting...');\n        const timeout = setTimeout(() => {\n          if (!authCheckDone) {\n            checkAuth();\n          }\n        }, 1000);\n        return () => clearTimeout(timeout);\n      }\n    };\n\n    checkAuth();\n  }, [authIsAuthenticated, user, authIsLoading, router]);\n\n  const loadPlans = async () => {\n    setIsLoading(true);\n    // Simulate loading from Firebase\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    // Load from localStorage for now (in real app, load from Firebase)\n    const savedPlans = localStorage.getItem('userPlans');\n    if (savedPlans) {\n      try {\n        const parsedPlans = JSON.parse(savedPlans);\n        setPlans(parsedPlans);\n      } catch (error) {\n        console.error('Error parsing saved plans:', error);\n        setPlans([]);\n      }\n    } else {\n      setPlans([]);\n    }\n\n    setIsLoading(false);\n  };\n\n  const handleStartPlan = (plan_id: string) => {\n    // Set as active plan and redirect to practice\n    localStorage.setItem('active-custom-plan', plan_id);\n    router.push(`/custom-practice/${plan_id}`);\n  };\n\n  const handleEditPlan = (plan_id: string) => {\n    // Redirect to edit mode\n    router.push(`/custom-roadmap?edit=${plan_id}`);\n  };\n\n  const handleDeletePlan = async (plan_id: string) => {\n    const updatedPlans = plans.filter(plan => plan.id !== plan_id);\n    setPlans(updatedPlans);\n    localStorage.setItem('userPlans', JSON.stringify(updatedPlans));\n    setShowDeleteConfirm(null);\n  };\n\n  const handleCreateNew = () => {\n    router.push('/custom-roadmap');\n  };\n\n  const getProgressPercentage = (plan: CustomPlan) => {\n    if (!plan.progress) return 0;\n    return Math.round(\n      (plan.progress.completedQuestions / plan.totalQuestions) * 100\n    );\n  };\n\n  const getDaysRemaining = (plan: CustomPlan) => {\n    if (!plan.progress) return plan.duration;\n    return Math.max(0, plan.duration - plan.progress.currentDay);\n  };\n\n  if (isLoading) {\n    return (\n      <div className='min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center'>\n        <div className='text-center'>\n          <Loader2 className='w-12 h-12 animate-spin mx-auto mb-4 text-purple-600' />\n          <p className='text-gray-600 dark:text-gray-300 text-lg'>\n            Loading your plans...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900'>\n      <div className='container mx-auto px-4 pt-24 pb-12'>\n        {/* Header */}\n        <div className='text-center mb-12 mt-8'>\n          <div className='relative mb-8'>\n            <div className='absolute inset-0 bg-gradient-to-r from-purple-400 via-indigo-500 to-blue-500 rounded-3xl blur-3xl opacity-20 scale-110' />\n            <div className='relative w-24 h-24 bg-gradient-to-r from-purple-500 via-indigo-600 to-blue-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl'>\n              <BookOpen className='w-12 h-12 text-white' />\n              <div\n                className='absolute inset-0 rounded-3xl border-4 border-white/20 animate-spin'\n                style={{ animationDuration: '8s' }}\n              />\n            </div>\n          </div>\n\n          <h1 className='text-5xl font-bold bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent mb-6'>\n            My Learning Plans\n          </h1>\n\n          <p className='text-xl text-gray-600 dark:text-gray-400 max-w-4xl mx-auto leading-relaxed mb-8'>\n            Manage your custom learning plans and track your progress. Start,\n            edit, or create new plans tailored to your learning goals.\n          </p>\n\n          {/* Quick Stats */}\n          <div className='grid grid-cols-1 md:grid-cols-4 gap-6 max-w-3xl mx-auto'>\n            <div className='bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-2xl p-4'>\n              <div className='text-2xl font-bold text-purple-600 dark:text-purple-400'>\n                {plans.length}\n              </div>\n              <div className='text-sm text-gray-600 dark:text-gray-400'>\n                Total Plans\n              </div>\n            </div>\n            <div className='bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-2xl p-4'>\n              <div className='text-2xl font-bold text-indigo-600 dark:text-indigo-400'>\n                {plans.filter(p => p.isActive).length}\n              </div>\n              <div className='text-sm text-gray-600 dark:text-gray-400'>\n                Active\n              </div>\n            </div>\n            <div className='bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-2xl p-4'>\n              <div className='text-2xl font-bold text-blue-600 dark:text-blue-400'>\n                {plans.reduce((sum, plan) => sum + plan.totalQuestions, 0)}\n              </div>\n              <div className='text-sm text-gray-600 dark:text-gray-400'>\n                Total Questions\n              </div>\n            </div>\n            <div className='bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-2xl p-4'>\n              <div className='text-2xl font-bold text-green-600 dark:text-green-400'>\n                {plans.reduce(\n                  (sum, plan) => sum + (plan.progress?.completedQuestions || 0),\n                  0\n                )}\n              </div>\n              <div className='text-sm text-gray-600 dark:text-gray-400'>\n                Completed\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Create New Plan Button */}\n        <div className='text-center mb-12'>\n          <button\n            onClick={handleCreateNew}\n            className='inline-flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-2xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105'\n          >\n            <Plus className='w-6 h-6' />\n            <span>Create New Plan</span>\n          </button>\n        </div>\n\n        {/* Plans Grid */}\n        {plans.length === 0 ? (\n          <div className='text-center py-16'>\n            <div className='w-32 h-32 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6'>\n              <BookOpen className='w-16 h-16 text-gray-400' />\n            </div>\n            <h3 className='text-2xl font-semibold text-gray-900 dark:text-white mb-4'>\n              No plans yet\n            </h3>\n            <p className='text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto'>\n              Create your first custom learning plan to get started with\n              personalized study sessions.\n            </p>\n            <button\n              onClick={handleCreateNew}\n              className='inline-flex items-center space-x-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-semibold transition-colors'\n            >\n              <Plus className='w-5 h-5' />\n              <span>Create Your First Plan</span>\n            </button>\n          </div>\n        ) : (\n          <div className='grid md:grid-cols-2 lg:grid-cols-3 gap-8'>\n            {plans.map(plan => (\n              <div\n                key={plan.id}\n                className='group bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden'\n              >\n                {/* Plan Header */}\n                <div className='p-6 border-b border-gray-200 dark:border-gray-700'>\n                  <div className='flex items-start justify-between mb-4'>\n                    <div className='flex-1'>\n                      <h3 className='text-xl font-bold text-gray-900 dark:text-white mb-2'>\n                        {plan.name}\n                      </h3>\n                      <p className='text-gray-600 dark:text-gray-300 text-sm leading-relaxed'>\n                        {plan.description}\n                      </p>\n                    </div>\n                    {plan.isActive && (\n                      <div className='ml-4'>\n                        <div className='bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 px-3 py-1 rounded-full text-sm font-semibold flex items-center space-x-1'>\n                          <CheckCircle className='w-4 h-4' />\n                          <span>Active</span>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Plan Stats */}\n                  <div className='grid grid-cols-2 gap-4 text-sm'>\n                    <div className='flex items-center space-x-2 text-gray-600 dark:text-gray-400'>\n                      <Calendar className='w-4 h-4' />\n                      <span>{plan.duration} days</span>\n                    </div>\n                    <div className='flex items-center space-x-2 text-gray-600 dark:text-gray-400'>\n                      <Target className='w-4 h-4' />\n                      <span>{plan.totalQuestions} questions</span>\n                    </div>\n                    <div className='flex items-center space-x-2 text-gray-600 dark:text-gray-400'>\n                      <Clock className='w-4 h-4' />\n                      <span>{plan.dailyQuestions}/day</span>\n                    </div>\n                    <div className='flex items-center space-x-2 text-gray-600 dark:text-gray-400'>\n                      <BookOpen className='w-4 h-4' />\n                      <span>{plan.sections?.length || 0} sections</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Progress Section */}\n                {plan.progress && (\n                  <div className='p-6 border-b border-gray-200 dark:border-gray-700'>\n                    <div className='flex items-center justify-between mb-2'>\n                      <span className='text-sm font-medium text-gray-700 dark:text-gray-300'>\n                        Progress\n                      </span>\n                      <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                        {getProgressPercentage(plan)}%\n                      </span>\n                    </div>\n                    <div className='w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2'>\n                      <div\n                        className='bg-gradient-to-r from-purple-500 to-indigo-500 h-2 rounded-full transition-all duration-300'\n                        style={{ width: `${getProgressPercentage(plan)}%` }}\n                      />\n                    </div>\n                    <div className='flex items-center justify-between text-xs text-gray-500 dark:text-gray-400'>\n                      <span>\n                        {plan.progress.completedQuestions} of{' '}\n                        {plan.totalQuestions} completed\n                      </span>\n                      <span>\n                        Day {plan.progress.currentDay} of {plan.duration}\n                      </span>\n                    </div>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className='p-6'>\n                  <div className='flex items-center space-x-3'>\n                    <button\n                      onClick={() => handleStartPlan(plan.id)}\n                      className='flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-semibold transition-all duration-300 group-hover:scale-105'\n                    >\n                      <Play className='w-4 h-4' />\n                      <span>{plan.progress ? 'Continue' : 'Start'}</span>\n                    </button>\n\n                    <button\n                      onClick={() => handleEditPlan(plan.id)}\n                      className='p-3 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors'\n                      title='Edit Plan'\n                    >\n                      <Edit className='w-5 h-5' />\n                    </button>\n\n                    <button\n                      onClick={() => setShowDeleteConfirm(plan.id)}\n                      className='p-3 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors'\n                      title='Delete Plan'\n                    >\n                      <Trash2 className='w-5 h-5' />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Back Button */}\n        <div className='mt-12 text-center'>\n          <button\n            onClick={() => router.back()}\n            className='inline-flex items-center space-x-2 px-6 py-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md'\n          >\n            <ArrowRight className='w-4 h-4 rotate-180' />\n            <span>Go Back</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      {showDeleteConfirm && (\n        <div className='fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4'>\n          <div className='bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full'>\n            <div className='flex items-center space-x-3 mb-4'>\n              <div className='w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center'>\n                <AlertCircle className='w-5 h-5 text-red-600 dark:text-red-400' />\n              </div>\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white'>\n                Delete Plan\n              </h3>\n            </div>\n\n            <p className='text-gray-600 dark:text-gray-300 mb-6'>\n              Are you sure you want to delete this plan? This action cannot be\n              undone and you&apos;ll lose all progress.\n            </p>\n\n            <div className='flex items-center space-x-3'>\n              <button\n                onClick={() => setShowDeleteConfirm(null)}\n                className='flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors'\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => handleDeletePlan(showDeleteConfirm)}\n                className='flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-colors'\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["MyPlansPage","router","useRouter","isAuthenticated","authIsAuthenticated","user","isLoading","authIsLoading","useAuth","setIsLoading","useState","plans","setPlans","showDeleteConfirm","setShowDeleteConfirm","useEffect","authCheckDone","checkAuth","console","log","loadPlans","window","authToken","localStorage","getItem","frontendUser","commonAuthKeys","key","value","sessionStorage","parsed","JSON","parse","e","warn","push","encodeURIComponent","timeout","setTimeout","clearTimeout","Promise","resolve","savedPlans","parsedPlans","error","handleStartPlan","plan_id","setItem","handleEditPlan","handleDeletePlan","updatedPlans","filter","plan","id","stringify","handleCreateNew","getProgressPercentage","progress","Math","round","completedQuestions","totalQuestions","getDaysRemaining","duration","max","currentDay","div","className","Loader2","p","BookOpen","style","animationDuration","h1","length","isActive","reduce","sum","button","onClick","Plus","span","h3","map","name","description","CheckCircle","Calendar","Target","Clock","dailyQuestions","sections","width","Play","title","Edit","Trash2","back","ArrowRight","AlertCircle"],"mappings":"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"}
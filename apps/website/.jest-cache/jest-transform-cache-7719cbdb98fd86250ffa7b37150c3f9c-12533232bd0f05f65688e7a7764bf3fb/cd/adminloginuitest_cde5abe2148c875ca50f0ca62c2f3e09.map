{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-login-ui.test.tsx"],"sourcesContent":["/**\n * Admin Login UI Tests\n *\n * Tests for the admin login page component to ensure:\n * - Form rendering and validation\n * - User interactions\n * - Error handling\n * - Loading states\n * - Responsive design\n */\n\n// Set up environment variables before any imports\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock Supabase before any imports that use it\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn().mockResolvedValue({ data: null, error: null }),\n        })),\n      })),\n    })),\n  })),\n}));\n\n// Mock nuqs before any imports\njest.mock('nuqs', () => ({\n  useQueryState: jest.fn(() => [null, jest.fn()]),\n  useQueryStates: jest.fn(() => [{}, jest.fn()]),\n  parseAsString: jest.fn(),\n  parseAsInteger: jest.fn(),\n  createSearchParamsCache: jest.fn(),\n}));\n\n// Mock @tanstack/react-query\njest.mock('@tanstack/react-query', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    QueryClientProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    QueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQuery: jest.fn(() => ({\n      data: null,\n      isLoading: false,\n      error: null,\n    })),\n    useMutation: jest.fn(() => ({\n      mutate: jest.fn(),\n      mutateAsync: jest.fn(),\n      isLoading: false,\n      error: null,\n    })),\n  };\n});\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: jest.fn(),\n  usePathname: jest.fn(() => '/admin/login'),\n}));\n\n// Mock the actual AdminAuthContext file\njest.mock('../../libs/shared-contexts/src/lib/AdminAuthContext', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  const mockFn = jest.fn(() => ({\n    isAuthenticated: false,\n    isLoading: false,\n    login: jest.fn(),\n    logout: jest.fn(),\n    user: null,\n  }));\n  return {\n    AdminAuthProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    useAdminAuth: mockFn,\n  };\n});\n\n// Mock the actual ThemeContext file\njest.mock('../../libs/shared-contexts/src/lib/ThemeContext', () => ({\n  ThemeProvider: ({ children }: { children: React.ReactNode }) => children,\n  useTheme: jest.fn(() => ({\n    isDarkMode: false,\n    toggleDarkMode: jest.fn(),\n    setDarkMode: jest.fn(),\n    isLoaded: true,\n  })),\n}));\n\n// Also mock the package entry point\n// Create a mock function that can be configured per test\nconst mockUseAdminAuthFn = jest.fn(() => ({\n  isAuthenticated: false,\n  isLoading: false,\n  login: jest.fn(),\n  logout: jest.fn(),\n  user: null,\n}));\n\njest.mock('@elzatona/shared-contexts', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    AdminAuthProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    useAdminAuth: mockUseAdminAuthFn,\n    ThemeProvider: ({ children }: { children: React.ReactNode }) =>\n       \n      <>{children}</>,\n    useTheme: jest.fn(() => ({\n      isDarkMode: false,\n      toggleDarkMode: jest.fn(),\n    })),\n  };\n});\n\n// Mock fetch for API calls\nglobal.fetch = jest.fn();\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { useRouter } from 'next/navigation';\nimport AdminLoginPage from '@/app/admin/login/page';\nimport { AdminAuthProvider } from '@elzatona/shared-contexts';\n\n// Type definitions for mocks\ninterface MockRouter {\n  push: jest.MockedFunction<(url: string) => void>;\n  replace: jest.MockedFunction<(url: string) => void>;\n  prefetch: jest.MockedFunction<(url: string) => void>;\n  back: jest.MockedFunction<() => void>;\n  forward: jest.MockedFunction<() => void>;\n  refresh: jest.MockedFunction<() => void>;\n}\n\n// MockAdminAuth interface removed - not used in tests\n\ndescribe('Admin Login Page', () => {\n  const mockPush = jest.fn();\n  const mockUseRouter = useRouter as jest.MockedFunction<typeof useRouter>;\n  const mockLogin = jest.fn();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    // Reset mock admin auth function to return default values\n    mockUseAdminAuthFn.mockReturnValue({\n      isAuthenticated: false,\n      isLoading: false,\n      login: mockLogin,\n      logout: jest.fn(),\n      user: null,\n    });\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n      back: jest.fn(),\n      forward: jest.fn(),\n      refresh: jest.fn(),\n    } as MockRouter);\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('Page Rendering', () => {\n    it('should render login form with all required elements', () => {\n      render(\n        <AdminAuthProvider>\n          <AdminLoginPage />\n        </AdminAuthProvider>\n      );\n\n      expect(screen.getByText('Admin Login')).toBeInTheDocument();\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: /sign in/i })\n      ).toBeInTheDocument();\n    });\n\n    it('should render admin navbar', () => {\n      render(<AdminLoginPage />);\n\n      expect(screen.getByText('Admin Panel')).toBeInTheDocument();\n      expect(screen.getByText('Elzatona')).toBeInTheDocument();\n    });\n\n    it('should show loading state when authentication is in progress', () => {\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: false,\n        isLoading: true,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      expect(screen.getByText('Loading...')).toBeInTheDocument();\n    });\n\n    it('should redirect authenticated users to dashboard', () => {\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: true,\n        isLoading: false,\n        login: mockLogin,\n        logout: jest.fn(),\n        user: {\n          id: '1',\n          email: 'admin@example.com',\n          name: 'Admin',\n          role: 'super_admin',\n        },\n      });\n\n      render(<AdminLoginPage />);\n\n      expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n    });\n  });\n\n  describe('Form Validation', () => {\n    it('should show validation errors for empty fields', async () => {\n      render(<AdminLoginPage />);\n\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Email is required')).toBeInTheDocument();\n        expect(screen.getByText('Password is required')).toBeInTheDocument();\n      });\n    });\n\n    it('should show validation error for invalid email format', async () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      fireEvent.change(emailInput, { target: { value: 'invalid-email' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(\n          screen.getByText('Please enter a valid email address')\n        ).toBeInTheDocument();\n      });\n    });\n\n    it('should show validation error for short password', async () => {\n      render(<AdminLoginPage />);\n\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      fireEvent.change(passwordInput, { target: { value: '123' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(\n          screen.getByText('Password must be at least 6 characters')\n        ).toBeInTheDocument();\n      });\n    });\n\n    it('should clear validation errors when user starts typing', async () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      // Trigger validation errors\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Email is required')).toBeInTheDocument();\n        expect(screen.getByText('Password is required')).toBeInTheDocument();\n      });\n\n      // Start typing to clear errors\n      fireEvent.change(emailInput, { target: { value: 'test@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n\n      await waitFor(() => {\n        expect(screen.queryByText('Email is required')).not.toBeInTheDocument();\n        expect(\n          screen.queryByText('Password is required')\n        ).not.toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Form Submission', () => {\n    it('should call login function with correct credentials', async () => {\n      const loginMock = jest.fn().mockResolvedValue({ success: true });\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(loginMock).toHaveBeenCalledWith(\n          'admin@example.com',\n          'password123'\n        );\n      });\n    });\n\n    it('should show loading state during login', async () => {\n      const loginMock = jest\n        .fn()\n        .mockImplementation(\n          () => new Promise(resolve => setTimeout(resolve, 100))\n        );\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n      fireEvent.click(loginButton);\n\n      expect(screen.getByText('Logging in...')).toBeInTheDocument();\n      expect(loginButton).toBeDisabled();\n    });\n\n    it('should show error message on login failure', async () => {\n      const loginMock = jest\n        .fn()\n        .mockResolvedValue({ success: false, error: 'Invalid credentials' });\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Invalid credentials')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle network errors gracefully', async () => {\n      const loginMock = jest.fn().mockRejectedValue(new Error('Network error'));\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(\n          screen.getByText('An error occurred. Please try again.')\n        ).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('User Interactions', () => {\n    it('should toggle password visibility', () => {\n      render(<AdminLoginPage />);\n\n      const passwordInput = screen.getByLabelText(/password/i);\n      const toggleButton = screen.getByRole('button', {\n        name: /toggle password visibility/i,\n      });\n\n      expect(passwordInput).toHaveAttribute('type', 'password');\n\n      fireEvent.click(toggleButton);\n      expect(passwordInput).toHaveAttribute('type', 'text');\n\n      fireEvent.click(toggleButton);\n      expect(passwordInput).toHaveAttribute('type', 'password');\n    });\n\n    it('should submit form on Enter key press', async () => {\n      const loginMock = jest.fn().mockResolvedValue({ success: true });\n      mockUseAdminAuthFn.mockReturnValueOnce({\n        isAuthenticated: false,\n        isLoading: false,\n        login: loginMock,\n        logout: jest.fn(),\n        user: null,\n      });\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n      fireEvent.keyDown(passwordInput, { key: 'Enter', code: 'Enter' });\n\n      await waitFor(() => {\n        expect(loginMock).toHaveBeenCalledWith(\n          'admin@example.com',\n          'password123'\n        );\n      });\n    });\n\n    it('should clear form when clicking reset button', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const resetButton = screen.getByRole('button', { name: /reset/i });\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'password123' } });\n\n      fireEvent.click(resetButton);\n\n      expect(emailInput).toHaveValue('');\n      expect(passwordInput).toHaveValue('');\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('should have proper ARIA labels', () => {\n      render(<AdminLoginPage />);\n\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: /sign in/i })\n      ).toBeInTheDocument();\n    });\n\n    it('should be keyboard navigable', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n\n      emailInput.focus();\n      expect(emailInput).toHaveFocus();\n\n      fireEvent.keyDown(emailInput, { key: 'Tab' });\n      expect(passwordInput).toHaveFocus();\n\n      fireEvent.keyDown(passwordInput, { key: 'Tab' });\n      expect(loginButton).toHaveFocus();\n    });\n\n    it('should announce errors to screen readers', async () => {\n      render(<AdminLoginPage />);\n\n      const loginButton = screen.getByRole('button', { name: /sign in/i });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByRole('alert')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Responsive Design', () => {\n    it('should render correctly on mobile viewport', () => {\n      // Mock mobile viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 375,\n      });\n\n      render(<AdminLoginPage />);\n\n      const container = screen.getByTestId('admin-login-container');\n      expect(container).toHaveClass('min-h-screen', 'px-4', 'py-8');\n    });\n\n    it('should render correctly on desktop viewport', () => {\n      // Mock desktop viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 1024,\n      });\n\n      render(<AdminLoginPage />);\n\n      const container = screen.getByTestId('admin-login-container');\n      expect(container).toHaveClass('min-h-screen', 'px-8', 'py-16');\n    });\n  });\n\n  describe('Security Features', () => {\n    it('should not log sensitive information', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const passwordInput = screen.getByLabelText(/password/i);\n\n      fireEvent.change(emailInput, { target: { value: 'admin@example.com' } });\n      fireEvent.change(passwordInput, {\n        target: { value: 'secretpassword123' },\n      });\n\n      // Check that password is not logged\n      expect(consoleSpy).not.toHaveBeenCalledWith(\n        expect.stringContaining('secretpassword123')\n      );\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should prevent XSS attacks in form inputs', () => {\n      render(<AdminLoginPage />);\n\n      const emailInput = screen.getByLabelText(/email/i);\n      const maliciousInput = '<script>alert(\"xss\")</script>';\n\n      fireEvent.change(emailInput, { target: { value: maliciousInput } });\n\n      // The input should be sanitized and not execute the script\n      expect(emailInput).toHaveValue(maliciousInput);\n      expect(screen.queryByText('xss')).not.toBeInTheDocument();\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","from","select","eq","single","mockResolvedValue","data","error","useQueryState","useQueryStates","parseAsString","parseAsInteger","createSearchParamsCache","React","require","QueryClientProvider","children","QueryClient","invalidateQueries","setQueryData","getQueryData","useQueryClient","useQuery","isLoading","useMutation","mutate","mutateAsync","useRouter","usePathname","mockFn","isAuthenticated","login","logout","user","AdminAuthProvider","useAdminAuth","ThemeProvider","useTheme","isDarkMode","toggleDarkMode","setDarkMode","isLoaded","mockUseAdminAuthFn","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","global","fetch","describe","mockPush","mockUseRouter","mockLogin","beforeEach","clearAllMocks","mockReturnValue","push","replace","prefetch","back","forward","refresh","afterEach","restoreAllMocks","it","render","AdminLoginPage","expect","screen","getByText","toBeInTheDocument","getByLabelText","getByRole","name","mockReturnValueOnce","id","email","role","toHaveBeenCalledWith","loginButton","fireEvent","click","waitFor","emailInput","change","target","value","passwordInput","queryByText","not","loginMock","success","mockImplementation","Promise","resolve","setTimeout","toBeDisabled","mockRejectedValue","Error","toggleButton","toHaveAttribute","keyDown","key","code","resetButton","toHaveValue","focus","toHaveFocus","Object","defineProperty","window","writable","configurable","container","getByTestId","toHaveClass","consoleSpy","spyOn","console","stringContaining","mockRestore","maliciousInput"],"mappings":"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"}
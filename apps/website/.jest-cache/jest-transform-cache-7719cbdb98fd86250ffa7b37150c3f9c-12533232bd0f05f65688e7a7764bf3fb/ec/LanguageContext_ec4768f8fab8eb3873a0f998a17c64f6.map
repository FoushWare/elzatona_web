{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/LanguageContext.tsx"],"sourcesContent":["'use client';\n\nimport React, {\n  useState,\n  useEffect,\n  ReactNode,\n  createContext,\n  useContext,\n} from 'react';\n\n// Only create Supabase client if environment variables are available\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet supabase: any = null;\nif (\n  process.env['NEXT_PUBLIC_SUPABASE_URL'] &&\n  process.env['SUPABASE_SERVICE_ROLE_KEY']\n) {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { createClient } = require('@supabase/supabase-js');\n  const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];\n  const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];\n  supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n}\n\ntype Language = 'en' | 'ar';\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (language: Language) => void;\n  isRTL: boolean;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(\n  undefined\n);\n\nexport const useLanguage = () => {\n  const context = useContext(LanguageContext);\n  if (context === undefined) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n};\n\ninterface LanguageProviderProps {\n  children: React.ReactNode;\n}\n\nexport const LanguageProvider: React.FC<LanguageProviderProps> = ({\n  children,\n}) => {\n  const [language, setLanguageState] = useState<Language>('en');\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load language from localStorage on mount\n  useEffect(() => {\n    const savedLanguage = localStorage.getItem('language') as Language;\n    if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'ar')) {\n      setLanguageState(savedLanguage);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save language to localStorage when it changes\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem('language', language);\n\n      // Update document direction and language\n      document.documentElement.lang = language;\n    }\n  }, [language, isLoaded]);\n\n  const setLanguage = (newLanguage: Language) => {\n    setLanguageState(newLanguage);\n  };\n\n  const isRTL = language === 'ar';\n\n  const value = {\n    language,\n    setLanguage,\n    isRTL,\n  };\n\n  return (\n    <LanguageContext.Provider value={value}>\n      {children}\n    </LanguageContext.Provider>\n  );\n};\n"],"names":["LanguageProvider","useLanguage","supabase","process","env","createClient","require","supabaseUrl","supabaseServiceRoleKey","LanguageContext","createContext","undefined","context","useContext","Error","children","language","setLanguageState","useState","isLoaded","setIsLoaded","useEffect","savedLanguage","localStorage","getItem","setItem","document","documentElement","lang","setLanguage","newLanguage","isRTL","value","Provider"],"mappings":"AAAA;;;;;;;;;;;;QAgDaA;eAAAA;;QAZAC;eAAAA;;;;+DA5BN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEP,qEAAqE;AACrE,8DAA8D;AAC9D,IAAIC,WAAgB;AACpB,IACEC,QAAQC,GAAG,CAAC,2BAA2B,IACvCD,QAAQC,GAAG,CAAC,4BAA4B,EACxC;IACA,iEAAiE;IACjE,MAAM,EAAEC,YAAY,EAAE,GAAGC,QAAQ;IACjC,MAAMC,cAAcJ,QAAQC,GAAG,CAAC,2BAA2B;IAC3D,MAAMI,yBAAyBL,QAAQC,GAAG,CAAC,4BAA4B;IACvEF,WAAWG,aAAaE,aAAaC;AACvC;AAUA,MAAMC,gCAAkBC,IAAAA,oBAAa,EACnCC;AAGK,MAAMV,cAAc;IACzB,MAAMW,UAAUC,IAAAA,iBAAU,EAACJ;IAC3B,IAAIG,YAAYD,WAAW;QACzB,MAAM,IAAIG,MAAM;IAClB;IACA,OAAOF;AACT;AAMO,MAAMZ,mBAAoD,CAAC,EAChEe,QAAQ,EACT;IACC,MAAM,CAACC,UAAUC,iBAAiB,GAAGC,IAAAA,eAAQ,EAAW;IACxD,MAAM,CAACC,UAAUC,YAAY,GAAGF,IAAAA,eAAQ,EAAC;IAEzC,2CAA2C;IAC3CG,IAAAA,gBAAS,EAAC;QACR,MAAMC,gBAAgBC,aAAaC,OAAO,CAAC;QAC3C,IAAIF,iBAAkBA,CAAAA,kBAAkB,QAAQA,kBAAkB,IAAG,GAAI;YACvEL,iBAAiBK;QACnB;QACAF,YAAY;IACd,GAAG,EAAE;IAEL,gDAAgD;IAChDC,IAAAA,gBAAS,EAAC;QACR,IAAIF,UAAU;YACZI,aAAaE,OAAO,CAAC,YAAYT;YAEjC,yCAAyC;YACzCU,SAASC,eAAe,CAACC,IAAI,GAAGZ;QAClC;IACF,GAAG;QAACA;QAAUG;KAAS;IAEvB,MAAMU,cAAc,CAACC;QACnBb,iBAAiBa;IACnB;IAEA,MAAMC,QAAQf,aAAa;IAE3B,MAAMgB,QAAQ;QACZhB;QACAa;QACAE;IACF;IAEA,qBACE,qBAACtB,gBAAgBwB,QAAQ;QAACD,OAAOA;kBAC9BjB;;AAGP"}
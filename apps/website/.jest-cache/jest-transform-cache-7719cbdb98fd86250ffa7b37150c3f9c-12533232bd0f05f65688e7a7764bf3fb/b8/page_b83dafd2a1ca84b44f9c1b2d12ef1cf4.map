{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/content/questions/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\nconst supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from '@elzatona/shared-components';\nimport { Button } from '@elzatona/shared-components';\nimport { Badge } from '@elzatona/shared-components';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@elzatona/shared-components';\nimport { Input } from '@elzatona/shared-components';\nimport {\n  Plus,\n  Edit,\n  Trash2,\n  Loader2,\n  Eye,\n  BookOpen,\n  ChevronLeft,\n  ChevronRight,\n} from 'lucide-react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from '@elzatona/shared-components';\nimport { Label } from '@elzatona/shared-components';\nimport { Textarea } from '@elzatona/shared-components';\nimport { Checkbox } from '@elzatona/shared-components';\nimport { UnifiedQuestion } from '@elzatona/shared-types';\n\ntype Question = UnifiedQuestion;\n\nexport default function AdminContentQuestionsPage() {\n  // Local state for pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Data state\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [totalCount, setTotalCount] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Calculate total pages\n  const totalPages = Math.ceil(totalCount / pageSize);\n\n  // Additional data for forms (cards)\n  const [cardsData, setCardsData] = useState<any>(null);\n\n  // Modal states\n  const [selectedQuestion, setSelectedQuestion] = useState<Question | null>(\n    null\n  );\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n\n  // Fetch questions\n  useEffect(() => {\n    const fetchQuestions = async () => {\n      try {\n        console.log('üîç Fetching questions...', { currentPage, pageSize });\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch(\n          `/api/questions/unified?page=${currentPage}&pageSize=${pageSize}`\n        );\n\n        console.log('üì° Response:', response.status, response.ok);\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const result = await response.json();\n        console.log('üìä Result:', result);\n\n        setQuestions(result.data || []);\n        setTotalCount(result.pagination?.totalCount || 0);\n        setLoading(false);\n        console.log('‚úÖ Questions loaded:', result.data?.length || 0);\n      } catch (err) {\n        console.error('‚ùå Error:', err);\n        setError(err instanceof Error ? err.message : 'Unknown error');\n        setLoading(false);\n      }\n    };\n\n    fetchQuestions();\n  }, [currentPage, pageSize]);\n\n  // Fetch cards data\n  useEffect(() => {\n    const fetchCards = async () => {\n      try {\n        const response = await fetch('/api/cards');\n        if (response.ok) {\n          const data = await response.json();\n          setCardsData(data);\n        }\n      } catch (error) {\n        console.error('Error fetching cards:', error);\n      }\n    };\n    fetchCards();\n  }, []);\n\n  const cards = cardsData?.data || [];\n\n  // Derived data\n  const allCategories = useMemo(() => {\n    if (!questions || !Array.isArray(questions)) {\n      return [];\n    }\n    const categories = [\n      ...new Set(questions.map((q: Question) => q.category).filter(Boolean)),\n    ] as string[];\n    return categories.sort();\n  }, [questions]);\n\n  const allTypes = useMemo(() => {\n    if (!questions || !Array.isArray(questions)) {\n      return [];\n    }\n    const types = [\n      ...new Set(questions.map((q: Question) => q.type).filter(Boolean)),\n    ] as string[];\n    return types.sort();\n  }, [questions]);\n\n  // Questions list - now managed by AdvancedSearch component\n  const displayQuestions = questions;\n\n  // Close modals\n  const closeModals = () => {\n    setIsViewModalOpen(false);\n    setIsEditModalOpen(false);\n    setIsCreateModalOpen(false);\n    setSelectedQuestion(null);\n  };\n\n  // Handlers for CRUD operations\n  const handleCreateQuestion = async (newQuestion: Partial<Question>) => {\n    try {\n      const response = await fetch('/api/questions/unified', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(newQuestion),\n      });\n\n      if (response.ok) {\n        alert('Question created successfully');\n        closeModals();\n        window.location.reload();\n      } else {\n        throw new Error('Failed to create question');\n      }\n    } catch (error) {\n      console.error('Error creating question:', error);\n      alert('Error creating question');\n    }\n  };\n\n  const handleUpdateQuestion = async (\n    updatedQuestion: Partial<UnifiedQuestion>\n  ) => {\n    try {\n      if (!updatedQuestion.id) {\n        throw new Error('Question ID is required for update');\n      }\n\n      const response = await fetch(\n        `/api/questions/unified/${updatedQuestion.id}`,\n        {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(updatedQuestion),\n        }\n      );\n\n      if (response.ok) {\n        alert('Question updated successfully');\n        closeModals();\n        window.location.reload();\n      } else {\n        throw new Error('Failed to update question');\n      }\n    } catch (error) {\n      console.error('Error updating question:', error);\n      alert('Error updating question');\n    }\n  };\n\n  const handleDeleteQuestion = async (id: string) => {\n    if (confirm('Are you sure you want to delete this question?')) {\n      try {\n        const response = await fetch(`/api/questions/unified/${id}`, {\n          method: 'DELETE',\n        });\n\n        if (response.ok) {\n          alert('Question deleted successfully');\n          window.location.reload();\n        } else {\n          throw new Error('Failed to delete question');\n        }\n      } catch (error) {\n        console.error('Error deleting question:', error);\n        alert('Error deleting question');\n      }\n    }\n  };\n\n  const openViewModal = (question: Question) => {\n    setSelectedQuestion(question);\n    setIsViewModalOpen(true);\n  };\n\n  const openEditModal = (question: Question) => {\n    setSelectedQuestion(question);\n    setIsEditModalOpen(true);\n  };\n\n  const getCardTitleById = (card_id: string) => {\n    return cards.find((card: any) => card.id === card_id)?.title || 'N/A';\n  };\n\n  if (loading) {\n    return (\n      <div className='min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800'>\n        <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8'>\n          <h1 className='text-4xl font-bold text-gray-900 dark:text-white mb-8'>\n            Question Management\n          </h1>\n          <div className='flex items-center justify-center h-64'>\n            <div className='text-center'>\n              <Loader2 className='w-8 h-8 animate-spin mx-auto mb-4 text-blue-600' />\n              <p className='text-gray-600 dark:text-gray-400'>\n                Loading questions...\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className='min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800'>\n        <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8'>\n          <h1 className='text-4xl font-bold text-gray-900 dark:text-white mb-8'>\n            Question Management\n          </h1>\n          <div className='flex items-center justify-center h-64'>\n            <div className='text-center p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-lg'>\n              <p className='font-semibold mb-2'>Error loading questions:</p>\n              <p>{error}</p>\n              <Button onClick={() => window.location.reload()} className='mt-4'>\n                Retry\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800'>\n      <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8'>\n        <h1 className='text-4xl font-bold text-gray-900 dark:text-white mb-8'>\n          Question Management\n        </h1>\n\n        {/* Stats Cards */}\n        <div className='grid grid-cols-1 md:grid-cols-4 gap-6 mb-8'>\n          <Card className='hover:shadow-lg transition-shadow duration-300'>\n            <CardContent className='p-6 flex items-center space-x-4'>\n              <div className='w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center'>\n                <span className='text-blue-600 dark:text-blue-400 font-bold'>\n                  Q\n                </span>\n              </div>\n              <div>\n                <p className='text-sm font-medium text-gray-500 dark:text-gray-400'>\n                  Total Questions\n                </p>\n                <p className='text-2xl font-bold text-gray-900 dark:text-white'>\n                  {totalCount}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className='hover:shadow-lg transition-shadow duration-300'>\n            <CardContent className='p-6 flex items-center space-x-4'>\n              <div className='w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center'>\n                <span className='text-green-600 dark:text-green-400 font-bold'>\n                  C\n                </span>\n              </div>\n              <div>\n                <p className='text-sm font-medium text-gray-500 dark:text-gray-400'>\n                  Categories\n                </p>\n                <p className='text-2xl font-bold text-gray-900 dark:text-white'>\n                  {allCategories.length}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className='hover:shadow-lg transition-shadow duration-300'>\n            <CardContent className='p-6 flex items-center space-x-4'>\n              <div className='w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center'>\n                <span className='text-purple-600 dark:text-purple-400 font-bold'>\n                  A\n                </span>\n              </div>\n              <div>\n                <p className='text-sm font-medium text-gray-500 dark:text-gray-400'>\n                  Active Questions\n                </p>\n                <p className='text-2xl font-bold text-gray-900 dark:text-white'>\n                  {questions.filter(q => q.is_active).length}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className='hover:shadow-lg transition-shadow duration-300'>\n            <CardContent className='p-6 flex items-center space-x-4'>\n              <div className='w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center'>\n                <span className='text-orange-600 dark:text-orange-400 font-bold'>\n                  F\n                </span>\n              </div>\n              <div>\n                <p className='text-sm font-medium text-gray-500 dark:text-gray-400'>\n                  Filtered Results\n                </p>\n                <p className='text-2xl font-bold text-gray-900 dark:text-white'>\n                  {displayQuestions.length}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Simple Search */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Search Questions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className='flex space-x-2'>\n              <Input\n                placeholder='Search questions by title, content, tags...'\n                value={searchTerm}\n                onChange={e => setSearchTerm(e.target.value)}\n                className='flex-1'\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Questions List */}\n        <Card>\n          <CardHeader>\n            <CardTitle className='flex items-center justify-between'>\n              <span>Questions ({displayQuestions.length})</span>\n              <Button\n                className='flex items-center space-x-2'\n                onClick={() => setIsCreateModalOpen(true)}\n              >\n                <Plus className='w-4 h-4' />\n                Add New Question\n              </Button>\n            </CardTitle>\n          </CardHeader>\n\n          {/* Pagination Before Questions List */}\n          {totalPages > 1 && (\n            <div className='px-6 pb-4 border-b border-gray-200 dark:border-gray-700'>\n              <div className='flex items-center justify-between'>\n                <div className='text-sm text-gray-700 dark:text-gray-300'>\n                  Showing{' '}\n                  {Math.min((currentPage - 1) * pageSize + 1, totalCount)} to{' '}\n                  {Math.min(currentPage * pageSize, totalCount)} of {totalCount}{' '}\n                  questions\n                </div>\n                <div className='flex items-center space-x-4'>\n                  {/* Per Page Select */}\n                  <div className='flex items-center space-x-2'>\n                    <span className='text-sm text-gray-600 dark:text-gray-400'>\n                      Show:\n                    </span>\n                    <Select\n                      value={pageSize.toString()}\n                      onValueChange={value => setPageSize(parseInt(value))}\n                    >\n                      <SelectTrigger className='w-20'>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value='5'>5</SelectItem>\n                        <SelectItem value='10'>10</SelectItem>\n                        <SelectItem value='20'>20</SelectItem>\n                        <SelectItem value='50'>50</SelectItem>\n                        <SelectItem value='100'>100</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Navigation Buttons */}\n                  <div className='flex items-center space-x-2'>\n                    <Button\n                      variant='outline'\n                      size='sm'\n                      onClick={() => setCurrentPage(currentPage - 1)}\n                      disabled={currentPage === 1}\n                    >\n                      <ChevronLeft className='h-4 w-4' />\n                    </Button>\n                    <span className='text-sm text-gray-600 dark:text-gray-400'>\n                      Page {currentPage} of {totalPages}\n                    </span>\n                    <Button\n                      variant='outline'\n                      size='sm'\n                      onClick={() => setCurrentPage(currentPage + 1)}\n                      disabled={currentPage >= totalPages}\n                    >\n                      <ChevronRight className='h-4 w-4' />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <CardContent className='p-0'>\n            <div className='overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800'>\n              {displayQuestions.length === 0 ? (\n                <div className='text-center py-12'>\n                  <BookOpen className='w-12 h-12 text-gray-400 mx-auto mb-4' />\n                  <h3 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n                    No questions found\n                  </h3>\n                  <p className='text-gray-600 dark:text-gray-400'>\n                    No questions available\n                  </p>\n                </div>\n              ) : (\n                <div className='space-y-1'>\n                  {displayQuestions.map(question => (\n                    <div\n                      key={question.id}\n                      className='p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors'\n                    >\n                      <div className='flex items-start justify-between'>\n                        <div className='flex-1 pr-4'>\n                          <h4 className='text-lg font-semibold text-gray-900 dark:text-white mb-1'>\n                            {question.title}\n                          </h4>\n                          <p className='text-sm text-gray-600 dark:text-gray-400 line-clamp-2'>\n                            {question.content}\n                          </p>\n                          <div className='mt-2 flex flex-wrap gap-2'>\n                            {/* Topics Badges */}\n                            {(question as any).topics &&\n                            (question as any).topics.length > 0 ? (\n                              (question as any).topics.map(\n                                (topic: any, index: number) => (\n                                  <Badge\n                                    key={`${question.id}-topic-${index}`}\n                                    variant={\n                                      topic.is_primary ? 'default' : 'outline'\n                                    }\n                                    className={`${\n                                      topic.is_primary\n                                        ? 'bg-purple-600 text-white'\n                                        : 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'\n                                    }`}\n                                  >\n                                    {topic.is_primary && '‚≠ê '}Topic:{' '}\n                                    {topic.name}\n                                  </Badge>\n                                )\n                              )\n                            ) : (\n                              <Badge\n                                variant='outline'\n                                className='bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                              >\n                                Topic: No Topic\n                              </Badge>\n                            )}\n\n                            {/* Categories Badges */}\n                            {(question as any).categories &&\n                            (question as any).categories.length > 0 ? (\n                              (question as any).categories.map(\n                                (category: any, index: number) => (\n                                  <Badge\n                                    key={`${question.id}-category-${index}`}\n                                    variant={\n                                      category.is_primary\n                                        ? 'default'\n                                        : 'secondary'\n                                    }\n                                    className={`${\n                                      category.is_primary\n                                        ? 'bg-green-600 text-white'\n                                        : 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                                    }`}\n                                  >\n                                    {category.is_primary && '‚≠ê '}Category:{' '}\n                                    {category.name}\n                                  </Badge>\n                                )\n                              )\n                            ) : (\n                              <Badge\n                                variant='outline'\n                                className='bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                              >\n                                Category: No Category\n                              </Badge>\n                            )}\n\n                            {/* Card Badge */}\n                            {(question as any).learning_card ? (\n                              <Badge\n                                variant='secondary'\n                                className='bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                              >\n                                Card: {(question as any).learning_card.title}\n                              </Badge>\n                            ) : (\n                              <Badge\n                                variant='outline'\n                                className='bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                              >\n                                Card: No Card\n                              </Badge>\n                            )}\n\n                            {/* Difficulty Badge */}\n                            {question.difficulty && (\n                              <Badge\n                                variant={\n                                  question.difficulty === 'beginner'\n                                    ? 'default'\n                                    : question.difficulty === 'intermediate'\n                                      ? 'outline'\n                                      : 'destructive'\n                                }\n                              >\n                                {question.difficulty}\n                              </Badge>\n                            )}\n\n                            {/* Type Badge */}\n                            {question.type && (\n                              <Badge variant='outline'>{question.type}</Badge>\n                            )}\n                          </div>\n                        </div>\n                        <div className='flex space-x-2'>\n                          <Button\n                            variant='outline'\n                            size='sm'\n                            onClick={() => openViewModal(question)}\n                          >\n                            <Eye className='w-4 h-4' />\n                          </Button>\n                          <Button\n                            variant='outline'\n                            size='sm'\n                            onClick={() => openEditModal(question)}\n                          >\n                            <Edit className='w-4 h-4' />\n                          </Button>\n                          <Button\n                            variant='destructive'\n                            size='sm'\n                            onClick={() => handleDeleteQuestion(question.id)}\n                          >\n                            <Trash2 className='w-4 h-4' />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Pagination */}\n        {totalCount > pageSize && (\n          <div className='flex items-center justify-between mt-6'>\n            <div className='text-sm text-gray-700 dark:text-gray-300'>\n              Showing {Math.min((currentPage - 1) * pageSize + 1, totalCount)}{' '}\n              to {Math.min(currentPage * pageSize, totalCount)} of {totalCount}{' '}\n              questions\n            </div>\n            <div className='flex items-center space-x-2'>\n              <Button\n                variant='outline'\n                size='sm'\n                onClick={() => setCurrentPage(currentPage - 1)}\n                disabled={currentPage === 1}\n              >\n                <ChevronLeft className='h-4 w-4' />\n              </Button>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>\n                Page {currentPage} of {totalPages}\n              </span>\n              <Button\n                variant='outline'\n                size='sm'\n                onClick={() => setCurrentPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                <ChevronRight className='h-4 w-4' />\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* View Question Modal */}\n      <Dialog open={isViewModalOpen} onOpenChange={setIsViewModalOpen}>\n        <DialogContent className='max-w-2xl'>\n          <DialogHeader>\n            <DialogTitle>Question Details</DialogTitle>\n          </DialogHeader>\n          {selectedQuestion && (\n            <div className='space-y-4'>\n              <div>\n                <Label className='text-sm font-medium'>Title</Label>\n                <p className='text-sm text-gray-600 dark:text-gray-400'>\n                  {selectedQuestion.title}\n                </p>\n              </div>\n              <div>\n                <Label className='text-sm font-medium'>Content</Label>\n                <p className='text-sm text-gray-600 dark:text-gray-400'>\n                  {selectedQuestion.content}\n                </p>\n              </div>\n              <div>\n                <Label className='text-sm font-medium'>Answer</Label>\n                <p className='text-sm text-gray-600 dark:text-gray-400'>\n                  {selectedQuestion.answer || 'No answer provided'}\n                </p>\n              </div>\n              <div className='flex flex-wrap gap-2'>\n                {selectedQuestion.category && (\n                  <Badge variant='secondary'>{selectedQuestion.category}</Badge>\n                )}\n                {selectedQuestion.difficulty && (\n                  <Badge variant='outline'>{selectedQuestion.difficulty}</Badge>\n                )}\n                {selectedQuestion.type && (\n                  <Badge variant='outline'>{selectedQuestion.type}</Badge>\n                )}\n              </div>\n            </div>\n          )}\n          <DialogFooter>\n            <Button variant='outline' onClick={() => setIsViewModalOpen(false)}>\n              Close\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Question Modal */}\n      <Dialog open={isEditModalOpen} onOpenChange={setIsEditModalOpen}>\n        <DialogContent className='max-w-2xl'>\n          <DialogHeader>\n            <DialogTitle>Edit Question</DialogTitle>\n          </DialogHeader>\n          {selectedQuestion && (\n            <QuestionForm\n              initialData={selectedQuestion}\n              onSubmit={handleUpdateQuestion}\n              onCancel={() => setIsEditModalOpen(false)}\n              cards={cards}\n              allCategories={allCategories}\n              allTags={[]}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Create Question Modal */}\n      <Dialog open={isCreateModalOpen} onOpenChange={setIsCreateModalOpen}>\n        <DialogContent className='max-w-2xl'>\n          <DialogHeader>\n            <DialogTitle>Create New Question</DialogTitle>\n          </DialogHeader>\n          <QuestionForm\n            onSubmit={handleCreateQuestion}\n            onCancel={() => setIsCreateModalOpen(false)}\n            cards={cards}\n            allCategories={allCategories}\n            allTags={[]}\n          />\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\ninterface QuestionFormProps {\n  initialData?: Question | undefined;\n  onSubmit: (question: Partial<Question>) => void;\n  onCancel: () => void;\n  cards: any[];\n  allCategories: string[];\n  allTags: string[];\n}\n\nconst QuestionForm: React.FC<QuestionFormProps> = ({\n  initialData,\n  onSubmit,\n  onCancel,\n  cards,\n  allCategories,\n  allTags,\n}) => {\n  const [formData, setFormData] = useState<Partial<Question>>(\n    initialData || {\n      title: '',\n      content: '',\n      type: 'multiple-choice',\n      difficulty: 'beginner',\n      is_active: true,\n      options: [],\n      sampleAnswers: [],\n      tags: [],\n      points: 1,\n      timeLimit: 60,\n    }\n  );\n\n  useEffect(() => {\n    if (initialData) {\n      setFormData({\n        ...initialData,\n        options: initialData.options || [],\n        sampleAnswers: initialData.sampleAnswers || [],\n        tags: initialData.tags || [],\n      });\n    }\n  }, [initialData]);\n\n  const handleChange = (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => {\n    const { name, value, type, checked } = e.target as HTMLInputElement;\n    setFormData((prev: any) => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n  };\n\n  const handleSelectChange = (name: keyof Question, value: string) => {\n    setFormData((prev: any) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  const questionTypes = ['multiple-choice', 'open-ended', 'true-false', 'code'];\n  const difficulties = ['beginner', 'intermediate', 'advanced'];\n\n  return (\n    <form onSubmit={handleSubmit} className='space-y-6 p-4'>\n      <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\n        <div>\n          <Label htmlFor='title'>Title</Label>\n          <Input\n            id='title'\n            name='title'\n            value={formData.title || ''}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div>\n          <Label htmlFor='type'>Type</Label>\n          <Select\n            value={formData.type || 'multiple-choice'}\n            onValueChange={value => handleSelectChange('type', value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder='Select Type' />\n            </SelectTrigger>\n            <SelectContent>\n              {questionTypes.map(type => (\n                <SelectItem key={type} value={type}>\n                  {type.charAt(0).toUpperCase() +\n                    type.slice(1).replace('-', ' ')}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor='category'>Category</Label>\n          <Select\n            value={formData.category || ''}\n            onValueChange={value => handleSelectChange('category', value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder='Select Category' />\n            </SelectTrigger>\n            <SelectContent>\n              {allCategories.map(category => (\n                <SelectItem key={category} value={category}>\n                  {category}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor='difficulty'>Difficulty</Label>\n          <Select\n            value={formData.difficulty || 'beginner'}\n            onValueChange={value => handleSelectChange('difficulty', value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder='Select Difficulty' />\n            </SelectTrigger>\n            <SelectContent>\n              {difficulties.map(difficulty => (\n                <SelectItem key={difficulty} value={difficulty}>\n                  {difficulty.charAt(0).toUpperCase() + difficulty.slice(1)}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor='learningCardId'>Learning Card</Label>\n          <Select\n            value={formData.learningCardId || ''}\n            onValueChange={value => handleSelectChange('learningCardId', value)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder='Select Learning Card' />\n            </SelectTrigger>\n            <SelectContent>\n              {cards.map(card => (\n                <SelectItem key={card.id} value={card.id}>\n                  {card.title}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor='points'>Points</Label>\n          <Input\n            id='points'\n            name='points'\n            type='number'\n            value={formData.points || 1}\n            onChange={handleChange}\n          />\n        </div>\n      </div>\n\n      <div>\n        <Label htmlFor='content'>Content</Label>\n        <Textarea\n          id='content'\n          name='content'\n          value={formData.content || ''}\n          onChange={handleChange}\n          rows={5}\n          required\n        />\n      </div>\n\n      <div>\n        <Label htmlFor='answer'>Answer</Label>\n        <Textarea\n          id='answer'\n          name='answer'\n          value={formData.answer || ''}\n          onChange={handleChange}\n          rows={3}\n        />\n      </div>\n\n      <div className='flex items-center space-x-2'>\n        <Checkbox\n          id='isActive'\n          name='isActive'\n          checked={formData.is_active || false}\n          onCheckedChange={checked =>\n            setFormData((prev: any) => ({ ...prev, is_active: !!checked }))\n          }\n        />\n        <Label htmlFor='isActive'>Is Active</Label>\n      </div>\n\n      <DialogFooter>\n        <Button variant='outline' onClick={onCancel}>\n          Cancel\n        </Button>\n        <Button type='submit'>\n          {initialData ? 'Save Changes' : 'Create Question'}\n        </Button>\n      </DialogFooter>\n    </form>\n  );\n};\n"],"names":["AdminContentQuestionsPage","supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseServiceRoleKey","SUPABASE_SERVICE_ROLE_KEY","supabase","createClient","currentPage","setCurrentPage","useState","pageSize","setPageSize","searchTerm","setSearchTerm","questions","setQuestions","totalCount","setTotalCount","loading","setLoading","error","setError","totalPages","Math","ceil","cardsData","setCardsData","selectedQuestion","setSelectedQuestion","isViewModalOpen","setIsViewModalOpen","isEditModalOpen","setIsEditModalOpen","isCreateModalOpen","setIsCreateModalOpen","useEffect","fetchQuestions","console","log","response","fetch","status","ok","Error","result","json","data","pagination","length","err","message","fetchCards","cards","allCategories","useMemo","Array","isArray","categories","Set","map","q","category","filter","Boolean","sort","allTypes","types","type","displayQuestions","closeModals","handleCreateQuestion","newQuestion","method","headers","body","JSON","stringify","alert","window","location","reload","handleUpdateQuestion","updatedQuestion","id","handleDeleteQuestion","confirm","openViewModal","question","openEditModal","getCardTitleById","card_id","find","card","title","div","className","h1","Loader2","p","Button","onClick","Card","CardContent","span","is_active","CardHeader","CardTitle","Input","placeholder","value","onChange","e","target","Plus","min","Select","toString","onValueChange","parseInt","SelectTrigger","SelectValue","SelectContent","SelectItem","variant","size","disabled","ChevronLeft","ChevronRight","BookOpen","h3","h4","content","topics","topic","index","Badge","is_primary","name","learning_card","difficulty","Eye","Edit","Trash2","Dialog","open","onOpenChange","DialogContent","DialogHeader","DialogTitle","Label","answer","DialogFooter","QuestionForm","initialData","onSubmit","onCancel","allTags","formData","setFormData","options","sampleAnswers","tags","points","timeLimit","handleChange","checked","prev","handleSelectChange","handleSubmit","preventDefault","questionTypes","difficulties","form","htmlFor","required","charAt","toUpperCase","slice","replace","learningCardId","Textarea","rows","Checkbox","onCheckedChange"],"mappings":"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"}
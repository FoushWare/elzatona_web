{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/[id]/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\nconst supabase = createClient(supabaseUrl, supabaseServiceRoleKey);\n\n// GET /api/cards/[id] - Get a single card by ID\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n    const { data: cardSnap, error } = await supabase\n      .from('learning_cards')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error || !cardSnap) {\n      return NextResponse.json(\n        { success: false, error: 'Card not found' },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json({\n      success: true,\n      data: { id: cardSnap.id, ...cardSnap },\n    });\n  } catch (error) {\n    console.error('Error fetching card:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch card' },\n      { status: 500 }\n    );\n  }\n}\n\n// PUT /api/cards/[id] - Update a card\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n    const updateData = await request.json();\n\n    const { error } = await supabase\n      .from('learning_cards')\n      .update({ ...updateData, updated_at: new Date().toISOString() })\n      .eq('id', id);\n\n    if (error) {\n      throw error;\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: 'Card updated successfully',\n    });\n  } catch (error) {\n    console.error('Error updating card:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to update card' },\n      { status: 500 }\n    );\n  }\n}\n\n// DELETE /api/cards/[id] - Delete a card\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n\n    const { error } = await supabase\n      .from('learning_cards')\n      .delete()\n      .eq('id', id);\n\n    if (error) {\n      throw error;\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: 'Card deleted successfully',\n    });\n  } catch (error) {\n    console.error('Error deleting card:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to delete card' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":["DELETE","GET","PUT","supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseServiceRoleKey","SUPABASE_SERVICE_ROLE_KEY","supabase","createClient","request","params","id","data","cardSnap","error","from","select","eq","single","NextResponse","json","success","status","console","updateData","update","updated_at","Date","toISOString","message","delete"],"mappings":";;;;;;;;;;;QAwEsBA;eAAAA;;QAhEAC;eAAAA;;QAiCAC;eAAAA;;;wBAzCoB;4BACb;AAE7B,MAAMC,cAAcC,QAAQC,GAAG,CAACC,wBAAwB;AACxD,MAAMC,yBAAyBH,QAAQC,GAAG,CAACG,yBAAyB;AACpE,MAAMC,WAAWC,IAAAA,wBAAY,EAACP,aAAaI;AAGpC,eAAeN,IACpBU,OAAoB,EACpB,EAAEC,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAEC,EAAE,EAAE,GAAG,MAAMD;QACrB,MAAM,EAAEE,MAAMC,QAAQ,EAAEC,KAAK,EAAE,GAAG,MAAMP,SACrCQ,IAAI,CAAC,kBACLC,MAAM,CAAC,KACPC,EAAE,CAAC,MAAMN,IACTO,MAAM;QAET,IAAIJ,SAAS,CAACD,UAAU;YACtB,OAAOM,oBAAY,CAACC,IAAI,CACtB;gBAAEC,SAAS;gBAAOP,OAAO;YAAiB,GAC1C;gBAAEQ,QAAQ;YAAI;QAElB;QAEA,OAAOH,oBAAY,CAACC,IAAI,CAAC;YACvBC,SAAS;YACTT,MAAM;gBAAED,IAAIE,SAASF,EAAE;gBAAE,GAAGE,QAAQ;YAAC;QACvC;IACF,EAAE,OAAOC,OAAO;QACdS,QAAQT,KAAK,CAAC,wBAAwBA;QACtC,OAAOK,oBAAY,CAACC,IAAI,CACtB;YAAEC,SAAS;YAAOP,OAAO;QAAuB,GAChD;YAAEQ,QAAQ;QAAI;IAElB;AACF;AAGO,eAAetB,IACpBS,OAAoB,EACpB,EAAEC,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAEC,EAAE,EAAE,GAAG,MAAMD;QACrB,MAAMc,aAAa,MAAMf,QAAQW,IAAI;QAErC,MAAM,EAAEN,KAAK,EAAE,GAAG,MAAMP,SACrBQ,IAAI,CAAC,kBACLU,MAAM,CAAC;YAAE,GAAGD,UAAU;YAAEE,YAAY,IAAIC,OAAOC,WAAW;QAAG,GAC7DX,EAAE,CAAC,MAAMN;QAEZ,IAAIG,OAAO;YACT,MAAMA;QACR;QAEA,OAAOK,oBAAY,CAACC,IAAI,CAAC;YACvBC,SAAS;YACTQ,SAAS;QACX;IACF,EAAE,OAAOf,OAAO;QACdS,QAAQT,KAAK,CAAC,wBAAwBA;QACtC,OAAOK,oBAAY,CAACC,IAAI,CACtB;YAAEC,SAAS;YAAOP,OAAO;QAAwB,GACjD;YAAEQ,QAAQ;QAAI;IAElB;AACF;AAGO,eAAexB,OACpBW,OAAoB,EACpB,EAAEC,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAEC,EAAE,EAAE,GAAG,MAAMD;QAErB,MAAM,EAAEI,KAAK,EAAE,GAAG,MAAMP,SACrBQ,IAAI,CAAC,kBACLe,MAAM,GACNb,EAAE,CAAC,MAAMN;QAEZ,IAAIG,OAAO;YACT,MAAMA;QACR;QAEA,OAAOK,oBAAY,CAACC,IAAI,CAAC;YACvBC,SAAS;YACTQ,SAAS;QACX;IACF,EAAE,OAAOf,OAAO;QACdS,QAAQT,KAAK,CAAC,wBAAwBA;QACtC,OAAOK,oBAAY,CAACC,IAAI,CACtB;YAAEC,SAAS;YAAOP,OAAO;QAAwB,GACjD;YAAEQ,QAAQ;QAAI;IAElB;AACF"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/my-plans/page.test.tsx"],"sourcesContent":["/**\n * Unit Tests for My Plans Page (F-UT-006, F-UT-007)\n * Task: F-002 - My Plans Page\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport MyPlansPage from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useAuth: jest.fn(),\n  };\n});\n\nconst mockPush = jest.fn();\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: mockPush,\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n}));\n\nStorage.prototype.getItem = jest.fn(() => JSON.stringify([]));\nStorage.prototype.setItem = jest.fn();\n\njest.mock('lucide-react', () => ({\n  BookOpen: () => <span>üìñ</span>,\n  Plus: () => <span>+</span>,\n  Play: () => <span>‚ñ∂Ô∏è</span>,\n  Edit: () => <span>‚úèÔ∏è</span>,\n  Trash2: () => <span>üóëÔ∏è</span>,\n  CheckCircle: () => <span>‚úÖ</span>,\n  Clock: () => <span>‚è∞</span>,\n  Target: () => <span>üéØ</span>,\n  Loader2: () => <span>‚è≥</span>,\n}));\n\ndescribe('F-UT-006: Component Renders', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1', email: 'user@example.com' },\n      isLoading: false,\n    });\n  });\n\n  it('should render without errors', async () => {\n    const { container } = render(<MyPlansPage />);\n    await waitFor(() => {\n      expect(container).toBeInTheDocument();\n    });\n  });\n\n  it('should display page title', async () => {\n    render(<MyPlansPage />);\n    await waitFor(() => {\n      expect(screen.getByText(/My Learning Plans/i)).toBeInTheDocument();\n    });\n  });\n});\n\ndescribe('F-UT-007: Plan Management', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => JSON.stringify([\n      {\n        id: '1',\n        name: 'Test Plan',\n        description: 'Test Description',\n        duration: 30,\n        totalQuestions: 100,\n        dailyQuestions: 5,\n        created_at: new Date().toISOString(),\n      },\n    ]));\n  });\n\n  it('should load plans from localStorage', async () => {\n    render(<MyPlansPage />);\n    await waitFor(() => {\n      expect(Storage.prototype.getItem).toHaveBeenCalledWith('userPlans');\n    });\n  });\n\n  it('should display Create New Plan button', async () => {\n    render(<MyPlansPage />);\n    await waitFor(() => {\n      expect(screen.getByText(/Create New Plan/i)).toBeInTheDocument();\n    });\n  });\n});\n\ndescribe('F-UT-SNAPSHOT: My Plans Page Snapshot Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => JSON.stringify([]));\n  });\n\n  it('should match my plans page snapshot (empty state)', async () => {\n    const { container } = render(<MyPlansPage />);\n    await waitFor(() => {\n      expect(container.firstChild).toMatchSnapshot();\n    });\n  });\n\n  it('should match my plans page snapshot (with plans)', async () => {\n    Storage.prototype.getItem = jest.fn(() => JSON.stringify([\n      { id: '1', name: 'Test Plan 1' },\n      { id: '2', name: 'Test Plan 2' },\n    ]));\n    \n    const { container } = render(<MyPlansPage />);\n    await waitFor(() => {\n      expect(container.firstChild).toMatchSnapshot();\n    });\n  });\n});\n"],"names":["jest","mock","actual","requireActual","useAuth","fn","useRouter","push","mockPush","replace","prefetch","BookOpen","span","Plus","Play","Edit","Trash2","CheckCircle","Clock","Target","Loader2","Storage","prototype","getItem","JSON","stringify","setItem","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","isAuthenticated","user","id","email","isLoading","it","container","render","MyPlansPage","waitFor","expect","toBeInTheDocument","screen","getByText","name","description","duration","totalQuestions","dailyQuestions","created_at","Date","toISOString","toHaveBeenCalledWith","firstChild","toMatchSnapshot"],"mappings":"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"}
8fb1cff6558d4554a17be2e81ce1b282
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get GET () {
        return GET;
    },
    get POST () {
        return POST;
    }
});
const _server = require("next/server");
const _supabaseserver = require("../../../lib/supabase-server");
async function GET(request) {
    try {
        const { searchParams } = new URL(request.url);
        const cardType = searchParams.get('cardType');
        const category = searchParams.get('category');
        const categories = searchParams.getAll('categories'); // Support multiple categories
        const topic = searchParams.get('topic');
        const subtopic = searchParams.get('subtopic'); // Support subtopic slug
        const difficulty = searchParams.get('difficulty');
        const type = searchParams.get('type');
        const limit = searchParams.get('limit');
        // Validate topic is a UUID, or resolve subtopic slug to topic ID
        let topicId = undefined;
        // Check if topic is a valid UUID format
        const isValidUUID = (str)=>{
            const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
            return uuidRegex.test(str);
        };
        if (topic && isValidUUID(topic)) {
            topicId = topic;
        } else if (subtopic || topic && !isValidUUID(topic)) {
            // Resolve topic/subtopic slug to topic ID
            try {
                const { data: topics, error: topicsError } = await _supabaseserver.supabaseOperations.getTopics({
                    isActive: true
                });
                if (!topicsError && topics) {
                    const slugToFind = subtopic || topic || '';
                    const slugLower = slugToFind.toLowerCase();
                    console.log(`ðŸ” API: Searching for topic/subtopic "${slugToFind}"`);
                    // Normalize slug for better matching (remove plural 's', handle common variations)
                    const normalizeForMatch = (str)=>{
                        return str.toLowerCase().replace(/s$/, '') // Remove trailing 's' for plural matching
                        .replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
                    };
                    const slugNormalized = normalizeForMatch(slugLower);
                    // Try multiple matching strategies
                    const matchingTopic = topics.find((t)=>{
                        const topicSlug = t.slug?.toLowerCase() || '';
                        const topicName = t.name?.toLowerCase() || '';
                        const topicNameSlug = topicName.replace(/\s+/g, '-');
                        const topicSlugNormalized = normalizeForMatch(topicSlug);
                        const topicNameNormalized = normalizeForMatch(topicName);
                        // Exact matches
                        if (topicSlug === slugLower || topicNameSlug === slugLower || t.id?.toLowerCase() === slugLower) {
                            return true;
                        }
                        // Check if slug contains the subtopic (e.g., "js-scope-closure" contains "closure")
                        if (topicSlug.includes(slugLower) || topicSlug.includes(slugNormalized)) {
                            return true;
                        }
                        // Check normalized matching (handles plural/singular)
                        if (topicSlugNormalized.includes(slugNormalized) || slugNormalized.includes(topicSlugNormalized)) {
                            return true;
                        }
                        // Check if the subtopic appears as a word boundary in the slug
                        const escapedSlug = slugLower.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                        const escapedSlugNormalized = slugNormalized.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                        if (new RegExp(`(^|-)${escapedSlug}(-|$)`).test(topicSlug) || new RegExp(`(^|-)${escapedSlugNormalized}(-|$)`).test(topicSlug)) {
                            return true;
                        }
                        // Check name matching
                        if (topicName.includes(slugLower.replace(/-/g, ' ')) || topicNameNormalized.includes(slugNormalized) || slugNormalized.includes(topicNameNormalized)) {
                            return true;
                        }
                        return false;
                    });
                    if (matchingTopic) {
                        topicId = matchingTopic.id;
                        console.log(`âœ… Resolved topic/subtopic "${slugToFind}" to topic: "${matchingTopic.name}" (ID: ${topicId})`);
                    } else {
                        console.warn(`âš ï¸ Could not resolve topic/subtopic "${slugToFind}" to a topic ID`);
                        console.log('Available topics:', topics.slice(0, 10).map((t)=>({
                                id: t.id,
                                name: t.name,
                                slug: t.slug
                            })));
                    }
                }
            } catch (error) {
                console.error('Error resolving topic:', error);
            }
        }
        const filters = {
            topicId: topicId,
            categoryId: categories.length > 0 ? categories : category ? [
                category
            ] : undefined,
            difficulty: difficulty || undefined,
            questionType: type || undefined,
            is_active: true,
            limit: limit ? parseInt(limit, 10) : undefined,
            orderBy: 'created_at',
            orderDirection: 'desc'
        };
        // Log the filters being applied
        console.log('ðŸ” API Questions Route - Applied Filters:', {
            topicId: topicId || 'none',
            categoryId: filters.categoryId || 'none',
            difficulty: filters.difficulty || 'none',
            questionType: filters.questionType || 'none',
            limit: filters.limit || 'none'
        });
        // Get the filtered count (same filters, without limit)
        if (!_supabaseserver.supabase) {
            throw new Error('Supabase client not initialized');
        }
        let countQuery = _supabaseserver.supabase.from('questions').select('*', {
            count: 'exact',
            head: true
        });
        countQuery = countQuery.eq('is_active', true);
        if (filters.categoryId) {
            if (Array.isArray(filters.categoryId)) {
                countQuery = countQuery.in('category_id', filters.categoryId);
            } else {
                countQuery = countQuery.eq('category_id', filters.categoryId);
            }
        }
        if (filters.difficulty) {
            countQuery = countQuery.eq('difficulty', filters.difficulty);
        }
        if (filters.questionType) {
            countQuery = countQuery.eq('question_type', filters.questionType);
        }
        if (filters.topicId) {
            console.log(`ðŸ“Œ Applying topic_id filter: ${filters.topicId}`);
            countQuery = countQuery.eq('topic_id', filters.topicId);
        } else {
            console.log('âš ï¸ No topic_id filter applied');
        }
        const { count: filteredCount } = await countQuery;
        const { data: questions, error } = await _supabaseserver.supabaseOperations.getQuestions(filters);
        if (error) {
            console.error('Supabase error fetching questions:', error);
            throw new Error(error.message || 'Failed to fetch questions from database');
        }
        // Handle null or undefined questions
        if (!questions) {
            console.warn('No questions returned from database');
            return _server.NextResponse.json({
                success: true,
                data: [],
                count: 0,
                totalCount: filteredCount || 0
            });
        }
        // Log the results for debugging
        console.log(`ðŸ“Š Questions fetched: ${questions.length || 0}`);
        if (filters.topicId && questions.length > 0) {
            console.log('Sample question topic_ids:', questions.slice(0, 3).map((q)=>q.topic_id || 'NULL'));
        }
        // Transform data to match expected format
        const transformedQuestions = questions?.map((question)=>{
            try {
                // Try multiple possible field names for question text
                const questionText = question.question_text || question.question || question.title || question.content || question.text || '';
                if (!questionText) {
                    console.warn('Question missing text field:', {
                        id: question.id,
                        availableFields: Object.keys(question)
                    });
                }
                return {
                    id: question.id,
                    question: questionText,
                    question_text: questionText,
                    answer: question.correct_answer,
                    explanation: question.explanation || '',
                    topicId: question.topic_id,
                    categoryId: question.category_id,
                    difficulty: question.difficulty,
                    type: question.question_type,
                    questionType: question.question_type,
                    options: question.options ? typeof question.options === 'string' ? JSON.parse(question.options) : question.options : null,
                    correctAnswer: question.correct_answer,
                    tags: question.tags ? typeof question.tags === 'string' ? JSON.parse(question.tags) : question.tags : [],
                    is_active: question.is_active,
                    created_at: question.created_at ? new Date(question.created_at) : new Date(),
                    updated_at: question.updated_at ? new Date(question.updated_at) : new Date()
                };
            } catch (parseError) {
                console.error('Error parsing question:', question.id, parseError);
                return null;
            }
        }).filter((q)=>q !== null && q.question) || []; // Filter out questions without text
        // Additional filters that aren't handled by Supabase (already filtered by categoryId above)
        const filteredQuestions = transformedQuestions;
        if (cardType && cardType !== 'all') {
        // This would need to be handled by joining with learning_cards table
        // For now, we'll skip this filter
        }
        return _server.NextResponse.json({
            success: true,
            data: filteredQuestions,
            count: filteredCount || filteredQuestions.length,
            totalCount: filteredCount || filteredQuestions.length
        });
    } catch (error) {
        console.error('Error fetching questions:', error);
        const errorMessage = error instanceof Error ? error.message : 'Failed to fetch questions';
        return _server.NextResponse.json({
            success: false,
            error: errorMessage,
            details: error instanceof Error ? error.stack : String(error)
        }, {
            status: 500
        });
    }
}
async function POST(request) {
    try {
        const questionData = await request.json();
        // Transform data to match Supabase schema
        const supabaseQuestionData = {
            question_text: questionData.question,
            explanation: questionData.explanation || '',
            topic_id: questionData.topicId || undefined,
            difficulty: questionData.difficulty || 'easy',
            question_type: questionData.type || questionData.questionType || 'multiple_choice',
            options: questionData.options ? JSON.stringify(questionData.options) : undefined,
            correct_answer: questionData.answer || questionData.correctAnswer || undefined,
            tags: questionData.tags ? JSON.stringify(questionData.tags) : undefined,
            is_active: questionData.isActive !== false
        };
        const { data: newQuestion, error } = await _supabaseserver.supabaseOperations.createQuestion(supabaseQuestionData);
        if (error) {
            throw new Error(error.message);
        }
        // Transform response to match expected format
        const transformedQuestion = {
            id: newQuestion.id,
            question: newQuestion.question_text,
            answer: newQuestion.correct_answer,
            explanation: newQuestion.explanation,
            topicId: newQuestion.topic_id,
            difficulty: newQuestion.difficulty,
            type: newQuestion.question_type,
            questionType: newQuestion.question_type,
            options: newQuestion.options ? JSON.parse(newQuestion.options) : null,
            correctAnswer: newQuestion.correct_answer,
            tags: newQuestion.tags ? JSON.parse(newQuestion.tags) : null,
            is_active: newQuestion.is_active,
            created_at: new Date(newQuestion.created_at),
            updated_at: new Date(newQuestion.updated_at)
        };
        return _server.NextResponse.json({
            success: true,
            data: transformedQuestion,
            message: 'Question created successfully'
        });
    } catch (error) {
        console.error('Error creating question:', error);
        return _server.NextResponse.json({
            success: false,
            error: 'Failed to create question'
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL2FwcHMvd2Vic2l0ZS9zcmMvYXBwL2FwaS9xdWVzdGlvbnMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHN1cGFiYXNlT3BlcmF0aW9ucywgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS1zZXJ2ZXInO1xuXG4vLyBHRVQgL2FwaS9xdWVzdGlvbnMgLSBHZXQgYWxsIHF1ZXN0aW9ucyB3aXRoIG9wdGlvbmFsIGZpbHRlcmluZ1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBjYXJkVHlwZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2NhcmRUeXBlJyk7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjYXRlZ29yeScpO1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBzZWFyY2hQYXJhbXMuZ2V0QWxsKCdjYXRlZ29yaWVzJyk7IC8vIFN1cHBvcnQgbXVsdGlwbGUgY2F0ZWdvcmllc1xuICAgIGNvbnN0IHRvcGljID0gc2VhcmNoUGFyYW1zLmdldCgndG9waWMnKTtcbiAgICBjb25zdCBzdWJ0b3BpYyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N1YnRvcGljJyk7IC8vIFN1cHBvcnQgc3VidG9waWMgc2x1Z1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBzZWFyY2hQYXJhbXMuZ2V0KCdkaWZmaWN1bHR5Jyk7XG4gICAgY29uc3QgdHlwZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3R5cGUnKTtcbiAgICBjb25zdCBsaW1pdCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0Jyk7XG5cbiAgICAvLyBWYWxpZGF0ZSB0b3BpYyBpcyBhIFVVSUQsIG9yIHJlc29sdmUgc3VidG9waWMgc2x1ZyB0byB0b3BpYyBJRFxuICAgIGxldCB0b3BpY0lkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBDaGVjayBpZiB0b3BpYyBpcyBhIHZhbGlkIFVVSUQgZm9ybWF0XG4gICAgY29uc3QgaXNWYWxpZFVVSUQgPSAoc3RyOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IHV1aWRSZWdleCA9XG4gICAgICAgIC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17MTJ9JC9pO1xuICAgICAgcmV0dXJuIHV1aWRSZWdleC50ZXN0KHN0cik7XG4gICAgfTtcblxuICAgIGlmICh0b3BpYyAmJiBpc1ZhbGlkVVVJRCh0b3BpYykpIHtcbiAgICAgIHRvcGljSWQgPSB0b3BpYztcbiAgICB9IGVsc2UgaWYgKHN1YnRvcGljIHx8ICh0b3BpYyAmJiAhaXNWYWxpZFVVSUQodG9waWMpKSkge1xuICAgICAgLy8gUmVzb2x2ZSB0b3BpYy9zdWJ0b3BpYyBzbHVnIHRvIHRvcGljIElEXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IHRvcGljcywgZXJyb3I6IHRvcGljc0Vycm9yIH0gPVxuICAgICAgICAgIGF3YWl0IHN1cGFiYXNlT3BlcmF0aW9ucy5nZXRUb3BpY3Moe1xuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF0b3BpY3NFcnJvciAmJiB0b3BpY3MpIHtcbiAgICAgICAgICBjb25zdCBzbHVnVG9GaW5kID0gc3VidG9waWMgfHwgdG9waWMgfHwgJyc7XG4gICAgICAgICAgY29uc3Qgc2x1Z0xvd2VyID0gc2x1Z1RvRmluZC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coYPCflI0gQVBJOiBTZWFyY2hpbmcgZm9yIHRvcGljL3N1YnRvcGljIFwiJHtzbHVnVG9GaW5kfVwiYCk7XG5cbiAgICAgICAgICAvLyBOb3JtYWxpemUgc2x1ZyBmb3IgYmV0dGVyIG1hdGNoaW5nIChyZW1vdmUgcGx1cmFsICdzJywgaGFuZGxlIGNvbW1vbiB2YXJpYXRpb25zKVxuICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZUZvck1hdGNoID0gKHN0cjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3RyXG4gICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9zJC8sICcnKSAvLyBSZW1vdmUgdHJhaWxpbmcgJ3MnIGZvciBwbHVyYWwgbWF0Y2hpbmdcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvW15hLXowLTktXS9nLCAnJyk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IHNsdWdOb3JtYWxpemVkID0gbm9ybWFsaXplRm9yTWF0Y2goc2x1Z0xvd2VyKTtcblxuICAgICAgICAgIC8vIFRyeSBtdWx0aXBsZSBtYXRjaGluZyBzdHJhdGVnaWVzXG4gICAgICAgICAgY29uc3QgbWF0Y2hpbmdUb3BpYyA9ICh0b3BpY3MgYXMgYW55W10pLmZpbmQoKHQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9waWNTbHVnID0gdC5zbHVnPy50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgICAgICAgICAgY29uc3QgdG9waWNOYW1lID0gdC5uYW1lPy50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgICAgICAgICAgY29uc3QgdG9waWNOYW1lU2x1ZyA9IHRvcGljTmFtZS5yZXBsYWNlKC9cXHMrL2csICctJyk7XG4gICAgICAgICAgICBjb25zdCB0b3BpY1NsdWdOb3JtYWxpemVkID0gbm9ybWFsaXplRm9yTWF0Y2godG9waWNTbHVnKTtcbiAgICAgICAgICAgIGNvbnN0IHRvcGljTmFtZU5vcm1hbGl6ZWQgPSBub3JtYWxpemVGb3JNYXRjaCh0b3BpY05hbWUpO1xuXG4gICAgICAgICAgICAvLyBFeGFjdCBtYXRjaGVzXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHRvcGljU2x1ZyA9PT0gc2x1Z0xvd2VyIHx8XG4gICAgICAgICAgICAgIHRvcGljTmFtZVNsdWcgPT09IHNsdWdMb3dlciB8fFxuICAgICAgICAgICAgICB0LmlkPy50b0xvd2VyQ2FzZSgpID09PSBzbHVnTG93ZXJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2x1ZyBjb250YWlucyB0aGUgc3VidG9waWMgKGUuZy4sIFwianMtc2NvcGUtY2xvc3VyZVwiIGNvbnRhaW5zIFwiY2xvc3VyZVwiKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB0b3BpY1NsdWcuaW5jbHVkZXMoc2x1Z0xvd2VyKSB8fFxuICAgICAgICAgICAgICB0b3BpY1NsdWcuaW5jbHVkZXMoc2x1Z05vcm1hbGl6ZWQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIG5vcm1hbGl6ZWQgbWF0Y2hpbmcgKGhhbmRsZXMgcGx1cmFsL3Npbmd1bGFyKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB0b3BpY1NsdWdOb3JtYWxpemVkLmluY2x1ZGVzKHNsdWdOb3JtYWxpemVkKSB8fFxuICAgICAgICAgICAgICBzbHVnTm9ybWFsaXplZC5pbmNsdWRlcyh0b3BpY1NsdWdOb3JtYWxpemVkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc3VidG9waWMgYXBwZWFycyBhcyBhIHdvcmQgYm91bmRhcnkgaW4gdGhlIHNsdWdcbiAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRTbHVnID0gc2x1Z0xvd2VyLnJlcGxhY2UoXG4gICAgICAgICAgICAgIC9bLiorP14ke30oKXxbXFxdXFxcXF0vZyxcbiAgICAgICAgICAgICAgJ1xcXFwkJidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBlc2NhcGVkU2x1Z05vcm1hbGl6ZWQgPSBzbHVnTm9ybWFsaXplZC5yZXBsYWNlKFxuICAgICAgICAgICAgICAvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csXG4gICAgICAgICAgICAgICdcXFxcJCYnXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIG5ldyBSZWdFeHAoYChefC0pJHtlc2NhcGVkU2x1Z30oLXwkKWApLnRlc3QodG9waWNTbHVnKSB8fFxuICAgICAgICAgICAgICBuZXcgUmVnRXhwKGAoXnwtKSR7ZXNjYXBlZFNsdWdOb3JtYWxpemVkfSgtfCQpYCkudGVzdCh0b3BpY1NsdWcpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIG5hbWUgbWF0Y2hpbmdcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgdG9waWNOYW1lLmluY2x1ZGVzKHNsdWdMb3dlci5yZXBsYWNlKC8tL2csICcgJykpIHx8XG4gICAgICAgICAgICAgIHRvcGljTmFtZU5vcm1hbGl6ZWQuaW5jbHVkZXMoc2x1Z05vcm1hbGl6ZWQpIHx8XG4gICAgICAgICAgICAgIHNsdWdOb3JtYWxpemVkLmluY2x1ZGVzKHRvcGljTmFtZU5vcm1hbGl6ZWQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChtYXRjaGluZ1RvcGljKSB7XG4gICAgICAgICAgICB0b3BpY0lkID0gbWF0Y2hpbmdUb3BpYy5pZDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICBg4pyFIFJlc29sdmVkIHRvcGljL3N1YnRvcGljIFwiJHtzbHVnVG9GaW5kfVwiIHRvIHRvcGljOiBcIiR7bWF0Y2hpbmdUb3BpYy5uYW1lfVwiIChJRDogJHt0b3BpY0lkfSlgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIGDimqDvuI8gQ291bGQgbm90IHJlc29sdmUgdG9waWMvc3VidG9waWMgXCIke3NsdWdUb0ZpbmR9XCIgdG8gYSB0b3BpYyBJRGBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgJ0F2YWlsYWJsZSB0b3BpY3M6JyxcbiAgICAgICAgICAgICAgKHRvcGljcyBhcyBhbnlbXSkuc2xpY2UoMCwgMTApLm1hcCgodDogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiB0LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZSxcbiAgICAgICAgICAgICAgICBzbHVnOiB0LnNsdWcsXG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc29sdmluZyB0b3BpYzonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVycyA9IHtcbiAgICAgIHRvcGljSWQ6IHRvcGljSWQsXG4gICAgICBjYXRlZ29yeUlkOlxuICAgICAgICBjYXRlZ29yaWVzLmxlbmd0aCA+IDAgPyBjYXRlZ29yaWVzIDogY2F0ZWdvcnkgPyBbY2F0ZWdvcnldIDogdW5kZWZpbmVkLFxuICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSB8fCB1bmRlZmluZWQsXG4gICAgICBxdWVzdGlvblR5cGU6IHR5cGUgfHwgdW5kZWZpbmVkLFxuICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgbGltaXQ6IGxpbWl0ID8gcGFyc2VJbnQobGltaXQsIDEwKSA6IHVuZGVmaW5lZCxcbiAgICAgIG9yZGVyQnk6ICdjcmVhdGVkX2F0JyxcbiAgICAgIG9yZGVyRGlyZWN0aW9uOiAnZGVzYycgYXMgY29uc3QsXG4gICAgfTtcblxuICAgIC8vIExvZyB0aGUgZmlsdGVycyBiZWluZyBhcHBsaWVkXG4gICAgY29uc29sZS5sb2coJ/CflI0gQVBJIFF1ZXN0aW9ucyBSb3V0ZSAtIEFwcGxpZWQgRmlsdGVyczonLCB7XG4gICAgICB0b3BpY0lkOiB0b3BpY0lkIHx8ICdub25lJyxcbiAgICAgIGNhdGVnb3J5SWQ6IGZpbHRlcnMuY2F0ZWdvcnlJZCB8fCAnbm9uZScsXG4gICAgICBkaWZmaWN1bHR5OiBmaWx0ZXJzLmRpZmZpY3VsdHkgfHwgJ25vbmUnLFxuICAgICAgcXVlc3Rpb25UeXBlOiBmaWx0ZXJzLnF1ZXN0aW9uVHlwZSB8fCAnbm9uZScsXG4gICAgICBsaW1pdDogZmlsdGVycy5saW1pdCB8fCAnbm9uZScsXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgdGhlIGZpbHRlcmVkIGNvdW50IChzYW1lIGZpbHRlcnMsIHdpdGhvdXQgbGltaXQpXG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgbGV0IGNvdW50UXVlcnkgPSBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3F1ZXN0aW9ucycpXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcblxuICAgIGNvdW50UXVlcnkgPSBjb3VudFF1ZXJ5LmVxKCdpc19hY3RpdmUnLCB0cnVlKTtcblxuICAgIGlmIChmaWx0ZXJzLmNhdGVnb3J5SWQpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpbHRlcnMuY2F0ZWdvcnlJZCkpIHtcbiAgICAgICAgY291bnRRdWVyeSA9IGNvdW50UXVlcnkuaW4oJ2NhdGVnb3J5X2lkJywgZmlsdGVycy5jYXRlZ29yeUlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvdW50UXVlcnkgPSBjb3VudFF1ZXJ5LmVxKCdjYXRlZ29yeV9pZCcsIGZpbHRlcnMuY2F0ZWdvcnlJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNvdW50UXVlcnkgPSBjb3VudFF1ZXJ5LmVxKCdkaWZmaWN1bHR5JywgZmlsdGVycy5kaWZmaWN1bHR5KTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMucXVlc3Rpb25UeXBlKSB7XG4gICAgICBjb3VudFF1ZXJ5ID0gY291bnRRdWVyeS5lcSgncXVlc3Rpb25fdHlwZScsIGZpbHRlcnMucXVlc3Rpb25UeXBlKTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMudG9waWNJZCkge1xuICAgICAgY29uc29sZS5sb2coYPCfk4wgQXBwbHlpbmcgdG9waWNfaWQgZmlsdGVyOiAke2ZpbHRlcnMudG9waWNJZH1gKTtcbiAgICAgIGNvdW50UXVlcnkgPSBjb3VudFF1ZXJ5LmVxKCd0b3BpY19pZCcsIGZpbHRlcnMudG9waWNJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gTm8gdG9waWNfaWQgZmlsdGVyIGFwcGxpZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvdW50OiBmaWx0ZXJlZENvdW50IH0gPSBhd2FpdCBjb3VudFF1ZXJ5O1xuXG4gICAgY29uc3QgeyBkYXRhOiBxdWVzdGlvbnMsIGVycm9yIH0gPVxuICAgICAgYXdhaXQgc3VwYWJhc2VPcGVyYXRpb25zLmdldFF1ZXN0aW9ucyhmaWx0ZXJzKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZXJyb3IgZmV0Y2hpbmcgcXVlc3Rpb25zOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGZldGNoIHF1ZXN0aW9ucyBmcm9tIGRhdGFiYXNlJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgbnVsbCBvciB1bmRlZmluZWQgcXVlc3Rpb25zXG4gICAgaWYgKCFxdWVzdGlvbnMpIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gcXVlc3Rpb25zIHJldHVybmVkIGZyb20gZGF0YWJhc2UnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBjb3VudDogMCxcbiAgICAgICAgdG90YWxDb3VudDogZmlsdGVyZWRDb3VudCB8fCAwLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTG9nIHRoZSByZXN1bHRzIGZvciBkZWJ1Z2dpbmdcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBRdWVzdGlvbnMgZmV0Y2hlZDogJHtxdWVzdGlvbnMubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKGZpbHRlcnMudG9waWNJZCAmJiBxdWVzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICdTYW1wbGUgcXVlc3Rpb24gdG9waWNfaWRzOicsXG4gICAgICAgIHF1ZXN0aW9ucy5zbGljZSgwLCAzKS5tYXAoKHE6IGFueSkgPT4gcS50b3BpY19pZCB8fCAnTlVMTCcpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFRyYW5zZm9ybSBkYXRhIHRvIG1hdGNoIGV4cGVjdGVkIGZvcm1hdFxuICAgIGNvbnN0IHRyYW5zZm9ybWVkUXVlc3Rpb25zID1cbiAgICAgIChxdWVzdGlvbnMgYXMgYW55W10pXG4gICAgICAgID8ubWFwKHF1ZXN0aW9uID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVHJ5IG11bHRpcGxlIHBvc3NpYmxlIGZpZWxkIG5hbWVzIGZvciBxdWVzdGlvbiB0ZXh0XG4gICAgICAgICAgICBjb25zdCBxdWVzdGlvblRleHQgPVxuICAgICAgICAgICAgICBxdWVzdGlvbi5xdWVzdGlvbl90ZXh0IHx8XG4gICAgICAgICAgICAgIHF1ZXN0aW9uLnF1ZXN0aW9uIHx8XG4gICAgICAgICAgICAgIHF1ZXN0aW9uLnRpdGxlIHx8XG4gICAgICAgICAgICAgIHF1ZXN0aW9uLmNvbnRlbnQgfHxcbiAgICAgICAgICAgICAgcXVlc3Rpb24udGV4dCB8fFxuICAgICAgICAgICAgICAnJztcblxuICAgICAgICAgICAgaWYgKCFxdWVzdGlvblRleHQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdRdWVzdGlvbiBtaXNzaW5nIHRleHQgZmllbGQ6Jywge1xuICAgICAgICAgICAgICAgIGlkOiBxdWVzdGlvbi5pZCxcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVGaWVsZHM6IE9iamVjdC5rZXlzKHF1ZXN0aW9uKSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGlkOiBxdWVzdGlvbi5pZCxcbiAgICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uVGV4dCxcbiAgICAgICAgICAgICAgcXVlc3Rpb25fdGV4dDogcXVlc3Rpb25UZXh0LCAvLyBBbHNvIGluY2x1ZGUgcmF3IGZpZWxkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgIGFuc3dlcjogcXVlc3Rpb24uY29ycmVjdF9hbnN3ZXIsXG4gICAgICAgICAgICAgIGV4cGxhbmF0aW9uOiBxdWVzdGlvbi5leHBsYW5hdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgdG9waWNJZDogcXVlc3Rpb24udG9waWNfaWQsXG4gICAgICAgICAgICAgIGNhdGVnb3J5SWQ6IHF1ZXN0aW9uLmNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgICBkaWZmaWN1bHR5OiBxdWVzdGlvbi5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgICB0eXBlOiBxdWVzdGlvbi5xdWVzdGlvbl90eXBlLFxuICAgICAgICAgICAgICBxdWVzdGlvblR5cGU6IHF1ZXN0aW9uLnF1ZXN0aW9uX3R5cGUsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IHF1ZXN0aW9uLm9wdGlvbnNcbiAgICAgICAgICAgICAgICA/IHR5cGVvZiBxdWVzdGlvbi5vcHRpb25zID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgPyBKU09OLnBhcnNlKHF1ZXN0aW9uLm9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICA6IHF1ZXN0aW9uLm9wdGlvbnNcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgIGNvcnJlY3RBbnN3ZXI6IHF1ZXN0aW9uLmNvcnJlY3RfYW5zd2VyLFxuICAgICAgICAgICAgICB0YWdzOiBxdWVzdGlvbi50YWdzXG4gICAgICAgICAgICAgICAgPyB0eXBlb2YgcXVlc3Rpb24udGFncyA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgID8gSlNPTi5wYXJzZShxdWVzdGlvbi50YWdzKVxuICAgICAgICAgICAgICAgICAgOiBxdWVzdGlvbi50YWdzXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgICAgaXNfYWN0aXZlOiBxdWVzdGlvbi5pc19hY3RpdmUsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHF1ZXN0aW9uLmNyZWF0ZWRfYXRcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKHF1ZXN0aW9uLmNyZWF0ZWRfYXQpXG4gICAgICAgICAgICAgICAgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBxdWVzdGlvbi51cGRhdGVkX2F0XG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShxdWVzdGlvbi51cGRhdGVkX2F0KVxuICAgICAgICAgICAgICAgIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBxdWVzdGlvbjonLCBxdWVzdGlvbi5pZCwgcGFyc2VFcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIocSA9PiBxICE9PSBudWxsICYmIHEucXVlc3Rpb24pIHx8IFtdOyAvLyBGaWx0ZXIgb3V0IHF1ZXN0aW9ucyB3aXRob3V0IHRleHRcblxuICAgIC8vIEFkZGl0aW9uYWwgZmlsdGVycyB0aGF0IGFyZW4ndCBoYW5kbGVkIGJ5IFN1cGFiYXNlIChhbHJlYWR5IGZpbHRlcmVkIGJ5IGNhdGVnb3J5SWQgYWJvdmUpXG4gICAgY29uc3QgZmlsdGVyZWRRdWVzdGlvbnMgPSB0cmFuc2Zvcm1lZFF1ZXN0aW9ucztcblxuICAgIGlmIChjYXJkVHlwZSAmJiBjYXJkVHlwZSAhPT0gJ2FsbCcpIHtcbiAgICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBoYW5kbGVkIGJ5IGpvaW5pbmcgd2l0aCBsZWFybmluZ19jYXJkcyB0YWJsZVxuICAgICAgLy8gRm9yIG5vdywgd2UnbGwgc2tpcCB0aGlzIGZpbHRlclxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogZmlsdGVyZWRRdWVzdGlvbnMsXG4gICAgICBjb3VudDogZmlsdGVyZWRDb3VudCB8fCBmaWx0ZXJlZFF1ZXN0aW9ucy5sZW5ndGgsIC8vIEFjdHVhbCBmaWx0ZXJlZCBjb3VudCBmcm9tIGRhdGFiYXNlXG4gICAgICB0b3RhbENvdW50OiBmaWx0ZXJlZENvdW50IHx8IGZpbHRlcmVkUXVlc3Rpb25zLmxlbmd0aCwgLy8gVG90YWwgY291bnQgYWZ0ZXIgZmlsdGVyaW5nXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcXVlc3Rpb25zOicsIGVycm9yKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIHF1ZXN0aW9ucyc7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBPU1QgL2FwaS9xdWVzdGlvbnMgLSBDcmVhdGUgYSBuZXcgcXVlc3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcXVlc3Rpb25EYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gZGF0YSB0byBtYXRjaCBTdXBhYmFzZSBzY2hlbWFcbiAgICBjb25zdCBzdXBhYmFzZVF1ZXN0aW9uRGF0YSA9IHtcbiAgICAgIHF1ZXN0aW9uX3RleHQ6IHF1ZXN0aW9uRGF0YS5xdWVzdGlvbixcbiAgICAgIGV4cGxhbmF0aW9uOiBxdWVzdGlvbkRhdGEuZXhwbGFuYXRpb24gfHwgJycsXG4gICAgICB0b3BpY19pZDogcXVlc3Rpb25EYXRhLnRvcGljSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgZGlmZmljdWx0eTogcXVlc3Rpb25EYXRhLmRpZmZpY3VsdHkgfHwgJ2Vhc3knLFxuICAgICAgcXVlc3Rpb25fdHlwZTpcbiAgICAgICAgcXVlc3Rpb25EYXRhLnR5cGUgfHwgcXVlc3Rpb25EYXRhLnF1ZXN0aW9uVHlwZSB8fCAnbXVsdGlwbGVfY2hvaWNlJyxcbiAgICAgIG9wdGlvbnM6IHF1ZXN0aW9uRGF0YS5vcHRpb25zXG4gICAgICAgID8gSlNPTi5zdHJpbmdpZnkocXVlc3Rpb25EYXRhLm9wdGlvbnMpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgY29ycmVjdF9hbnN3ZXI6XG4gICAgICAgIHF1ZXN0aW9uRGF0YS5hbnN3ZXIgfHwgcXVlc3Rpb25EYXRhLmNvcnJlY3RBbnN3ZXIgfHwgdW5kZWZpbmVkLFxuICAgICAgdGFnczogcXVlc3Rpb25EYXRhLnRhZ3MgPyBKU09OLnN0cmluZ2lmeShxdWVzdGlvbkRhdGEudGFncykgOiB1bmRlZmluZWQsXG4gICAgICBpc19hY3RpdmU6IHF1ZXN0aW9uRGF0YS5pc0FjdGl2ZSAhPT0gZmFsc2UsXG4gICAgfTtcblxuICAgIGNvbnN0IHsgZGF0YTogbmV3UXVlc3Rpb24sIGVycm9yIH0gPVxuICAgICAgYXdhaXQgc3VwYWJhc2VPcGVyYXRpb25zLmNyZWF0ZVF1ZXN0aW9uKHN1cGFiYXNlUXVlc3Rpb25EYXRhKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSB0byBtYXRjaCBleHBlY3RlZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZFF1ZXN0aW9uID0ge1xuICAgICAgaWQ6IChuZXdRdWVzdGlvbiBhcyBhbnkpLmlkLFxuICAgICAgcXVlc3Rpb246IChuZXdRdWVzdGlvbiBhcyBhbnkpLnF1ZXN0aW9uX3RleHQsXG4gICAgICBhbnN3ZXI6IChuZXdRdWVzdGlvbiBhcyBhbnkpLmNvcnJlY3RfYW5zd2VyLFxuICAgICAgZXhwbGFuYXRpb246IChuZXdRdWVzdGlvbiBhcyBhbnkpLmV4cGxhbmF0aW9uLFxuICAgICAgdG9waWNJZDogKG5ld1F1ZXN0aW9uIGFzIGFueSkudG9waWNfaWQsXG4gICAgICBkaWZmaWN1bHR5OiAobmV3UXVlc3Rpb24gYXMgYW55KS5kaWZmaWN1bHR5LFxuICAgICAgdHlwZTogKG5ld1F1ZXN0aW9uIGFzIGFueSkucXVlc3Rpb25fdHlwZSxcbiAgICAgIHF1ZXN0aW9uVHlwZTogKG5ld1F1ZXN0aW9uIGFzIGFueSkucXVlc3Rpb25fdHlwZSxcbiAgICAgIG9wdGlvbnM6IChuZXdRdWVzdGlvbiBhcyBhbnkpLm9wdGlvbnNcbiAgICAgICAgPyBKU09OLnBhcnNlKChuZXdRdWVzdGlvbiBhcyBhbnkpLm9wdGlvbnMpXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGNvcnJlY3RBbnN3ZXI6IChuZXdRdWVzdGlvbiBhcyBhbnkpLmNvcnJlY3RfYW5zd2VyLFxuICAgICAgdGFnczogKG5ld1F1ZXN0aW9uIGFzIGFueSkudGFnc1xuICAgICAgICA/IEpTT04ucGFyc2UoKG5ld1F1ZXN0aW9uIGFzIGFueSkudGFncylcbiAgICAgICAgOiBudWxsLFxuICAgICAgaXNfYWN0aXZlOiAobmV3UXVlc3Rpb24gYXMgYW55KS5pc19hY3RpdmUsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgobmV3UXVlc3Rpb24gYXMgYW55KS5jcmVhdGVkX2F0KSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKChuZXdRdWVzdGlvbiBhcyBhbnkpLnVwZGF0ZWRfYXQpLFxuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHRyYW5zZm9ybWVkUXVlc3Rpb24sXG4gICAgICBtZXNzYWdlOiAnUXVlc3Rpb24gY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHF1ZXN0aW9uOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgcXVlc3Rpb24nIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiR0VUIiwiUE9TVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJjYXJkVHlwZSIsImdldCIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsImdldEFsbCIsInRvcGljIiwic3VidG9waWMiLCJkaWZmaWN1bHR5IiwidHlwZSIsImxpbWl0IiwidG9waWNJZCIsInVuZGVmaW5lZCIsImlzVmFsaWRVVUlEIiwic3RyIiwidXVpZFJlZ2V4IiwidGVzdCIsImRhdGEiLCJ0b3BpY3MiLCJlcnJvciIsInRvcGljc0Vycm9yIiwic3VwYWJhc2VPcGVyYXRpb25zIiwiZ2V0VG9waWNzIiwiaXNBY3RpdmUiLCJzbHVnVG9GaW5kIiwic2x1Z0xvd2VyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwibG9nIiwibm9ybWFsaXplRm9yTWF0Y2giLCJyZXBsYWNlIiwic2x1Z05vcm1hbGl6ZWQiLCJtYXRjaGluZ1RvcGljIiwiZmluZCIsInQiLCJ0b3BpY1NsdWciLCJzbHVnIiwidG9waWNOYW1lIiwibmFtZSIsInRvcGljTmFtZVNsdWciLCJ0b3BpY1NsdWdOb3JtYWxpemVkIiwidG9waWNOYW1lTm9ybWFsaXplZCIsImlkIiwiaW5jbHVkZXMiLCJlc2NhcGVkU2x1ZyIsImVzY2FwZWRTbHVnTm9ybWFsaXplZCIsIlJlZ0V4cCIsIndhcm4iLCJzbGljZSIsIm1hcCIsImZpbHRlcnMiLCJjYXRlZ29yeUlkIiwibGVuZ3RoIiwicXVlc3Rpb25UeXBlIiwiaXNfYWN0aXZlIiwicGFyc2VJbnQiLCJvcmRlckJ5Iiwib3JkZXJEaXJlY3Rpb24iLCJzdXBhYmFzZSIsIkVycm9yIiwiY291bnRRdWVyeSIsImZyb20iLCJzZWxlY3QiLCJjb3VudCIsImhlYWQiLCJlcSIsIkFycmF5IiwiaXNBcnJheSIsImluIiwiZmlsdGVyZWRDb3VudCIsInF1ZXN0aW9ucyIsImdldFF1ZXN0aW9ucyIsIm1lc3NhZ2UiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsInRvdGFsQ291bnQiLCJxIiwidG9waWNfaWQiLCJ0cmFuc2Zvcm1lZFF1ZXN0aW9ucyIsInF1ZXN0aW9uIiwicXVlc3Rpb25UZXh0IiwicXVlc3Rpb25fdGV4dCIsInRpdGxlIiwiY29udGVudCIsInRleHQiLCJhdmFpbGFibGVGaWVsZHMiLCJPYmplY3QiLCJrZXlzIiwiYW5zd2VyIiwiY29ycmVjdF9hbnN3ZXIiLCJleHBsYW5hdGlvbiIsImNhdGVnb3J5X2lkIiwicXVlc3Rpb25fdHlwZSIsIm9wdGlvbnMiLCJKU09OIiwicGFyc2UiLCJjb3JyZWN0QW5zd2VyIiwidGFncyIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidXBkYXRlZF9hdCIsInBhcnNlRXJyb3IiLCJmaWx0ZXIiLCJmaWx0ZXJlZFF1ZXN0aW9ucyIsImVycm9yTWVzc2FnZSIsImRldGFpbHMiLCJzdGFjayIsIlN0cmluZyIsInN0YXR1cyIsInF1ZXN0aW9uRGF0YSIsInN1cGFiYXNlUXVlc3Rpb25EYXRhIiwic3RyaW5naWZ5IiwibmV3UXVlc3Rpb24iLCJjcmVhdGVRdWVzdGlvbiIsInRyYW5zZm9ybWVkUXVlc3Rpb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O1FBSXNCQTtlQUFBQTs7UUFtVEFDO2VBQUFBOzs7d0JBdlRvQjtnQ0FDRztBQUd0QyxlQUFlRCxJQUFJRSxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJRixRQUFRRyxHQUFHO1FBQzVDLE1BQU1DLFdBQVdILGFBQWFJLEdBQUcsQ0FBQztRQUNsQyxNQUFNQyxXQUFXTCxhQUFhSSxHQUFHLENBQUM7UUFDbEMsTUFBTUUsYUFBYU4sYUFBYU8sTUFBTSxDQUFDLGVBQWUsOEJBQThCO1FBQ3BGLE1BQU1DLFFBQVFSLGFBQWFJLEdBQUcsQ0FBQztRQUMvQixNQUFNSyxXQUFXVCxhQUFhSSxHQUFHLENB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
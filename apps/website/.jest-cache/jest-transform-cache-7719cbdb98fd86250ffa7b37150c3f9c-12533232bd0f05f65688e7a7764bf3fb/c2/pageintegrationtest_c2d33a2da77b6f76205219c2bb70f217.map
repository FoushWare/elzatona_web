{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/custom-roadmap/page.integration.test.tsx"],"sourcesContent":["/**\n * Integration Tests for Custom Roadmap Creation (F-IT-001, F-IT-002, F-IT-003)\n * Task: F-001 - Custom Roadmap Creation\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport CustomRoadmapPage from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useAuth: jest.fn(),\n    useUserType: jest.fn(),\n  };\n});\n\njest.mock('../../context/LearningTypeContext', () => ({\n  useLearningType: jest.fn(() => ({\n    learningType: null,\n    setLearningType: jest.fn(),\n  })),\n}));\n\nconst mockPush = jest.fn();\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: mockPush,\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n}));\n\nglobal.fetch = jest.fn();\nStorage.prototype.setItem = jest.fn();\n\njest.mock('lucide-react', () => ({\n  Plus: () => <span>+</span>,\n  Minus: () => <span>-</span>,\n  Check: () => <span>‚úì</span>,\n  Target: () => <span>üéØ</span>,\n  Save: () => <span>üíæ</span>,\n  Loader2: () => <span>‚è≥</span>,\n  AlertCircle: () => <span>‚ö†Ô∏è</span>,\n  CheckCircle: () => <span>‚úÖ</span>,\n  ChevronDown: () => <span>‚ñº</span>,\n  ChevronRight: () => <span>‚ñ∂</span>,\n  Eye: () => <span>üëÅÔ∏è</span>,\n  X: () => <span>‚úï</span>,\n  PanelRightOpen: () => <span>üìÇ</span>,\n  PanelRightClose: () => <span>üìÅ</span>,\n  Clock: () => <span>‚è∞</span>,\n  Zap: () => <span>‚ö°</span>,\n  BookOpen: () => <span>üìñ</span>,\n}));\n\ndescribe('F-IT-001: Roadmap Creation Flow', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({ data: [] }),\n    });\n  });\n\n  it('should integrate plan creation flow', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      expect(screen.getByText(/Create Your Custom Roadmap/i)).toBeInTheDocument();\n    });\n  });\n});\n\ndescribe('F-IT-002: Card and Category Selection', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({\n        data: [\n          {\n            id: '1',\n            title: 'Test Card',\n            categories: [\n              {\n                id: '1',\n                name: 'Test Category',\n                topics: [],\n              },\n            ],\n          },\n        ],\n      }),\n    });\n  });\n\n  it('should integrate card loading and selection', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      expect(global.fetch).toHaveBeenCalled();\n    });\n  });\n});\n\ndescribe('F-IT-003: Plan Saving Integration', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n  });\n\n  it('should save plan to localStorage', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      // Plan saving should integrate with localStorage\n      expect(Storage.prototype.setItem).toBeDefined();\n    });\n  });\n});\n"],"names":["jest","mock","actual","requireActual","useAuth","fn","useUserType","useLearningType","learningType","setLearningType","useRouter","push","mockPush","replace","prefetch","Plus","span","Minus","Check","Target","Save","Loader2","AlertCircle","CheckCircle","ChevronDown","ChevronRight","Eye","X","PanelRightOpen","PanelRightClose","Clock","Zap","BookOpen","global","fetch","Storage","prototype","setItem","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","isAuthenticated","user","id","isLoading","userType","setUserType","mockResolvedValue","ok","json","data","it","render","CustomRoadmapPage","waitFor","expect","screen","getByText","toBeInTheDocument","title","categories","name","topics","toHaveBeenCalled","toBeDefined"],"mappings":"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"}
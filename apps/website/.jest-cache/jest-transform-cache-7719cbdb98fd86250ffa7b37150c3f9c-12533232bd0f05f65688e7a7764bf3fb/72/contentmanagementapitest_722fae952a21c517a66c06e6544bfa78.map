{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts"],"sourcesContent":["/**\n * Content Management API Tests\n *\n * Comprehensive tests for all CRUD operations in the content management system:\n * - Cards API endpoints\n * - Plans API endpoints\n * - Categories API endpoints\n * - Topics API endpoints\n * - Questions API endpoints\n */\n\nimport { NextRequest } from 'next/server';\n\n// Set up environment variables\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock Supabase instead of Firebase\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(),\n      insert: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n      eq: jest.fn(),\n      single: jest.fn(),\n      orderBy: jest.fn(),\n    })),\n  })),\n}));\n\ndescribe('Content Management API Tests', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { createClient } = require('@supabase/supabase-js');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let mockSupabaseClient: any;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockSupabaseClient = createClient();\n    mockSupabaseClient.from.mockClear();\n  });\n\n  describe('Cards API', () => {\n    describe('GET /api/cards', () => {\n      it('should return all learning cards', async () => {\n        // Mock Supabase response\n        const mockCards = [\n          {\n            id: 'core-technologies',\n            name: 'Core Technologies',\n            description: 'Fundamental web technologies',\n            type: 'core-technologies',\n            color: 'blue',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n          {\n            id: 'framework-questions',\n            name: 'Framework Questions',\n            description: 'React, Vue, Angular questions',\n            type: 'framework-questions',\n            color: 'green',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        // Mock Supabase query\n        const mockOrderBy = jest.fn().mockResolvedValue({\n          data: mockCards,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          orderBy: mockOrderBy,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        // Import and test the API route\n        const { GET } = await import('@/app/api/cards/route');\n        const request = new NextRequest('http://localhost:3000/api/cards');\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(2);\n        expect(data.data[0]).toMatchObject({\n          id: 'core-technologies',\n          name: 'Core Technologies',\n          type: 'core-technologies',\n        });\n      });\n\n      it('should handle Supabase errors gracefully', async () => {\n        // Mock Supabase error\n        const mockOrderBy = jest\n          .fn()\n          .mockRejectedValue(new Error('Supabase connection failed'));\n\n        const mockSelect = jest.fn().mockReturnValue({\n          orderBy: mockOrderBy,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/cards/route');\n        const request = new NextRequest('http://localhost:3000/api/cards');\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(500);\n        expect(data.success).toBe(false);\n        expect(data.error).toBeDefined();\n      });\n    });\n\n    describe('POST /api/cards', () => {\n      it('should create a new learning card', async () => {\n        const newCard = {\n          name: 'Test Card',\n          description: 'Test description',\n          type: 'core-technologies',\n          color: 'blue',\n        };\n\n        // Mock Supabase insert operation\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-card-id', ...newCard },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/cards/route');\n        const request = new NextRequest('http://localhost:3000/api/cards', {\n          method: 'POST',\n          body: JSON.stringify(newCard),\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-card-id');\n        expect(data.data.name).toBe('Test Card');\n      });\n\n      it('should validate required fields', async () => {\n        const invalidCard = {\n          description: 'Missing name and type',\n        };\n\n        const { POST } = await import('@/app/api/cards/route');\n        const request = new NextRequest('http://localhost:3000/api/cards', {\n          method: 'POST',\n          body: JSON.stringify(invalidCard),\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(400);\n        expect(data.success).toBe(false);\n        expect(data.error).toBeDefined();\n      });\n    });\n\n    describe('PUT /api/cards/[id]', () => {\n      it('should update an existing learning card', async () => {\n        const cardId = 'test-card-id';\n        const updateData = {\n          name: 'Updated Card Name',\n          description: 'Updated description',\n        };\n\n        // Mock Supabase update operation\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: cardId, ...updateData },\n          error: null,\n        });\n\n        const mockEq = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        const mockUpdate = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          update: mockUpdate,\n        });\n\n        const { PUT } = await import('@/app/api/cards/[id]/route');\n        const request = new NextRequest(\n          `http://localhost:3000/api/cards/${cardId}`,\n          {\n            method: 'PUT',\n            body: JSON.stringify(updateData),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await PUT(request, { params: { id: cardId } });\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n      });\n    });\n\n    describe('DELETE /api/cards/[id]', () => {\n      it('should delete a learning card', async () => {\n        const cardId = 'test-card-id';\n\n        // Mock Supabase delete operation\n        const mockEq = jest.fn().mockResolvedValue({\n          data: null,\n          error: null,\n        });\n\n        const mockDelete = jest.fn().mockReturnValue({\n          eq: mockEq,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          delete: mockDelete,\n        });\n\n        const { DELETE } = await import('@/app/api/cards/[id]/route');\n        const request = new NextRequest(\n          `http://localhost:3000/api/cards/${cardId}`,\n          {\n            method: 'DELETE',\n          }\n        );\n\n        const response = await DELETE(request, { params: { id: cardId } });\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n      });\n    });\n  });\n\n  describe('Plans API', () => {\n    describe('GET /api/plans', () => {\n      it('should return all learning plans', async () => {\n        const mockPlans = [\n          {\n            id: 'plan-1-day',\n            name: '1 Day Plan',\n            description: 'Quick learning plan',\n            duration_days: 1,\n            difficulty: 'beginner',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrderBy = jest.fn().mockResolvedValue({\n          data: mockPlans,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          orderBy: mockOrderBy,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/plans/route');\n        const request = new NextRequest('http://localhost:3000/api/plans');\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].name).toBe('1 Day Plan');\n      });\n    });\n\n    describe('POST /api/plans', () => {\n      it('should create a new learning plan', async () => {\n        const newPlan = {\n          name: 'Test Plan',\n          description: 'Test plan description',\n          duration_days: 3,\n          difficulty: 'intermediate',\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-plan-id', ...newPlan },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/plans/route');\n        const request = new NextRequest('http://localhost:3000/api/plans', {\n          method: 'POST',\n          body: JSON.stringify(newPlan),\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-plan-id');\n      });\n    });\n  });\n\n  describe('Categories API', () => {\n    describe('GET /api/categories', () => {\n      it('should return all categories', async () => {\n        const mockCategories = [\n          {\n            id: 'react',\n            name: 'React',\n            description: 'React framework questions',\n            card_type: 'framework-questions',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrderBy = jest.fn().mockResolvedValue({\n          data: mockCategories,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          orderBy: mockOrderBy,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/categories/route');\n        const request = new NextRequest('http://localhost:3000/api/categories');\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].name).toBe('React');\n      });\n    });\n\n    describe('POST /api/categories', () => {\n      it('should create a new category', async () => {\n        const newCategory = {\n          name: 'Test Category',\n          description: 'Test category description',\n          card_type: 'core-technologies',\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-category-id', ...newCategory },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/categories/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/categories',\n          {\n            method: 'POST',\n            body: JSON.stringify(newCategory),\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-category-id');\n      });\n    });\n  });\n\n  describe('Topics API', () => {\n    describe('GET /api/topics', () => {\n      it('should return all topics', async () => {\n        const mockTopics = [\n          {\n            id: 'react-hooks',\n            name: 'React Hooks',\n            description: 'useState, useEffect, etc.',\n            category_id: 'react',\n            difficulty: 'intermediate',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrderBy = jest.fn().mockResolvedValue({\n          data: mockTopics,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          orderBy: mockOrderBy,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/topics/route');\n        const request = new NextRequest('http://localhost:3000/api/topics');\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].name).toBe('React Hooks');\n      });\n    });\n\n    describe('POST /api/topics', () => {\n      it('should create a new topic', async () => {\n        const newTopic = {\n          name: 'Test Topic',\n          description: 'Test topic description',\n          category_id: 'react',\n          difficulty: 'beginner',\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-topic-id', ...newTopic },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/topics/route');\n        const request = new NextRequest('http://localhost:3000/api/topics', {\n          method: 'POST',\n          body: JSON.stringify(newTopic),\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-topic-id');\n      });\n    });\n  });\n\n  describe('Questions API', () => {\n    describe('GET /api/questions', () => {\n      it('should return all questions with pagination', async () => {\n        const mockQuestions = [\n          {\n            id: 'question-1',\n            question: 'What is React?',\n            type: 'multiple-choice',\n            difficulty: 'beginner',\n            category: 'react',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ];\n\n        const mockOrderBy = jest.fn().mockResolvedValue({\n          data: mockQuestions,\n          error: null,\n        });\n\n        const mockSelect = jest.fn().mockReturnValue({\n          orderBy: mockOrderBy,\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          select: mockSelect,\n        });\n\n        const { GET } = await import('@/app/api/questions/route');\n        const request = new NextRequest(\n          'http://localhost:3000/api/questions?page=1&limit=10'\n        );\n\n        const response = await GET(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(200);\n        expect(data.success).toBe(true);\n        expect(data.data).toHaveLength(1);\n        expect(data.data[0].question).toBe('What is React?');\n      });\n    });\n\n    describe('POST /api/questions', () => {\n      it('should create a new question', async () => {\n        const newQuestion = {\n          question: 'What is JavaScript?',\n          type: 'multiple-choice',\n          difficulty: 'beginner',\n          category: 'javascript',\n          options: ['Programming language', 'Database', 'Framework'],\n          correct_answer: 0,\n        };\n\n        const mockSingle = jest.fn().mockResolvedValue({\n          data: { id: 'test-question-id', ...newQuestion },\n          error: null,\n        });\n\n        const mockInsert = jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: mockSingle,\n          }),\n        });\n\n        mockSupabaseClient.from.mockReturnValue({\n          insert: mockInsert,\n        });\n\n        const { POST } = await import('@/app/api/questions/route');\n        const request = new NextRequest('http://localhost:3000/api/questions', {\n          method: 'POST',\n          body: JSON.stringify(newQuestion),\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n\n        const response = await POST(request);\n        const data = await response.json();\n\n        expect(response.status).toBe(201);\n        expect(data.success).toBe(true);\n        expect(data.data.id).toBe('test-question-id');\n      });\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","from","select","insert","update","delete","eq","single","orderBy","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","describe","require","mockSupabaseClient","beforeEach","clearAllMocks","mockClear","it","mockCards","id","name","description","type","color","created_at","Date","toISOString","updated_at","mockOrderBy","mockResolvedValue","data","error","mockSelect","mockReturnValue","GET","request","NextRequest","response","json","expect","status","toBe","success","toHaveLength","toMatchObject","mockRejectedValue","Error","toBeDefined","newCard","mockSingle","mockInsert","POST","method","body","JSON","stringify","headers","invalidCard","cardId","updateData","mockEq","mockUpdate","PUT","params","mockDelete","DELETE","mockPlans","duration_days","difficulty","newPlan","mockCategories","card_type","newCategory","mockTopics","category_id","newTopic","mockQuestions","question","category","newQuestion","options","correct_answer"],"mappings":"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"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/page.integration.test.tsx"],"sourcesContent":["/**\n * Integration Tests for Homepage (G-IT-001, G-IT-002)\n * Task: G-001 - Homepage Rendering\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport HomePage from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\n// Mock shared contexts - use the test utils mock\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useUserType: jest.fn(),\n    useAuth: jest.fn(),\n    UserStatistics: jest.fn(() => <div data-testid=\"user-statistics\">User Statistics</div>),\n    ErrorBoundary: ({ children }: { children: React.ReactNode }) => <>{children}</>,\n  };\n});\n\n// Mock LearningTypeContext\njest.mock('../context/LearningTypeContext', () => ({\n  useLearningType: jest.fn(() => ({\n    learningType: null,\n    setLearningType: jest.fn(),\n  })),\n}));\n\n// Mock Next.js Link\njest.mock('next/link', () => {\n  return ({ children, href }: { children: React.ReactNode; href: string }) => {\n    return <a href={href}>{children}</a>;\n  };\n});\n\n// Mock lucide-react icons\njest.mock('lucide-react', () => ({\n  ArrowRight: () => <span data-testid=\"arrow-right-icon\">‚Üí</span>,\n  Play: () => <span data-testid=\"play-icon\">‚ñ∂</span>,\n  BookOpen: () => <span data-testid=\"book-icon\">üìñ</span>,\n  Star: () => <span data-testid=\"star-icon\">‚≠ê</span>,\n  Map: () => <span data-testid=\"map-icon\">üó∫Ô∏è</span>,\n  Compass: () => <span data-testid=\"compass-icon\">üß≠</span>,\n  Sparkles: () => <span data-testid=\"sparkles-icon\">‚ú®</span>,\n  Zap: () => <span data-testid=\"zap-icon\">‚ö°</span>,\n}));\n\nconst mockPush = jest.fn();\nconst mockUseRouter = jest.fn();\n\njest.mock('next/navigation', () => ({\n  useRouter: () => mockUseRouter(),\n}));\n\ndescribe('G-IT-001: Get Started Button Navigates to /get-started', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    mockPush.mockClear();\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    Storage.prototype.getItem = jest.fn(() => null);\n  });\n\n  it('should navigate to /get-started when Get Started link is clicked', () => {\n    render(<HomePage />);\n    \n    const getStartedLink = screen.getByRole('link', { name: /Get Started|Start Learning Now/i });\n    expect(getStartedLink).toHaveAttribute('href', '/get-started');\n    \n    // Since we're using Next.js Link, the href is set correctly\n    // In a real browser, clicking would navigate\n    fireEvent.click(getStartedLink);\n    \n    // Verify the link has the correct href\n    expect(getStartedLink).toHaveAttribute('href', '/get-started');\n  });\n\n  it('should have correct navigation path', () => {\n    render(<HomePage />);\n    \n    const getStartedLink = screen.getByRole('link', { name: /Get Started|Start Learning Now/i });\n    const href = getStartedLink.getAttribute('href');\n    expect(href).toBe('/get-started');\n  });\n});\n\ndescribe('G-IT-002: Authentication State Affects Homepage Display', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    Storage.prototype.getItem = jest.fn(() => null);\n  });\n\n  it('should show default content for unauthenticated users', () => {\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    render(<HomePage />);\n    \n    // Should show default \"Master Frontend Development\" title\n    expect(screen.getByText(/Master Frontend Development/i)).toBeInTheDocument();\n    expect(screen.getByText(/The complete platform to ace your frontend interviews/i)).toBeInTheDocument();\n  });\n\n  it('should show personalized content for authenticated guided users', () => {\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'guided',\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '123', email: 'test@example.com' },\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    render(<HomePage />);\n    \n    // Should show guided learning content\n    expect(screen.getByText(/Start Your Learning Path|Continue/i)).toBeInTheDocument();\n  });\n\n  it('should show personalized content for authenticated self-directed users', () => {\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '123', email: 'test@example.com' },\n    });\n    \n    mockUseRouter.mockReturnValue({\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n    });\n    \n    render(<HomePage />);\n    \n    // Should show self-directed learning content\n    expect(screen.getByText(/Build Your Custom Roadmap|Self-Directed Learning/i)).toBeInTheDocument();\n  });\n\n  it('should conditionally render based on user type', async () => {\n    const { rerender } = render(<HomePage />);\n    \n    // Initial state - no user type\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: null,\n      setUserType: jest.fn(),\n    });\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n    });\n    \n    expect(screen.getByText(/Master Frontend Development/i)).toBeInTheDocument();\n    \n    // Change to guided user\n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'guided',\n      setUserType: jest.fn(),\n    });\n    \n    rerender(<HomePage />);\n    \n    await waitFor(() => {\n      expect(screen.getByText(/Start Your Learning Path|Choose Learning Plan/i)).toBeInTheDocument();\n    });\n  });\n});\n\n"],"names":["jest","mock","actual","requireActual","useUserType","fn","useAuth","UserStatistics","div","data-testid","ErrorBoundary","children","useLearningType","learningType","setLearningType","href","a","ArrowRight","span","Play","BookOpen","Star","Map","Compass","Sparkles","Zap","useRouter","mockUseRouter","mockPush","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","userType","setUserType","isAuthenticated","user","mockClear","push","replace","prefetch","Storage","prototype","getItem","it","render","HomePage","getStartedLink","screen","getByRole","name","expect","toHaveAttribute","fireEvent","click","getAttribute","toBe","getByText","toBeInTheDocument","id","email","rerender","waitFor"],"mappings":"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"}
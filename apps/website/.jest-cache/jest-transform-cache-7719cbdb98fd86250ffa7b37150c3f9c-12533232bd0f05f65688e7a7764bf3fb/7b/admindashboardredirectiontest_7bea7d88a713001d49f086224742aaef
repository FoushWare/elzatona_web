297184f8b1f4de257a0318486936a8f9
/**
 * Admin Dashboard Redirection Tests
 *
 * Tests for admin dashboard redirection functionality:
 * - Successful login redirection
 * - Already authenticated user redirection
 * - Route protection
 * - Session persistence
 */ "use strict";
// Mock Supabase before any imports that use it
jest.mock('@supabase/supabase-js', ()=>({
        createClient: jest.fn(()=>({
                from: jest.fn(()=>({
                        select: jest.fn(()=>({
                                eq: jest.fn(()=>({
                                        single: jest.fn().mockResolvedValue({
                                            data: null,
                                            error: null
                                        })
                                    }))
                            }))
                    })),
                auth: {
                    onAuthStateChange: jest.fn(()=>({
                            data: {
                                subscription: null
                            },
                            error: null
                        })),
                    getSession: jest.fn().mockResolvedValue({
                        data: {
                            session: null
                        },
                        error: null
                    }),
                    getUser: jest.fn().mockResolvedValue({
                        data: {
                            user: null
                        },
                        error: null
                    })
                }
            }))
    }));
// Mock nuqs before any imports
jest.mock('nuqs', ()=>({
        useQueryState: jest.fn(()=>[
                null,
                jest.fn()
            ]),
        useQueryStates: jest.fn(()=>[
                {},
                jest.fn()
            ]),
        parseAsString: jest.fn(),
        parseAsInteger: jest.fn(),
        createSearchParamsCache: jest.fn()
    }));
// Mock @tanstack/react-query
jest.mock('@tanstack/react-query', ()=>{
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    const React = require('react');
    return {
        QueryClientProvider: ({ children })=>children,
        QueryClient: jest.fn(()=>({
                invalidateQueries: jest.fn(),
                setQueryData: jest.fn(),
                getQueryData: jest.fn()
            })),
        useQueryClient: jest.fn(()=>({
                invalidateQueries: jest.fn(),
                setQueryData: jest.fn(),
                getQueryData: jest.fn()
            })),
        useQuery: jest.fn(()=>({
                data: null,
                isLoading: false,
                error: null
            })),
        useMutation: jest.fn(()=>({
                mutate: jest.fn(),
                mutateAsync: jest.fn(),
                isLoading: false,
                error: null
            }))
    };
});
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn(),
        usePathname: jest.fn()
    }));
// Mock the actual AdminAuthContext file
jest.mock('../../libs/shared-contexts/src/lib/AdminAuthContext', ()=>{
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    const React = require('react');
    const mockFn = jest.fn(()=>({
            isAuthenticated: false,
            isLoading: false,
            login: jest.fn(),
            logout: jest.fn(),
            user: null
        }));
    return {
        AdminAuthProvider: ({ children })=>children,
        useAdminAuth: mockFn
    };
});
// Mock the actual ThemeContext file
jest.mock('../../libs/shared-contexts/src/lib/ThemeContext', ()=>{
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    const React = require('react');
    return {
        ThemeProvider: ({ children })=>children,
        useTheme: jest.fn(()=>({
                isDarkMode: false,
                toggleDarkMode: jest.fn(),
                setDarkMode: jest.fn(),
                isLoaded: true
            }))
    };
});
jest.mock('@elzatona/shared-contexts', ()=>{
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    const React = require('react');
    return {
        AdminAuthProvider: ({ children })=>children,
        useAdminAuth: mockUseAdminAuthFn,
        ThemeProvider: ({ children })=>children,
        useTheme: jest.fn(()=>({
                isDarkMode: false,
                toggleDarkMode: jest.fn()
            }))
    };
});
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _navigation = require("next/navigation");
const _sharedcontexts = require("../../libs/shared-contexts/src");
const _reactquery = require("@tanstack/react-query");
const _page = /*#__PURE__*/ _interop_require_default(require("../../apps/website/src/app/admin/login/page"));
const _page1 = /*#__PURE__*/ _interop_require_default(require("../../apps/website/src/app/admin/dashboard/page"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Set up environment variables before any imports
process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';
process.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';
// Also mock the package entry point
const mockUseAdminAuthFn = jest.fn(()=>({
        isAuthenticated: false,
        isLoading: false,
        login: jest.fn(),
        logout: jest.fn(),
        user: null
    }));
describe('Admin Dashboard Redirection', ()=>{
    const mockPush = jest.fn();
    const mockReplace = jest.fn();
    const mockUseRouter = _navigation.useRouter;
    const queryClient = new _reactquery.QueryClient();
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock admin auth function to return default values
        mockUseAdminAuthFn.mockReturnValue({
            isAuthenticated: false,
            isLoading: false,
            login: jest.fn(),
            logout: jest.fn(),
            user: null
        });
        mockUseRouter.mockReturnValue({
            push: mockPush,
            replace: mockReplace,
            prefetch: jest.fn(),
            back: jest.fn(),
            forward: jest.fn(),
            refresh: jest.fn()
        });
    });
    describe('Login Success Redirection', ()=>{
        it('should redirect to dashboard after successful login', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: true
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText(/email/i);
            const passwordInput = _react1.screen.getByLabelText(/password/i);
            const loginButton = _react1.screen.getByRole('button', {
                name: /sign in/i
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'admin@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'password123'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(mockLogin).toHaveBeenCalledWith('admin@example.com', 'password123');
            });
            // Simulate successful authentication
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'super_admin'
                }
            });
            // Re-render to trigger redirection
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            await (0, _react1.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
            });
        });
        it('should not redirect if login fails', async ()=>{
            const mockLogin = jest.fn().mockResolvedValue({
                success: false,
                error: 'Invalid credentials'
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText(/email/i);
            const passwordInput = _react1.screen.getByLabelText(/password/i);
            const loginButton = _react1.screen.getByRole('button', {
                name: /sign in/i
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'admin@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'wrongpassword'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(mockLogin).toHaveBeenCalledWith('admin@example.com', 'wrongpassword');
            });
            // Should not redirect on failed login
            expect(mockPush).not.toHaveBeenCalled();
        });
    });
    describe('Already Authenticated User Redirection', ()=>{
        it('should redirect authenticated users away from login page', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'super_admin'
                }
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
        });
        it('should not redirect if user is still loading', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: true,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should redirect to dashboard when authentication completes', async ()=>{
            // Start with loading state
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: true,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            expect(mockPush).not.toHaveBeenCalled();
            // Simulate authentication completing
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'super_admin'
                }
            });
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            await (0, _react1.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
            });
        });
    });
    describe('Dashboard Access Protection', ()=>{
        it('should allow access to dashboard for authenticated users', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'super_admin'
                }
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText(/Admin Dashboard/i)).toBeInTheDocument();
            expect(mockReplace).not.toHaveBeenCalled();
        });
        it('should redirect unauthenticated users from dashboard to login', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(mockReplace).toHaveBeenCalledWith('/admin/login');
        });
        it('should show loading state while checking authentication', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: true,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText(/Loading admin panel.../i)).toBeInTheDocument();
            expect(mockReplace).not.toHaveBeenCalled();
        });
    });
    describe('Session Persistence', ()=>{
        it('should maintain authentication state across page refreshes', ()=>{
            // Simulate user with valid session in localStorage
            const mockSession = {
                id: 'admin_test@example.com',
                email: 'admin@example.com',
                name: 'Test Admin',
                role: 'super_admin',
                token: 'valid-jwt-token',
                expiresAt: new Date(Date.now() + 86400000).toISOString()
            };
            // Mock localStorage
            const localStorageMock = {
                getItem: jest.fn((key)=>{
                    if (key === 'admin_session') {
                        return JSON.stringify(mockSession);
                    }
                    return null;
                }),
                setItem: jest.fn(),
                removeItem: jest.fn(),
                clear: jest.fn()
            };
            Object.defineProperty(window, 'localStorage', {
                value: localStorageMock,
                writable: true
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: mockSession
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText(/Admin Dashboard/i)).toBeInTheDocument();
            expect(mockReplace).not.toHaveBeenCalled();
        });
        it('should handle expired sessions gracefully', ()=>{
            // Simulate expired session
            const expiredSession = {
                id: 'admin_test@example.com',
                email: 'admin@example.com',
                name: 'Test Admin',
                role: 'super_admin',
                token: 'expired-jwt-token',
                expiresAt: new Date(Date.now() - 86400000).toISOString()
            };
            const localStorageMock = {
                getItem: jest.fn((key)=>{
                    if (key === 'admin_session') {
                        return JSON.stringify(expiredSession);
                    }
                    return null;
                }),
                setItem: jest.fn(),
                removeItem: jest.fn(),
                clear: jest.fn()
            };
            Object.defineProperty(window, 'localStorage', {
                value: localStorageMock,
                writable: true
            });
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(mockReplace).toHaveBeenCalledWith('/admin/login');
        });
    });
    describe('Role-Based Access', ()=>{
        it('should allow super_admin access to dashboard', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'super_admin'
                }
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText(/Admin Dashboard/i)).toBeInTheDocument();
            expect(mockReplace).not.toHaveBeenCalled();
        });
        it('should allow admin access to dashboard', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'admin'
                }
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(_react1.screen.getByText(/Admin Dashboard/i)).toBeInTheDocument();
            expect(mockReplace).not.toHaveBeenCalled();
        });
        it('should redirect users with invalid roles', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'user@example.com',
                    role: 'user'
                }
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            expect(mockReplace).toHaveBeenCalledWith('/admin/login');
        });
    });
    describe('Navigation Flow', ()=>{
        it('should handle direct navigation to admin root', ()=>{
            // Mock usePathname to return /admin
            const mockUsePathname = _navigation.usePathname;
            mockUsePathname.mockReturnValue('/admin');
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: {
                    email: 'admin@example.com',
                    role: 'super_admin'
                }
            });
            // This would be tested with the admin root page component
            // For now, we'll test the redirection logic
            expect(mockPush).not.toHaveBeenCalledWith('/admin/login');
        });
        it('should handle navigation to protected admin routes', ()=>{
            const mockUsePathname = _navigation.usePathname;
            mockUsePathname.mockReturnValue('/admin/questions');
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            // This would be tested with the admin layout component
            // The layout should redirect to login for protected routes
            expect(mockReplace).toHaveBeenCalledWith('/admin/login');
        });
    });
    describe('Error Handling', ()=>{
        it('should handle authentication errors gracefully', async ()=>{
            const mockLogin = jest.fn().mockRejectedValue(new Error('Network error'));
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: false,
                isLoading: false,
                login: mockLogin,
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
                    })
                })
            }));
            const emailInput = _react1.screen.getByLabelText(/email/i);
            const passwordInput = _react1.screen.getByLabelText(/password/i);
            const loginButton = _react1.screen.getByRole('button', {
                name: /sign in/i
            });
            _react1.fireEvent.change(emailInput, {
                target: {
                    value: 'admin@example.com'
                }
            });
            _react1.fireEvent.change(passwordInput, {
                target: {
                    value: 'password123'
                }
            });
            _react1.fireEvent.click(loginButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText(/An unexpected error occurred|An error occurred/i)).toBeInTheDocument();
            });
            // Should not redirect on error
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should handle missing user data', ()=>{
            mockUseAdminAuthFn.mockReturnValue({
                isAuthenticated: true,
                isLoading: false,
                login: jest.fn(),
                logout: jest.fn(),
                user: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
                client: queryClient,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.AdminAuthProvider, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_sharedcontexts.ThemeProvider, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page1.default, {})
                    })
                })
            }));
            // Should redirect to login if user data is missing
            expect(mockReplace).toHaveBeenCalledWith('/admin/login');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL3Rlc3RzL2FkbWluL2FkbWluLWRhc2hib2FyZC1yZWRpcmVjdGlvbi50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFkbWluIERhc2hib2FyZCBSZWRpcmVjdGlvbiBUZXN0c1xuICpcbiAqIFRlc3RzIGZvciBhZG1pbiBkYXNoYm9hcmQgcmVkaXJlY3Rpb24gZnVuY3Rpb25hbGl0eTpcbiAqIC0gU3VjY2Vzc2Z1bCBsb2dpbiByZWRpcmVjdGlvblxuICogLSBBbHJlYWR5IGF1dGhlbnRpY2F0ZWQgdXNlciByZWRpcmVjdGlvblxuICogLSBSb3V0ZSBwcm90ZWN0aW9uXG4gKiAtIFNlc3Npb24gcGVyc2lzdGVuY2VcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IsIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VQYXRobmFtZSB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQge1xuICB1c2VBZG1pbkF1dGgsXG4gIEFkbWluQXV0aFByb3ZpZGVyLFxuICBUaGVtZVByb3ZpZGVyLFxufSBmcm9tICdAZWx6YXRvbmEvc2hhcmVkLWNvbnRleHRzJztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBRdWVyeUNsaWVudFByb3ZpZGVyIH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCBBZG1pbkxvZ2luUGFnZSBmcm9tICdAL2FwcC9hZG1pbi9sb2dpbi9wYWdlJztcbmltcG9ydCBBZG1pbkRhc2hib2FyZFBhZ2UgZnJvbSAnQC9hcHAvYWRtaW4vZGFzaGJvYXJkL3BhZ2UnO1xuXG4vLyBTZXQgdXAgZW52aXJvbm1lbnQgdmFyaWFibGVzIGJlZm9yZSBhbnkgaW1wb3J0c1xucHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMID0gJ2h0dHBzOi8vdGVzdC5zdXBhYmFzZS5jbyc7XG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSA9ICd0ZXN0LWFub24ta2V5JztcbnByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgPSAndGVzdC1zZXJ2aWNlLXJvbGUta2V5JztcblxuLy8gTW9jayBTdXBhYmFzZSBiZWZvcmUgYW55IGltcG9ydHMgdGhhdCB1c2UgaXRcbmplc3QubW9jaygnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJywgKCkgPT4gKHtcbiAgY3JlYXRlQ2xpZW50OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgZnJvbTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgfSkpLFxuICAgIH0pKSxcbiAgICBhdXRoOiB7XG4gICAgICBvbkF1dGhTdGF0ZUNoYW5nZTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBkYXRhOiB7IHN1YnNjcmlwdGlvbjogbnVsbCB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pKSxcbiAgICAgIGdldFNlc3Npb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgc2Vzc2lvbjogbnVsbCB9LCBlcnJvcjogbnVsbCB9KSxcbiAgICAgIGdldFVzZXI6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgdXNlcjogbnVsbCB9LCBlcnJvcjogbnVsbCB9KSxcbiAgICB9LFxuICB9KSksXG59KSk7XG5cbi8vIE1vY2sgbnVxcyBiZWZvcmUgYW55IGltcG9ydHNcbmplc3QubW9jaygnbnVxcycsICgpID0+ICh7XG4gIHVzZVF1ZXJ5U3RhdGU6IGplc3QuZm4oKCkgPT4gW251bGwsIGplc3QuZm4oKV0pLFxuICB1c2VRdWVyeVN0YXRlczogamVzdC5mbigoKSA9PiBbe30sIGplc3QuZm4oKV0pLFxuICBwYXJzZUFzU3RyaW5nOiBqZXN0LmZuKCksXG4gIHBhcnNlQXNJbnRlZ2VyOiBqZXN0LmZuKCksXG4gIGNyZWF0ZVNlYXJjaFBhcmFtc0NhY2hlOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5XG5qZXN0Lm1vY2soJ0B0YW5zdGFjay9yZWFjdC1xdWVyeScsICgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHNcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICByZXR1cm4ge1xuICAgIFF1ZXJ5Q2xpZW50UHJvdmlkZXI6ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PlxuICAgICAgY2hpbGRyZW4sXG4gICAgUXVlcnlDbGllbnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIGludmFsaWRhdGVRdWVyaWVzOiBqZXN0LmZuKCksXG4gICAgICBzZXRRdWVyeURhdGE6IGplc3QuZm4oKSxcbiAgICAgIGdldFF1ZXJ5RGF0YTogamVzdC5mbigpLFxuICAgIH0pKSxcbiAgICB1c2VRdWVyeUNsaWVudDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgaW52YWxpZGF0ZVF1ZXJpZXM6IGplc3QuZm4oKSxcbiAgICAgIHNldFF1ZXJ5RGF0YTogamVzdC5mbigpLFxuICAgICAgZ2V0UXVlcnlEYXRhOiBqZXN0LmZuKCksXG4gICAgfSkpLFxuICAgIHVzZVF1ZXJ5OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pKSxcbiAgICB1c2VNdXRhdGlvbjogamVzdC5mbigoKSA9PiAoe1xuICAgICAgbXV0YXRlOiBqZXN0LmZuKCksXG4gICAgICBtdXRhdGVBc3luYzogamVzdC5mbigpLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pKSxcbiAgfTtcbn0pO1xuXG4vLyBNb2NrIE5leHQuanMgcm91dGVyXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxuICB1c2VQYXRobmFtZTogamVzdC5mbigpLFxufSkpO1xuXG4vLyBNb2NrIHRoZSBhY3R1YWwgQWRtaW5BdXRoQ29udGV4dCBmaWxlXG5qZXN0Lm1vY2soJy4uLy4uL2xpYnMvc2hhcmVkLWNvbnRleHRzL3NyYy9saWIvQWRtaW5BdXRoQ29udGV4dCcsICgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHNcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCBtb2NrRm4gPSBqZXN0LmZuKCgpID0+ICh7XG4gICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgdXNlcjogbnVsbCxcbiAgfSkpO1xuICByZXR1cm4ge1xuICAgIEFkbWluQXV0aFByb3ZpZGVyOiAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgPT5cbiAgICAgIGNoaWxkcmVuLFxuICAgIHVzZUFkbWluQXV0aDogbW9ja0ZuLFxuICB9O1xufSk7XG5cbi8vIE1vY2sgdGhlIGFjdHVhbCBUaGVtZUNvbnRleHQgZmlsZVxuamVzdC5tb2NrKCcuLi8uLi9saWJzL3NoYXJlZC1jb250ZXh0cy9zcmMvbGliL1RoZW1lQ29udGV4dCcsICgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHNcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICByZXR1cm4ge1xuICAgIFRoZW1lUHJvdmlkZXI6ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PiBjaGlsZHJlbixcbiAgICB1c2VUaGVtZTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgaXNEYXJrTW9kZTogZmFsc2UsXG4gICAgICB0b2dnbGVEYXJrTW9kZTogamVzdC5mbigpLFxuICAgICAgc2V0RGFya01vZGU6IGplc3QuZm4oKSxcbiAgICAgIGlzTG9hZGVkOiB0cnVlLFxuICAgIH0pKSxcbiAgfTtcbn0pO1xuXG4vLyBBbHNvIG1vY2sgdGhlIHBhY2thZ2UgZW50cnkgcG9pbnRcbmNvbnN0IG1vY2tVc2VBZG1pbkF1dGhGbiA9IGplc3QuZm4oKCkgPT4gKHtcbiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgbG9naW46IGplc3QuZm4oKSxcbiAgbG9nb3V0OiBqZXN0LmZuKCksXG4gIHVzZXI6IG51bGwsXG59KSk7XG5cbmplc3QubW9jaygnQGVsemF0b25hL3NoYXJlZC1jb250ZXh0cycsICgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHNcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICByZXR1cm4ge1xuICAgIEFkbWluQXV0aFByb3ZpZGVyOiAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgPT5cbiAgICAgIGNoaWxkcmVuLFxuICAgIHVzZUFkbWluQXV0aDogbW9ja1VzZUFkbWluQXV0aEZuLFxuICAgIFRoZW1lUHJvdmlkZXI6ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PiBjaGlsZHJlbixcbiAgICB1c2VUaGVtZTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgaXNEYXJrTW9kZTogZmFsc2UsXG4gICAgICB0b2dnbGVEYXJrTW9kZTogamVzdC5mbigpLFxuICAgIH0pKSxcbiAgfTtcbn0pO1xuXG4vLyBUeXBlIGRlZmluaXRpb25zIGZvciBtb2Nrc1xuaW50ZXJmYWNlIE1vY2tSb3V0ZXIge1xuICBwdXNoOiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPCh1cmw6IHN0cmluZykgPT4gdm9pZD47XG4gIHJlcGxhY2U6IGplc3QuTW9ja2VkRnVuY3Rpb248KHVybDogc3RyaW5nKSA9PiB2b2lkPjtcbiAgcHJlZmV0Y2g6IGplc3QuTW9ja2VkRnVuY3Rpb248KHVybDogc3RyaW5nKSA9PiB2b2lkPjtcbiAgYmFjazogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbiAgZm9yd2FyZDogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbiAgcmVmcmVzaDogamVzdC5Nb2NrZWRGdW5jdGlvbjwoKSA9PiB2b2lkPjtcbn1cblxuaW50ZXJmYWNlIE1vY2tBZG1pbkF1dGgge1xuICBsb2dpbjogamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgICAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW4gfT5cbiAgPjtcbiAgbG9nb3V0OiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPCgpID0+IHZvaWQ+O1xuICB1c2VyOiB7IGlkOiBzdHJpbmc7IGVtYWlsOiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgcm9sZTogc3RyaW5nIH0gfCBudWxsO1xuICBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbn1cblxuZGVzY3JpYmUoJ0FkbWluIERhc2hib2FyZCBSZWRpcmVjdGlvbicsICgpID0+IHtcbiAgY29uc3QgbW9ja1B1c2ggPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tSZXBsYWNlID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrVXNlUm91dGVyID0gdXNlUm91dGVyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVJvdXRlcj47XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gbmV3IFF1ZXJ5Q2xpZW50KCk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgLy8gUmVzZXQgbW9jayBhZG1pbiBhdXRoIGZ1bmN0aW9uIHRvIHJldHVybiBkZWZhdWx0IHZhbHVlc1xuICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICB1c2VyOiBudWxsLFxuICAgIH0pO1xuICAgIG1vY2tVc2VSb3V0ZXIubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHB1c2g6IG1vY2tQdXNoLFxuICAgICAgcmVwbGFjZTogbW9ja1JlcGxhY2UsXG4gICAgICBwcmVmZXRjaDogamVzdC5mbigpLFxuICAgICAgYmFjazogamVzdC5mbigpLFxuICAgICAgZm9yd2FyZDogamVzdC5mbigpLFxuICAgICAgcmVmcmVzaDogamVzdC5mbigpLFxuICAgIH0gYXMgTW9ja1JvdXRlcik7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2dpbiBTdWNjZXNzIFJlZGlyZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVkaXJlY3QgdG8gZGFzaGJvYXJkIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrTG9naW4gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2VtYWlsL2kpO1xuICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcGFzc3dvcmQvaSk7XG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NpZ24gaW4vaSB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ2FkbWluQGV4YW1wbGUuY29tJyB9IH0pO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwYXNzd29yZElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3Bhc3N3b3JkMTIzJyB9IH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxvZ2luQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrTG9naW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgJ3Bhc3N3b3JkMTIzJ1xuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIHN1Y2Nlc3NmdWwgYXV0aGVudGljYXRpb25cbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBtb2NrTG9naW4sXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiB7IGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLCByb2xlOiAnc3VwZXJfYWRtaW4nIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gUmUtcmVuZGVyIHRvIHRyaWdnZXIgcmVkaXJlY3Rpb25cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYWRtaW4vZGFzaGJvYXJkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHJlZGlyZWN0IGlmIGxvZ2luIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xvZ2luID0gamVzdFxuICAgICAgICAuZm4oKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogbW9ja0xvZ2luLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5Mb2dpblBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9lbWFpbC9pKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3Bhc3N3b3JkL2kpO1xuICAgICAgY29uc3QgbG9naW5CdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9zaWduIGluL2kgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZW1haWxJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdhZG1pbkBleGFtcGxlLmNvbScgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocGFzc3dvcmRJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICd3cm9uZ3Bhc3N3b3JkJyB9IH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxvZ2luQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrTG9naW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgJ3dyb25ncGFzc3dvcmQnXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCByZWRpcmVjdCBvbiBmYWlsZWQgbG9naW5cbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FscmVhZHkgQXV0aGVudGljYXRlZCBVc2VyIFJlZGlyZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVkaXJlY3QgYXV0aGVudGljYXRlZCB1c2VycyBhd2F5IGZyb20gbG9naW4gcGFnZScsICgpID0+IHtcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiB7IGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLCByb2xlOiAnc3VwZXJfYWRtaW4nIH0sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2Rhc2hib2FyZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVkaXJlY3QgaWYgdXNlciBpcyBzdGlsbCBsb2FkaW5nJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWRpcmVjdCB0byBkYXNoYm9hcmQgd2hlbiBhdXRoZW50aWNhdGlvbiBjb21wbGV0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTdGFydCB3aXRoIGxvYWRpbmcgc3RhdGVcbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcblxuICAgICAgLy8gU2ltdWxhdGUgYXV0aGVudGljYXRpb24gY29tcGxldGluZ1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IHsgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsIHJvbGU6ICdzdXBlcl9hZG1pbicgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkxvZ2luUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYWRtaW4vZGFzaGJvYXJkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Rhc2hib2FyZCBBY2Nlc3MgUHJvdGVjdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFsbG93IGFjY2VzcyB0byBkYXNoYm9hcmQgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlcnMnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogeyBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJywgcm9sZTogJ3N1cGVyX2FkbWluJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkRhc2hib2FyZFBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvQWRtaW4gRGFzaGJvYXJkL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZXBsYWNlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWRpcmVjdCB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMgZnJvbSBkYXNoYm9hcmQgdG8gbG9naW4nLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluRGFzaGJvYXJkUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVwbGFjZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hZG1pbi9sb2dpbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaG93IGxvYWRpbmcgc3RhdGUgd2hpbGUgY2hlY2tpbmcgYXV0aGVudGljYXRpb24nLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5EYXNoYm9hcmRQYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0xvYWRpbmcgYWRtaW4gcGFuZWwuLi4vaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja1JlcGxhY2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZXNzaW9uIFBlcnNpc3RlbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gYXV0aGVudGljYXRpb24gc3RhdGUgYWNyb3NzIHBhZ2UgcmVmcmVzaGVzJywgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgdXNlciB3aXRoIHZhbGlkIHNlc3Npb24gaW4gbG9jYWxTdG9yYWdlXG4gICAgICBjb25zdCBtb2NrU2Vzc2lvbiA9IHtcbiAgICAgICAgaWQ6ICdhZG1pbl90ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICAgIG5hbWU6ICdUZXN0IEFkbWluJyxcbiAgICAgICAgcm9sZTogJ3N1cGVyX2FkbWluJyxcbiAgICAgICAgdG9rZW46ICd2YWxpZC1qd3QtdG9rZW4nLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyA4NjQwMDAwMCkudG9JU09TdHJpbmcoKSwgLy8gMjQgaG91cnMgZnJvbSBub3dcbiAgICAgIH07XG5cbiAgICAgIC8vIE1vY2sgbG9jYWxTdG9yYWdlXG4gICAgICBjb25zdCBsb2NhbFN0b3JhZ2VNb2NrID0ge1xuICAgICAgICBnZXRJdGVtOiBqZXN0LmZuKGtleSA9PiB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2FkbWluX3Nlc3Npb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobW9ja1Nlc3Npb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSksXG4gICAgICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgICAgICBjbGVhcjogamVzdC5mbigpLFxuICAgICAgfTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcbiAgICAgICAgdmFsdWU6IGxvY2FsU3RvcmFnZU1vY2ssXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgICAgIGxvZ291dDogamVzdC5mbigpLFxuICAgICAgICB1c2VyOiBtb2NrU2Vzc2lvbixcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5EYXNoYm9hcmRQYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0FkbWluIERhc2hib2FyZC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVwbGFjZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4cGlyZWQgc2Vzc2lvbnMgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIGV4cGlyZWQgc2Vzc2lvblxuICAgICAgY29uc3QgZXhwaXJlZFNlc3Npb24gPSB7XG4gICAgICAgIGlkOiAnYWRtaW5fdGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgICBuYW1lOiAnVGVzdCBBZG1pbicsXG4gICAgICAgIHJvbGU6ICdzdXBlcl9hZG1pbicsXG4gICAgICAgIHRva2VuOiAnZXhwaXJlZC1qd3QtdG9rZW4nLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA4NjQwMDAwMCkudG9JU09TdHJpbmcoKSwgLy8gMjQgaG91cnMgYWdvXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBsb2NhbFN0b3JhZ2VNb2NrID0ge1xuICAgICAgICBnZXRJdGVtOiBqZXN0LmZuKGtleSA9PiB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2FkbWluX3Nlc3Npb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXhwaXJlZFNlc3Npb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSksXG4gICAgICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgICAgICBjbGVhcjogamVzdC5mbigpLFxuICAgICAgfTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcbiAgICAgICAgdmFsdWU6IGxvY2FsU3RvcmFnZU1vY2ssXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5EYXNoYm9hcmRQYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZXBsYWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2xvZ2luJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSb2xlLUJhc2VkIEFjY2VzcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFsbG93IHN1cGVyX2FkbWluIGFjY2VzcyB0byBkYXNoYm9hcmQnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogeyBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJywgcm9sZTogJ3N1cGVyX2FkbWluJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFF1ZXJ5Q2xpZW50UHJvdmlkZXIgY2xpZW50PXtxdWVyeUNsaWVudH0+XG4gICAgICAgICAgPEFkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxBZG1pbkRhc2hib2FyZFBhZ2UgLz5cbiAgICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8L0FkbWluQXV0aFByb3ZpZGVyPlxuICAgICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvQWRtaW4gRGFzaGJvYXJkL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZXBsYWNlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBhZG1pbiBhY2Nlc3MgdG8gZGFzaGJvYXJkJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IHsgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsIHJvbGU6ICdhZG1pbicgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICAgIDxBZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICA8QWRtaW5EYXNoYm9hcmRQYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0FkbWluIERhc2hib2FyZC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVwbGFjZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVkaXJlY3QgdXNlcnMgd2l0aCBpbnZhbGlkIHJvbGVzJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IHsgZW1haWw6ICd1c2VyQGV4YW1wbGUuY29tJywgcm9sZTogJ3VzZXInIH0sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluRGFzaGJvYXJkUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVwbGFjZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hZG1pbi9sb2dpbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTmF2aWdhdGlvbiBGbG93JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpcmVjdCBuYXZpZ2F0aW9uIHRvIGFkbWluIHJvb3QnLCAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVzZVBhdGhuYW1lIHRvIHJldHVybiAvYWRtaW5cbiAgICAgIGNvbnN0IG1vY2tVc2VQYXRobmFtZSA9IHVzZVBhdGhuYW1lIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248KCkgPT4gc3RyaW5nPjtcbiAgICAgIG1vY2tVc2VQYXRobmFtZS5tb2NrUmV0dXJuVmFsdWUoJy9hZG1pbicpO1xuXG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogeyBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJywgcm9sZTogJ3N1cGVyX2FkbWluJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRoaXMgd291bGQgYmUgdGVzdGVkIHdpdGggdGhlIGFkbWluIHJvb3QgcGFnZSBjb21wb25lbnRcbiAgICAgIC8vIEZvciBub3csIHdlJ2xsIHRlc3QgdGhlIHJlZGlyZWN0aW9uIGxvZ2ljXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2xvZ2luJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuYXZpZ2F0aW9uIHRvIHByb3RlY3RlZCBhZG1pbiByb3V0ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVXNlUGF0aG5hbWUgPSB1c2VQYXRobmFtZSBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPCgpID0+IHN0cmluZz47XG4gICAgICBtb2NrVXNlUGF0aG5hbWUubW9ja1JldHVyblZhbHVlKCcvYWRtaW4vcXVlc3Rpb25zJyk7XG5cbiAgICAgIG1vY2tVc2VBZG1pbkF1dGhGbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2dpbjogamVzdC5mbigpLFxuICAgICAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUaGlzIHdvdWxkIGJlIHRlc3RlZCB3aXRoIHRoZSBhZG1pbiBsYXlvdXQgY29tcG9uZW50XG4gICAgICAvLyBUaGUgbGF5b3V0IHNob3VsZCByZWRpcmVjdCB0byBsb2dpbiBmb3IgcHJvdGVjdGVkIHJvdXRlc1xuICAgICAgZXhwZWN0KG1vY2tSZXBsYWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2xvZ2luJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhdXRoZW50aWNhdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMb2dpbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG4gICAgICBtb2NrVXNlQWRtaW5BdXRoRm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IG1vY2tMb2dpbixcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluTG9naW5QYWdlIC8+XG4gICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgPC9BZG1pbkF1dGhQcm92aWRlcj5cbiAgICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZW1haWwvaSk7XG4gICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wYXNzd29yZC9pKTtcbiAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc2lnbiBpbi9pIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGVtYWlsSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnYWRtaW5AZXhhbXBsZS5jb20nIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHBhc3N3b3JkSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAncGFzc3dvcmQxMjMnIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobG9naW5CdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KFxuICAgICAgICAgIHNjcmVlbi5nZXRCeVRleHQoL0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWR8QW4gZXJyb3Igb2NjdXJyZWQvaSlcbiAgICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgcmVkaXJlY3Qgb24gZXJyb3JcbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3NpbmcgdXNlciBkYXRhJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUFkbWluQXV0aEZuLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbG9naW46IGplc3QuZm4oKSxcbiAgICAgICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgICAgIHVzZXI6IG51bGwsIC8vIE1pc3NpbmcgdXNlciBkYXRhXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICA8QWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgICAgPEFkbWluRGFzaGJvYXJkUGFnZSAvPlxuICAgICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICAgIDwvQWRtaW5BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCByZWRpcmVjdCB0byBsb2dpbiBpZiB1c2VyIGRhdGEgaXMgbWlzc2luZ1xuICAgICAgZXhwZWN0KG1vY2tSZXBsYWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2xvZ2luJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJjcmVhdGVDbGllbnQiLCJmbiIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsImVycm9yIiwiYXV0aCIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwic3Vic2NyaXB0aW9uIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJnZXRVc2VyIiwidXNlciIsInVzZVF1ZXJ5U3RhdGUiLCJ1c2VRdWVyeVN0YXRlcyIsInBhcnNlQXNTdHJpbmciLCJwYXJzZUFzSW50ZWdlciIsImNyZWF0ZVNlYXJjaFBhcmFtc0NhY2hlIiwiUmVhY3QiLCJyZXF1aXJlIiwiUXVlcnlDbGllbnRQcm92aWRlciIsImNoaWxkcmVuIiwiUXVlcnlDbGllbnQiLCJpbnZhbGlkYXRlUXVlcmllcyIsInNldFF1ZXJ5RGF0YSIsImdldFF1ZXJ5RGF0YSIsInVzZVF1ZXJ5Q2xpZW50IiwidXNlUXVlcnkiLCJpc0xvYWRpbmciLCJ1c2VNdXRhdGlvbiIsIm11dGF0ZSIsIm11dGF0ZUFzeW5jIiwidXNlUm91dGVyIiwidXNlUGF0aG5hbWUiLCJtb2NrRm4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJsb2dpbiIsImxvZ291dCIsIkFkbWluQXV0aFByb3ZpZGVyIiwidXNlQWRtaW5BdXRoIiwiVGhlbWVQcm92aWRlciIsInVzZVRoZW1lIiwiaXNEYXJrTW9kZSIsInRvZ2dsZURhcmtNb2RlIiwic2V0RGFya01vZGUiLCJpc0xvYWRlZCIsIm1vY2tVc2VBZG1pbkF1dGhGbiIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJkZXNjcmliZSIsIm1vY2tQdXNoIiwibW9ja1JlcGxhY2UiLCJtb2NrVXNlUm91dGVyIiwicXVlcnlDbGllbnQiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsInB1c2giLCJyZXBsYWNlIiwicHJlZmV0Y2giLCJiYWNrIiwiZm9yd2FyZCIsInJlZnJlc2giLCJpdCIsIm1vY2tMb2dpbiIsInN1Y2Nlc3MiLCJyZW5kZXIiLCJjbGllbnQiLCJBZG1pbkxvZ2luUGFnZSIsImVtYWlsSW5wdXQiLCJzY3JlZW4iLCJnZXRCeUxhYmVsVGV4dCIsInBhc3N3b3JkSW5wdXQiLCJsb2dpbkJ1dHRvbiIsImdldEJ5Um9sZSIsIm5hbWUiLCJmaXJlRXZlbnQiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJ2YWx1ZSIsImNsaWNrIiwid2FpdEZvciIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZW1haWwiLCJyb2xlIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsInJlcmVuZGVyIiwiQWRtaW5EYXNoYm9hcmRQYWdlIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJtb2NrU2Vzc2lvbiIsImlkIiwidG9rZW4iLCJleHBpcmVzQXQiLCJEYXRlIiwibm93IiwidG9JU09TdHJpbmciLCJsb2NhbFN0b3JhZ2VNb2NrIiwiZ2V0SXRlbSIsImtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ3cml0YWJsZSIsImV4cGlyZWRTZXNzaW9uIiwibW9ja1VzZVBhdGhuYW1lIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0NBUUM7QUFtQkQsK0NBQStDO0FBQy9DQSxLQUFLQyxJQUFJLENBQUMseUJBQXlCLElBQU8sQ0FBQTtRQUN4Q0MsY0FBY0YsS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTtnQkFDM0JDLE1BQU1KLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7d0JBQ25CRSxRQUFRTCxLQUFLRyxFQUFFLENBQUMsSUFBTyxDQUFBO2dDQUNyQkcsSUFBSU4sS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTt3Q0FDakJJLFFBQVFQLEtBQUtHLEVBQUUsR0FBR0ssaUJBQWlCLENBQUM7NENBQUVDLE1BQU07NENBQU1DLE9BQU87d0NBQUs7b0NBQ2hFLENB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
4f99c4192e0869a894c8dcc365e845ae
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get isSupabaseAvailable () {
        return isSupabaseAvailable;
    },
    get supabaseClient () {
        return supabaseClient;
    }
});
const _supabasejs = require("@supabase/supabase-js");
// Get Supabase credentials from environment variables
const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'] || '';
const supabaseAnonKey = process.env['NEXT_PUBLIC_SUPABASE_ANON_KEY'] || '';
// Validate that we have the required credentials
const isValidConfig = supabaseUrl && supabaseUrl !== '' && supabaseUrl !== 'https://placeholder.supabase.co' && supabaseAnonKey && supabaseAnonKey !== '' && supabaseAnonKey !== 'placeholder_key';
// Log configuration status
if (!isValidConfig) {
    console.error('❌ Supabase configuration is missing or invalid!');
    console.error('Please check your .env.local file has:');
    console.error('- NEXT_PUBLIC_SUPABASE_URL');
    console.error('- NEXT_PUBLIC_SUPABASE_ANON_KEY');
} else {
    console.log('✅ Supabase client configured successfully');
    console.log('URL:', supabaseUrl);
}
const supabaseClient = isValidConfig ? (0, _supabasejs.createClient)(supabaseUrl, supabaseAnonKey, {
    auth: {
        autoRefreshToken: true,
        persistSession: true,
        detectSessionInUrl: true
    }
}) : null;
const isSupabaseAvailable = ()=>supabaseClient !== null;
// Mirror auth session to cookie for simple client persistence across reloads
// Only set up on client side to avoid SSR issues
if (supabaseClient && typeof window !== 'undefined') {
    supabaseClient.auth.onAuthStateChange((event, session)=>{
        try {
            if (typeof document === 'undefined') return;
            if (session?.access_token) {
                const expires = new Date(Date.now() + (session.expires_in ? session.expires_in * 1000 : 7 * 86400000)).toUTCString();
                document.cookie = `sb_session=1; path=/; expires=${expires}`;
            } else {
                document.cookie = 'sb_session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
            }
        } catch (e) {
        // no-op
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hLmZvdWFkL1NpZGVQcm9qZWN0cy9FbHphdG9uYS1hbGwvRWx6YXRvbmEtd2ViL2FwcHMvd2Vic2l0ZS9zcmMvbGliL3N1cGFiYXNlLWNsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBHZXQgU3VwYWJhc2UgY3JlZGVudGlhbHMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnZbJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCddIHx8ICcnO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnZbJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJ10gfHwgJyc7XG5cbi8vIFZhbGlkYXRlIHRoYXQgd2UgaGF2ZSB0aGUgcmVxdWlyZWQgY3JlZGVudGlhbHNcbmNvbnN0IGlzVmFsaWRDb25maWcgPVxuICBzdXBhYmFzZVVybCAmJlxuICBzdXBhYmFzZVVybCAhPT0gJycgJiZcbiAgc3VwYWJhc2VVcmwgIT09ICdodHRwczovL3BsYWNlaG9sZGVyLnN1cGFiYXNlLmNvJyAmJlxuICBzdXBhYmFzZUFub25LZXkgJiZcbiAgc3VwYWJhc2VBbm9uS2V5ICE9PSAnJyAmJlxuICBzdXBhYmFzZUFub25LZXkgIT09ICdwbGFjZWhvbGRlcl9rZXknO1xuXG4vLyBMb2cgY29uZmlndXJhdGlvbiBzdGF0dXNcbmlmICghaXNWYWxpZENvbmZpZykge1xuICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2UgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQhJyk7XG4gIGNvbnNvbGUuZXJyb3IoJ1BsZWFzZSBjaGVjayB5b3VyIC5lbnYubG9jYWwgZmlsZSBoYXM6Jyk7XG4gIGNvbnNvbGUuZXJyb3IoJy0gTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJyk7XG4gIGNvbnNvbGUuZXJyb3IoJy0gTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknKTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUubG9nKCfinIUgU3VwYWJhc2UgY2xpZW50IGNvbmZpZ3VyZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIGNvbnNvbGUubG9nKCdVUkw6Jywgc3VwYWJhc2VVcmwpO1xufVxuXG4vLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50XG5leHBvcnQgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBpc1ZhbGlkQ29uZmlnXG4gID8gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICAgICAgcGVyc2lzdFNlc3Npb246IHRydWUsXG4gICAgICAgIGRldGVjdFNlc3Npb25JblVybDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSlcbiAgOiBudWxsO1xuXG4vLyBFeHBvcnQgYSBoZWxwZXIgdG8gY2hlY2sgaWYgU3VwYWJhc2UgaXMgYXZhaWxhYmxlXG5leHBvcnQgY29uc3QgaXNTdXBhYmFzZUF2YWlsYWJsZSA9ICgpID0+IHN1cGFiYXNlQ2xpZW50ICE9PSBudWxsO1xuXG4vLyBNaXJyb3IgYXV0aCBzZXNzaW9uIHRvIGNvb2tpZSBmb3Igc2ltcGxlIGNsaWVudCBwZXJzaXN0ZW5jZSBhY3Jvc3MgcmVsb2Fkc1xuLy8gT25seSBzZXQgdXAgb24gY2xpZW50IHNpZGUgdG8gYXZvaWQgU1NSIGlzc3Vlc1xuaWYgKHN1cGFiYXNlQ2xpZW50ICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHN1cGFiYXNlQ2xpZW50LmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoKGV2ZW50LCBzZXNzaW9uKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgICBpZiAoc2Vzc2lvbj8uYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgIGNvbnN0IGV4cGlyZXMgPSBuZXcgRGF0ZShcbiAgICAgICAgICBEYXRlLm5vdygpICtcbiAgICAgICAgICAgIChzZXNzaW9uLmV4cGlyZXNfaW4gPyBzZXNzaW9uLmV4cGlyZXNfaW4gKiAxMDAwIDogNyAqIDg2NDAwMDAwKVxuICAgICAgICApLnRvVVRDU3RyaW5nKCk7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGBzYl9zZXNzaW9uPTE7IHBhdGg9LzsgZXhwaXJlcz0ke2V4cGlyZXN9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9XG4gICAgICAgICAgJ3NiX3Nlc3Npb249OyBwYXRoPS87IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQnO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIG5vLW9wXG4gICAgfVxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJpc1N1cGFiYXNlQXZhaWxhYmxlIiwic3VwYWJhc2VDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJzdXBhYmFzZUFub25LZXkiLCJpc1ZhbGlkQ29uZmlnIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwiY3JlYXRlQ2xpZW50IiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImRldGVjdFNlc3Npb25JblVybCIsIndpbmRvdyIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJzZXNzaW9uIiwiZG9jdW1lbnQiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzIiwiRGF0ZSIsIm5vdyIsImV4cGlyZXNfaW4iLCJ0b1VUQ1N0cmluZyIsImNvb2tpZSIsImUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O1FBc0NhQTtlQUFBQTs7UUFYQUM7ZUFBQUE7Ozs0QkEzQmdCO0FBRTdCLHNEQUFzRDtBQUN0RCxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUMsMkJBQTJCLElBQUk7QUFDL0QsTUFBTUMsa0JBQWtCRixRQUFRQyxHQUFHLENBQUMsZ0NBQWdDLElBQUk7QUFFeEUsaURBQWlEO0FBQ2pELE1BQU1FLGdCQUNKSixlQUNBQSxnQkFBZ0IsTUFDaEJBLGdCQUFnQixxQ0FDaEJHLG1CQUNBQSxvQkFBb0IsTUFDcEJBLG9CQUFvQjtBQUV0QiwyQkFBMkI7QUFDM0IsSUFBSSxDQUFDQyxlQUFlO0lBQ2xCQyxRQUFRQyxLQUFLLENBQUM7SUFDZEQsUUFBUUMsS0FBSyxDQUFDO0lBQ2RELFFBQVFDLEtBQUssQ0FBQztJQUNkRCxRQUFRQyxLQUFLLENBQUM7QUFDaEIsT0FBTztJQUNMRCxRQUFRRSxHQUFHLENBQUM7SUFDWkYsUUFBUUUsR0FBRyxDQUFDLFFBQVFQO0FBQ3RCO0FBR08sTUFBTUQsaUJBQWlCSyxnQkFDMUJJLElBQUFBLHdCQUFZLEVBQUNSLGFBQWFHLGlCQUFpQjtJQUN6Q00sTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtRQUNoQkMsb0JBQW9CO0lBQ3RCO0FBQ0YsS0FDQTtBQUdHLE1BQU1kLHNCQUFzQixJQUFNQyxtQkFBbUI7QUFFNUQsNkVBQTZFO0FBQzdFLGlEQUFpRDtBQUNqRCxJQUFJQSxrQkFBa0IsT0FBT2MsV0FBVyxhQUFhO0lBQ25EZCxlQUFlVSxJQUFJLENBQUNLLGlCQUFpQixDQUFDLENBQUNDLE9BQU9DO1FBQzVDLElBQUk7WUFDRixJQUFJLE9BQU9DLGFBQWEsYUFBYTtZQUNyQyxJQUFJRCxTQUFTRSxjQUFjO2dCQUN6QixNQUFNQyxVQUFVLElBQUlDLEtBQ2xCQSxLQUFLQyxHQUFHLEtBQ0xMLENBQUFBLFFBQVFNLFVBQVUsR0FBR04sUUFBUU0sVUFBVSxHQUFHLE9BQU8sSUFBSSxRQUFPLEdBQy9EQyxXQUFXO2dCQUNiTixTQUFTTyxNQUFNLEdBQUcsQ0FBQyw4QkFBOEIsRUFBRUwsU0FBUztZQUM5RCxPQUFPO2dCQUNMRixTQUFTTyxNQUFNLEdBQ2I7WUFDSjtRQUNGLEVBQUUsT0FBT0MsR0FBRztRQUNWLFFBQVE7UUFDVjtJQUNGO0FBQ0YifQ==
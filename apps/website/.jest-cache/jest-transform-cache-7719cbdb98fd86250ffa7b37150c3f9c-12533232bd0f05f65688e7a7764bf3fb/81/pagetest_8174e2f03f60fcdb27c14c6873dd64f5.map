{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/custom-roadmap/page.test.tsx"],"sourcesContent":["/**\n * Unit Tests for Custom Roadmap Creation (F-UT-001, F-UT-002, F-UT-003, F-UT-004, F-UT-005)\n * Task: F-001 - Custom Roadmap Creation\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport CustomRoadmapPage from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useAuth: jest.fn(),\n    useUserType: jest.fn(),\n  };\n});\n\njest.mock('../../context/LearningTypeContext', () => ({\n  useLearningType: jest.fn(() => ({\n    learningType: null,\n    setLearningType: jest.fn(),\n  })),\n}));\n\nconst mockPush = jest.fn();\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: mockPush,\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n}));\n\nglobal.fetch = jest.fn();\n\njest.mock('lucide-react', () => ({\n  Plus: () => <span>+</span>,\n  Minus: () => <span>-</span>,\n  Check: () => <span>‚úì</span>,\n  Target: () => <span>üéØ</span>,\n  Save: () => <span>üíæ</span>,\n  Loader2: () => <span>‚è≥</span>,\n  AlertCircle: () => <span>‚ö†Ô∏è</span>,\n  CheckCircle: () => <span>‚úÖ</span>,\n  ChevronDown: () => <span>‚ñº</span>,\n  ChevronRight: () => <span>‚ñ∂</span>,\n  Eye: () => <span>üëÅÔ∏è</span>,\n  X: () => <span>‚úï</span>,\n  PanelRightOpen: () => <span>üìÇ</span>,\n  PanelRightClose: () => <span>üìÅ</span>,\n  Clock: () => <span>‚è∞</span>,\n  Zap: () => <span>‚ö°</span>,\n  BookOpen: () => <span>üìñ</span>,\n}));\n\ndescribe('F-UT-001: Component Renders', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1', email: 'user@example.com' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({ data: [] }),\n    });\n  });\n\n  it('should render without errors', async () => {\n    const { container } = render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      expect(container).toBeInTheDocument();\n    });\n  });\n\n  it('should display page title', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      expect(screen.getByText(/Create Your Custom Roadmap/i)).toBeInTheDocument();\n    });\n  });\n});\n\ndescribe('F-UT-002: Plan Details Step', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({ data: [] }),\n    });\n  });\n\n  it('should have plan name input', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      const nameInput = screen.getByPlaceholderText(/e.g., Frontend Mastery Plan/i);\n      expect(nameInput).toBeInTheDocument();\n    });\n  });\n\n  it('should have description textarea', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      const descTextarea = screen.getByPlaceholderText(/Describe your learning goals/i);\n      expect(descTextarea).toBeInTheDocument();\n    });\n  });\n});\n\ndescribe('F-UT-003: Card Selection', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({\n        data: [\n          {\n            id: '1',\n            title: 'Test Card',\n            type: 'learning',\n            categories: [],\n          },\n        ],\n      }),\n    });\n  });\n\n  it('should load cards for selection', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      expect(global.fetch).toHaveBeenCalled();\n    });\n  });\n});\n\ndescribe('F-UT-004: Question Selection', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n  });\n\n  it('should allow question selection', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      // Component should render\n      expect(screen.getByText(/.*/)).toBeTruthy();\n    });\n  });\n});\n\ndescribe('F-UT-SNAPSHOT: Custom Roadmap Creation Snapshot Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({ data: [] }),\n    });\n  });\n\n  it('should match custom roadmap page snapshot', async () => {\n    const { container } = render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      expect(container.firstChild).toMatchSnapshot();\n    });\n  });\n\n  it('should match custom roadmap page snapshot (unauthenticated)', () => {\n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: false,\n      user: null,\n      isLoading: false,\n    });\n    \n    const { container } = render(<CustomRoadmapPage />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n});\n\ndescribe('F-UT-005: Plan Saving', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAuth as jest.Mock).mockReturnValue({\n      isAuthenticated: true,\n      user: { id: '1' },\n      isLoading: false,\n    });\n    \n    (sharedContexts.useUserType as jest.Mock).mockReturnValue({\n      userType: 'self-directed',\n      setUserType: jest.fn(),\n    });\n    \n    Storage.prototype.setItem = jest.fn();\n  });\n\n  it('should save plan to localStorage', async () => {\n    render(<CustomRoadmapPage />);\n    await waitFor(() => {\n      // Plan saving functionality should be available\n      expect(screen.getByText(/.*/)).toBeTruthy();\n    });\n  });\n});\n"],"names":["jest","mock","actual","requireActual","useAuth","fn","useUserType","useLearningType","learningType","setLearningType","useRouter","push","mockPush","replace","prefetch","Plus","span","Minus","Check","Target","Save","Loader2","AlertCircle","CheckCircle","ChevronDown","ChevronRight","Eye","X","PanelRightOpen","PanelRightClose","Clock","Zap","BookOpen","global","fetch","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","isAuthenticated","user","id","email","isLoading","userType","setUserType","mockResolvedValue","ok","json","data","it","container","render","CustomRoadmapPage","waitFor","expect","toBeInTheDocument","screen","getByText","nameInput","getByPlaceholderText","descTextarea","title","type","categories","toHaveBeenCalled","toBeTruthy","firstChild","toMatchSnapshot","Storage","prototype","setItem"],"mappings":"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"}
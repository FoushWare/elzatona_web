{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-login-integration.test.tsx"],"sourcesContent":["/**\n * Admin Login Integration Tests\n *\n * Integration tests for the admin login flow including:\n * - Authentication context integration\n * - Router navigation\n * - API integration\n * - End-to-end login flow\n */\n\n// Set up environment variables before any imports\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\n\n// Mock nuqs before any imports that use it\njest.mock('nuqs', () => ({\n  useQueryState: jest.fn(() => [null, jest.fn()]),\n  useQueryStates: jest.fn(() => [{}, jest.fn()]),\n  parseAsString: jest.fn(),\n  parseAsInteger: jest.fn(),\n  createSearchParamsCache: jest.fn(),\n}));\n\n// Mock Supabase before any imports\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn().mockResolvedValue({ data: null, error: null }),\n      })),\n    })),\n    auth: {\n      signInWithPassword: jest.fn(),\n      signOut: jest.fn(),\n      getUser: jest.fn(),\n      onAuthStateChange: jest.fn(),\n    },\n  })),\n}));\n\n// Mock @tanstack/react-query\njest.mock('@tanstack/react-query', () => {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const React = require('react');\n  return {\n    QueryClientProvider: ({ children }: { children: React.ReactNode }) =>\n      children,\n    QueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQueryClient: jest.fn(() => ({\n      invalidateQueries: jest.fn(),\n      setQueryData: jest.fn(),\n      getQueryData: jest.fn(),\n    })),\n    useQuery: jest.fn(() => ({\n      data: null,\n      isLoading: false,\n      error: null,\n    })),\n    useMutation: jest.fn(() => ({\n      mutate: jest.fn(),\n      mutateAsync: jest.fn(),\n      isLoading: false,\n      error: null,\n    })),\n  };\n});\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { useRouter } from 'next/navigation';\nimport { AdminAuthProvider, ThemeProvider } from '@elzatona/shared-contexts';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport AdminLoginPage from '@/app/admin/login/page';\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: jest.fn(),\n  usePathname: jest.fn(() => '/admin/login'),\n}));\n\n// Mock fetch for API calls\nglobal.fetch = jest.fn();\n\n// Type definitions for mocks\ninterface MockRouter {\n  push: jest.MockedFunction<(url: string) => void>;\n  replace: jest.MockedFunction<(url: string) => void>;\n  prefetch: jest.MockedFunction<(url: string) => void>;\n  back: jest.MockedFunction<() => void>;\n  forward: jest.MockedFunction<() => void>;\n  refresh: jest.MockedFunction<() => void>;\n}\n\ndescribe('Admin Login Integration', () => {\n  const mockPush = jest.fn();\n  const mockUseRouter = useRouter as jest.MockedFunction<typeof useRouter>;\n  const queryClient = new QueryClient();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockUseRouter.mockReturnValue({\n      push: mockPush,\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n      back: jest.fn(),\n      forward: jest.fn(),\n      refresh: jest.fn(),\n    } as MockRouter);\n\n    // Mock successful Supabase auth response\n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: () =>\n        Promise.resolve({\n          user: {\n            id: 'test-user-id',\n            email: 'afouadsoftwareengineer@gmail.com',\n            user_metadata: {\n              role: 'super_admin',\n            },\n          },\n          session: {\n            access_token: 'test-access-token',\n            refresh_token: 'test-refresh-token',\n          },\n        }),\n    });\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('Authentication Flow', () => {\n    it('should complete successful login flow', async () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // Fill in credentials\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n\n      // Submit form\n      fireEvent.click(loginButton);\n\n      // Wait for loading state\n      await waitFor(() => {\n        expect(screen.getByText('Signing In...')).toBeInTheDocument();\n      });\n\n      // Wait for successful login\n      await waitFor(\n        () => {\n          expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n        },\n        { timeout: 3000 }\n      );\n    });\n\n    it('should handle authentication failure', async () => {\n      // Mock failed authentication\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: false,\n        json: () =>\n          Promise.resolve({\n            error: 'Invalid login credentials',\n          }),\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // Fill in wrong credentials\n      fireEvent.change(emailInput, { target: { value: 'wrong@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n\n      // Submit form\n      fireEvent.click(loginButton);\n\n      // Wait for error message\n      await waitFor(() => {\n        expect(\n          screen.getByText(/Invalid login credentials/)\n        ).toBeInTheDocument();\n      });\n    });\n\n    it('should handle network errors during authentication', async () => {\n      // Mock network error\n      (global.fetch as jest.Mock).mockRejectedValue(new Error('Network error'));\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // Fill in credentials\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n\n      // Submit form\n      fireEvent.click(loginButton);\n\n      // Wait for error message\n      await waitFor(() => {\n        expect(\n          screen.getByText('An unexpected error occurred')\n        ).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Session Management', () => {\n    it('should redirect authenticated users away from login page', () => {\n      // Mock authenticated state\n      const mockSupabaseClient = {\n        auth: {\n          getUser: jest.fn().mockResolvedValue({\n            data: {\n              user: {\n                id: 'test-user-id',\n                email: 'afouadsoftwareengineer@gmail.com',\n                user_metadata: { role: 'super_admin' },\n              },\n            },\n          }),\n          onAuthStateChange: jest.fn(),\n          signInWithPassword: jest.fn(),\n          signOut: jest.fn(),\n        },\n      };\n\n      jest.doMock('@supabase/supabase-js', () => ({\n        createClient: () => mockSupabaseClient,\n      }));\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      // Should redirect to dashboard\n      expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n    });\n\n    it('should handle session expiration gracefully', async () => {\n      // Mock expired session\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: false,\n        json: () =>\n          Promise.resolve({\n            error: 'Session expired',\n          }),\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/Session expired/)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Admin Role Validation', () => {\n    it('should validate admin role after successful login', async () => {\n      // Mock successful login with admin role\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: () =>\n          Promise.resolve({\n            user: {\n              id: 'test-user-id',\n              email: 'afouadsoftwareengineer@gmail.com',\n              user_metadata: {\n                role: 'super_admin',\n              },\n            },\n            session: {\n              access_token: 'test-access-token',\n              refresh_token: 'test-refresh-token',\n            },\n          }),\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n      });\n    });\n\n    it('should reject non-admin users', async () => {\n      // Mock successful login but with non-admin role\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: () =>\n          Promise.resolve({\n            user: {\n              id: 'test-user-id',\n              email: 'user@example.com',\n              user_metadata: {\n                role: 'user', // Not an admin role\n              },\n            },\n            session: {\n              access_token: 'test-access-token',\n              refresh_token: 'test-refresh-token',\n            },\n          }),\n      });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      fireEvent.change(emailInput, { target: { value: 'user@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'userpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/Access denied/)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Form State Management', () => {\n    it('should maintain form state during authentication', async () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // Fill form\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n\n      // Verify form state is maintained\n      expect(emailInput).toHaveValue('afouadsoftwareengineer@gmail.com');\n      expect(passwordInput).toHaveValue('ZatonaFoushware$8888');\n\n      // Submit form\n      fireEvent.click(loginButton);\n\n      // During loading, form should still maintain values\n      await waitFor(() => {\n        expect(screen.getByText('Signing In...')).toBeInTheDocument();\n      });\n\n      expect(emailInput).toHaveValue('afouadsoftwareengineer@gmail.com');\n      expect(passwordInput).toHaveValue('ZatonaFoushware$8888');\n    });\n\n    it('should clear form after successful login', async () => {\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // Fill and submit form\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      // Wait for successful login and redirect\n      await waitFor(() => {\n        expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n      });\n\n      // Form should be cleared after successful login\n      expect(emailInput).toHaveValue('');\n      expect(passwordInput).toHaveValue('');\n    });\n  });\n\n  describe('Error Recovery', () => {\n    it('should allow retry after authentication failure', async () => {\n      // Mock first failure, then success\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: false,\n          json: () =>\n            Promise.resolve({\n              error: 'Invalid credentials',\n            }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: () =>\n            Promise.resolve({\n              user: {\n                id: 'test-user-id',\n                email: 'afouadsoftwareengineer@gmail.com',\n                user_metadata: { role: 'super_admin' },\n              },\n              session: {\n                access_token: 'test-access-token',\n                refresh_token: 'test-refresh-token',\n              },\n            }),\n        });\n\n      render(\n        <QueryClientProvider client={queryClient}>\n          <AdminAuthProvider>\n            <ThemeProvider>\n              <AdminLoginPage />\n            </ThemeProvider>\n          </AdminAuthProvider>\n        </QueryClientProvider>\n      );\n\n      const emailInput = screen.getByLabelText('Email Address');\n      const passwordInput = screen.getByLabelText('Password');\n      const loginButton = screen.getByRole('button', { name: 'Sign In' });\n\n      // First attempt with wrong credentials\n      fireEvent.change(emailInput, { target: { value: 'wrong@example.com' } });\n      fireEvent.change(passwordInput, { target: { value: 'wrongpassword' } });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Invalid credentials')).toBeInTheDocument();\n      });\n\n      // Retry with correct credentials\n      fireEvent.change(emailInput, {\n        target: { value: 'afouadsoftwareengineer@gmail.com' },\n      });\n      fireEvent.change(passwordInput, {\n        target: { value: 'ZatonaFoushware$8888' },\n      });\n      fireEvent.click(loginButton);\n\n      await waitFor(() => {\n        expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');\n      });\n    });\n  });\n});\n"],"names":["jest","mock","useQueryState","fn","useQueryStates","parseAsString","parseAsInteger","createSearchParamsCache","createClient","from","select","eq","mockResolvedValue","data","error","auth","signInWithPassword","signOut","getUser","onAuthStateChange","React","require","QueryClientProvider","children","QueryClient","invalidateQueries","setQueryData","getQueryData","useQueryClient","useQuery","isLoading","useMutation","mutate","mutateAsync","useRouter","usePathname","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","global","fetch","describe","mockPush","mockUseRouter","queryClient","beforeEach","clearAllMocks","mockReturnValue","push","replace","prefetch","back","forward","refresh","ok","json","Promise","resolve","user","id","email","user_metadata","role","session","access_token","refresh_token","afterEach","restoreAllMocks","it","render","client","AdminAuthProvider","ThemeProvider","AdminLoginPage","emailInput","screen","getByLabelText","passwordInput","loginButton","getByRole","name","fireEvent","change","target","value","click","waitFor","expect","getByText","toBeInTheDocument","toHaveBeenCalledWith","timeout","mockRejectedValue","Error","mockSupabaseClient","doMock","toHaveValue","mockResolvedValueOnce"],"mappings":"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"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.integration.test.tsx"],"sourcesContent":["/**\n * Integration Tests for Admin Dashboard (A-IT-013, A-IT-014)\n * Task: A-003 - Admin Dashboard\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport AdminDashboard from './page';\nimport * as sharedContexts from '@elzatona/shared-contexts';\n\njest.mock('@elzatona/shared-contexts', () => {\n  const actual = jest.requireActual('../../../../test-utils/mocks/shared-contexts');\n  return {\n    ...actual,\n    useAdminAuth: jest.fn(),\n  };\n});\n\nconst mockRefetch = jest.fn();\njest.mock('@elzatona/shared-hooks', () => ({\n  useAdminStats: jest.fn(() => ({\n    data: {\n      questions: 100,\n      categories: 10,\n      topics: 50,\n      learningCards: 5,\n      learningPlans: 3,\n      frontendTasks: 20,\n      problemSolvingTasks: 15,\n      totalContent: 200,\n      totalUsers: 50,\n    },\n    isLoading: false,\n    error: null,\n    refetch: mockRefetch,\n    isRefetching: false,\n  })),\n}));\n\njest.mock('lucide-react', () => ({\n  BookOpen: () => <span>üìñ</span>,\n  HelpCircle: () => <span>‚ùì</span>,\n  CreditCard: () => <span>üí≥</span>,\n  FileText: () => <span>üìÑ</span>,\n  Settings: () => <span>‚öôÔ∏è</span>,\n  Code: () => <span>üíª</span>,\n  Calculator: () => <span>üî¢</span>,\n  BarChart3: () => <span>üìä</span>,\n  FolderOpen: () => <span>üìÅ</span>,\n  Users: () => <span>üë•</span>,\n  Database: () => <span>üóÑÔ∏è</span>,\n  TrendingUp: () => <span>üìà</span>,\n  CheckCircle: () => <span>‚úÖ</span>,\n  Clock: () => <span>‚è∞</span>,\n  Target: () => <span>üéØ</span>,\n  Activity: () => <span>üìä</span>,\n  Zap: () => <span>‚ö°</span>,\n  Star: () => <span>‚≠ê</span>,\n  ArrowRight: () => <span>‚Üí</span>,\n  Plus: () => <span>+</span>,\n  Eye: () => <span>üëÅÔ∏è</span>,\n  Edit: () => <span>‚úèÔ∏è</span>,\n  Trash2: () => <span>üóëÔ∏è</span>,\n  RefreshCw: () => <span>üîÑ</span>,\n  AlertCircle: () => <span>‚ö†Ô∏è</span>,\n  Info: () => <span>‚ÑπÔ∏è</span>,\n  ExternalLink: () => <span>üîó</span>,\n}));\n\nconst mockPush = jest.fn();\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: mockPush,\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n}));\n\ndescribe('A-IT-013: Dashboard Navigation', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAdminAuth as jest.Mock).mockReturnValue({\n      user: {\n        id: '1',\n        email: 'admin@example.com',\n        role: 'super_admin',\n        name: 'Admin User',\n      },\n    });\n  });\n\n  it('should display all admin menu items', () => {\n    render(<AdminDashboard />);\n    \n    expect(screen.getByText(/Questions/i)).toBeInTheDocument();\n    expect(screen.getByText(/Content Management/i)).toBeInTheDocument();\n    expect(screen.getByText(/Frontend Tasks/i)).toBeInTheDocument();\n    expect(screen.getByText(/Problem Solving/i)).toBeInTheDocument();\n    expect(screen.getByText(/User Management/i)).toBeInTheDocument();\n  });\n\n  it('should display quick actions', () => {\n    render(<AdminDashboard />);\n    \n    expect(screen.getByText(/Add New Question/i)).toBeInTheDocument();\n    expect(screen.getByText(/Manage Learning Cards/i)).toBeInTheDocument();\n  });\n});\n\ndescribe('A-IT-014: Stats Integration', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    (sharedContexts.useAdminAuth as jest.Mock).mockReturnValue({\n      user: {\n        id: '1',\n        email: 'admin@example.com',\n        role: 'super_admin',\n        name: 'Admin User',\n      },\n    });\n  });\n\n  it('should display stats from useAdminStats hook', () => {\n    render(<AdminDashboard />);\n    \n    // Stats should be displayed\n    expect(screen.getByText(/100/)).toBeInTheDocument(); // questions count\n  });\n\n  it('should handle loading state', () => {\n    const { useAdminStats } = require('@elzatona/shared-hooks');\n    useAdminStats.mockReturnValue({\n      data: null,\n      isLoading: true,\n      error: null,\n      refetch: mockRefetch,\n      isRefetching: false,\n    });\n    \n    const { rerender } = render(<AdminDashboard />);\n    rerender(<AdminDashboard />);\n    \n    // Should show loading state\n    expect(screen.queryByText(/100/)).not.toBeInTheDocument();\n  });\n});\n"],"names":["jest","mock","actual","requireActual","useAdminAuth","fn","useAdminStats","data","questions","categories","topics","learningCards","learningPlans","frontendTasks","problemSolvingTasks","totalContent","totalUsers","isLoading","error","refetch","mockRefetch","isRefetching","BookOpen","span","HelpCircle","CreditCard","FileText","Settings","Code","Calculator","BarChart3","FolderOpen","Users","Database","TrendingUp","CheckCircle","Clock","Target","Activity","Zap","Star","ArrowRight","Plus","Eye","Edit","Trash2","RefreshCw","AlertCircle","Info","ExternalLink","useRouter","push","mockPush","replace","prefetch","describe","beforeEach","clearAllMocks","sharedContexts","mockReturnValue","user","id","email","role","name","it","render","AdminDashboard","expect","screen","getByText","toBeInTheDocument","require","rerender","queryByText","not"],"mappings":"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"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-components/src/lib/common/OptimizedImage.tsx"],"sourcesContent":["import React from 'react';\nimport Image from 'next/image';\n\ninterface OptimizedImageProps {\n  src: string;\n  alt: string;\n  width: number;\n  height: number;\n  className?: string;\n  priority?: boolean;\n  quality?: number;\n  placeholder?: 'blur' | 'empty';\n  sizes?: string;\n  fill?: boolean;\n  style?: React.CSSProperties;\n  onClick?: () => void;\n  loading?: 'lazy' | 'eager';\n}\n\n/**\n * OptimizedImage Component\n *\n * Implements comprehensive image optimization for better performance and FCP:\n * - Automatic WebP conversion with fallbacks\n * - Responsive images with srcset\n * - Lazy loading for below-the-fold images\n * - Priority loading for above-the-fold images\n * - Blur placeholders for better perceived performance\n * - Proper dimensions to prevent CLS\n * - CDN optimization via Vercel/Next.js\n *\n * @version 1.1 - Enhanced with Next.js Image integration and better type safety\n */\nexport const OptimizedImage: React.FC<OptimizedImageProps> = ({\n  src,\n  alt,\n  width,\n  height,\n  className = '',\n  priority = false,\n  quality = 85,\n  placeholder = 'blur',\n  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n  fill = false,\n  style,\n  onClick,\n  loading = 'lazy',\n}) => {\n  // Determine if this image should have priority loading\n  // Priority is typically for above-the-fold images (hero, logo, etc.)\n  const shouldPrioritize = priority || loading === 'eager';\n\n  // Handle external images (like CDN images)\n  const isExternalImage = src.startsWith('http');\n\n  if (isExternalImage) {\n    // For external images, use Next.js Image component with optimization\n    return (\n      <Image\n        src={src}\n        alt={alt}\n        width={width}\n        height={height}\n        className={className}\n        style={style}\n        priority={shouldPrioritize}\n        sizes={sizes}\n        quality={quality}\n        placeholder={placeholder}\n        onLoad={() => {\n          // Add fade-in effect for better UX\n          const target = document.querySelector(\n            `img[src=\"${src}\"]`\n          ) as HTMLImageElement;\n          if (target) {\n            target.style.opacity = '0';\n            target.style.transition = 'opacity 0.3s ease-in-out';\n            setTimeout(() => {\n              target.style.opacity = '1';\n            }, 50);\n          }\n        }}\n      />\n    );\n  }\n\n  // For local images, use Next.js Image component with full optimization\n  return (\n    <div\n      className={`relative ${className}`}\n      style={{\n        width: fill ? '100%' : width,\n        height: fill ? '100%' : height,\n        ...style,\n      }}\n      onClick={onClick}\n    >\n      <Image\n        src={src}\n        alt={alt}\n        width={fill ? undefined : width}\n        height={fill ? undefined : height}\n        fill={fill}\n        priority={shouldPrioritize}\n        quality={quality}\n        placeholder={placeholder}\n        sizes={sizes}\n        className='object-cover'\n        style={{\n          objectFit: 'cover',\n          objectPosition: 'center',\n        }}\n        // Enable blur placeholder for better perceived performance\n        blurDataURL='data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q=='\n      />\n    </div>\n  );\n};\n\nexport default OptimizedImage;\n"],"names":["OptimizedImage","src","alt","width","height","className","priority","quality","placeholder","sizes","fill","style","onClick","loading","shouldPrioritize","isExternalImage","startsWith","Image","onLoad","target","document","querySelector","opacity","transition","setTimeout","div","undefined","objectFit","objectPosition","blurDataURL"],"mappings":";;;;;;;;;;;QAiCaA;eAAAA;;QAsFb;eAAA;;;;8DAvHkB;8DACA;;;;;;AAgCX,MAAMA,iBAAgD,CAAC,EAC5DC,GAAG,EACHC,GAAG,EACHC,KAAK,EACLC,MAAM,EACNC,YAAY,EAAE,EACdC,WAAW,KAAK,EAChBC,UAAU,EAAE,EACZC,cAAc,MAAM,EACpBC,QAAQ,0DAA0D,EAClEC,OAAO,KAAK,EACZC,KAAK,EACLC,OAAO,EACPC,UAAU,MAAM,EACjB;IACC,uDAAuD;IACvD,qEAAqE;IACrE,MAAMC,mBAAmBR,YAAYO,YAAY;IAEjD,2CAA2C;IAC3C,MAAME,kBAAkBd,IAAIe,UAAU,CAAC;IAEvC,IAAID,iBAAiB;QACnB,qEAAqE;QACrE,qBACE,qBAACE,cAAK;YACJhB,KAAKA;YACLC,KAAKA;YACLC,OAAOA;YACPC,QAAQA;YACRC,WAAWA;YACXM,OAAOA;YACPL,UAAUQ;YACVL,OAAOA;YACPF,SAASA;YACTC,aAAaA;YACbU,QAAQ;gBACN,mCAAmC;gBACnC,MAAMC,SAASC,SAASC,aAAa,CACnC,CAAC,SAAS,EAAEpB,IAAI,EAAE,CAAC;gBAErB,IAAIkB,QAAQ;oBACVA,OAAOR,KAAK,CAACW,OAAO,GAAG;oBACvBH,OAAOR,KAAK,CAACY,UAAU,GAAG;oBAC1BC,WAAW;wBACTL,OAAOR,KAAK,CAACW,OAAO,GAAG;oBACzB,GAAG;gBACL;YACF;;IAGN;IAEA,uEAAuE;IACvE,qBACE,qBAACG;QACCpB,WAAW,CAAC,SAAS,EAAEA,WAAW;QAClCM,OAAO;YACLR,OAAOO,OAAO,SAASP;YACvBC,QAAQM,OAAO,SAASN;YACxB,GAAGO,KAAK;QACV;QACAC,SAASA;kBAET,cAAA,qBAACK,cAAK;YACJhB,KAAKA;YACLC,KAAKA;YACLC,OAAOO,OAAOgB,YAAYvB;YAC1BC,QAAQM,OAAOgB,YAAYtB;YAC3BM,MAAMA;YACNJ,UAAUQ;YACVP,SAASA;YACTC,aAAaA;YACbC,OAAOA;YACPJ,WAAU;YACVM,OAAO;gBACLgB,WAAW;gBACXC,gBAAgB;YAClB;YACA,2DAA2D;YAC3DC,aAAY;;;AAIpB;MAEA,WAAe7B"}
{"version":3,"sources":["/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/content-management/page.test.tsx"],"sourcesContent":["/**\n * Unit Tests for Admin Content Management (A-UT-014, A-UT-015)\n * Task: A-004 - Admin Content Management\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport UnifiedAdminPage from './page';\n\n// Mock TanStack Query hooks\nconst mockCardsData = { data: [], count: 0 };\nconst mockPlansData = { data: [], count: 0 };\nconst mockCategoriesData = { data: [], count: 0 };\nconst mockTopicsData = { data: [], count: 0 };\nconst mockQuestionsData = { data: [], pagination: { totalCount: 0 } };\n\njest.mock('@elzatona/shared-hooks', () => ({\n  useCards: jest.fn(() => ({\n    data: mockCardsData,\n    isLoading: false,\n    error: null,\n  })),\n  usePlans: jest.fn(() => ({\n    data: mockPlansData,\n    isLoading: false,\n    error: null,\n  })),\n  useCategories: jest.fn(() => ({\n    data: mockCategoriesData,\n    isLoading: false,\n    error: null,\n  })),\n  useTopics: jest.fn(() => ({\n    data: mockTopicsData,\n    isLoading: false,\n    error: null,\n  })),\n  useQuestionsUnified: jest.fn(() => ({\n    data: mockQuestionsData,\n    isLoading: false,\n    error: null,\n  })),\n  useCreateCard: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useUpdateCard: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useDeleteCard: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useCreatePlan: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useUpdatePlan: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useDeletePlan: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useCreateCategory: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useUpdateCategory: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useDeleteCategory: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useCreateTopic: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useUpdateTopic: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useDeleteTopic: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useCreateQuestion: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useUpdateQuestion: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useDeleteQuestion: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    isPending: false,\n  })),\n  useNotificationActions: jest.fn(() => ({\n    notifyContentUpdate: jest.fn(),\n    notifyAdminAction: jest.fn(),\n  })),\n}));\n\njest.mock('@tanstack/react-query', () => ({\n  useQueryClient: () => ({\n    invalidateQueries: jest.fn(),\n  }),\n}));\n\njest.mock('@elzatona/shared-components', () => ({\n  BulkOperations: () => <div data-testid=\"bulk-operations\">Bulk Operations</div>,\n  useToast: () => ({\n    showSuccess: jest.fn(),\n    showError: jest.fn(),\n    toasts: [],\n    removeToast: jest.fn(),\n  }),\n  ToastContainer: () => <div data-testid=\"toast-container\">Toasts</div>,\n  Button: ({ children, onClick, ...props }: any) => (\n    <button onClick={onClick} {...props}>{children}</button>\n  ),\n  Card: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  CardContent: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  CardHeader: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  CardTitle: ({ children }: { children: React.ReactNode }) => <h2>{children}</h2>,\n  Input: ({ onChange, value, ...props }: any) => (\n    <input onChange={onChange} value={value} {...props} />\n  ),\n  Select: ({ children, onValueChange, value }: any) => (\n    <select value={value} onChange={(e) => onValueChange?.(e.target.value)}>\n      {children}\n    </select>\n  ),\n  SelectContent: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  SelectItem: ({ children, value }: any) => <option value={value}>{children}</option>,\n  SelectTrigger: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n  SelectValue: () => <span>Select...</span>,\n  Badge: ({ children }: { children: React.ReactNode }) => <span>{children}</span>,\n  Modal: ({ children, open }: any) => open ? <div>{children}</div> : null,\n}));\n\njest.mock('lucide-react', () => ({\n  ChevronDown: () => <span>‚ñº</span>,\n  ChevronRight: () => <span>‚ñ∂</span>,\n  Plus: () => <span>+</span>,\n  Edit: () => <span>‚úèÔ∏è</span>,\n  Trash2: () => <span>üóëÔ∏è</span>,\n  MessageSquare: () => <span>üí¨</span>,\n  BookOpen: () => <span>üìñ</span>,\n  Layers: () => <span>üìö</span>,\n  Puzzle: () => <span>üß©</span>,\n  Network: () => <span>üåê</span>,\n  Users: () => <span>üë•</span>,\n  Calendar: () => <span>üìÖ</span>,\n  Target: () => <span>üéØ</span>,\n}));\n\ndescribe('A-UT-014: Component Renders', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should render without errors', async () => {\n    const { container } = render(<UnifiedAdminPage />);\n    await waitFor(() => {\n      expect(container).toBeInTheDocument();\n    });\n  });\n\n  it('should display unified admin page title', async () => {\n    render(<UnifiedAdminPage />);\n    await waitFor(() => {\n      // Page should render (check for any content)\n      expect(screen.getByTestId('bulk-operations') || screen.getByText(/.*/)).toBeTruthy();\n    });\n  });\n});\n\ndescribe('A-UT-015: Content Sections', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should display stats cards', async () => {\n    render(<UnifiedAdminPage />);\n    await waitFor(() => {\n      // Stats should be calculated from data\n      expect(screen.getByText(/.*/)).toBeTruthy();\n    });\n  });\n\n  it('should handle loading states', () => {\n    const { useCards } = require('@elzatona/shared-hooks');\n    useCards.mockReturnValue({\n      data: null,\n      isLoading: true,\n      error: null,\n    });\n\n    const { rerender } = render(<UnifiedAdminPage />);\n    rerender(<UnifiedAdminPage />);\n    \n    // Should handle loading\n    expect(screen.queryByText(/Error/i)).not.toBeInTheDocument();\n  });\n});\n\ndescribe('A-UT-SNAPSHOT: Admin Content Management Snapshot Tests', () => {\n  it('should match content management page snapshot', () => {\n    const { container } = render(<UnifiedAdminPage />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('should match content management page snapshot (loading state)', () => {\n    const { useCards } = require('@elzatona/shared-hooks');\n    useCards.mockReturnValue({\n      data: null,\n      isLoading: true,\n      error: null,\n    });\n    \n    const { container } = render(<UnifiedAdminPage />);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n});\n\n"],"names":["jest","mock","useCards","fn","data","mockCardsData","isLoading","error","usePlans","mockPlansData","useCategories","mockCategoriesData","useTopics","mockTopicsData","useQuestionsUnified","mockQuestionsData","useCreateCard","mutateAsync","isPending","useUpdateCard","useDeleteCard","useCreatePlan","useUpdatePlan","useDeletePlan","useCreateCategory","useUpdateCategory","useDeleteCategory","useCreateTopic","useUpdateTopic","useDeleteTopic","useCreateQuestion","useUpdateQuestion","useDeleteQuestion","useNotificationActions","notifyContentUpdate","notifyAdminAction","useQueryClient","invalidateQueries","BulkOperations","div","data-testid","useToast","showSuccess","showError","toasts","removeToast","ToastContainer","Button","children","onClick","props","button","Card","CardContent","CardHeader","CardTitle","h2","Input","onChange","value","input","Select","onValueChange","select","e","target","SelectContent","SelectItem","option","SelectTrigger","SelectValue","span","Badge","Modal","open","ChevronDown","ChevronRight","Plus","Edit","Trash2","MessageSquare","BookOpen","Layers","Puzzle","Network","Users","Calendar","Target","count","pagination","totalCount","describe","beforeEach","clearAllMocks","it","container","render","UnifiedAdminPage","waitFor","expect","toBeInTheDocument","screen","getByTestId","getByText","toBeTruthy","require","mockReturnValue","rerender","queryByText","not","firstChild","toMatchSnapshot"],"mappings":"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"}
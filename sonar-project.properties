# SonarQube/SonarCloud Project Configuration
# v1.0 - Code Quality and Security Analysis

# Project identification
# Repository: https://github.com/FoushWare/elzatona_web
# Note: Project key is FoushWare_GreatFrontendHub (kept from original import)
sonar.projectKey=FoushWare_GreatFrontendHub
sonar.organization=foushware

# This is the name and version displayed in the SonarCloud UI.
sonar.projectName=elzatona_web
sonar.projectVersion=1.0

# Branch configuration
# Note: Main branch should be configured in SonarCloud project settings
# For main branch analysis, SonarCloud should automatically detect it
# For PR analysis, the branch name is set via environment variable in workflow
# Only set sonar.branch.name for non-main branch analysis (not needed for main)

# Source code location
# Only analyze source code directories (apps, libs), NOT node_modules or dependencies
# IMPORTANT: Specify exact source paths to avoid node_modules
sonar.sources=apps/admin/src,apps/website/src,libs
sonar.sourceEncoding=UTF-8

# Exclusions - CRITICAL: Exclude node_modules and all dependencies
# SonarQube should ONLY analyze YOUR code, not third-party dependencies
# Multiple patterns to ensure node_modules is excluded at all levels
# NOTE: Test files are NOT excluded here - use sonar.test.inclusions/exclusions instead
# Also exclude binary files (images, fonts, icons) that cause encoding warnings
sonar.exclusions=**/node_modules/**,**/node_modules,node_modules/**,node_modules,**/dist/**,**/.next/**,**/build/**,**/coverage/**,**/__mocks__/**,**/.git/**,**/Rest/**,**/scripts/**,**/playwright-report/**,**/test-results/**,**/.vercel/**,**/storybook-static/**,**/.scannerwork/**,**/.sonar/**,**/package-lock.json,**/package.json,**/*.ico,**/*.png,**/*.jpg,**/*.jpeg,**/*.gif,**/*.svg,**/*.woff,**/*.woff2,**/*.ttf,**/*.eot,**/*.pdf,**/*.zip,**/*.tar,**/*.gz

# Test inclusions - ONLY include admin login tests for now
# Gradually add more tests later by adding patterns to this list
# Format: Add new test patterns separated by commas
sonar.test.inclusions=**/admin/login/**/*.test.tsx,**/admin/login/**/*.spec.tsx,**/admin/login/**/*.test.ts,**/admin/login/**/*.spec.ts,tests/e2e/admin/admin-login*.spec.ts

# Test exclusions - Exclude all other tests (not in inclusions) and build artifacts
# This ensures only admin login tests are analyzed
# All other test files are excluded here
sonar.test.exclusions=**/node_modules/**,**/dist/**,**/.next/**,**/build/**,**/coverage/**,**/.scannerwork/**,**/.sonar/**

# TypeScript/JavaScript configuration
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Code coverage exclusions
# Exclude tests, node_modules, and build artifacts from coverage
sonar.coverage.exclusions=**/*.spec.ts,**/*.test.ts,**/*.spec.tsx,**/*.test.tsx,**/__tests__/**,**/__mocks__/**,**/node_modules/**,**/dist/**,**/.next/**,**/build/**,**/Rest/**,**/scripts/**,**/.scannerwork/**,**/.sonar/**

# Language settings
sonar.language=ts,js,tsx,jsx

# Analysis parameters
sonar.typescript.tsconfigPath=tsconfig.json
sonar.javascript.file.suffixes=.js,.jsx
sonar.typescript.file.suffixes=.ts,.tsx

# Duplication detection
# Exclude node_modules and build artifacts from duplication detection
sonar.cpd.exclusions=**/*.spec.ts,**/*.test.ts,**/*.spec.tsx,**/*.test.tsx,**/node_modules/**,**/dist/**,**/.next/**,**/build/**,**/.scannerwork/**,**/.sonar/**

# Security hotspot exclusions (if needed)
# sonar.security.hotspots.exclusions=**/node_modules/**

# Issue exclusions (for known false positives)
# sonar.issue.ignore.multicriteria=e1,e2
# sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S1128
# sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.ts

# Quality gate
# Set to false to not fail the build on quality gate failure
# Set to true to fail the build if quality gate doesn't pass
sonar.qualitygate.wait=false


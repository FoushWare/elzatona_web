
> zatona-web@1.0.0 test
> nx run-many --target=test --all


 NX   Running target test for 12 projects:

- shared-components
- shared-contexts
- shared-atoms
- shared-hooks
- shared-types
- database
- website
- admin
- utils
- auth
- ui
- zatona-web



> nx run shared-hooks:test

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-types:test  [local cache]

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-atoms:test  [local cache]

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-contexts:test  [local cache]

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-components:test

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run admin:test


 NX   > Couldn't find any `pages` or `app` directory. Please create one under the project root

Pass --verbose to see the stacktrace.


> nx run auth:test  [local cache]

No tests found, exiting with code 0

> nx run utils:test  [local cache]

No tests found, exiting with code 0

> nx run ui:test  [local cache]

No tests found, exiting with code 0

> nx run database:test  [local cache]

PASS database libs/database/src/lib/__tests__/database-switching.test.ts
  Database Switching
    ✓ should create Firebase service when NEXT_PUBLIC_USE_FIREBASE=true (5 ms)
    ✓ should create Supabase service when NEXT_PUBLIC_USE_FIREBASE=false (1 ms)
    ✓ should default to Supabase when NEXT_PUBLIC_USE_FIREBASE is not set (1 ms)
  Database Service Usage
    ✓ should handle get operation (1 ms)
    ✓ should handle add operation
    ✓ should handle error cases
  Database Integration
    ✓ should work with React Context

Test Suites: 1 passed, 1 total
Tests:       7 passed, 7 total
Snapshots:   0 total
Time:        0.387 s
Ran all test suites.

> nx run website:test

● Validation Warning:

  Unknown option "coverageProvider" with value "v8" was found.
  This is probably a typing mistake. Fixing it will remove this message.

  Configuration Documentation:
  https://jestjs.io/docs/configuration

FAIL apps/website/src/__tests__/navbar-simple.test.tsx
  ● Console

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      20 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      21 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 22 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      23 | }
      24 |
      25 | type Language = 'en' | 'ar';

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/LanguageContext.tsx:22:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:9:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      14 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      15 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 16 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      17 | }
      18 |
      19 | interface MobileMenuContextType {

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/MobileMenuContext.tsx:16:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:10:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      12 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      13 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 14 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      15 | }
      16 | import React, {
      17 |   useState,

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/NotificationContext.tsx:14:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:11:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      12 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      13 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 14 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      15 | }
      16 | import React, {
      17 |   useState,

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/OnboardingContext.tsx:14:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:12:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      20 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      21 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 22 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      23 | }
      24 |
      25 | interface ThemeContextType {

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/ThemeContext.tsx:22:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:13:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      12 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      13 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 14 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      15 | }
      16 | import React, {
      17 |   useState,

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:14:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:15:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      22 |       'SUPABASE_SERVICE_ROLE_KEY'
      23 |     ] as string;
    > 24 |     supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |                ^
      25 |   });
      26 | }
      27 |

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at createClient (../../libs/shared-contexts/src/lib/UserPreferencesContext.tsx:24:16)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      50 |
      51 |   it('renders Sign In by default (unauthenticated)', () => {
    > 52 |     render(<NavbarSimple />);
         |           ^
      53 |     expect(screen.getByText('Sign In')).toBeInTheDocument();
      54 |   });
      55 |

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at recoverFromConcurrentError (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      50 |
      51 |   it('renders Sign In by default (unauthenticated)', () => {
    > 52 |     render(<NavbarSimple />);
         |           ^
      53 |     expect(screen.getByText('Sign In')).toBeInTheDocument();
      54 |   });
      55 |

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

    console.error
      The above error occurred in the <NavbarSimple> component:
      
          at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:31:47)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      50 |
      51 |   it('renders Sign In by default (unauthenticated)', () => {
    > 52 |     render(<NavbarSimple />);
         |           ^
      53 |     expect(screen.getByText('Sign In')).toBeInTheDocument();
      54 |   });
      55 |

      at logCapturedError (../../node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (../../node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (../../node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (../../node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (../../node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (../../node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      59 |       JSON.stringify({ isAuthenticated: true, isLoading: false })
      60 |     );
    > 61 |     render(<NavbarSimple />);
         |           ^
      62 |     expect(screen.getByText('Dashboard')).toBeInTheDocument();
      63 |   });
      64 | });

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at recoverFromConcurrentError (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      59 |       JSON.stringify({ isAuthenticated: true, isLoading: false })
      60 |     );
    > 61 |     render(<NavbarSimple />);
         |           ^
      62 |     expect(screen.getByText('Dashboard')).toBeInTheDocument();
      63 |   });
      64 | });

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

    console.error
      The above error occurred in the <NavbarSimple> component:
      
          at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:31:47)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      59 |       JSON.stringify({ isAuthenticated: true, isLoading: false })
      60 |     );
    > 61 |     render(<NavbarSimple />);
         |           ^
      62 |     expect(screen.getByText('Dashboard')).toBeInTheDocument();
      63 |   });
      64 | });

      at logCapturedError (../../node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (../../node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (../../node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (../../node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (../../node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (../../node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

  ● NavbarSimple › renders Sign In by default (unauthenticated)

    useUserType must be used within a UserTypeProvider

      132 |   const context = useContext(UserTypeContext);
      133 |   if (context === undefined) {
    > 134 |     throw new Error('useUserType must be used within a UserTypeProvider');
          |           ^
      135 |   }
      136 |   return context;
      137 | };

      at useUserType (../../libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
      at NavbarSimple (src/components/NavbarSimple.tsx:48:48)
      at renderWithHooks (../../node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (../../node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (../../node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

  ● NavbarSimple › renders Dashboard when persisted auth is set in sessionStorage

    useUserType must be used within a UserTypeProvider

      132 |   const context = useContext(UserTypeContext);
      133 |   if (context === undefined) {
    > 134 |     throw new Error('useUserType must be used within a UserTypeProvider');
          |           ^
      135 |   }
      136 |   return context;
      137 | };

      at useUserType (../../libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
      at NavbarSimple (src/components/NavbarSimple.tsx:48:48)
      at renderWithHooks (../../node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (../../node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (../../node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

FAIL tests/unit/learning-type-context.test.tsx
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://hpnewqkvpnthpohvxcmq.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.error
      Warning: An update to LearningTypeProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at children (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/context/LearningTypeContext.tsx:38:3)

      238 |
      239 |   const setLearningType = useCallback((type: LearningType) => {
    > 240 |     setLearningTypeState(type);
          |     ^
      241 |     // Optionally sync preference to API here in future
      242 |   }, []);
      243 |

      at printWarning (../../node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (../../node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (../../node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (../../node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setLearningTypeState (src/context/LearningTypeContext.tsx:240:5)
      at setLearningType (../../tests/unit/learning-type-context.test.tsx:15:30)
      at HTMLUnknownElement.callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4164:14)
      at HTMLUnknownElement.callTheUserObjectsOperation (../../node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at invokeGuardedCallbackAndCatchFirstError (../../node_modules/react-dom/cjs/react-dom.development.js:4291:25)
      at executeDispatch (../../node_modules/react-dom/cjs/react-dom.development.js:9041:3)
      at processDispatchQueueItemsInOrder (../../node_modules/react-dom/cjs/react-dom.development.js:9073:7)
      at processDispatchQueue (../../node_modules/react-dom/cjs/react-dom.development.js:9086:5)
      at dispatchEventsForPlugins (../../node_modules/react-dom/cjs/react-dom.development.js:9097:3)
      at ../../node_modules/react-dom/cjs/react-dom.development.js:9288:12
      at batchedUpdates$1 (../../node_modules/react-dom/cjs/react-dom.development.js:26179:12)
      at batchedUpdates (../../node_modules/react-dom/cjs/react-dom.development.js:3991:12)
      at dispatchEventForPluginEventSystem (../../node_modules/react-dom/cjs/react-dom.development.js:9287:3)
      at dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay (../../node_modules/react-dom/cjs/react-dom.development.js:6465:5)
      at dispatchEvent (../../node_modules/react-dom/cjs/react-dom.development.js:6457:5)
      at dispatchDiscreteEvent (../../node_modules/react-dom/cjs/react-dom.development.js:6430:5)
      at HTMLDivElement.callTheUserObjectsOperation (../../node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLButtonElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at fireAnEvent (../../node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)
      at HTMLButtonElementImpl.click (../../node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:85:5)
      at HTMLButtonElement.click (../../node_modules/jsdom/lib/jsdom/living/generated/HTMLElement.js:108:34)
      at Object.click (../../tests/unit/learning-type-context.test.tsx:41:34)

    console.error
      Warning: An update to LearningTypeProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at children (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/context/LearningTypeContext.tsx:38:3)

      128 |       (_event, session) => {
      129 |         const newUserId = session?.user?.id ?? null;
    > 130 |         setUserId(newUserId);
          |         ^
      131 |
      132 |         // Reload learning type when auth state changes
      133 |         const universalTypeKey = buildStorageKey(null, 'type');

      at printWarning (../../node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (../../node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (../../node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (../../node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at Object.setUserId [as callback] (src/context/LearningTypeContext.tsx:130:9)
      at ../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:2144:49
      at SupabaseAuthClient._useSession (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:1501:20)
      at SupabaseAuthClient._emitInitialSession (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:2136:12)

    console.error
      Warning: An update to LearningTypeProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at children (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/context/LearningTypeContext.tsx:38:3)

      143 |               rawType === 'custom'
      144 |             ) {
    > 145 |               setLearningTypeState(rawType);
          |               ^
      146 |             }
      147 |           }
      148 |         } catch (_e) {

      at printWarning (../../node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (../../node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (../../node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (../../node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at Object.setLearningTypeState [as callback] (src/context/LearningTypeContext.tsx:145:15)
      at ../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:2144:49
      at SupabaseAuthClient._useSession (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:1501:20)
      at SupabaseAuthClient._emitInitialSession (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:2136:12)

    console.error
      Warning: An update to LearningTypeProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at children (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/context/LearningTypeContext.tsx:38:3)

      78 |         if (!mounted) return;
      79 |         const newUserId = data.user?.id ?? null;
    > 80 |         setUserId(newUserId);
         |         ^
      81 |
      82 |         // When userId changes (including logout), reload learning type from appropriate storage
      83 |         const universalTypeKey = buildStorageKey(null, 'type');

      at printWarning (../../node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (../../node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (../../node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (../../node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setUserId (src/context/LearningTypeContext.tsx:80:9)

    console.error
      Warning: An update to LearningTypeProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at children (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/context/LearningTypeContext.tsx:38:3)

      93 |               rawType === 'custom'
      94 |             ) {
    > 95 |               setLearningTypeState(rawType);
         |               ^
      96 |             }
      97 |           }
      98 |         } catch (_e) {

      at printWarning (../../node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (../../node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (../../node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (../../node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setLearningTypeState (src/context/LearningTypeContext.tsx:95:15)

  ● LearningTypeContext › updates learning type

    expect(element).toHaveTextContent()

    Expected element to have text content:
      free-style
    Received:
      guided

      40 |     );
      41 |     screen.getByText('set-free').click();
    > 42 |     expect(screen.getByTestId('type')).toHaveTextContent('free-style');
         |                                        ^
      43 |   });
      44 | });
      45 |

      at Object.toHaveTextContent (../../tests/unit/learning-type-context.test.tsx:42:40)

FAIL tests/admin/admin-ui-components.test.tsx
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.error
      Error: Uncaught [Error: useAdminAuth must be used within an AdminAuthProvider]
          at Object.<anonymous> (tests/admin/admin-ui-components.test.tsx:601:13) {
        detail: Error: useAdminAuth must be used within an AdminAuthProvider
            at useAdminAuth (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/AdminAuthContext.tsx:325:11)
            at AdminDashboard (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.tsx:98:32)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-ui-components.test.tsx:601:13)
            at processTicksAndRejections (node:internal/process/task_queues:105:5),
        type: 'unhandled exception'
      }

      599 |       const DashboardPage = (await import('@/app/admin/dashboard/page'))
      600 |         .default;
    > 601 |       render(<DashboardPage />);
          |             ^
      602 |
      603 |       await waitFor(() => {
      604 |         expect(screen.getByText('100')).toBeInTheDocument();

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:601:13)

    console.error
      Error: Uncaught [Error: useAdminAuth must be used within an AdminAuthProvider]
          at Object.<anonymous> (tests/admin/admin-ui-components.test.tsx:601:13) {
        detail: Error: useAdminAuth must be used within an AdminAuthProvider
            at useAdminAuth (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/AdminAuthContext.tsx:325:11)
            at AdminDashboard (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.tsx:98:32)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at recoverFromConcurrentError (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-ui-components.test.tsx:601:13)
            at processTicksAndRejections (node:internal/process/task_queues:105:5),
        type: 'unhandled exception'
      }

      599 |       const DashboardPage = (await import('@/app/admin/dashboard/page'))
      600 |         .default;
    > 601 |       render(<DashboardPage />);
          |             ^
      602 |
      603 |       await waitFor(() => {
      604 |         expect(screen.getByText('100')).toBeInTheDocument();

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:601:13)

    console.error
      The above error occurred in the <AdminDashboard> component:
      
          at AdminDashboard (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.tsx:98:32)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      599 |       const DashboardPage = (await import('@/app/admin/dashboard/page'))
      600 |         .default;
    > 601 |       render(<DashboardPage />);
          |             ^
      602 |
      603 |       await waitFor(() => {
      604 |         expect(screen.getByText('100')).toBeInTheDocument();

      at logCapturedError (../../node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (../../node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (../../node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (../../node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (../../node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (../../node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:601:13)

    console.error
      Error: Uncaught [Error: useAdminAuth must be used within an AdminAuthProvider]
          at Object.<anonymous> (tests/admin/admin-ui-components.test.tsx:629:13) {
        detail: Error: useAdminAuth must be used within an AdminAuthProvider
            at useAdminAuth (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/AdminAuthContext.tsx:325:11)
            at AdminDashboard (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.tsx:98:32)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-ui-components.test.tsx:629:13)
            at processTicksAndRejections (node:internal/process/task_queues:105:5),
        type: 'unhandled exception'
      }

      627 |       const DashboardPage = (await import('@/app/admin/dashboard/page'))
      628 |         .default;
    > 629 |       render(<DashboardPage />);
          |             ^
      630 |
      631 |       const refreshButton = screen.getByText(/refresh/i);
      632 |       await userEvent.click(refreshButton);

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:629:13)

    console.error
      Error: Uncaught [Error: useAdminAuth must be used within an AdminAuthProvider]
          at Object.<anonymous> (tests/admin/admin-ui-components.test.tsx:629:13) {
        detail: Error: useAdminAuth must be used within an AdminAuthProvider
            at useAdminAuth (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/AdminAuthContext.tsx:325:11)
            at AdminDashboard (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.tsx:98:32)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at recoverFromConcurrentError (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-ui-components.test.tsx:629:13)
            at processTicksAndRejections (node:internal/process/task_queues:105:5),
        type: 'unhandled exception'
      }

      627 |       const DashboardPage = (await import('@/app/admin/dashboard/page'))
      628 |         .default;
    > 629 |       render(<DashboardPage />);
          |             ^
      630 |
      631 |       const refreshButton = screen.getByText(/refresh/i);
      632 |       await userEvent.click(refreshButton);

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:629:13)

    console.error
      The above error occurred in the <AdminDashboard> component:
      
          at AdminDashboard (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/admin/dashboard/page.tsx:98:32)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      627 |       const DashboardPage = (await import('@/app/admin/dashboard/page'))
      628 |         .default;
    > 629 |       render(<DashboardPage />);
          |             ^
      630 |
      631 |       const refreshButton = screen.getByText(/refresh/i);
      632 |       await userEvent.click(refreshButton);

      at logCapturedError (../../node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (../../node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (../../node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (../../node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (../../node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (../../node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:629:13)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

  ● Admin UI Component Tests › Content Management Page › should render content management page with loading state

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:118:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:118:9)

  ● Admin UI Component Tests › Content Management Page › should render content management page with data

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:185:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:185:9)

  ● Admin UI Component Tests › Content Management Page › should handle search functionality

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:213:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:213:9)

  ● Admin UI Component Tests › Content Management Page › should handle filter by card type

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:245:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:245:9)

  ● Admin UI Component Tests › Questions Page › should render questions page with data

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-ui-components.test.tsx:292:36
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:292:30)

  ● Admin UI Component Tests › Questions Page › should handle question creation

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-ui-components.test.tsx:320:36
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:320:30)

  ● Admin UI Component Tests › Questions Page › should handle question editing

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-ui-components.test.tsx:370:36
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:370:30)

  ● Admin UI Component Tests › Questions Page › should handle question deletion

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-ui-components.test.tsx:421:36
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:421:30)

  ● Admin UI Component Tests › Frontend Tasks Page › should render frontend tasks page with data

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/frontend-tasks/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:458:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:458:9)

  ● Admin UI Component Tests › Frontend Tasks Page › should handle task creation

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/frontend-tasks/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:487:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:487:9)

  ● Admin UI Component Tests › Problem Solving Page › should render problem solving page with data

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/problem-solving/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:530:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:530:9)

  ● Admin UI Component Tests › Problem Solving Page › should handle problem creation

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/problem-solving/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:559:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:559:9)

  ● Admin UI Component Tests › Dashboard Page › should render dashboard with stats

    useAdminAuth must be used within an AdminAuthProvider

      323 |   const context = useContext(AdminAuthContext);
      324 |   if (context === undefined) {
    > 325 |     throw new Error('useAdminAuth must be used within an AdminAuthProvider');
          |           ^
      326 |   }
      327 |   return context;
      328 | }

      at useAdminAuth (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:325:11)
      at AdminDashboard (src/app/admin/dashboard/page.tsx:98:32)
      at renderWithHooks (../../node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (../../node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (../../node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:601:13)

  ● Admin UI Component Tests › Dashboard Page › should handle refresh functionality

    useAdminAuth must be used within an AdminAuthProvider

      323 |   const context = useContext(AdminAuthContext);
      324 |   if (context === undefined) {
    > 325 |     throw new Error('useAdminAuth must be used within an AdminAuthProvider');
          |           ^
      326 |   }
      327 |   return context;
      328 | }

      at useAdminAuth (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:325:11)
      at AdminDashboard (src/app/admin/dashboard/page.tsx:98:32)
      at renderWithHooks (../../node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (../../node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (../../node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:629:13)

  ● Admin UI Component Tests › Error Handling › should display error messages when API calls fail

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-ui-components.test.tsx:647:15
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:647:9)

  ● Admin UI Component Tests › Error Handling › should handle mutation errors

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-ui-components.test.tsx:673:36
      at Object.<anonymous> (../../tests/admin/admin-ui-components.test.tsx:673:30)

FAIL tests/admin/frontend-problem-solving-api.test.ts
  ● Console

    console.log
      🔄 API: Fetching frontend tasks...

      at log (src/app/api/admin/frontend-tasks/route.ts:19:13)

    console.error
      ❌ API: Error fetching frontend tasks: TypeError: Cannot read properties of undefined (reading 'order')
          at order (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/frontend-tasks/route.ts:40:19)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:84:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      80 |     return NextResponse.json(response);
      81 |   } catch (error) {
    > 82 |     console.error('❌ API: Error fetching frontend tasks:', error);
         |             ^
      83 |     return NextResponse.json(
      84 |       { success: false, error: 'Failed to fetch frontend tasks' },
      85 |       { status: 500 }

      at error (src/app/api/admin/frontend-tasks/route.ts:82:13)
      at Object.GET (../../tests/admin/frontend-problem-solving-api.test.ts:84:32)

    console.log
      🔄 API: Fetching frontend tasks...

      at log (src/app/api/admin/frontend-tasks/route.ts:19:13)

    console.error
      ❌ API: Error fetching frontend tasks: TypeError: Cannot read properties of undefined (reading 'eq')
          at eq (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/frontend-tasks/route.ts:36:21)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:128:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      80 |     return NextResponse.json(response);
      81 |   } catch (error) {
    > 82 |     console.error('❌ API: Error fetching frontend tasks:', error);
         |             ^
      83 |     return NextResponse.json(
      84 |       { success: false, error: 'Failed to fetch frontend tasks' },
      85 |       { status: 500 }

      at error (src/app/api/admin/frontend-tasks/route.ts:82:13)
      at Object.GET (../../tests/admin/frontend-problem-solving-api.test.ts:128:32)

    console.log
      🔄 API: Creating new frontend task...

      at log (src/app/api/admin/frontend-tasks/route.ts:93:13)

    console.error
      ❌ API: Error creating frontend task: TypeError: Cannot read properties of undefined (reading 'select')
          at taskData (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/frontend-tasks/route.ts:116:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:183:26)

      131 |     return NextResponse.json(response, { status: 201 });
      132 |   } catch (error) {
    > 133 |     console.error('❌ API: Error creating frontend task:', error);
          |             ^
      134 |     return NextResponse.json(
      135 |       { success: false, error: 'Failed to create frontend task' },
      136 |       { status: 500 }

      at error (src/app/api/admin/frontend-tasks/route.ts:133:13)
      at Object.<anonymous> (../../tests/admin/frontend-problem-solving-api.test.ts:183:26)

    console.log
      🔄 API: Creating new frontend task...

      at log (src/app/api/admin/frontend-tasks/route.ts:93:13)

    console.log
      🔄 API: Updating frontend task...

      at log (src/app/api/admin/frontend-tasks/[id]/route.ts:70:13)

    console.log
      🔄 API: Deleting frontend task...

      at log (src/app/api/admin/frontend-tasks/[id]/route.ts:136:13)

    console.error
      ❌ API: Error deleting frontend task: TypeError: Cannot read properties of undefined (reading 'eq')
          at DELETE (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/frontend-tasks/[id]/route.ts:150:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:295:26)

      178 |     return NextResponse.json(response);
      179 |   } catch (error) {
    > 180 |     console.error('❌ API: Error deleting frontend task:', error);
          |             ^
      181 |     return NextResponse.json(
      182 |       { success: false, error: 'Failed to delete frontend task' },
      183 |       { status: 500 }

      at error (src/app/api/admin/frontend-tasks/[id]/route.ts:180:13)
      at Object.<anonymous> (../../tests/admin/frontend-problem-solving-api.test.ts:295:26)

    console.log
      🔄 API: Fetching problem solving tasks...

      at log (src/app/api/admin/problem-solving/route.ts:19:13)

    console.error
      ❌ API: Error fetching problem solving tasks: TypeError: Cannot read properties of undefined (reading 'order')
          at GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/problem-solving/route.ts:31:15)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:344:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      83 |     return NextResponse.json(response);
      84 |   } catch (error) {
    > 85 |     console.error('❌ API: Error fetching problem solving tasks:', error);
         |             ^
      86 |     return NextResponse.json(
      87 |       { success: false, error: 'Failed to fetch problem solving tasks' },
      88 |       { status: 500 }

      at error (src/app/api/admin/problem-solving/route.ts:85:13)
      at Object.GET (../../tests/admin/frontend-problem-solving-api.test.ts:344:32)

    console.log
      🔄 API: Fetching problem solving tasks...

      at log (src/app/api/admin/problem-solving/route.ts:19:13)

    console.error
      ❌ API: Error fetching problem solving tasks: TypeError: Cannot read properties of undefined (reading 'order')
          at GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/problem-solving/route.ts:31:15)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:388:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      83 |     return NextResponse.json(response);
      84 |   } catch (error) {
    > 85 |     console.error('❌ API: Error fetching problem solving tasks:', error);
         |             ^
      86 |     return NextResponse.json(
      87 |       { success: false, error: 'Failed to fetch problem solving tasks' },
      88 |       { status: 500 }

      at error (src/app/api/admin/problem-solving/route.ts:85:13)
      at Object.GET (../../tests/admin/frontend-problem-solving-api.test.ts:388:32)

    console.log
      🔄 API: Creating new problem solving task...

      at log (src/app/api/admin/problem-solving/route.ts:96:13)

    console.log
      🔄 API: Creating new problem solving task...

      at log (src/app/api/admin/problem-solving/route.ts:96:13)

    console.log
      🔄 API: Updating problem solving task...

      at log (src/app/api/admin/problem-solving/[id]/route.ts:74:13)

    console.error
      ❌ API: Error updating problem solving task: TypeError: Cannot read properties of undefined (reading 'eq')
          at PUT (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/problem-solving/[id]/route.ts:89:14)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:518:26)

      120 |     return NextResponse.json(response);
      121 |   } catch (error) {
    > 122 |     console.error('❌ API: Error updating problem solving task:', error);
          |             ^
      123 |     return NextResponse.json(
      124 |       { success: false, error: 'Failed to update problem solving task' },
      125 |       { status: 500 }

      at error (src/app/api/admin/problem-solving/[id]/route.ts:122:13)
      at Object.<anonymous> (../../tests/admin/frontend-problem-solving-api.test.ts:518:26)

    console.log
      🔄 API: Deleting problem solving task...

      at log (src/app/api/admin/problem-solving/[id]/route.ts:136:13)

    console.error
      ❌ API: Error deleting problem solving task: TypeError: Cannot read properties of undefined (reading 'eq')
          at DELETE (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/problem-solving/[id]/route.ts:150:14)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:553:26)

      181 |     return NextResponse.json(response);
      182 |   } catch (error) {
    > 183 |     console.error('❌ API: Error deleting problem solving task:', error);
          |             ^
      184 |     return NextResponse.json(
      185 |       { success: false, error: 'Failed to delete problem solving task' },
      186 |       { status: 500 }

      at error (src/app/api/admin/problem-solving/[id]/route.ts:183:13)
      at Object.<anonymous> (../../tests/admin/frontend-problem-solving-api.test.ts:553:26)

    console.log
      🔄 API: Fetching frontend tasks...

      at log (src/app/api/admin/frontend-tasks/route.ts:19:13)

    console.error
      ❌ API: Error fetching frontend tasks: TypeError: Cannot read properties of undefined (reading 'order')
          at order (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/frontend-tasks/route.ts:40:19)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:581:30)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      80 |     return NextResponse.json(response);
      81 |   } catch (error) {
    > 82 |     console.error('❌ API: Error fetching frontend tasks:', error);
         |             ^
      83 |     return NextResponse.json(
      84 |       { success: false, error: 'Failed to fetch frontend tasks' },
      85 |       { status: 500 }

      at error (src/app/api/admin/frontend-tasks/route.ts:82:13)
      at Object.GET (../../tests/admin/frontend-problem-solving-api.test.ts:581:30)

    console.log
      🔄 API: Creating new frontend task...

      at log (src/app/api/admin/frontend-tasks/route.ts:93:13)

    console.error
      ❌ API: Error creating frontend task: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
          at JSON.parse (<anonymous>)
          at NextRequest.parse [as json] (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/jest.setup.js:67:21)
          at json (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/admin/frontend-tasks/route.ts:95:54)
          at Object.POST (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/frontend-problem-solving-api.test.ts:602:30)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      131 |     return NextResponse.json(response, { status: 201 });
      132 |   } catch (error) {
    > 133 |     console.error('❌ API: Error creating frontend task:', error);
          |             ^
      134 |     return NextResponse.json(
      135 |       { success: false, error: 'Failed to create frontend task' },
      136 |       { status: 500 }

      at error (src/app/api/admin/frontend-tasks/route.ts:133:13)
      at Object.<anonymous> (../../tests/admin/frontend-problem-solving-api.test.ts:602:24)

    console.log
      🔄 API: Creating new frontend task...

      at log (src/app/api/admin/frontend-tasks/route.ts:93:13)

  ● Frontend Tasks & Problem Solving API Tests › Frontend Tasks API › GET /api/frontend-tasks › should return all frontend tasks

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      85 |         const data = await response.json();
      86 |
    > 87 |         expect(response.status).toBe(200);
         |                                 ^
      88 |         expect(data.success).toBe(true);
      89 |         expect(data.data).toHaveLength(1);
      90 |         expect(data.data[0].title).toBe('Build a Todo App');

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:87:33)

  ● Frontend Tasks & Problem Solving API Tests › Frontend Tasks API › GET /api/frontend-tasks › should filter tasks by difficulty

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      129 |         const data = await response.json();
      130 |
    > 131 |         expect(response.status).toBe(200);
          |                                 ^
      132 |         expect(data.success).toBe(true);
      133 |         expect(data.data).toHaveLength(1);
      134 |         expect(data.data[0].difficulty).toBe('easy');

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:131:33)

  ● Frontend Tasks & Problem Solving API Tests › Frontend Tasks API › POST /api/frontend-tasks › should create a new frontend task

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      184 |         const data = await response.json();
      185 |
    > 186 |         expect(response.status).toBe(201);
          |                                 ^
      187 |         expect(data.success).toBe(true);
      188 |         expect(data.data.id).toBe('test-task-id');
      189 |         expect(data.data.title).toBe('Build a Calculator');

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:186:33)

  ● Frontend Tasks & Problem Solving API Tests › Frontend Tasks API › POST /api/frontend-tasks › should validate required fields for frontend tasks

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      211 |
      212 |         expect(response.status).toBe(400);
    > 213 |         expect(data.success).toBe(false);
          |                              ^
      214 |         expect(data.error).toBeDefined();
      215 |       });
      216 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:213:30)

  ● Frontend Tasks & Problem Solving API Tests › Frontend Tasks API › PUT /api/admin/frontend-tasks/[id] › should update an existing frontend task

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 400

      261 |         const data = await response.json();
      262 |
    > 263 |         expect(response.status).toBe(200);
          |                                 ^
      264 |         expect(data.success).toBe(true);
      265 |       });
      266 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:263:33)

  ● Frontend Tasks & Problem Solving API Tests › Frontend Tasks API › DELETE /api/admin/frontend-tasks/[id] › should delete a frontend task

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      296 |         const data = await response.json();
      297 |
    > 298 |         expect(response.status).toBe(200);
          |                                 ^
      299 |         expect(data.success).toBe(true);
      300 |       });
      301 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:298:33)

  ● Frontend Tasks & Problem Solving API Tests › Problem Solving API › GET /api/admin/problem-solving › should return all problem solving tasks

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      345 |         const data = await response.json();
      346 |
    > 347 |         expect(response.status).toBe(200);
          |                                 ^
      348 |         expect(data.success).toBe(true);
      349 |         expect(data.data).toHaveLength(1);
      350 |         expect(data.data[0].title).toBe('Two Sum');

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:347:33)

  ● Frontend Tasks & Problem Solving API Tests › Problem Solving API › GET /api/admin/problem-solving › should filter problems by category

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      389 |         const data = await response.json();
      390 |
    > 391 |         expect(response.status).toBe(200);
          |                                 ^
      392 |         expect(data.success).toBe(true);
      393 |         expect(data.data).toHaveLength(1);
      394 |         expect(data.data[0].category).toBe('arrays');

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:391:33)

  ● Frontend Tasks & Problem Solving API Tests › Problem Solving API › POST /api/admin/problem-solving › should create a new problem solving task

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

      442 |         const data = await response.json();
      443 |
    > 444 |         expect(response.status).toBe(201);
          |                                 ^
      445 |         expect(data.success).toBe(true);
      446 |         expect(data.data.id).toBe('test-problem-id');
      447 |         expect(data.data.title).toBe('Reverse String');

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:444:33)

  ● Frontend Tasks & Problem Solving API Tests › Problem Solving API › POST /api/admin/problem-solving › should validate required fields for problem solving tasks

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      469 |
      470 |         expect(response.status).toBe(400);
    > 471 |         expect(data.success).toBe(false);
          |                              ^
      472 |         expect(data.error).toBeDefined();
      473 |       });
      474 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:471:30)

  ● Frontend Tasks & Problem Solving API Tests › Problem Solving API › PUT /api/admin/problem-solving/[id] › should update an existing problem solving task

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      519 |         const data = await response.json();
      520 |
    > 521 |         expect(response.status).toBe(200);
          |                                 ^
      522 |         expect(data.success).toBe(true);
      523 |       });
      524 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:521:33)

  ● Frontend Tasks & Problem Solving API Tests › Problem Solving API › DELETE /api/admin/problem-solving/[id] › should delete a problem solving task

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      554 |         const data = await response.json();
      555 |
    > 556 |         expect(response.status).toBe(200);
          |                                 ^
      557 |         expect(data.success).toBe(true);
      558 |       });
      559 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:556:33)

  ● Frontend Tasks & Problem Solving API Tests › Error Handling › should handle Supabase connection errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      583 |
      584 |       expect(response.status).toBe(500);
    > 585 |       expect(data.success).toBe(false);
          |                            ^
      586 |       expect(data.error).toBeDefined();
      587 |     });
      588 |

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:585:28)

  ● Frontend Tasks & Problem Solving API Tests › Error Handling › should handle invalid JSON in request body

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      603 |       const data = await response.json();
      604 |
    > 605 |       expect(response.status).toBe(400);
          |                               ^
      606 |       expect(data.success).toBe(false);
      607 |       expect(data.error).toBeDefined();
      608 |     });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:605:31)

  ● Frontend Tasks & Problem Solving API Tests › Error Handling › should handle missing Content-Type header

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      622 |
      623 |       expect(response.status).toBe(400);
    > 624 |       expect(data.success).toBe(false);
          |                            ^
      625 |       expect(data.error).toBeDefined();
      626 |     });
      627 |   });

      at Object.toBe (../../tests/admin/frontend-problem-solving-api.test.ts:624:28)

FAIL tests/admin/admin-integration.test.tsx
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

  ● Admin Integration Tests › Complete Card Management Workflow › should create, read, update, and delete a learning card

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-integration.test.tsx:131:15
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:131:9)

  ● Admin Integration Tests › Complete Question Management Workflow › should create, read, update, and delete a question

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:252:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:252:30)

  ● Admin Integration Tests › Cross-Component Data Consistency › should maintain data consistency between content management and questions pages

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-integration.test.tsx:386:15
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:386:9)

  ● Admin Integration Tests › Search and Filter Integration › should maintain search state across different admin pages

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:436:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:436:30)

  ● Admin Integration Tests › Bulk Operations Integration › should handle bulk operations across multiple content types

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:487:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:487:30)

  ● Admin Integration Tests › Error Recovery Integration › should handle and recover from errors gracefully across components

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-integration.test.tsx:521:15
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:521:9)

  ● Admin Integration Tests › Performance Integration › should handle large datasets efficiently

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:563:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:563:30)

FAIL tests/admin/content-management-api.test.ts
  ● Console

    console.log
      ✅ Supabase server initialized successfully with service role key!

      at Object.log (src/lib/supabase-server.ts:24:11)

    console.error
      Error fetching cards: TypeError: Cannot read properties of undefined (reading 'order')
          at Object.order [as getLearningCards] (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/lib/supabase-server.ts:55:21)
          at getLearningCards (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/route.ts:58:32)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:89:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      84 |     });
      85 |   } catch (error) {
    > 86 |     console.error('Error fetching cards:', error);
         |             ^
      87 |     return NextResponse.json(
      88 |       { success: false, error: 'Failed to fetch cards' },
      89 |       { status: 500 }

      at error (src/app/api/cards/route.ts:86:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:89:26)

    console.error
      Error fetching cards: TypeError: Cannot read properties of undefined (reading 'order')
          at Object.order [as getLearningCards] (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/lib/supabase-server.ts:55:21)
          at getLearningCards (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/route.ts:58:32)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:119:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      84 |     });
      85 |   } catch (error) {
    > 86 |     console.error('Error fetching cards:', error);
         |             ^
      87 |     return NextResponse.json(
      88 |       { success: false, error: 'Failed to fetch cards' },
      89 |       { status: 500 }

      at error (src/app/api/cards/route.ts:86:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:119:26)

    console.error
      Error creating card: TypeError: Cannot read properties of undefined (reading 'select')
          at supabaseCardData (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/route.ts:172:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:162:26)

      204 |     });
      205 |   } catch (error) {
    > 206 |     console.error('Error creating card:', error);
          |             ^
      207 |     return NextResponse.json(
      208 |       { success: false, error: 'Failed to create card' },
      209 |       { status: 500 }

      at error (src/app/api/cards/route.ts:206:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:162:26)

    console.error
      Error creating card: TypeError: Cannot read properties of undefined (reading 'select')
          at supabaseCardData (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/route.ts:172:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:185:26)

      204 |     });
      205 |   } catch (error) {
    > 206 |     console.error('Error creating card:', error);
          |             ^
      207 |     return NextResponse.json(
      208 |       { success: false, error: 'Failed to create card' },
      209 |       { status: 500 }

      at error (src/app/api/cards/route.ts:206:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:185:26)

    console.error
      Error updating card: TypeError: Cannot read properties of undefined (reading 'eq')
          at PUT (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/[id]/route.ts:52:69)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:234:26)

      62 |     });
      63 |   } catch (error) {
    > 64 |     console.error('Error updating card:', error);
         |             ^
      65 |     return NextResponse.json(
      66 |       { success: false, error: 'Failed to update card' },
      67 |       { status: 500 }

      at error (src/app/api/cards/[id]/route.ts:64:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:234:26)

    console.error
      Error deleting card: TypeError: Cannot read properties of undefined (reading 'eq')
          at DELETE (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/cards/[id]/route.ts:82:14)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:268:26)

      92 |     });
      93 |   } catch (error) {
    > 94 |     console.error('Error deleting card:', error);
         |             ^
      95 |     return NextResponse.json(
      96 |       { success: false, error: 'Failed to delete card' },
      97 |       { status: 500 }

      at error (src/app/api/cards/[id]/route.ts:94:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:268:26)

    console.log
      🔍 API Debug: Starting GET /api/plans

      at log (src/app/api/plans/route.ts:23:13)

    console.log
      🔍 API Debug: Supabase client created

      at log (src/app/api/plans/route.ts:26:13)

    console.error
      ❌ Error in GET /api/plans: TypeError: Cannot read properties of undefined (reading 'order')
          at GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/plans/route.ts:30:15)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:308:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      62 |     });
      63 |   } catch (error) {
    > 64 |     console.error('❌ Error in GET /api/plans:', error);
         |             ^
      65 |     const errorMessage =
      66 |       error instanceof Error ? error.message : 'Unknown error';
      67 |     const isFetchError =

      at error (src/app/api/plans/route.ts:64:13)
      at Object.GET (../../tests/admin/content-management-api.test.ts:308:32)

    console.error
      ❌ Error in POST /api/plans: TypeError: Cannot read properties of undefined (reading 'select')
          at planWithTimestamps (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/plans/route.ts:101:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:351:26)

      121 |     });
      122 |   } catch (error) {
    > 123 |     console.error('❌ Error in POST /api/plans:', error);
          |             ^
      124 |     const errorMessage =
      125 |       error instanceof Error ? error.message : 'Unknown error';
      126 |     return NextResponse.json(

      at error (src/app/api/plans/route.ts:123:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:351:26)

    console.error
      Error fetching categories: TypeError: Cannot read properties of undefined (reading 'eq')
          at GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/categories/route.ts:26:15)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:391:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      55 |     });
      56 |   } catch (error) {
    > 57 |     console.error('Error fetching categories:', error);
         |             ^
      58 |     return NextResponse.json(
      59 |       {
      60 |         success: false,

      at error (src/app/api/categories/route.ts:57:13)
      at Object.GET (../../tests/admin/content-management-api.test.ts:391:32)

    console.error
      Error creating category: TypeError: Cannot read properties of undefined (reading 'select')
          at supabaseCategoryData (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/categories/route.ts:99:15)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:436:26)

      128 |     });
      129 |   } catch (error) {
    > 130 |     console.error('Error creating category:', error);
          |             ^
      131 |     return NextResponse.json(
      132 |       {
      133 |         success: false,

      at error (src/app/api/categories/route.ts:130:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:436:26)

    console.log
      🔄 API: Fetching topics...

      at log (src/app/api/topics/route.ts:10:13)

    console.error
      ❌ API: Error fetching topics: TypeError: Cannot read properties of undefined (reading 'eq')
          at Object.eq [as getTopics] (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/lib/supabase-server.ts:193:21)
          at getTopics (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/topics/route.ts:12:62)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:477:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      44 |     });
      45 |   } catch (error) {
    > 46 |     console.error('❌ API: Error fetching topics:', error);
         |             ^
      47 |     return NextResponse.json(
      48 |       {
      49 |         success: false,

      at error (src/app/api/topics/route.ts:46:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:477:26)

    console.log
      🔄 API: Creating topic with data: {
        name: 'Test Topic',
        description: 'Test topic description',
        category_id: 'react',
        difficulty: 'beginner'
      }

      at log (src/app/api/topics/route.ts:61:13)

    console.log
      ✅ API: All required fields present, creating topic...

      at log (src/app/api/topics/route.ts:78:13)

    console.error
      ❌ API: Error creating topic: TypeError: Cannot read properties of undefined (reading 'select')
          at Object.data [as createTopic] (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/lib/supabase-server.ts:224:15)
          at createTopic (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/topics/route.ts:90:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:520:26)

      115 |     });
      116 |   } catch (error) {
    > 117 |     console.error('❌ API: Error creating topic:', error);
          |             ^
      118 |     return NextResponse.json(
      119 |       {
      120 |         success: false,

      at error (src/app/api/topics/route.ts:117:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:520:26)

    console.log
      🔍 API Questions Route - Applied Filters: {
        topicId: 'none',
        categoryId: 'none',
        difficulty: 'none',
        questionType: 'none',
        limit: 10
      }

      at log (src/app/api/questions/route.ts:153:13)

    console.error
      Error fetching questions: TypeError: Cannot read properties of undefined (reading 'eq')
          at eq (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/questions/route.ts:170:29)
          at Object.GET (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:563:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      295 |     });
      296 |   } catch (error) {
    > 297 |     console.error('Error fetching questions:', error);
          |             ^
      298 |     const errorMessage =
      299 |       error instanceof Error ? error.message : 'Failed to fetch questions';
      300 |     return NextResponse.json(

      at error (src/app/api/questions/route.ts:297:13)
      at Object.GET (../../tests/admin/content-management-api.test.ts:563:32)

    console.error
      Error creating question: TypeError: Cannot read properties of undefined (reading 'select')
          at Object.data [as createQuestion] (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/lib/supabase-server.ts:304:15)
          at createQuestion (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/app/api/questions/route.ts:334:32)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/content-management-api.test.ts:608:26)

      366 |     });
      367 |   } catch (error) {
    > 368 |     console.error('Error creating question:', error);
          |             ^
      369 |     return NextResponse.json(
      370 |       { success: false, error: 'Failed to create question' },
      371 |       { status: 500 }

      at error (src/app/api/questions/route.ts:368:13)
      at Object.<anonymous> (../../tests/admin/content-management-api.test.ts:608:26)

  ● Content Management API Tests › Cards API › GET /api/cards › should return all learning cards

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      90 |         const data = await response.json();
      91 |
    > 92 |         expect(response.status).toBe(200);
         |                                 ^
      93 |         expect(data.success).toBe(true);
      94 |         expect(data.data).toHaveLength(2);
      95 |         expect(data.data[0]).toMatchObject({

      at Object.toBe (../../tests/admin/content-management-api.test.ts:92:33)

  ● Content Management API Tests › Cards API › GET /api/cards › should handle Supabase errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      121 |
      122 |         expect(response.status).toBe(500);
    > 123 |         expect(data.success).toBe(false);
          |                              ^
      124 |         expect(data.error).toBeDefined();
      125 |       });
      126 |     });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:123:30)

  ● Content Management API Tests › Cards API › POST /api/cards › should create a new learning card

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      163 |         const data = await response.json();
      164 |
    > 165 |         expect(response.status).toBe(201);
          |                                 ^
      166 |         expect(data.success).toBe(true);
      167 |         expect(data.data.id).toBe('test-card-id');
      168 |         expect(data.data.name).toBe('Test Card');

      at Object.toBe (../../tests/admin/content-management-api.test.ts:165:33)

  ● Content Management API Tests › Cards API › POST /api/cards › should validate required fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      186 |         const data = await response.json();
      187 |
    > 188 |         expect(response.status).toBe(400);
          |                                 ^
      189 |         expect(data.success).toBe(false);
      190 |         expect(data.error).toBeDefined();
      191 |       });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:188:33)

  ● Content Management API Tests › Cards API › PUT /api/cards/[id] › should update an existing learning card

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      235 |         const data = await response.json();
      236 |
    > 237 |         expect(response.status).toBe(200);
          |                                 ^
      238 |         expect(data.success).toBe(true);
      239 |       });
      240 |     });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:237:33)

  ● Content Management API Tests › Cards API › DELETE /api/cards/[id] › should delete a learning card

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      269 |         const data = await response.json();
      270 |
    > 271 |         expect(response.status).toBe(200);
          |                                 ^
      272 |         expect(data.success).toBe(true);
      273 |       });
      274 |     });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:271:33)

  ● Content Management API Tests › Plans API › GET /api/plans › should return all learning plans

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |         const data = await response.json();
      310 |
    > 311 |         expect(response.status).toBe(200);
          |                                 ^
      312 |         expect(data.success).toBe(true);
      313 |         expect(data.data).toHaveLength(1);
      314 |         expect(data.data[0].name).toBe('1 Day Plan');

      at Object.toBe (../../tests/admin/content-management-api.test.ts:311:33)

  ● Content Management API Tests › Plans API › POST /api/plans › should create a new learning plan

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      352 |         const data = await response.json();
      353 |
    > 354 |         expect(response.status).toBe(201);
          |                                 ^
      355 |         expect(data.success).toBe(true);
      356 |         expect(data.data.id).toBe('test-plan-id');
      357 |       });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:354:33)

  ● Content Management API Tests › Categories API › GET /api/categories › should return all categories

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      392 |         const data = await response.json();
      393 |
    > 394 |         expect(response.status).toBe(200);
          |                                 ^
      395 |         expect(data.success).toBe(true);
      396 |         expect(data.data).toHaveLength(1);
      397 |         expect(data.data[0].name).toBe('React');

      at Object.toBe (../../tests/admin/content-management-api.test.ts:394:33)

  ● Content Management API Tests › Categories API › POST /api/categories › should create a new category

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      437 |         const data = await response.json();
      438 |
    > 439 |         expect(response.status).toBe(201);
          |                                 ^
      440 |         expect(data.success).toBe(true);
      441 |         expect(data.data.id).toBe('test-category-id');
      442 |       });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:439:33)

  ● Content Management API Tests › Topics API › GET /api/topics › should return all topics

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      478 |         const data = await response.json();
      479 |
    > 480 |         expect(response.status).toBe(200);
          |                                 ^
      481 |         expect(data.success).toBe(true);
      482 |         expect(data.data).toHaveLength(1);
      483 |         expect(data.data[0].name).toBe('React Hooks');

      at Object.toBe (../../tests/admin/content-management-api.test.ts:480:33)

  ● Content Management API Tests › Topics API › POST /api/topics › should create a new topic

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      521 |         const data = await response.json();
      522 |
    > 523 |         expect(response.status).toBe(201);
          |                                 ^
      524 |         expect(data.success).toBe(true);
      525 |         expect(data.data.id).toBe('test-topic-id');
      526 |       });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:523:33)

  ● Content Management API Tests › Questions API › GET /api/questions › should return all questions with pagination

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      564 |         const data = await response.json();
      565 |
    > 566 |         expect(response.status).toBe(200);
          |                                 ^
      567 |         expect(data.success).toBe(true);
      568 |         expect(data.data).toHaveLength(1);
      569 |         expect(data.data[0].question).toBe('What is React?');

      at Object.toBe (../../tests/admin/content-management-api.test.ts:566:33)

  ● Content Management API Tests › Questions API › POST /api/questions › should create a new question

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      609 |         const data = await response.json();
      610 |
    > 611 |         expect(response.status).toBe(201);
          |                                 ^
      612 |         expect(data.success).toBe(true);
      613 |         expect(data.data.id).toBe('test-question-id');
      614 |       });

      at Object.toBe (../../tests/admin/content-management-api.test.ts:611:33)

FAIL apps/website/src/__tests__/learning-type-context.test.tsx
  ● LearningTypeContext (app colocated) › updates learning type

    expect(element).toHaveTextContent()

    Expected element to have text content:
      free-style
    Received:
      guided

      55 |       screen.getByText('set-free').click();
      56 |     });
    > 57 |     expect(screen.getByTestId('type')).toHaveTextContent('free-style');
         |                                        ^
      58 |   });
      59 |
      60 |   it('persists learning type under user-scoped key when session exists', async () => {

      at Object.toHaveTextContent (src/__tests__/learning-type-context.test.tsx:57:40)

  ● LearningTypeContext (app colocated) › persists learning type under user-scoped key when session exists

    expect(received).toBe(expected) // Object.is equality

    Expected: "free-style"
    Received: null

      71 |     expect(
      72 |       window.localStorage.getItem('learning-preferences:user_123:type')
    > 73 |     ).toBe('free-style');
         |       ^
      74 |   });
      75 | });
      76 |

      at Object.toBe (src/__tests__/learning-type-context.test.tsx:73:7)

PASS tests/admin/admin-auth-integration.test.ts
PASS tests/admin/admin-dashboard-redirection.test.tsx
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://hpnewqkvpnthpohvxcmq.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

PASS tests/admin/admin-login-ui.test.tsx
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://hpnewqkvpnthpohvxcmq.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

PASS tests/admin/navbar-switching-fix.test.tsx
PASS tests/admin/admin-login-api.test.ts
PASS apps/website/src/__tests__/flashcards-utils.test.ts
PASS apps/website/src/__tests__/cart-utils.test.ts
PASS tests/simple.test.js
FAIL tests/admin/admin-login-page.test.tsx
  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/login/page.tsx:17:27)
      at Object.<anonymous> (../../tests/admin/admin-login-page.test.tsx:104:54)

FAIL tests/admin/admin-login-integration.test.tsx (12.298 s)
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://hpnewqkvpnthpohvxcmq.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ThemeContext: Initial theme loaded: dark (default)

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.error
      Error checking session: TypeError: supabase.auth.getSession is not a function
          at getSession (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/AdminAuthContext.tsx:101:33)
          at checkSession (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/AdminAuthContext.tsx:160:5)
          at commitHookEffectListMount (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:23189:26)
          at commitPassiveMountOnFiber (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:24970:11)
          at commitPassiveMountEffects_complete (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:24930:9)
          at commitPassiveMountEffects_begin (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:24917:7)
          at commitPassiveMountEffects (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:24905:3)
          at flushPassiveEffectsImpl (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27078:3)
          at flushPassiveEffects (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
          at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26808:9
          at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
          at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
          at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/tests/admin/admin-login-integration.test.tsx:142:13)
          at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12)

      150 |         }
      151 |       } catch (error) {
    > 152 |         console.error('Error checking session:', error);
          |                 ^
      153 |         setIsAuthenticated(false);
      154 |         setUser(null);
      155 |       } finally {

      at error (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:152:17)
      at checkSession (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:160:5)
      at commitHookEffectListMount (../../node_modules/react-dom/cjs/react-dom.development.js:23189:26)
      at commitPassiveMountOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:24970:11)
      at commitPassiveMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24930:9)
      at commitPassiveMountEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24917:7)
      at commitPassiveMountEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24905:3)
      at flushPassiveEffectsImpl (../../node_modules/react-dom/cjs/react-dom.development.js:27078:3)
      at flushPassiveEffects (../../node_modules/react-dom/cjs/react-dom.development.js:27023:14)
      at ../../node_modules/react-dom/cjs/react-dom.development.js:26808:9
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (../../tests/admin/admin-login-integration.test.tsx:142:13)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: wrong@example.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: user@example.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

    console.log
      ThemeContext: Initial theme loaded: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:55:15)

    console.log
      ✅ Restoring mock admin session

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:82:23)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: false,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ThemeContext: Theme applied: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:94:15)

    console.log
      ThemeContext: Root classes: dark

      at log (../../libs/shared-contexts/src/lib/ThemeContext.tsx:98:15)

    console.log
      🔄 AdminAuthProvider redirect logic: {
        isLoading: false,
        isAuthenticated: true,
        isLoginPage: true,
        isAdminRootPage: false,
        skipAuthForTesting: false,
        isProtectedRoute: false,
        pathname: '/admin/login'
      }

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:183:13)

    console.log
      ✅ User already authenticated, redirecting to dashboard

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:207:15)

    console.log
      🔐 Attempting Supabase login for: wrong@example.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      🔐 Attempting Supabase login for: afouadsoftwareengineer@gmail.com

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:228:17)

    console.log
      ✅ Mock admin login successful (temporary)

      at log (../../libs/shared-contexts/src/lib/AdminAuthContext.tsx:235:19)

  ● Admin Login Integration › Authentication Flow › should complete successful login flow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/admin/dashboard"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html[39m
      [33mclass[39m=[32m"dark"[39m
      [33mdata-theme[39m=[32m"dark"[39m
    [36m>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
          [36m>[39m
            [36m<nav[39m
              [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m""[39m
                    [36m>[39m
                      [36m<img[39m
                        [33malt[39m=[32m"Elzatona Logo"[39m
                        [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                        [33mdata-nimg[39m=[32m"1"[39m
                        [33mdecoding[39m=[32m"async"[39m
                        [33mheight[39m=[32m"112"[39m
                        [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                        [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                        [33mstyle[39m=[32m"color: transparent;"[39m
                        [33mwidth[39m=[32m"112"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</a>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 text-center"[39m
                  [36m>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                    [36m>[39m
                      [0mAdmin Access Portal[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-red-100"[39m
                    [36m>[39m
                      [0mSecure Authentication Required[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center space-x-4"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33maria-label[39m=[32m"Toggle theme"[39m
                      [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [36m>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-sun"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"20"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"20"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<circle[39m
                          [33mcx[39m=[32m"12"[39m
                          [33mcy[39m=[32m"12"[39m
                          [33mr[39m=[32m"4"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 2v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 20v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M2 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M20 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</button>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-sm"[39m
                      [36m>[39m
                        [0mBack to Site[0m
                      [36m</span>[39m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</nav>[39m
            [36m<div[39m
              [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-md w-full"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-center mb-8"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                  [36m>[39m
                    [0mAdmin Login[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                  [36m>[39m
                    [0mAccess the admin dashboard[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
                [36m>[39m
                  [36m<form[39m
                    [33mclass[39m=[32m"space-y-6"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"email"[39m
                      [36m>[39m
                        [0mEmail Address[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"email"[39m
                        [33mplaceholder[39m=[32m"Enter your email"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"email"[39m
                        [33mvalue[39m=[32m"afouadsoftwareengineer@gmail.com"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"password"[39m
                      [36m>[39m
                        [0mPassword[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"password"[39m
                        [33mplaceholder[39m=[32m"Enter your password"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"password"[39m
                        [33mvalue[39m=[32m"ZatonaFoushware$8888"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                      [33mtype[39m=[32m"submit"[39m
                    [36m>[39m
                      [0mSign In[0m
                    [36m</button>[39m
                  [36m</form>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"mt-6 text-center"[39m
                  [36m>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [0m← Back to Home[0m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      173 |       await waitFor(
      174 |         () => {
    > 175 |           expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
          |                            ^
      176 |         },
      177 |         { timeout: 3000 }
      178 |       );

      at toHaveBeenCalledWith (../../tests/admin/admin-login-integration.test.tsx:175:28)
      at runWithExpensiveErrorDiagnosticsDisabled (../../node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (../../node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ● Admin Login Integration › Authentication Flow › should handle authentication failure

    Unable to find an element with the text: /Invalid login credentials/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
        [36m>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
              [36m>[39m
                [36m<a[39m
                  [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                  [33mhref[39m=[32m"/"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m""[39m
                  [36m>[39m
                    [36m<img[39m
                      [33malt[39m=[32m"Elzatona Logo"[39m
                      [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                      [33mdata-nimg[39m=[32m"1"[39m
                      [33mdecoding[39m=[32m"async"[39m
                      [33mheight[39m=[32m"112"[39m
                      [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                      [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                      [33mstyle[39m=[32m"color: transparent;"[39m
                      [33mwidth[39m=[32m"112"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</a>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 text-center"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                  [36m>[39m
                    [0mAdmin Access Portal[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-red-100"[39m
                  [36m>[39m
                    [0mSecure Authentication Required[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center space-x-4"[39m
                [36m>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"Toggle theme"[39m
                    [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-sun"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"20"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"20"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"4"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 2v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 20v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M2 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M20 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-sm"[39m
                    [36m>[39m
                      [0mBack to Site[0m
                    [36m</span>[39m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-md w-full"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-center mb-8"[39m
              [36m>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                [36m>[39m
                  [0mAdmin Login[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mAccess the admin dashboard[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-6"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"email"[39m
                    [36m>[39m
                      [0mEmail Address[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"email"[39m
                      [33mplaceholder[39m=[32m"Enter your email"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"email"[39m
                      [33mvalue[39m=[32m"wrong@example.com"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"password"[39m
                    [36m>[39m
                      [0mPassword[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"password"[39m
                      [33mplaceholder[39m=[32m"Enter your password"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"password"[39m
                      [33mvalue[39m=[32m"wrongpassword"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"[39m
                  [36m>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-red-600 dark:text-red-400 text-sm"[39m
                    [36m>[39m
                      [0mInvalid credentials[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSign In[0m
                  [36m</button>[39m
                [36m</form>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-6 text-center"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [0m← Back to Home[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      211 |
      212 |       // Wait for error message
    > 213 |       await waitFor(() => {
          |                    ^
      214 |         expect(
      215 |           screen.getByText(/Invalid login credentials/)
      216 |         ).toBeInTheDocument();

      at waitForWrapper (../../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (../../tests/admin/admin-login-integration.test.tsx:213:20)

  ● Admin Login Integration › Authentication Flow › should handle network errors during authentication

    Unable to find an element with the text: An unexpected error occurred. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
        [36m>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
              [36m>[39m
                [36m<a[39m
                  [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                  [33mhref[39m=[32m"/"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m""[39m
                  [36m>[39m
                    [36m<img[39m
                      [33malt[39m=[32m"Elzatona Logo"[39m
                      [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                      [33mdata-nimg[39m=[32m"1"[39m
                      [33mdecoding[39m=[32m"async"[39m
                      [33mheight[39m=[32m"112"[39m
                      [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                      [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                      [33mstyle[39m=[32m"color: transparent;"[39m
                      [33mwidth[39m=[32m"112"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</a>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 text-center"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                  [36m>[39m
                    [0mAdmin Access Portal[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-red-100"[39m
                  [36m>[39m
                    [0mSecure Authentication Required[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center space-x-4"[39m
                [36m>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"Toggle theme"[39m
                    [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-sun"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"20"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"20"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"4"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 2v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 20v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M2 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M20 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-sm"[39m
                    [36m>[39m
                      [0mBack to Site[0m
                    [36m</span>[39m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-md w-full"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-center mb-8"[39m
              [36m>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                [36m>[39m
                  [0mAdmin Login[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mAccess the admin dashboard[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-6"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"email"[39m
                    [36m>[39m
                      [0mEmail Address[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"email"[39m
                      [33mplaceholder[39m=[32m"Enter your email"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"email"[39m
                      [33mvalue[39m=[32m"afouadsoftwareengineer@gmail.com"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"password"[39m
                    [36m>[39m
                      [0mPassword[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"password"[39m
                      [33mplaceholder[39m=[32m"Enter your password"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"password"[39m
                      [33mvalue[39m=[32m"ZatonaFoushware$8888"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSign In[0m
                  [36m</button>[39m
                [36m</form>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-6 text-center"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [0m← Back to Home[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      248 |
      249 |       // Wait for error message
    > 250 |       await waitFor(() => {
          |                    ^
      251 |         expect(
      252 |           screen.getByText('An unexpected error occurred')
      253 |         ).toBeInTheDocument();

      at waitForWrapper (../../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (../../tests/admin/admin-login-integration.test.tsx:250:20)

  ● Admin Login Integration › Session Management › should redirect authenticated users away from login page

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/admin/dashboard"

    Number of calls: 0

      291 |
      292 |       // Should redirect to dashboard
    > 293 |       expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
          |                        ^
      294 |     });
      295 |
      296 |     it('should handle session expiration gracefully', async () => {

      at Object.toHaveBeenCalledWith (../../tests/admin/admin-login-integration.test.tsx:293:24)

  ● Admin Login Integration › Session Management › should handle session expiration gracefully

    Unable to find an element with the text: /Session expired/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
        [36m>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
              [36m>[39m
                [36m<a[39m
                  [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                  [33mhref[39m=[32m"/"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m""[39m
                  [36m>[39m
                    [36m<img[39m
                      [33malt[39m=[32m"Elzatona Logo"[39m
                      [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                      [33mdata-nimg[39m=[32m"1"[39m
                      [33mdecoding[39m=[32m"async"[39m
                      [33mheight[39m=[32m"112"[39m
                      [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                      [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                      [33mstyle[39m=[32m"color: transparent;"[39m
                      [33mwidth[39m=[32m"112"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</a>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 text-center"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                  [36m>[39m
                    [0mAdmin Access Portal[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-red-100"[39m
                  [36m>[39m
                    [0mSecure Authentication Required[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center space-x-4"[39m
                [36m>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"Toggle theme"[39m
                    [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-sun"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"20"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"20"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"4"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 2v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 20v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M2 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M20 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-sm"[39m
                    [36m>[39m
                      [0mBack to Site[0m
                    [36m</span>[39m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-md w-full"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-center mb-8"[39m
              [36m>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                [36m>[39m
                  [0mAdmin Login[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mAccess the admin dashboard[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-6"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"email"[39m
                    [36m>[39m
                      [0mEmail Address[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"email"[39m
                      [33mplaceholder[39m=[32m"Enter your email"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"email"[39m
                      [33mvalue[39m=[32m"afouadsoftwareengineer@gmail.com"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"password"[39m
                    [36m>[39m
                      [0mPassword[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"password"[39m
                      [33mplaceholder[39m=[32m"Enter your password"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"password"[39m
                      [33mvalue[39m=[32m"ZatonaFoushware$8888"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSign In[0m
                  [36m</button>[39m
                [36m</form>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-6 text-center"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [0m← Back to Home[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      326 |       fireEvent.click(loginButton);
      327 |
    > 328 |       await waitFor(() => {
          |                    ^
      329 |         expect(screen.getByText(/Session expired/)).toBeInTheDocument();
      330 |       });
      331 |     });

      at waitForWrapper (../../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (../../tests/admin/admin-login-integration.test.tsx:328:20)

  ● Admin Login Integration › Admin Role Validation › should validate admin role after successful login

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/admin/dashboard"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html[39m
      [33mclass[39m=[32m"dark"[39m
      [33mdata-theme[39m=[32m"dark"[39m
    [36m>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
          [36m>[39m
            [36m<nav[39m
              [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m""[39m
                    [36m>[39m
                      [36m<img[39m
                        [33malt[39m=[32m"Elzatona Logo"[39m
                        [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                        [33mdata-nimg[39m=[32m"1"[39m
                        [33mdecoding[39m=[32m"async"[39m
                        [33mheight[39m=[32m"112"[39m
                        [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                        [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                        [33mstyle[39m=[32m"color: transparent;"[39m
                        [33mwidth[39m=[32m"112"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</a>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 text-center"[39m
                  [36m>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                    [36m>[39m
                      [0mAdmin Access Portal[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-red-100"[39m
                    [36m>[39m
                      [0mSecure Authentication Required[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center space-x-4"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33maria-label[39m=[32m"Toggle theme"[39m
                      [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [36m>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-sun"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"20"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"20"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<circle[39m
                          [33mcx[39m=[32m"12"[39m
                          [33mcy[39m=[32m"12"[39m
                          [33mr[39m=[32m"4"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 2v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 20v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M2 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M20 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</button>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-sm"[39m
                      [36m>[39m
                        [0mBack to Site[0m
                      [36m</span>[39m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</nav>[39m
            [36m<div[39m
              [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-md w-full"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-center mb-8"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                  [36m>[39m
                    [0mAdmin Login[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                  [36m>[39m
                    [0mAccess the admin dashboard[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
                [36m>[39m
                  [36m<form[39m
                    [33mclass[39m=[32m"space-y-6"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"email"[39m
                      [36m>[39m
                        [0mEmail Address[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"email"[39m
                        [33mplaceholder[39m=[32m"Enter your email"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"email"[39m
                        [33mvalue[39m=[32m"afouadsoftwareengineer@gmail.com"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"password"[39m
                      [36m>[39m
                        [0mPassword[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"password"[39m
                        [33mplaceholder[39m=[32m"Enter your password"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"password"[39m
                        [33mvalue[39m=[32m"ZatonaFoushware$8888"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                      [33mtype[39m=[32m"submit"[39m
                    [36m>[39m
                      [0mSign In[0m
                    [36m</button>[39m
                  [36m</form>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"mt-6 text-center"[39m
                  [36m>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [0m← Back to Home[0m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      376 |
      377 |       await waitFor(() => {
    > 378 |         expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
          |                          ^
      379 |       });
      380 |     });
      381 |

      at toHaveBeenCalledWith (../../tests/admin/admin-login-integration.test.tsx:378:26)
      at runWithExpensiveErrorDiagnosticsDisabled (../../node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (../../node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ● Admin Login Integration › Admin Role Validation › should reject non-admin users

    Unable to find an element with the text: /Access denied/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
        [36m>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
              [36m>[39m
                [36m<a[39m
                  [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                  [33mhref[39m=[32m"/"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m""[39m
                  [36m>[39m
                    [36m<img[39m
                      [33malt[39m=[32m"Elzatona Logo"[39m
                      [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                      [33mdata-nimg[39m=[32m"1"[39m
                      [33mdecoding[39m=[32m"async"[39m
                      [33mheight[39m=[32m"112"[39m
                      [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                      [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                      [33mstyle[39m=[32m"color: transparent;"[39m
                      [33mwidth[39m=[32m"112"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</a>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 text-center"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                  [36m>[39m
                    [0mAdmin Access Portal[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-red-100"[39m
                  [36m>[39m
                    [0mSecure Authentication Required[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center space-x-4"[39m
                [36m>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"Toggle theme"[39m
                    [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-sun"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"20"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"20"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"4"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 2v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 20v2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M2 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M20 12h2"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-sm"[39m
                    [36m>[39m
                      [0mBack to Site[0m
                    [36m</span>[39m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-md w-full"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-center mb-8"[39m
              [36m>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                [36m>[39m
                  [0mAdmin Login[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mAccess the admin dashboard[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-6"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"email"[39m
                    [36m>[39m
                      [0mEmail Address[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"email"[39m
                      [33mplaceholder[39m=[32m"Enter your email"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"email"[39m
                      [33mvalue[39m=[32m"user@example.com"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                      [33mfor[39m=[32m"password"[39m
                    [36m>[39m
                      [0mPassword[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                      [33mid[39m=[32m"password"[39m
                      [33mplaceholder[39m=[32m"Enter your password"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"password"[39m
                      [33mvalue[39m=[32m"userpassword"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"[39m
                  [36m>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-red-600 dark:text-red-400 text-sm"[39m
                    [36m>[39m
                      [0mInvalid credentials[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSign In[0m
                  [36m</button>[39m
                [36m</form>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-6 text-center"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [0m← Back to Home[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      418 |       fireEvent.click(loginButton);
      419 |
    > 420 |       await waitFor(() => {
          |                    ^
      421 |         expect(screen.getByText(/Access denied/)).toBeInTheDocument();
      422 |       });
      423 |     });

      at waitForWrapper (../../node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (../../tests/admin/admin-login-integration.test.tsx:420:20)

  ● Admin Login Integration › Form State Management › should clear form after successful login

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/admin/dashboard"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html[39m
      [33mclass[39m=[32m"dark"[39m
      [33mdata-theme[39m=[32m"dark"[39m
    [36m>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
          [36m>[39m
            [36m<nav[39m
              [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m""[39m
                    [36m>[39m
                      [36m<img[39m
                        [33malt[39m=[32m"Elzatona Logo"[39m
                        [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                        [33mdata-nimg[39m=[32m"1"[39m
                        [33mdecoding[39m=[32m"async"[39m
                        [33mheight[39m=[32m"112"[39m
                        [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                        [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                        [33mstyle[39m=[32m"color: transparent;"[39m
                        [33mwidth[39m=[32m"112"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</a>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 text-center"[39m
                  [36m>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                    [36m>[39m
                      [0mAdmin Access Portal[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-red-100"[39m
                    [36m>[39m
                      [0mSecure Authentication Required[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center space-x-4"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33maria-label[39m=[32m"Toggle theme"[39m
                      [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [36m>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-sun"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"20"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"20"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<circle[39m
                          [33mcx[39m=[32m"12"[39m
                          [33mcy[39m=[32m"12"[39m
                          [33mr[39m=[32m"4"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 2v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 20v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M2 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M20 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</button>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-sm"[39m
                      [36m>[39m
                        [0mBack to Site[0m
                      [36m</span>[39m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</nav>[39m
            [36m<div[39m
              [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-md w-full"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-center mb-8"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                  [36m>[39m
                    [0mAdmin Login[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                  [36m>[39m
                    [0mAccess the admin dashboard[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
                [36m>[39m
                  [36m<form[39m
                    [33mclass[39m=[32m"space-y-6"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"email"[39m
                      [36m>[39m
                        [0mEmail Address[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"email"[39m
                        [33mplaceholder[39m=[32m"Enter your email"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"email"[39m
                        [33mvalue[39m=[32m"afouadsoftwareengineer@gmail.com"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"password"[39m
                      [36m>[39m
                        [0mPassword[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"password"[39m
                        [33mplaceholder[39m=[32m"Enter your password"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"password"[39m
                        [33mvalue[39m=[32m"ZatonaFoushware$8888"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                      [33mtype[39m=[32m"submit"[39m
                    [36m>[39m
                      [0mSign In[0m
                    [36m</button>[39m
                  [36m</form>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"mt-6 text-center"[39m
                  [36m>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [0m← Back to Home[0m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      490 |       // Wait for successful login and redirect
      491 |       await waitFor(() => {
    > 492 |         expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
          |                          ^
      493 |       });
      494 |
      495 |       // Form should be cleared after successful login

      at toHaveBeenCalledWith (../../tests/admin/admin-login-integration.test.tsx:492:26)
      at runWithExpensiveErrorDiagnosticsDisabled (../../node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (../../node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ● Admin Login Integration › Error Recovery › should allow retry after authentication failure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/admin/dashboard"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html[39m
      [33mclass[39m=[32m"dark"[39m
      [33mdata-theme[39m=[32m"dark"[39m
    [36m>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800"[39m
          [36m>[39m
            [36m<nav[39m
              [33mclass[39m=[32m"fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 shadow-lg"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center h-20"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"flex items-center space-x-2 transition-colors duration-200 text-white hover:text-red-100"[39m
                    [33mhref[39m=[32m"/"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m""[39m
                    [36m>[39m
                      [36m<img[39m
                        [33malt[39m=[32m"Elzatona Logo"[39m
                        [33mclass[39m=[32m"w-28 h-28 object-contain"[39m
                        [33mdata-nimg[39m=[32m"1"[39m
                        [33mdecoding[39m=[32m"async"[39m
                        [33mheight[39m=[32m"112"[39m
                        [33msrc[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=256&q=75"[39m
                        [33msrcset[39m=[32m"/_next/image?url=%2FElzatona-web01.png&w=128&q=75 1x, /_next/image?url=%2FElzatona-web01.png&w=256&q=75 2x"[39m
                        [33mstyle[39m=[32m"color: transparent;"[39m
                        [33mwidth[39m=[32m"112"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</a>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 text-center"[39m
                  [36m>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-xl font-bold text-white"[39m
                    [36m>[39m
                      [0mAdmin Access Portal[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-red-100"[39m
                    [36m>[39m
                      [0mSecure Authentication Required[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center space-x-4"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33maria-label[39m=[32m"Toggle theme"[39m
                      [33mclass[39m=[32m"p-2 rounded-lg transition-colors duration-200 bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                    [36m>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-sun"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"20"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"20"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<circle[39m
                          [33mcx[39m=[32m"12"[39m
                          [33mcy[39m=[32m"12"[39m
                          [33mr[39m=[32m"4"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 2v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M12 20v2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m4.93 4.93 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m17.66 17.66 1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M2 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M20 12h2"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6.34 17.66-1.41 1.41"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m19.07 4.93-1.41 1.41"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</button>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center bg-white/20 text-white hover:bg-white/30 border border-white/30"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-sm"[39m
                      [36m>[39m
                        [0mBack to Site[0m
                      [36m</span>[39m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</nav>[39m
            [36m<div[39m
              [33mclass[39m=[32m"pt-20 flex items-center justify-center min-h-screen p-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"max-w-md w-full"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-center mb-8"[39m
                [36m>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-2"[39m
                  [36m>[39m
                    [0mAdmin Login[0m
                  [36m</h1>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-gray-600 dark:text-gray-400"[39m
                  [36m>[39m
                    [0mAccess the admin dashboard[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"[39m
                [36m>[39m
                  [36m<form[39m
                    [33mclass[39m=[32m"space-y-6"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"email"[39m
                      [36m>[39m
                        [0mEmail Address[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"email"[39m
                        [33mplaceholder[39m=[32m"Enter your email"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"email"[39m
                        [33mvalue[39m=[32m"afouadsoftwareengineer@gmail.com"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"[39m
                        [33mfor[39m=[32m"password"[39m
                      [36m>[39m
                        [0mPassword[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"[39m
                        [33mid[39m=[32m"password"[39m
                        [33mplaceholder[39m=[32m"Enter your password"[39m
                        [33mrequired[39m=[32m""[39m
                        [33mtype[39m=[32m"password"[39m
                        [33mvalue[39m=[32m"ZatonaFoushware$8888"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"[39m
                      [33mtype[39m=[32m"submit"[39m
                    [36m>[39m
                      [0mSign In[0m
                    [36m</button>[39m
                  [36m</form>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"mt-6 text-center"[39m
                  [36m>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors"[39m
                      [33mhref[39m=[32m"/"[39m
                    [36m>[39m
                      [0m← Back to Home[0m
                    [36m</a>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      559 |
      560 |       await waitFor(() => {
    > 561 |         expect(mockPush).toHaveBeenCalledWith('/admin/dashboard');
          |                          ^
      562 |       });
      563 |     });
      564 |   });

      at toHaveBeenCalledWith (../../tests/admin/admin-login-integration.test.tsx:561:26)
      at runWithExpensiveErrorDiagnosticsDisabled (../../node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (../../node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (../../node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Test Suites: 9 failed, 8 passed, 17 total
Tests:       66 failed, 91 passed, 157 total
Snapshots:   0 total
Time:        19.396 s
Ran all test suites.

> nx run zatona-web:test


> zatona-web@1.0.0 test
> nx run-many --target=test --all


 NX   Running target test for 12 projects:

- shared-components
- shared-contexts
- shared-atoms
- shared-hooks
- shared-types
- database
- website
- admin
- utils
- auth
- ui
- zatona-web



> nx run shared-components:test

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-types:test  [local cache]

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-atoms:test  [local cache]

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-contexts:test  [local cache]

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run shared-hooks:test

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

> nx run admin:test


 NX   > Couldn't find any `pages` or `app` directory. Please create one under the project root

Pass --verbose to see the stacktrace.


> nx run auth:test  [local cache]

No tests found, exiting with code 0

> nx run utils:test  [local cache]

No tests found, exiting with code 0

> nx run ui:test  [local cache]

No tests found, exiting with code 0

> nx run database:test  [local cache]

PASS database libs/database/src/lib/__tests__/database-switching.test.ts
  Database Switching
    ✓ should create Firebase service when NEXT_PUBLIC_USE_FIREBASE=true (5 ms)
    ✓ should create Supabase service when NEXT_PUBLIC_USE_FIREBASE=false (1 ms)
    ✓ should default to Supabase when NEXT_PUBLIC_USE_FIREBASE is not set (1 ms)
  Database Service Usage
    ✓ should handle get operation (1 ms)
    ✓ should handle add operation
    ✓ should handle error cases
  Database Integration
    ✓ should work with React Context

Test Suites: 1 passed, 1 total
Tests:       7 passed, 7 total
Snapshots:   0 total
Time:        0.387 s
Ran all test suites.

> nx run website:test

● Validation Warning:

  Unknown option "coverageProvider" with value "v8" was found.
  This is probably a typing mistake. Fixing it will remove this message.

  Configuration Documentation:
  https://jestjs.io/docs/configuration

FAIL apps/website/src/__tests__/navbar-simple.test.tsx
  ● Console

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      20 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      21 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 22 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      23 | }
      24 |
      25 | type Language = 'en' | 'ar';

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/LanguageContext.tsx:22:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:9:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      14 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      15 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 16 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      17 | }
      18 |
      19 | interface MobileMenuContextType {

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/MobileMenuContext.tsx:16:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:10:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      12 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      13 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 14 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      15 | }
      16 | import React, {
      17 |   useState,

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/NotificationContext.tsx:14:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:11:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      12 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      13 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 14 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      15 | }
      16 | import React, {
      17 |   useState,

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/OnboardingContext.tsx:14:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:12:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      20 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      21 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 22 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      23 | }
      24 |
      25 | interface ThemeContextType {

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/ThemeContext.tsx:22:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:13:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      12 |   const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL'];
      13 |   const supabaseServiceRoleKey = process.env['SUPABASE_SERVICE_ROLE_KEY'];
    > 14 |   supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |              ^
      15 | }
      16 | import React, {
      17 |   useState,

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at Object.createClient (../../libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:14:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/lib/shared-contexts.ts:15:14)
      at Object.<anonymous> (../../libs/shared-contexts/src/index.ts:5:14)
      at Object.<anonymous> (src/components/AlzatonaLogo.tsx:23:25)
      at Object.<anonymous> (src/components/NavbarSimple.tsx:25:62)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:53:62)

    console.warn
      Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

      22 |       'SUPABASE_SERVICE_ROLE_KEY'
      23 |     ] as string;
    > 24 |     supabase = createClient(supabaseUrl, supabaseServiceRoleKey);
         |                ^
      25 |   });
      26 | }
      27 |

      at new GoTrueClient (../../node_modules/@supabase/auth-js/src/GoTrueClient.ts:272:15)
      at new SupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts:6:5)
      at SupabaseClient._initSupabaseAuthClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:351:12)
      at new SupabaseClient (../../node_modules/@supabase/supabase-js/src/SupabaseClient.ts:134:24)
      at createClient (../../node_modules/@supabase/supabase-js/src/index.ts:46:10)
      at createClient (../../libs/shared-contexts/src/lib/UserPreferencesContext.tsx:24:16)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      50 |
      51 |   it('renders Sign In by default (unauthenticated)', () => {
    > 52 |     render(<NavbarSimple />);
         |           ^
      53 |     expect(screen.getByText('Sign In')).toBeInTheDocument();
      54 |   });
      55 |

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at recoverFromConcurrentError (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:52:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      50 |
      51 |   it('renders Sign In by default (unauthenticated)', () => {
    > 52 |     render(<NavbarSimple />);
         |           ^
      53 |     expect(screen.getByText('Sign In')).toBeInTheDocument();
      54 |   });
      55 |

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

    console.error
      The above error occurred in the <NavbarSimple> component:
      
          at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:31:47)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      50 |
      51 |   it('renders Sign In by default (unauthenticated)', () => {
    > 52 |     render(<NavbarSimple />);
         |           ^
      53 |     expect(screen.getByText('Sign In')).toBeInTheDocument();
      54 |   });
      55 |

      at logCapturedError (../../node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (../../node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (../../node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (../../node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (../../node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (../../node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      59 |       JSON.stringify({ isAuthenticated: true, isLoading: false })
      60 |     );
    > 61 |     render(<NavbarSimple />);
         |           ^
      62 |     expect(screen.getByText('Dashboard')).toBeInTheDocument();
      63 |   });
      64 | });

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

    console.error
      Error: Uncaught [Error: useUserType must be used within a UserTypeProvider]
          at Object.<anonymous> (apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
          at new Promise (<anonymous>) {
        detail: Error: useUserType must be used within a UserTypeProvider
            at useUserType (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
            at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:48:48)
            at renderWithHooks (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
            at mountIndeterminateComponent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
            at beginWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
            at innerInvokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
            at invokeEventListeners (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
            at invokeGuardedCallback (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
            at beginWork$1 (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
            at performUnitOfWork (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
            at workLoopSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
            at renderRootSync (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
            at recoverFromConcurrentError (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
            at performConcurrentWorkOnRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
            at flushActQueue (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2667:24)
            at act (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/react/cjs/react.development.js:2582:11)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/act-compat.js:47:25
            at renderRoot (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:190:26)
            at render (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/@testing-library/react/dist/pure.js:292:10)
            at Object.<anonymous> (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/__tests__/navbar-simple.test.tsx:61:11)
            at Promise.finally.completed (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
            at _callCircusTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
            at /Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:849:7
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
            at _runTestsForDescribeBlock (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
            at run (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
            at runAndTransformResultsToJestFormat (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
            at jestAdapter (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-circus/build/runner.js:101:19)
            at runTestInternal (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:275:16)
            at runTest (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:343:7)
            at Object.worker (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/node_modules/jest-runner/build/testWorker.js:497:12),
        type: 'unhandled exception'
      }

      59 |       JSON.stringify({ isAuthenticated: true, isLoading: false })
      60 |     );
    > 61 |     render(<NavbarSimple />);
         |           ^
      62 |     expect(screen.getByText('Dashboard')).toBeInTheDocument();
      63 |   });
      64 | });

      at VirtualConsole.<anonymous> (../../node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (../../node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (../../node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (../../node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (../../node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

    console.error
      The above error occurred in the <NavbarSimple> component:
      
          at NavbarSimple (/Users/a.fouad/SideProjects/Elzatona-all/Elzatona-web/apps/website/src/components/NavbarSimple.tsx:31:47)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      59 |       JSON.stringify({ isAuthenticated: true, isLoading: false })
      60 |     );
    > 61 |     render(<NavbarSimple />);
         |           ^
      62 |     expect(screen.getByText('Dashboard')).toBeInTheDocument();
      63 |   });
      64 | });

      at logCapturedError (../../node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (../../node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (../../node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (../../node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (../../node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (../../node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (../../node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (../../node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (../../node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (../../node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (../../node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

  ● NavbarSimple › renders Sign In by default (unauthenticated)

    useUserType must be used within a UserTypeProvider

      132 |   const context = useContext(UserTypeContext);
      133 |   if (context === undefined) {
    > 134 |     throw new Error('useUserType must be used within a UserTypeProvider');
          |           ^
      135 |   }
      136 |   return context;
      137 | };

      at useUserType (../../libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
      at NavbarSimple (src/components/NavbarSimple.tsx:48:48)
      at renderWithHooks (../../node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (../../node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (../../node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:52:11)

  ● NavbarSimple › renders Dashboard when persisted auth is set in sessionStorage

    useUserType must be used within a UserTypeProvider

      132 |   const context = useContext(UserTypeContext);
      133 |   if (context === undefined) {
    > 134 |     throw new Error('useUserType must be used within a UserTypeProvider');
          |           ^
      135 |   }
      136 |   return context;
      137 | };

      at useUserType (../../libs/shared-contexts/src/lib/UserTypeContextSafe.tsx:134:11)
      at NavbarSimple (src/components/NavbarSimple.tsx:48:48)
      at renderWithHooks (../../node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (../../node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (../../node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (../../node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (../../node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (../../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (../../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (../../node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (../../node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (../../node_modules/react/cjs/react.development.js:2667:24)
      at act (../../node_modules/react/cjs/react.development.js:2582:11)
      at ../../node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (../../node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (../../node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/navbar-simple.test.tsx:61:11)

FAIL tests/admin/admin-integration.test.tsx
  ● Console

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

    console.log
      ✅ Supabase client configured successfully

      at Object.log (src/lib/supabase-client.ts:23:11)

    console.log
      URL: https://test.supabase.co

      at Object.log (src/lib/supabase-client.ts:24:11)

  ● Admin Integration Tests › Complete Card Management Workflow › should create, read, update, and delete a learning card

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-integration.test.tsx:131:15
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:131:9)

  ● Admin Integration Tests › Complete Question Management Workflow › should create, read, update, and delete a question

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:252:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:252:30)

  ● Admin Integration Tests › Cross-Component Data Consistency › should maintain data consistency between content management and questions pages

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-integration.test.tsx:386:15
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:386:9)

  ● Admin Integration Tests › Search and Filter Integration › should maintain search state across different admin pages

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:436:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:436:30)

  ● Admin Integration Tests › Bulk Operations Integration › should handle bulk operations across multiple content types

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:487:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:487:30)

  ● Admin Integration Tests › Error Recovery Integration › should handle and recover from errors gracefully across components

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content-management/page.tsx:17:27)
      at ../../tests/admin/admin-integration.test.tsx:521:15
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:521:9)

  ● Admin Integration Tests › Performance Integration › should handle large datasets efficiently

    TypeError: Cannot read properties of undefined (reading 'onAuthStateChange')

      42 | // Only set up on client side to avoid SSR issues
      43 | if (supabaseClient && typeof window !== 'undefined') {
    > 44 |   supabaseClient.auth.onAuthStateChange((event, session) => {
         |                       ^
      45 |     try {
      46 |       if (typeof document === 'undefined') return;
      47 |       if (session?.access_token) {

      at Object.onAuthStateChange (src/lib/supabase-client.ts:44:23)
      at Object.<anonymous> (../../libs/shared-components/src/lib/common/EnhancedDashboard.tsx:18:25)
      at Object.<anonymous> (../../libs/shared-components/src/index.ts:171:67)
      at Object.<anonymous> (src/app/admin/content/questions/page.tsx:15:27)
      at ../../tests/admin/admin-integration.test.tsx:563:36
      at Object.<anonymous> (../../tests/admin/admin-integration.test.tsx:563:30)

FAIL apps/website/src/__tests__/learning-type-context.test.tsx
  ● LearningTypeContext (app colocated) › updates learning type

    expect(element).toHaveTextContent()

    Expected element to have text content:
      free-style
    Received:
      guided

      55 |       screen.getByText('set-free').click();
      56 |     });
    > 57 |     expect(screen.getByTestId('type')).toHaveTextContent('free-style');
         |                                        ^
      58 |   });
      59 |
      60 |   it('persists learning type under user-scoped key when session exists', async () => {

      at Object.toHaveTextContent (src/__tests__/learning-type-context.test.tsx:57:40)

  ● LearningTypeContext (app colocated) › persists learning type under user-scoped key when session exists

    expect(received).toBe(expected) // Object.is equality

    Expected: "free-style"
    Received: null

      71 |     expect(
      72 |       window.localStorage.getItem('learning-preferences:user_123:type')
    > 73 |     ).toBe('free-style');
         |       ^
      74 |   });
      75 | });
      76 |

      at Object.toBe (src/__tests__/learning-type-context.test.tsx:73:7)

FAIL tests/admin/content-management-api.test.ts
  ● Console

    console.log
      ✅ Supabase server initialized successfully with service role key!

      at Object.log (src/lib/supabase-se